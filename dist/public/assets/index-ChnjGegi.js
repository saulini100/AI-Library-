var Lg=e=>{throw TypeError(e)};var Yd=(e,t,n)=>t.has(e)||Lg("Cannot "+n);var L=(e,t,n)=>(Yd(e,t,"read from private field"),n?n.call(e):t.get(e)),ve=(e,t,n)=>t.has(e)?Lg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ue=(e,t,n,s)=>(Yd(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),je=(e,t,n)=>(Yd(e,t,"access private method"),n);var oc=(e,t,n,s)=>({set _(a){ue(e,t,a,n)},get _(){return L(e,t,s)}});function tC(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function Rv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mv={exports:{}},Yu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nC=Symbol.for("react.transitional.element"),sC=Symbol.for("react.fragment");function _v(e,t,n){var s=null;if(n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),"key"in t){n={};for(var a in t)a!=="key"&&(n[a]=t[a])}else n=t;return t=n.ref,{$$typeof:nC,type:e,key:s,ref:t!==void 0?t:null,props:n}}Yu.Fragment=sC;Yu.jsx=_v;Yu.jsxs=_v;Mv.exports=Yu;var r=Mv.exports,Ov={exports:{}},Gu={},Dv={exports:{}},Lv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,H){var M=D.length;D.push(H);e:for(;0<M;){var U=M-1>>>1,z=D[U];if(0<a(z,H))D[U]=H,D[M]=z,M=U;else break e}}function n(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var H=D[0],M=D.pop();if(M!==H){D[0]=M;e:for(var U=0,z=D.length,P=z>>>1;U<P;){var V=2*(U+1)-1,Q=D[V],_=V+1,se=D[_];if(0>a(Q,M))_<z&&0>a(se,Q)?(D[U]=se,D[_]=M,U=_):(D[U]=Q,D[V]=M,U=V);else if(_<z&&0>a(se,M))D[U]=se,D[_]=M,U=_;else break e}}return H}function a(D,H){var M=D.sortIndex-H.sortIndex;return M!==0?M:D.id-H.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],f=1,h=null,m=3,g=!1,b=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;function y(D){for(var H=n(d);H!==null;){if(H.callback===null)s(d);else if(H.startTime<=D)s(d),H.sortIndex=H.expirationTime,t(c,H);else break;H=n(d)}}function S(D){if(x=!1,y(D),!b)if(n(c)!==null)b=!0,K();else{var H=n(d);H!==null&&C(S,H.startTime-D)}}var j=!1,k=-1,N=5,E=-1;function A(){return!(e.unstable_now()-E<N)}function T(){if(j){var D=e.unstable_now();E=D;var H=!0;try{e:{b=!1,x&&(x=!1,v(k),k=-1),g=!0;var M=m;try{t:{for(y(D),h=n(c);h!==null&&!(h.expirationTime>D&&A());){var U=h.callback;if(typeof U=="function"){h.callback=null,m=h.priorityLevel;var z=U(h.expirationTime<=D);if(D=e.unstable_now(),typeof z=="function"){h.callback=z,y(D),H=!0;break t}h===n(c)&&s(c),y(D)}else s(c);h=n(c)}if(h!==null)H=!0;else{var P=n(d);P!==null&&C(S,P.startTime-D),H=!1}}break e}finally{h=null,m=M,g=!1}H=void 0}}finally{H?I():j=!1}}}var I;if(typeof p=="function")I=function(){p(T)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,$=R.port2;R.port1.onmessage=T,I=function(){$.postMessage(null)}}else I=function(){w(T,0)};function K(){j||(j=!0,I())}function C(D,H){k=w(function(){D(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){b||g||(b=!0,K())},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(D){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var M=m;m=H;try{return D()}finally{m=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var M=m;m=D;try{return H()}finally{m=M}},e.unstable_scheduleCallback=function(D,H,M){var U=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?U+M:U):M=U,D){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=M+z,D={id:f++,callback:H,priorityLevel:D,startTime:M,expirationTime:z,sortIndex:-1},M>U?(D.sortIndex=M,t(d,D),n(c)===null&&D===n(d)&&(x?(v(k),k=-1):x=!0,C(S,M-U))):(D.sortIndex=z,t(c,D),b||g||(b=!0,K())),D},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(D){var H=m;return function(){var M=m;m=H;try{return D.apply(this,arguments)}finally{m=M}}}})(Lv);Dv.exports=Lv;var aC=Dv.exports,zv={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um=Symbol.for("react.transitional.element"),rC=Symbol.for("react.portal"),oC=Symbol.for("react.fragment"),iC=Symbol.for("react.strict_mode"),lC=Symbol.for("react.profiler"),cC=Symbol.for("react.consumer"),uC=Symbol.for("react.context"),dC=Symbol.for("react.forward_ref"),fC=Symbol.for("react.suspense"),hC=Symbol.for("react.memo"),Pv=Symbol.for("react.lazy"),zg=Symbol.iterator;function mC(e){return e===null||typeof e!="object"?null:(e=zg&&e[zg]||e["@@iterator"],typeof e=="function"?e:null)}var Iv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uv=Object.assign,Bv={};function ai(e,t,n){this.props=e,this.context=t,this.refs=Bv,this.updater=n||Iv}ai.prototype.isReactComponent={};ai.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ai.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $v(){}$v.prototype=ai.prototype;function Bm(e,t,n){this.props=e,this.context=t,this.refs=Bv,this.updater=n||Iv}var $m=Bm.prototype=new $v;$m.constructor=Bm;Uv($m,ai.prototype);$m.isPureReactComponent=!0;var Pg=Array.isArray,tt={H:null,A:null,T:null,S:null},Hv=Object.prototype.hasOwnProperty;function Hm(e,t,n,s,a,o){return n=o.ref,{$$typeof:Um,type:e,key:t,ref:n!==void 0?n:null,props:o}}function pC(e,t){return Hm(e.type,t,void 0,void 0,void 0,e.props)}function qm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Um}function gC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ig=/\/+/g;function Gd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gC(""+e.key):t.toString(36)}function Ug(){}function xC(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Ug,Ug):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function to(e,t,n,s,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"bigint":case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Um:case rC:i=!0;break;case Pv:return i=e._init,to(i(e._payload),t,n,s,a)}}if(i)return a=a(e),i=s===""?"."+Gd(e,0):s,Pg(a)?(n="",i!=null&&(n=i.replace(Ig,"$&/")+"/"),to(a,t,n,"",function(d){return d})):a!=null&&(qm(a)&&(a=pC(a,n+(a.key==null||e&&e.key===a.key?"":(""+a.key).replace(Ig,"$&/")+"/")+i)),t.push(a)),1;i=0;var l=s===""?".":s+":";if(Pg(e))for(var c=0;c<e.length;c++)s=e[c],o=l+Gd(s,c),i+=to(s,t,n,o,a);else if(c=mC(e),typeof c=="function")for(e=c.call(e),c=0;!(s=e.next()).done;)s=s.value,o=l+Gd(s,c++),i+=to(s,t,n,o,a);else if(o==="object"){if(typeof e.then=="function")return to(xC(e),t,n,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return i}function ic(e,t,n){if(e==null)return e;var s=[],a=0;return to(e,s,"","",function(o){return t.call(n,o,a++)}),s}function vC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bg=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function yC(){}Ce.Children={map:ic,forEach:function(e,t,n){ic(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ic(e,function(){t++}),t},toArray:function(e){return ic(e,function(t){return t})||[]},only:function(e){if(!qm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=ai;Ce.Fragment=oC;Ce.Profiler=lC;Ce.PureComponent=Bm;Ce.StrictMode=iC;Ce.Suspense=fC;Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=tt;Ce.act=function(){throw Error("act(...) is not supported in production builds of React.")};Ce.cache=function(e){return function(){return e.apply(null,arguments)}};Ce.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=Uv({},e.props),a=e.key,o=void 0;if(t!=null)for(i in t.ref!==void 0&&(o=void 0),t.key!==void 0&&(a=""+t.key),t)!Hv.call(t,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&t.ref===void 0||(s[i]=t[i]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];s.children=l}return Hm(e.type,a,void 0,void 0,o,s)};Ce.createContext=function(e){return e={$$typeof:uC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:cC,_context:e},e};Ce.createElement=function(e,t,n){var s,a={},o=null;if(t!=null)for(s in t.key!==void 0&&(o=""+t.key),t)Hv.call(t,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(a[s]=t[s]);var i=arguments.length-2;if(i===1)a.children=n;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)a[s]===void 0&&(a[s]=i[s]);return Hm(e,o,void 0,void 0,null,a)};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:dC,render:e}};Ce.isValidElement=qm;Ce.lazy=function(e){return{$$typeof:Pv,_payload:{_status:-1,_result:e},_init:vC}};Ce.memo=function(e,t){return{$$typeof:hC,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=tt.T,n={};tt.T=n;try{var s=e(),a=tt.S;a!==null&&a(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(yC,Bg)}catch(o){Bg(o)}finally{tt.T=t}};Ce.unstable_useCacheRefresh=function(){return tt.H.useCacheRefresh()};Ce.use=function(e){return tt.H.use(e)};Ce.useActionState=function(e,t,n){return tt.H.useActionState(e,t,n)};Ce.useCallback=function(e,t){return tt.H.useCallback(e,t)};Ce.useContext=function(e){return tt.H.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e,t){return tt.H.useDeferredValue(e,t)};Ce.useEffect=function(e,t){return tt.H.useEffect(e,t)};Ce.useId=function(){return tt.H.useId()};Ce.useImperativeHandle=function(e,t,n){return tt.H.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return tt.H.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return tt.H.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return tt.H.useMemo(e,t)};Ce.useOptimistic=function(e,t){return tt.H.useOptimistic(e,t)};Ce.useReducer=function(e,t,n){return tt.H.useReducer(e,t,n)};Ce.useRef=function(e){return tt.H.useRef(e)};Ce.useState=function(e){return tt.H.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return tt.H.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return tt.H.useTransition()};Ce.version="19.0.0";zv.exports=Ce;var u=zv.exports;const js=Rv(u),Vm=tC({__proto__:null,default:js},[u]);var qv={exports:{}},$t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC=u;function Vv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Gs(){}var Ut={d:{f:Gs,r:function(){throw Error(Vv(522))},D:Gs,C:Gs,L:Gs,m:Gs,X:Gs,S:Gs,M:Gs},p:0,findDOMNode:null},wC=Symbol.for("react.portal");function SC(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wC,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}var qi=bC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Qu(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}$t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ut;$t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Vv(299));return SC(e,t,null,n)};$t.flushSync=function(e){var t=qi.T,n=Ut.p;try{if(qi.T=null,Ut.p=2,e)return e()}finally{qi.T=t,Ut.p=n,Ut.d.f()}};$t.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Ut.d.C(e,t))};$t.prefetchDNS=function(e){typeof e=="string"&&Ut.d.D(e)};$t.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,s=Qu(n,t.crossOrigin),a=typeof t.integrity=="string"?t.integrity:void 0,o=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Ut.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:s,integrity:a,fetchPriority:o}):n==="script"&&Ut.d.X(e,{crossOrigin:s,integrity:a,fetchPriority:o,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};$t.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Qu(t.as,t.crossOrigin);Ut.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Ut.d.M(e)};$t.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,s=Qu(n,t.crossOrigin);Ut.d.L(e,n,{crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};$t.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Qu(t.as,t.crossOrigin);Ut.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Ut.d.m(e)};$t.requestFormReset=function(e){Ut.d.r(e)};$t.unstable_batchedUpdates=function(e,t){return e(t)};$t.useFormState=function(e,t,n){return qi.H.useFormState(e,t,n)};$t.useFormStatus=function(){return qi.H.useHostTransitionStatus()};$t.version="19.0.0";function Fv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fv)}catch(e){console.error(e)}}Fv(),qv.exports=$t;var ri=qv.exports;const NC=Rv(ri);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xt=aC,Yv=u,jC=ri;function Z(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Gv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var CC=Symbol.for("react.element"),lc=Symbol.for("react.transitional.element"),Di=Symbol.for("react.portal"),ro=Symbol.for("react.fragment"),Qv=Symbol.for("react.strict_mode"),nh=Symbol.for("react.profiler"),EC=Symbol.for("react.provider"),Xv=Symbol.for("react.consumer"),Ms=Symbol.for("react.context"),Fm=Symbol.for("react.forward_ref"),sh=Symbol.for("react.suspense"),ah=Symbol.for("react.suspense_list"),Ym=Symbol.for("react.memo"),Js=Symbol.for("react.lazy"),Kv=Symbol.for("react.offscreen"),kC=Symbol.for("react.memo_cache_sentinel"),$g=Symbol.iterator;function Ni(e){return e===null||typeof e!="object"?null:(e=$g&&e[$g]||e["@@iterator"],typeof e=="function"?e:null)}var AC=Symbol.for("react.client.reference");function rh(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===AC?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ro:return"Fragment";case Di:return"Portal";case nh:return"Profiler";case Qv:return"StrictMode";case sh:return"Suspense";case ah:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ms:return(e.displayName||"Context")+".Provider";case Xv:return(e._context.displayName||"Context")+".Consumer";case Fm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ym:return t=e.displayName||null,t!==null?t:rh(e.type)||"Memo";case Js:t=e._payload,e=e._init;try{return rh(e(t))}catch{}}return null}var Se=Yv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,We=Object.assign,Qd,Hg;function Li(e){if(Qd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qd=t&&t[1]||"",Hg=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qd+e+Hg}var Xd=!1;function Kd(e,t){if(!e||Xd)return"";Xd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(g){var m=g}Reflect.construct(e,[],h)}else{try{h.call()}catch(g){m=g}e.call(h.prototype)}}else{try{throw Error()}catch(g){m=g}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(g){if(g&&m&&typeof g.stack=="string")return[g.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=s.DetermineComponentFrameRoot(),i=o[0],l=o[1];if(i&&l){var c=i.split(`
`),d=l.split(`
`);for(a=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;a<d.length&&!d[a].includes("DetermineComponentFrameRoot");)a++;if(s===c.length||a===d.length)for(s=c.length-1,a=d.length-1;1<=s&&0<=a&&c[s]!==d[a];)a--;for(;1<=s&&0<=a;s--,a--)if(c[s]!==d[a]){if(s!==1||a!==1)do if(s--,a--,0>a||c[s]!==d[a]){var f=`
`+c[s].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=s&&0<=a);break}}}finally{Xd=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Li(n):""}function TC(e){switch(e.tag){case 26:case 27:case 5:return Li(e.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 15:return e=Kd(e.type,!1),e;case 11:return e=Kd(e.type.render,!1),e;case 1:return e=Kd(e.type,!0),e;default:return""}}function qg(e){try{var t="";do t+=TC(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function oi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Zv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vg(e){if(oi(e)!==e)throw Error(Z(188))}function RC(e){var t=e.alternate;if(!t){if(t=oi(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Vg(a),e;if(o===s)return Vg(a),t;o=o.sibling}throw Error(Z(188))}if(n.return!==s.return)n=a,s=o;else{for(var i=!1,l=a.child;l;){if(l===n){i=!0,n=a,s=o;break}if(l===s){i=!0,s=a,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,s=a;break}if(l===s){i=!0,s=o,n=a;break}l=l.sibling}if(!i)throw Error(Z(189))}}if(n.alternate!==s)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?e:t}function Wv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Wv(e),t!==null)return t;e=e.sibling}return null}var zi=Array.isArray,Ze=jC.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fr={pending:!1,data:null,method:null,action:null},oh=[],oo=-1;function hs(e){return{current:e}}function St(e){0>oo||(e.current=oh[oo],oh[oo]=null,oo--)}function Je(e,t){oo++,oh[oo]=e.current,e.current=t}var ns=hs(null),ll=hs(null),xa=hs(null),su=hs(null);function au(e,t){switch(Je(xa,t),Je(ll,e),Je(ns,null),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?F0(t):0;break;default:if(e=e===8?t.parentNode:t,t=e.tagName,e=e.namespaceURI)e=F0(e),t=uw(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}St(ns),Je(ns,t)}function Vo(){St(ns),St(ll),St(xa)}function ih(e){e.memoizedState!==null&&Je(su,e);var t=ns.current,n=uw(t,e.type);t!==n&&(Je(ll,e),Je(ns,n))}function ru(e){ll.current===e&&(St(ns),St(ll)),su.current===e&&(St(su),yl._currentValue=fr)}var lh=Object.prototype.hasOwnProperty,Gm=xt.unstable_scheduleCallback,Zd=xt.unstable_cancelCallback,MC=xt.unstable_shouldYield,_C=xt.unstable_requestPaint,ss=xt.unstable_now,OC=xt.unstable_getCurrentPriorityLevel,Jv=xt.unstable_ImmediatePriority,ey=xt.unstable_UserBlockingPriority,ou=xt.unstable_NormalPriority,DC=xt.unstable_LowPriority,ty=xt.unstable_IdlePriority,LC=xt.log,zC=xt.unstable_setDisableYieldValue,Ll=null,tn=null;function PC(e){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Ll,e,void 0,(e.current.flags&128)===128)}catch{}}function pa(e){if(typeof LC=="function"&&zC(e),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(Ll,e)}catch{}}var nn=Math.clz32?Math.clz32:BC,IC=Math.log,UC=Math.LN2;function BC(e){return e>>>=0,e===0?32:31-(IC(e)/UC|0)|0}var cc=128,uc=4194304;function Wa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Xu(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes,i=e.warmLanes;e=e.finishedLanes!==0;var l=n&134217727;return l!==0?(n=l&~a,n!==0?s=Wa(n):(o&=l,o!==0?s=Wa(o):e||(i=l&~i,i!==0&&(s=Wa(i))))):(l=n&~a,l!==0?s=Wa(l):o!==0?s=Wa(o):e||(i=n&~i,i!==0&&(s=Wa(i)))),s===0?0:t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===32&&(i&4194176)!==0)?t:s}function zl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function $C(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ny(){var e=cc;return cc<<=1,!(cc&4194176)&&(cc=128),e}function sy(){var e=uc;return uc<<=1,!(uc&62914560)&&(uc=4194304),e}function Wd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function HC(e,t,n,s,a,o){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,d=e.hiddenUpdates;for(n=i&~n;0<n;){var f=31-nn(n),h=1<<f;l[f]=0,c[f]=-1;var m=d[f];if(m!==null)for(d[f]=null,f=0;f<m.length;f++){var g=m[f];g!==null&&(g.lane&=-536870913)}n&=~h}s!==0&&ay(e,s,0),o!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=o&~(i&~t))}function ay(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-nn(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|n&4194218}function ry(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-nn(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}function oy(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function iy(){var e=Ze.p;return e!==0?e:(e=window.event,e===void 0?32:bw(e.type))}function qC(e,t){var n=Ze.p;try{return Ze.p=e,t()}finally{Ze.p=n}}var Ua=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Ua,Xt="__reactProps$"+Ua,ii="__reactContainer$"+Ua,ch="__reactEvents$"+Ua,VC="__reactListeners$"+Ua,FC="__reactHandles$"+Ua,Fg="__reactResources$"+Ua,cl="__reactMarker$"+Ua;function Qm(e){delete e[Rt],delete e[Xt],delete e[ch],delete e[VC],delete e[FC]}function tr(e){var t=e[Rt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ii]||n[Rt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=G0(e);e!==null;){if(n=e[Rt])return n;e=G0(e)}return t}e=n,n=e.parentNode}return null}function li(e){if(e=e[Rt]||e[ii]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Pi(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(Z(33))}function vo(e){var t=e[Fg];return t||(t=e[Fg]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function bt(e){e[cl]=!0}var ly=new Set,cy={};function Lr(e,t){Fo(e,t),Fo(e+"Capture",t)}function Fo(e,t){for(cy[e]=t,e=0;e<t.length;e++)ly.add(t[e])}var Us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),YC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yg={},Gg={};function GC(e){return lh.call(Gg,e)?!0:lh.call(Yg,e)?!1:YC.test(e)?Gg[e]=!0:(Yg[e]=!0,!1)}function Dc(e,t,n){if(GC(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function dc(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function vs(e,t,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+s)}}function hn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QC(e){var t=uy(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function iu(e){e._valueTracker||(e._valueTracker=QC(e))}function dy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=uy(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function lu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var XC=/[\n"\\]/g;function vn(e){return e.replace(XC,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function uh(e,t,n,s,a,o,i,l){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+hn(t)):e.value!==""+hn(t)&&(e.value=""+hn(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?dh(e,i,hn(t)):n!=null?dh(e,i,hn(n)):s!=null&&e.removeAttribute("value"),a==null&&o!=null&&(e.defaultChecked=!!o),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+hn(l):e.removeAttribute("name")}function fy(e,t,n,s,a,o,i,l){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;n=n!=null?""+hn(n):"",t=t!=null?""+hn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}s=s??a,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i)}function dh(e,t,n){t==="number"&&lu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function yo(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+hn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function hy(e,t,n){if(t!=null&&(t=""+hn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+hn(n):""}function my(e,t,n,s){if(t==null){if(s!=null){if(n!=null)throw Error(Z(92));if(zi(s)){if(1<s.length)throw Error(Z(93));s=s[0]}n=s}n==null&&(n=""),t=n}n=hn(t),e.defaultValue=n,s=e.textContent,s===n&&s!==""&&s!==null&&(e.value=s)}function Yo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var KC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qg(e,t,n){var s=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,n):typeof n!="number"||n===0||KC.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function py(e,t,n){if(t!=null&&typeof t!="object")throw Error(Z(62));if(e=e.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var a in t)s=t[a],t.hasOwnProperty(a)&&n[a]!==s&&Qg(e,a,s)}else for(var o in t)t.hasOwnProperty(o)&&Qg(e,o,t[o])}function Xm(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ZC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lc(e){return WC.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var fh=null;function Km(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var io=null,bo=null;function Xg(e){var t=li(e);if(t&&(e=t.stateNode)){var n=e[Xt]||null;e:switch(e=t.stateNode,t.type){case"input":if(uh(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=s[Xt]||null;if(!a)throw Error(Z(90));uh(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)s=n[t],s.form===e.form&&dy(s)}break e;case"textarea":hy(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&yo(e,!!n.multiple,t,!1)}}}var Jd=!1;function gy(e,t,n){if(Jd)return e(t,n);Jd=!0;try{var s=e(t);return s}finally{if(Jd=!1,(io!==null||bo!==null)&&(rd(),io&&(t=io,e=bo,bo=io=null,Xg(t),e)))for(t=0;t<e.length;t++)Xg(e[t])}}function ul(e,t){var n=e.stateNode;if(n===null)return null;var s=n[Xt]||null;if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Z(231,t,typeof n));return n}var hh=!1;if(Us)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){hh=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{hh=!1}var ga=null,Zm=null,zc=null;function xy(){if(zc)return zc;var e,t=Zm,n=t.length,s,a="value"in ga?ga.value:ga.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===a[o-s];s++);return zc=a.slice(e,1<s?1-s:void 0)}function Pc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fc(){return!0}function Kg(){return!1}function Kt(e){function t(n,s,a,o,i){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?fc:Kg,this.isPropagationStopped=Kg,this}return We(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fc)},persist:function(){},isPersistent:fc}),t}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ku=Kt(zr),Il=We({},zr,{view:0,detail:0}),JC=Kt(Il),ef,tf,Ci,Zu=We({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ci&&(Ci&&e.type==="mousemove"?(ef=e.screenX-Ci.screenX,tf=e.screenY-Ci.screenY):tf=ef=0,Ci=e),ef)},movementY:function(e){return"movementY"in e?e.movementY:tf}}),Zg=Kt(Zu),eE=We({},Zu,{dataTransfer:0}),tE=Kt(eE),nE=We({},Il,{relatedTarget:0}),nf=Kt(nE),sE=We({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),aE=Kt(sE),rE=We({},zr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),oE=Kt(rE),iE=We({},zr,{data:0}),Wg=Kt(iE),lE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uE[e])?!!t[e]:!1}function Wm(){return dE}var fE=We({},Il,{key:function(e){if(e.key){var t=lE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Pc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wm,charCode:function(e){return e.type==="keypress"?Pc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hE=Kt(fE),mE=We({},Zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jg=Kt(mE),pE=We({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wm}),gE=Kt(pE),xE=We({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vE=Kt(xE),yE=We({},Zu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bE=Kt(yE),wE=We({},zr,{newState:0,oldState:0}),SE=Kt(wE),NE=[9,13,27,32],Jm=Us&&"CompositionEvent"in window,Vi=null;Us&&"documentMode"in document&&(Vi=document.documentMode);var jE=Us&&"TextEvent"in window&&!Vi,vy=Us&&(!Jm||Vi&&8<Vi&&11>=Vi),e0=" ",t0=!1;function yy(e,t){switch(e){case"keyup":return NE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function by(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lo=!1;function CE(e,t){switch(e){case"compositionend":return by(t);case"keypress":return t.which!==32?null:(t0=!0,e0);case"textInput":return e=t.data,e===e0&&t0?null:e;default:return null}}function EE(e,t){if(lo)return e==="compositionend"||!Jm&&yy(e,t)?(e=xy(),zc=Zm=ga=null,lo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vy&&t.locale!=="ko"?null:t.data;default:return null}}var kE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kE[e.type]:t==="textarea"}function wy(e,t,n,s){io?bo?bo.push(s):bo=[s]:io=s,t=ju(t,"onChange"),0<t.length&&(n=new Ku("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Fi=null,dl=null;function AE(e){iw(e,0)}function Wu(e){var t=Pi(e);if(dy(t))return e}function s0(e,t){if(e==="change")return t}var Sy=!1;if(Us){var sf;if(Us){var af="oninput"in document;if(!af){var a0=document.createElement("div");a0.setAttribute("oninput","return;"),af=typeof a0.oninput=="function"}sf=af}else sf=!1;Sy=sf&&(!document.documentMode||9<document.documentMode)}function r0(){Fi&&(Fi.detachEvent("onpropertychange",Ny),dl=Fi=null)}function Ny(e){if(e.propertyName==="value"&&Wu(dl)){var t=[];wy(t,dl,e,Km(e)),gy(AE,t)}}function TE(e,t,n){e==="focusin"?(r0(),Fi=t,dl=n,Fi.attachEvent("onpropertychange",Ny)):e==="focusout"&&r0()}function RE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wu(dl)}function ME(e,t){if(e==="click")return Wu(t)}function _E(e,t){if(e==="input"||e==="change")return Wu(t)}function OE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:OE;function fl(e,t){if(rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!lh.call(t,a)||!rn(e[a],t[a]))return!1}return!0}function o0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i0(e,t){var n=o0(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=o0(n)}}function jy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cy(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=lu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=lu(e.document)}return t}function ep(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function DE(e,t){var n=Cy(t);t=e.focusedElem;var s=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&jy(t.ownerDocument.documentElement,t)){if(s!==null&&ep(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var a=t.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!n.extend&&o>s&&(a=s,s=o,o=a),a=i0(t,o);var i=i0(t,s);a&&i&&(n.rangeCount!==1||n.anchorNode!==a.node||n.anchorOffset!==a.offset||n.focusNode!==i.node||n.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),n.removeAllRanges(),o>s?(n.addRange(e),n.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var LE=Us&&"documentMode"in document&&11>=document.documentMode,co=null,mh=null,Yi=null,ph=!1;function l0(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ph||co==null||co!==lu(s)||(s=co,"selectionStart"in s&&ep(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Yi&&fl(Yi,s)||(Yi=s,s=ju(mh,"onSelect"),0<s.length&&(t=new Ku("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=co)))}function Ka(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var uo={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionrun:Ka("Transition","TransitionRun"),transitionstart:Ka("Transition","TransitionStart"),transitioncancel:Ka("Transition","TransitionCancel"),transitionend:Ka("Transition","TransitionEnd")},rf={},Ey={};Us&&(Ey=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function Pr(e){if(rf[e])return rf[e];if(!uo[e])return e;var t=uo[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ey)return rf[e]=t[n];return e}var ky=Pr("animationend"),Ay=Pr("animationiteration"),Ty=Pr("animationstart"),zE=Pr("transitionrun"),PE=Pr("transitionstart"),IE=Pr("transitioncancel"),Ry=Pr("transitionend"),My=new Map,c0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Yn(e,t){My.set(e,t),Lr(t,[e])}var fn=[],fo=0,tp=0;function Ju(){for(var e=fo,t=tp=fo=0;t<e;){var n=fn[t];fn[t++]=null;var s=fn[t];fn[t++]=null;var a=fn[t];fn[t++]=null;var o=fn[t];if(fn[t++]=null,s!==null&&a!==null){var i=s.pending;i===null?a.next=a:(a.next=i.next,i.next=a),s.pending=a}o!==0&&_y(n,a,o)}}function ed(e,t,n,s){fn[fo++]=e,fn[fo++]=t,fn[fo++]=n,fn[fo++]=s,tp|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function np(e,t,n,s){return ed(e,t,n,s),cu(e)}function Ta(e,t){return ed(e,null,null,t),cu(e)}function _y(e,t,n){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n);for(var a=!1,o=e.return;o!==null;)o.childLanes|=n,s=o.alternate,s!==null&&(s.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(a=!0)),e=o,o=o.return;a&&t!==null&&e.tag===3&&(o=e.stateNode,a=31-nn(n),o=o.hiddenUpdates,e=o[a],e===null?o[a]=[t]:e.push(t),t.lane=n|536870912)}function cu(e){if(50<al)throw al=0,Ph=null,Error(Z(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ho={},u0=new WeakMap;function yn(e,t){if(typeof e=="object"&&e!==null){var n=u0.get(e);return n!==void 0?n:(t={value:e,source:t,stack:qg(t)},u0.set(e,t),t)}return{value:e,source:t,stack:qg(t)}}var mo=[],po=0,uu=null,du=0,mn=[],pn=0,hr=null,_s=1,Os="";function Ja(e,t){mo[po++]=du,mo[po++]=uu,uu=e,du=t}function Oy(e,t,n){mn[pn++]=_s,mn[pn++]=Os,mn[pn++]=hr,hr=e;var s=_s;e=Os;var a=32-nn(s)-1;s&=~(1<<a),n+=1;var o=32-nn(t)+a;if(30<o){var i=a-a%5;o=(s&(1<<i)-1).toString(32),s>>=i,a-=i,_s=1<<32-nn(t)+a|n<<a|s,Os=o+e}else _s=1<<o|n<<a|s,Os=e}function sp(e){e.return!==null&&(Ja(e,1),Oy(e,1,0))}function ap(e){for(;e===uu;)uu=mo[--po],mo[po]=null,du=mo[--po],mo[po]=null;for(;e===hr;)hr=mn[--pn],mn[pn]=null,Os=mn[--pn],mn[pn]=null,_s=mn[--pn],mn[pn]=null}var It=null,jt=null,Ie=!1,Ln=null,Wn=!1,gh=Error(Z(519));function br(e){var t=Error(Z(418,""));throw hl(yn(t,e)),gh}function d0(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[Rt]=e,t[Xt]=s,n){case"dialog":Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":case"embed":Oe("load",t);break;case"video":case"audio":for(n=0;n<gl.length;n++)Oe(gl[n],t);break;case"source":Oe("error",t);break;case"img":case"image":case"link":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"input":Oe("invalid",t),fy(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),iu(t);break;case"select":Oe("invalid",t);break;case"textarea":Oe("invalid",t),my(t,s.value,s.defaultValue,s.children),iu(t)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||s.suppressHydrationWarning===!0||cw(t.textContent,n)?(s.popover!=null&&(Oe("beforetoggle",t),Oe("toggle",t)),s.onScroll!=null&&Oe("scroll",t),s.onScrollEnd!=null&&Oe("scrollend",t),s.onClick!=null&&(t.onclick=id),t=!0):t=!1,t||br(e)}function f0(e){for(It=e.return;It;)switch(It.tag){case 3:case 27:Wn=!0;return;case 5:case 13:Wn=!1;return;default:It=It.return}}function Ei(e){if(e!==It)return!1;if(!Ie)return f0(e),Ie=!0,!1;var t=!1,n;if((n=e.tag!==3&&e.tag!==27)&&((n=e.tag===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Vh(e.type,e.memoizedProps)),n=!n),n&&(t=!0),t&&jt&&br(e),f0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){jt=Un(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}jt=null}}else jt=It?Un(e.stateNode.nextSibling):null;return!0}function Ul(){jt=It=null,Ie=!1}function hl(e){Ln===null?Ln=[e]:Ln.push(e)}var Gi=Error(Z(460)),Dy=Error(Z(474)),xh={then:function(){}};function h0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function hc(){}function Ly(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(hc,hc),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===Gi?Error(Z(483)):e;default:if(typeof t.status=="string")t.then(hc,hc);else{if(e=Ke,e!==null&&100<e.shellSuspendCounter)throw Error(Z(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=s}},function(s){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===Gi?Error(Z(483)):e}throw Qi=t,Gi}}var Qi=null;function m0(){if(Qi===null)throw Error(Z(459));var e=Qi;return Qi=null,e}var wo=null,ml=0;function mc(e){var t=ml;return ml+=1,wo===null&&(wo=[]),Ly(wo,e,t)}function ki(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function pc(e,t){throw t.$$typeof===CC?Error(Z(525)):(e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function p0(e){var t=e._init;return t(e._payload)}function zy(e){function t(v,p){if(e){var y=v.deletions;y===null?(v.deletions=[p],v.flags|=16):y.push(p)}}function n(v,p){if(!e)return null;for(;p!==null;)t(v,p),p=p.sibling;return null}function s(v){for(var p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function a(v,p){return v=ba(v,p),v.index=0,v.sibling=null,v}function o(v,p,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<p?(v.flags|=33554434,p):y):(v.flags|=33554434,p)):(v.flags|=1048576,p)}function i(v){return e&&v.alternate===null&&(v.flags|=33554434),v}function l(v,p,y,S){return p===null||p.tag!==6?(p=vf(y,v.mode,S),p.return=v,p):(p=a(p,y),p.return=v,p)}function c(v,p,y,S){var j=y.type;return j===ro?f(v,p,y.props.children,S,y.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Js&&p0(j)===p.type)?(p=a(p,y.props),ki(p,y),p.return=v,p):(p=Hc(y.type,y.key,y.props,null,v.mode,S),ki(p,y),p.return=v,p)}function d(v,p,y,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=yf(y,v.mode,S),p.return=v,p):(p=a(p,y.children||[]),p.return=v,p)}function f(v,p,y,S,j){return p===null||p.tag!==7?(p=pr(y,v.mode,S,j),p.return=v,p):(p=a(p,y),p.return=v,p)}function h(v,p,y){if(typeof p=="string"&&p!==""||typeof p=="number"||typeof p=="bigint")return p=vf(""+p,v.mode,y),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case lc:return y=Hc(p.type,p.key,p.props,null,v.mode,y),ki(y,p),y.return=v,y;case Di:return p=yf(p,v.mode,y),p.return=v,p;case Js:var S=p._init;return p=S(p._payload),h(v,p,y)}if(zi(p)||Ni(p))return p=pr(p,v.mode,y,null),p.return=v,p;if(typeof p.then=="function")return h(v,mc(p),y);if(p.$$typeof===Ms)return h(v,gc(v,p),y);pc(v,p)}return null}function m(v,p,y,S){var j=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return j!==null?null:l(v,p,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case lc:return y.key===j?c(v,p,y,S):null;case Di:return y.key===j?d(v,p,y,S):null;case Js:return j=y._init,y=j(y._payload),m(v,p,y,S)}if(zi(y)||Ni(y))return j!==null?null:f(v,p,y,S,null);if(typeof y.then=="function")return m(v,p,mc(y),S);if(y.$$typeof===Ms)return m(v,p,gc(v,y),S);pc(v,y)}return null}function g(v,p,y,S,j){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return v=v.get(y)||null,l(p,v,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case lc:return v=v.get(S.key===null?y:S.key)||null,c(p,v,S,j);case Di:return v=v.get(S.key===null?y:S.key)||null,d(p,v,S,j);case Js:var k=S._init;return S=k(S._payload),g(v,p,y,S,j)}if(zi(S)||Ni(S))return v=v.get(y)||null,f(p,v,S,j,null);if(typeof S.then=="function")return g(v,p,y,mc(S),j);if(S.$$typeof===Ms)return g(v,p,y,gc(p,S),j);pc(p,S)}return null}function b(v,p,y,S){for(var j=null,k=null,N=p,E=p=0,A=null;N!==null&&E<y.length;E++){N.index>E?(A=N,N=null):A=N.sibling;var T=m(v,N,y[E],S);if(T===null){N===null&&(N=A);break}e&&N&&T.alternate===null&&t(v,N),p=o(T,p,E),k===null?j=T:k.sibling=T,k=T,N=A}if(E===y.length)return n(v,N),Ie&&Ja(v,E),j;if(N===null){for(;E<y.length;E++)N=h(v,y[E],S),N!==null&&(p=o(N,p,E),k===null?j=N:k.sibling=N,k=N);return Ie&&Ja(v,E),j}for(N=s(N);E<y.length;E++)A=g(N,v,E,y[E],S),A!==null&&(e&&A.alternate!==null&&N.delete(A.key===null?E:A.key),p=o(A,p,E),k===null?j=A:k.sibling=A,k=A);return e&&N.forEach(function(I){return t(v,I)}),Ie&&Ja(v,E),j}function x(v,p,y,S){if(y==null)throw Error(Z(151));for(var j=null,k=null,N=p,E=p=0,A=null,T=y.next();N!==null&&!T.done;E++,T=y.next()){N.index>E?(A=N,N=null):A=N.sibling;var I=m(v,N,T.value,S);if(I===null){N===null&&(N=A);break}e&&N&&I.alternate===null&&t(v,N),p=o(I,p,E),k===null?j=I:k.sibling=I,k=I,N=A}if(T.done)return n(v,N),Ie&&Ja(v,E),j;if(N===null){for(;!T.done;E++,T=y.next())T=h(v,T.value,S),T!==null&&(p=o(T,p,E),k===null?j=T:k.sibling=T,k=T);return Ie&&Ja(v,E),j}for(N=s(N);!T.done;E++,T=y.next())T=g(N,v,E,T.value,S),T!==null&&(e&&T.alternate!==null&&N.delete(T.key===null?E:T.key),p=o(T,p,E),k===null?j=T:k.sibling=T,k=T);return e&&N.forEach(function(R){return t(v,R)}),Ie&&Ja(v,E),j}function w(v,p,y,S){if(typeof y=="object"&&y!==null&&y.type===ro&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case lc:e:{for(var j=y.key;p!==null;){if(p.key===j){if(j=y.type,j===ro){if(p.tag===7){n(v,p.sibling),S=a(p,y.props.children),S.return=v,v=S;break e}}else if(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Js&&p0(j)===p.type){n(v,p.sibling),S=a(p,y.props),ki(S,y),S.return=v,v=S;break e}n(v,p);break}else t(v,p);p=p.sibling}y.type===ro?(S=pr(y.props.children,v.mode,S,y.key),S.return=v,v=S):(S=Hc(y.type,y.key,y.props,null,v.mode,S),ki(S,y),S.return=v,v=S)}return i(v);case Di:e:{for(j=y.key;p!==null;){if(p.key===j)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(v,p.sibling),S=a(p,y.children||[]),S.return=v,v=S;break e}else{n(v,p);break}else t(v,p);p=p.sibling}S=yf(y,v.mode,S),S.return=v,v=S}return i(v);case Js:return j=y._init,y=j(y._payload),w(v,p,y,S)}if(zi(y))return b(v,p,y,S);if(Ni(y)){if(j=Ni(y),typeof j!="function")throw Error(Z(150));return y=j.call(y),x(v,p,y,S)}if(typeof y.then=="function")return w(v,p,mc(y),S);if(y.$$typeof===Ms)return w(v,p,gc(v,y),S);pc(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,p!==null&&p.tag===6?(n(v,p.sibling),S=a(p,y),S.return=v,v=S):(n(v,p),S=vf(y,v.mode,S),S.return=v,v=S),i(v)):n(v,p)}return function(v,p,y,S){try{ml=0;var j=w(v,p,y,S);return wo=null,j}catch(N){if(N===Gi)throw N;var k=bn(29,N,null,v.mode);return k.lanes=S,k.return=v,k}finally{}}}var wr=zy(!0),Py=zy(!1),Go=hs(null),fu=hs(0);function g0(e,t){e=Hs,Je(fu,e),Je(Go,t),Hs=e|t.baseLanes}function vh(){Je(fu,Hs),Je(Go,Go.current)}function rp(){Hs=fu.current,St(Go),St(fu)}var Cn=hs(null),as=null;function ta(e){var t=e.alternate;Je(gt,gt.current&1),Je(Cn,e),as===null&&(t===null||Go.current!==null||t.memoizedState!==null)&&(as=e)}function Iy(e){if(e.tag===22){if(Je(gt,gt.current),Je(Cn,e),as===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(as=e)}}else na()}function na(){Je(gt,gt.current),Je(Cn,Cn.current)}function Ds(e){St(Cn),as===e&&(as=null),St(gt)}var gt=hs(0);function hu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var UE=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},BE=xt.unstable_scheduleCallback,$E=xt.unstable_NormalPriority,mt={$$typeof:Ms,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function op(){return{controller:new UE,data:new Map,refCount:0}}function Bl(e){e.refCount--,e.refCount===0&&BE($E,function(){e.controller.abort()})}var Xi=null,yh=0,Qo=0,So=null;function HE(e,t){if(Xi===null){var n=Xi=[];yh=0,Qo=Tp(),So={status:"pending",value:void 0,then:function(s){n.push(s)}}}return yh++,t.then(x0,x0),t}function x0(){if(--yh===0&&Xi!==null){So!==null&&(So.status="fulfilled");var e=Xi;Xi=null,Qo=0,So=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function qE(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var a=0;a<n.length;a++)(0,n[a])(t)},function(a){for(s.status="rejected",s.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),s}var v0=Se.S;Se.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&HE(e,t),v0!==null&&v0(e,t)};var mr=hs(null);function ip(){var e=mr.current;return e!==null?e:Ke.pooledCache}function Ic(e,t){t===null?Je(mr,mr.current):Je(mr,t.pool)}function Uy(){var e=ip();return e===null?null:{parent:mt._currentValue,pool:e}}var Ra=0,ke=null,Fe=null,ut=null,mu=!1,No=!1,Sr=!1,pu=0,pl=0,jo=null,VE=0;function ot(){throw Error(Z(321))}function lp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rn(e[n],t[n]))return!1;return!0}function cp(e,t,n,s,a,o){return Ra=o,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Se.H=e===null||e.memoizedState===null?Ir:Ba,Sr=!1,o=n(s,a),Sr=!1,No&&(o=$y(t,n,s,a)),By(e),o}function By(e){Se.H=ls;var t=Fe!==null&&Fe.next!==null;if(Ra=0,ut=Fe=ke=null,mu=!1,pl=0,jo=null,t)throw Error(Z(300));e===null||wt||(e=e.dependencies,e!==null&&vu(e)&&(wt=!0))}function $y(e,t,n,s){ke=e;var a=0;do{if(No&&(jo=null),pl=0,No=!1,25<=a)throw Error(Z(301));if(a+=1,ut=Fe=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}Se.H=Ur,o=t(n,s)}while(No);return o}function FE(){var e=Se.H,t=e.useState()[0];return t=typeof t.then=="function"?$l(t):t,e=e.useState()[0],(Fe!==null?Fe.memoizedState:null)!==e&&(ke.flags|=1024),t}function up(){var e=pu!==0;return pu=0,e}function dp(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function fp(e){if(mu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}mu=!1}Ra=0,ut=Fe=ke=null,No=!1,pl=pu=0,jo=null}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?ke.memoizedState=ut=e:ut=ut.next=e,ut}function ft(){if(Fe===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=ut===null?ke.memoizedState:ut.next;if(t!==null)ut=t,Fe=e;else{if(e===null)throw ke.alternate===null?Error(Z(467)):Error(Z(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},ut===null?ke.memoizedState=ut=e:ut=ut.next=e}return ut}var td;td=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function $l(e){var t=pl;return pl+=1,jo===null&&(jo=[]),e=Ly(jo,e,t),t=ke,(ut===null?t.memoizedState:ut.next)===null&&(t=t.alternate,Se.H=t===null||t.memoizedState===null?Ir:Ba),e}function nd(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $l(e);if(e.$$typeof===Ms)return Mt(e)}throw Error(Z(438,String(e)))}function hp(e){var t=null,n=ke.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var s=ke.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=td(),ke.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=kC;return t.index++,n}function Bs(e,t){return typeof t=="function"?t(e):t}function Uc(e){var t=ft();return mp(t,Fe,e)}function mp(e,t,n){var s=e.queue;if(s===null)throw Error(Z(311));s.lastRenderedReducer=n;var a=e.baseQueue,o=s.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}t.baseQueue=a=o,s.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var l=i=null,c=null,d=t,f=!1;do{var h=d.lane&-536870913;if(h!==d.lane?(Pe&h)===h:(Ra&h)===h){var m=d.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Qo&&(f=!0);else if((Ra&m)===m){d=d.next,m===Qo&&(f=!0);continue}else h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=h,i=o):c=c.next=h,ke.lanes|=m,_a|=m;h=d.action,Sr&&n(o,h),o=d.hasEagerState?d.eagerState:n(o,h)}else m={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=m,i=o):c=c.next=m,ke.lanes|=h,_a|=h;d=d.next}while(d!==null&&d!==t);if(c===null?i=o:c.next=l,!rn(o,e.memoizedState)&&(wt=!0,f&&(n=So,n!==null)))throw n;e.memoizedState=o,e.baseState=i,e.baseQueue=c,s.lastRenderedState=o}return a===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function of(e){var t=ft(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);rn(o,t.memoizedState)||(wt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,s]}function Hy(e,t,n){var s=ke,a=ft(),o=Ie;if(o){if(n===void 0)throw Error(Z(407));n=n()}else n=t();var i=!rn((Fe||a).memoizedState,n);if(i&&(a.memoizedState=n,wt=!0),a=a.queue,pp(Fy.bind(null,s,a,e),[e]),a.getSnapshot!==t||i||ut!==null&&ut.memoizedState.tag&1){if(s.flags|=2048,Xo(9,Vy.bind(null,s,a,n,t),{destroy:void 0},null),Ke===null)throw Error(Z(349));o||Ra&60||qy(s,t,n)}return n}function qy(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ke.updateQueue,t===null?(t=td(),ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vy(e,t,n,s){t.value=n,t.getSnapshot=s,Yy(t)&&Gy(e)}function Fy(e,t,n){return n(function(){Yy(t)&&Gy(e)})}function Yy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rn(e,n)}catch{return!0}}function Gy(e){var t=Ta(e,2);t!==null&&Bt(t,e,2)}function bh(e){var t=Yt();if(typeof e=="function"){var n=e;if(e=n(),Sr){pa(!0);try{n()}finally{pa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:e},t}function Qy(e,t,n,s){return e.baseState=n,mp(e,Fe,typeof s=="function"?s:Bs)}function YE(e,t,n,s,a){if(ad(e))throw Error(Z(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){o.listeners.push(i)}};Se.T!==null?n(!0):o.isTransition=!1,s(o),n=t.pending,n===null?(o.next=t.pending=o,Xy(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Xy(e,t){var n=t.action,s=t.payload,a=e.state;if(t.isTransition){var o=Se.T,i={};Se.T=i;try{var l=n(a,s),c=Se.S;c!==null&&c(i,l),y0(e,t,l)}catch(d){wh(e,t,d)}finally{Se.T=o}}else try{o=n(a,s),y0(e,t,o)}catch(d){wh(e,t,d)}}function y0(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){b0(e,t,s)},function(s){return wh(e,t,s)}):b0(e,t,n)}function b0(e,t,n){t.status="fulfilled",t.value=n,Ky(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Xy(e,n)))}function wh(e,t,n){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=n,Ky(t),t=t.next;while(t!==s)}e.action=null}function Ky(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Zy(e,t){return t}function Wy(e,t){if(Ie){var n=Ke.formState;if(n!==null){e:{var s=ke;if(Ie){if(jt){t:{for(var a=jt,o=Wn;a.nodeType!==8;){if(!o){a=null;break t}if(a=Un(a.nextSibling),a===null){a=null;break t}}o=a.data,a=o==="F!"||o==="F"?a:null}if(a){jt=Un(a.nextSibling),s=a.data==="F!";break e}}br(s)}s=!1}s&&(t=n[0])}}return n=Yt(),n.memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zy,lastRenderedState:t},n.queue=s,n=pb.bind(null,ke,s),s.dispatch=n,s=bh(!1),o=yp.bind(null,ke,!1,s.queue),s=Yt(),a={state:t,dispatch:null,action:e,pending:null},s.queue=a,n=YE.bind(null,ke,a,o,n),a.dispatch=n,s.memoizedState=e,[t,n,!1]}function Jy(e){var t=ft();return eb(t,Fe,e)}function eb(e,t,n){t=mp(e,t,Zy)[0],e=Uc(Bs)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?$l(t):t;var s=ft(),a=s.queue,o=a.dispatch;return n!==s.memoizedState&&(ke.flags|=2048,Xo(9,GE.bind(null,a,n),{destroy:void 0},null)),[t,o,e]}function GE(e,t){e.action=t}function tb(e){var t=ft(),n=Fe;if(n!==null)return eb(t,n,e);ft(),t=t.memoizedState,n=ft();var s=n.queue.dispatch;return n.memoizedState=e,[t,s,!1]}function Xo(e,t,n,s){return e={tag:e,create:t,inst:n,deps:s,next:null},t=ke.updateQueue,t===null&&(t=td(),ke.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function nb(){return ft().memoizedState}function Bc(e,t,n,s){var a=Yt();ke.flags|=e,a.memoizedState=Xo(1|t,n,{destroy:void 0},s===void 0?null:s)}function sd(e,t,n,s){var a=ft();s=s===void 0?null:s;var o=a.memoizedState.inst;Fe!==null&&s!==null&&lp(s,Fe.memoizedState.deps)?a.memoizedState=Xo(t,n,o,s):(ke.flags|=e,a.memoizedState=Xo(1|t,n,o,s))}function w0(e,t){Bc(8390656,8,e,t)}function pp(e,t){sd(2048,8,e,t)}function sb(e,t){return sd(4,2,e,t)}function ab(e,t){return sd(4,4,e,t)}function rb(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ob(e,t,n){n=n!=null?n.concat([e]):null,sd(4,4,rb.bind(null,t,e),n)}function gp(){}function ib(e,t){var n=ft();t=t===void 0?null:t;var s=n.memoizedState;return t!==null&&lp(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function lb(e,t){var n=ft();t=t===void 0?null:t;var s=n.memoizedState;if(t!==null&&lp(t,s[1]))return s[0];if(s=e(),Sr){pa(!0);try{e()}finally{pa(!1)}}return n.memoizedState=[s,t],s}function xp(e,t,n){return n===void 0||Ra&1073741824?e.memoizedState=t:(e.memoizedState=n,e=Kb(),ke.lanes|=e,_a|=e,n)}function cb(e,t,n,s){return rn(n,t)?n:Go.current!==null?(e=xp(e,n,s),rn(e,t)||(wt=!0),e):Ra&42?(e=Kb(),ke.lanes|=e,_a|=e,t):(wt=!0,e.memoizedState=n)}function ub(e,t,n,s,a){var o=Ze.p;Ze.p=o!==0&&8>o?o:8;var i=Se.T,l={};Se.T=l,yp(e,!1,t,n);try{var c=a(),d=Se.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=qE(c,s);Ki(e,t,f,sn(e))}else Ki(e,t,s,sn(e))}catch(h){Ki(e,t,{then:function(){},status:"rejected",reason:h},sn())}finally{Ze.p=o,Se.T=i}}function QE(){}function Sh(e,t,n,s){if(e.tag!==5)throw Error(Z(476));var a=db(e).queue;ub(e,a,t,fr,n===null?QE:function(){return fb(e),n(s)})}function db(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:fr,baseState:fr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:fr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function fb(e){var t=db(e).next.queue;Ki(e,t,{},sn())}function vp(){return Mt(yl)}function hb(){return ft().memoizedState}function mb(){return ft().memoizedState}function XE(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=sn();e=va(n);var s=ya(t,e,n);s!==null&&(Bt(s,t,n),Wi(s,t,n)),t={cache:op()},e.payload=t;return}t=t.return}}function KE(e,t,n){var s=sn();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ad(e)?gb(t,n):(n=np(e,t,n,s),n!==null&&(Bt(n,e,s),xb(n,t,s)))}function pb(e,t,n){var s=sn();Ki(e,t,n,s)}function Ki(e,t,n,s){var a={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ad(e))gb(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,n);if(a.hasEagerState=!0,a.eagerState=l,rn(l,i))return ed(e,t,a,0),Ke===null&&Ju(),!1}catch{}finally{}if(n=np(e,t,a,s),n!==null)return Bt(n,e,s),xb(n,t,s),!0}return!1}function yp(e,t,n,s){if(s={lane:2,revertLane:Tp(),action:s,hasEagerState:!1,eagerState:null,next:null},ad(e)){if(t)throw Error(Z(479))}else t=np(e,n,s,2),t!==null&&Bt(t,e,2)}function ad(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function gb(e,t){No=mu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function xb(e,t,n){if(n&4194176){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,ry(e,n)}}var ls={readContext:Mt,use:nd,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot};ls.useCacheRefresh=ot;ls.useMemoCache=ot;ls.useHostTransitionStatus=ot;ls.useFormState=ot;ls.useActionState=ot;ls.useOptimistic=ot;var Ir={readContext:Mt,use:nd,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:w0,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Bc(4194308,4,rb.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bc(4194308,4,e,t)},useInsertionEffect:function(e,t){Bc(4,2,e,t)},useMemo:function(e,t){var n=Yt();t=t===void 0?null:t;var s=e();if(Sr){pa(!0);try{e()}finally{pa(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=Yt();if(n!==void 0){var a=n(t);if(Sr){pa(!0);try{n(t)}finally{pa(!1)}}}else a=t;return s.memoizedState=s.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},s.queue=e,e=e.dispatch=KE.bind(null,ke,e),[s.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:function(e){e=bh(e);var t=e.queue,n=pb.bind(null,ke,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:gp,useDeferredValue:function(e,t){var n=Yt();return xp(n,e,t)},useTransition:function(){var e=bh(!1);return e=ub.bind(null,ke,e.queue,!0,!1),Yt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=ke,a=Yt();if(Ie){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=t(),Ke===null)throw Error(Z(349));Pe&60||qy(s,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,w0(Fy.bind(null,s,o,e),[e]),s.flags|=2048,Xo(9,Vy.bind(null,s,o,n,t),{destroy:void 0},null),n},useId:function(){var e=Yt(),t=Ke.identifierPrefix;if(Ie){var n=Os,s=_s;n=(s&~(1<<32-nn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=pu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=VE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return Yt().memoizedState=XE.bind(null,ke)}};Ir.useMemoCache=hp;Ir.useHostTransitionStatus=vp;Ir.useFormState=Wy;Ir.useActionState=Wy;Ir.useOptimistic=function(e){var t=Yt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=yp.bind(null,ke,!0,n),n.dispatch=t,[e,t]};var Ba={readContext:Mt,use:nd,useCallback:ib,useContext:Mt,useEffect:pp,useImperativeHandle:ob,useInsertionEffect:sb,useLayoutEffect:ab,useMemo:lb,useReducer:Uc,useRef:nb,useState:function(){return Uc(Bs)},useDebugValue:gp,useDeferredValue:function(e,t){var n=ft();return cb(n,Fe.memoizedState,e,t)},useTransition:function(){var e=Uc(Bs)[0],t=ft().memoizedState;return[typeof e=="boolean"?e:$l(e),t]},useSyncExternalStore:Hy,useId:hb};Ba.useCacheRefresh=mb;Ba.useMemoCache=hp;Ba.useHostTransitionStatus=vp;Ba.useFormState=Jy;Ba.useActionState=Jy;Ba.useOptimistic=function(e,t){var n=ft();return Qy(n,Fe,e,t)};var Ur={readContext:Mt,use:nd,useCallback:ib,useContext:Mt,useEffect:pp,useImperativeHandle:ob,useInsertionEffect:sb,useLayoutEffect:ab,useMemo:lb,useReducer:of,useRef:nb,useState:function(){return of(Bs)},useDebugValue:gp,useDeferredValue:function(e,t){var n=ft();return Fe===null?xp(n,e,t):cb(n,Fe.memoizedState,e,t)},useTransition:function(){var e=of(Bs)[0],t=ft().memoizedState;return[typeof e=="boolean"?e:$l(e),t]},useSyncExternalStore:Hy,useId:hb};Ur.useCacheRefresh=mb;Ur.useMemoCache=hp;Ur.useHostTransitionStatus=vp;Ur.useFormState=tb;Ur.useActionState=tb;Ur.useOptimistic=function(e,t){var n=ft();return Fe!==null?Qy(n,Fe,e,t):(n.baseState=e,[e,n.queue.dispatch])};function lf(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:We({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Nh={isMounted:function(e){return(e=e._reactInternals)?oi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=sn(),a=va(s);a.payload=t,n!=null&&(a.callback=n),t=ya(e,a,s),t!==null&&(Bt(t,e,s),Wi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=sn(),a=va(s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=ya(e,a,s),t!==null&&(Bt(t,e,s),Wi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sn(),s=va(n);s.tag=2,t!=null&&(s.callback=t),t=ya(e,s,n),t!==null&&(Bt(t,e,n),Wi(t,e,n))}};function S0(e,t,n,s,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):t.prototype&&t.prototype.isPureReactComponent?!fl(n,s)||!fl(a,o):!0}function N0(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Nh.enqueueReplaceState(t,t.state,null)}function Nr(e,t){var n=t;if("ref"in t){n={};for(var s in t)s!=="ref"&&(n[s]=t[s])}if(e=e.defaultProps){n===t&&(n=We({},n));for(var a in e)n[a]===void 0&&(n[a]=e[a])}return n}var gu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function vb(e){gu(e)}function yb(e){console.error(e)}function bb(e){gu(e)}function xu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function j0(e,t,n){try{var s=e.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function jh(e,t,n){return n=va(n),n.tag=3,n.payload={element:null},n.callback=function(){xu(e,t)},n}function wb(e){return e=va(e),e.tag=3,e}function Sb(e,t,n,s){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var o=s.value;e.payload=function(){return a(o)},e.callback=function(){j0(t,n,s)}}var i=n.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){j0(t,n,s),typeof a!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function ZE(e,t,n,s,a){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=n.alternate,t!==null&&Hl(t,n,a,!0),n=Cn.current,n!==null){switch(n.tag){case 13:return as===null?Uh():n.alternate===null&&rt===0&&(rt=3),n.flags&=-257,n.flags|=65536,n.lanes=a,s===xh?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([s]):t.add(s),wf(e,s,a)),!1;case 22:return n.flags|=65536,s===xh?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([s]):n.add(s)),wf(e,s,a)),!1}throw Error(Z(435,n.tag))}return wf(e,s,a),Uh(),!1}if(Ie)return t=Cn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,s!==gh&&(e=Error(Z(422),{cause:s}),hl(yn(e,n)))):(s!==gh&&(t=Error(Z(423),{cause:s}),hl(yn(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,s=yn(s,n),a=jh(e.stateNode,s,a),mf(e,a),rt!==4&&(rt=2)),!1;var o=Error(Z(520),{cause:s});if(o=yn(o,n),nl===null?nl=[o]:nl.push(o),rt!==4&&(rt=2),t===null)return!0;s=yn(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=jh(n.stateNode,s,e),mf(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(wa===null||!wa.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=wb(a),Sb(a,e,n,s),mf(n,a),!1}n=n.return}while(n!==null);return!1}var Nb=Error(Z(461)),wt=!1;function Nt(e,t,n,s){t.child=e===null?Py(t,null,n,s):wr(t,e.child,n,s)}function C0(e,t,n,s,a){n=n.render;var o=t.ref;if("ref"in s){var i={};for(var l in s)l!=="ref"&&(i[l]=s[l])}else i=s;return jr(t),s=cp(e,t,n,i,o,a),l=up(),e!==null&&!wt?(dp(e,t,a),$s(e,t,a)):(Ie&&l&&sp(t),t.flags|=1,Nt(e,t,s,a),t.child)}function E0(e,t,n,s,a){if(e===null){var o=n.type;return typeof o=="function"&&!jp(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,jb(e,t,o,s,a)):(e=Hc(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!bp(e,a)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:fl,n(i,s)&&e.ref===t.ref)return $s(e,t,a)}return t.flags|=1,e=ba(o,s),e.ref=t.ref,e.return=t,t.child=e}function jb(e,t,n,s,a){if(e!==null){var o=e.memoizedProps;if(fl(o,s)&&e.ref===t.ref)if(wt=!1,t.pendingProps=s=o,bp(e,a))e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,$s(e,t,a)}return Ch(e,t,n,s,a)}function Cb(e,t,n){var s=t.pendingProps,a=s.children,o=(t.stateNode._pendingVisibility&2)!==0,i=e!==null?e.memoizedState:null;if(Zi(e,t),s.mode==="hidden"||o){if(t.flags&128){if(s=i!==null?i.baseLanes|n:n,e!==null){for(a=t.child=e.child,o=0;a!==null;)o=o|a.lanes|a.childLanes,a=a.sibling;t.childLanes=o&~s}else t.childLanes=0,t.child=null;return k0(e,t,s,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ic(t,i!==null?i.cachePool:null),i!==null?g0(t,i):vh(),Iy(t);else return t.lanes=t.childLanes=536870912,k0(e,t,i!==null?i.baseLanes|n:n,n)}else i!==null?(Ic(t,i.cachePool),g0(t,i),na(),t.memoizedState=null):(e!==null&&Ic(t,null),vh(),na());return Nt(e,t,a,n),t.child}function k0(e,t,n,s){var a=ip();return a=a===null?null:{parent:mt._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&Ic(t,null),vh(),Iy(t),e!==null&&Hl(e,t,s,!0),null}function Zi(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(Z(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function Ch(e,t,n,s,a){return jr(t),n=cp(e,t,n,s,void 0,a),s=up(),e!==null&&!wt?(dp(e,t,a),$s(e,t,a)):(Ie&&s&&sp(t),t.flags|=1,Nt(e,t,n,a),t.child)}function A0(e,t,n,s,a,o){return jr(t),t.updateQueue=null,n=$y(t,s,n,a),By(e),s=up(),e!==null&&!wt?(dp(e,t,o),$s(e,t,o)):(Ie&&s&&sp(t),t.flags|=1,Nt(e,t,n,o),t.child)}function T0(e,t,n,s,a){if(jr(t),t.stateNode===null){var o=ho,i=n.contextType;typeof i=="object"&&i!==null&&(o=Mt(i)),o=new n(s,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Nh,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=s,o.state=t.memoizedState,o.refs={},wp(t),i=n.contextType,o.context=typeof i=="object"&&i!==null?Mt(i):ho,o.state=t.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(lf(t,n,i,s),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(i=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),i!==o.state&&Nh.enqueueReplaceState(o,o.state,null),el(t,s,o,a),Ji(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){o=t.stateNode;var l=t.memoizedProps,c=Nr(n,l);o.props=c;var d=o.context,f=n.contextType;i=ho,typeof f=="object"&&f!==null&&(i=Mt(f));var h=n.getDerivedStateFromProps;f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l||d!==i)&&N0(t,o,s,i),ea=!1;var m=t.memoizedState;o.state=m,el(t,s,o,a),Ji(),d=t.memoizedState,l||m!==d||ea?(typeof h=="function"&&(lf(t,n,h,s),d=t.memoizedState),(c=ea||S0(t,n,c,s,m,d,i))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),o.props=s,o.state=d,o.context=i,s=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,Mh(e,t),i=t.memoizedProps,f=Nr(n,i),o.props=f,h=t.pendingProps,m=o.context,d=n.contextType,c=ho,typeof d=="object"&&d!==null&&(c=Mt(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==h||m!==c)&&N0(t,o,s,c),ea=!1,m=t.memoizedState,o.state=m,el(t,s,o,a),Ji();var g=t.memoizedState;i!==h||m!==g||ea||e!==null&&e.dependencies!==null&&vu(e.dependencies)?(typeof l=="function"&&(lf(t,n,l,s),g=t.memoizedState),(f=ea||S0(t,n,f,s,m,g,c)||e!==null&&e.dependencies!==null&&vu(e.dependencies))?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),o.props=s,o.state=g,o.context=c,s=f):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return o=s,Zi(e,t),s=(t.flags&128)!==0,o||s?(o=t.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&s?(t.child=wr(t,e.child,null,a),t.child=wr(t,null,n,a)):Nt(e,t,n,a),t.memoizedState=o.state,e=t.child):e=$s(e,t,a),e}function R0(e,t,n,s){return Ul(),t.flags|=256,Nt(e,t,n,s),t.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function uf(e){return{baseLanes:e,cachePool:Uy()}}function df(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=wn),e}function Eb(e,t,n){var s=t.pendingProps,a=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(gt.current&2)!==0),i&&(a=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ie){if(a?ta(t):na(),Ie){var l=jt,c;if(c=l){e:{for(c=l,l=Wn;c.nodeType!==8;){if(!l){l=null;break e}if(c=Un(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(t.memoizedState={dehydrated:l,treeContext:hr!==null?{id:_s,overflow:Os}:null,retryLane:536870912},c=bn(18,null,null,0),c.stateNode=l,c.return=t,t.child=c,It=t,jt=null,c=!0):c=!1}c||br(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return l.data==="$!"?t.lanes=16:t.lanes=536870912,null;Ds(t)}return l=s.children,s=s.fallback,a?(na(),a=t.mode,l=kh({mode:"hidden",children:l},a),s=pr(s,a,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,a=t.child,a.memoizedState=uf(n),a.childLanes=df(e,i,n),t.memoizedState=cf,s):(ta(t),Eh(t,l))}if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(o)t.flags&256?(ta(t),t.flags&=-257,t=ff(e,t,n)):t.memoizedState!==null?(na(),t.child=e.child,t.flags|=128,t=null):(na(),a=s.fallback,l=t.mode,s=kh({mode:"visible",children:s.children},l),a=pr(a,l,n,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,wr(t,e.child,null,n),s=t.child,s.memoizedState=uf(n),s.childLanes=df(e,i,n),t.memoizedState=cf,t=a);else if(ta(t),l.data==="$!"){if(i=l.nextSibling&&l.nextSibling.dataset,i)var d=i.dgst;i=d,s=Error(Z(419)),s.stack="",s.digest=i,hl({value:s,source:null,stack:null}),t=ff(e,t,n)}else if(wt||Hl(e,t,n,!1),i=(n&e.childLanes)!==0,wt||i){if(i=Ke,i!==null){if(s=n&-n,s&42)s=1;else switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=64;break;case 268435456:s=134217728;break;default:s=0}if(s=s&(i.suspendedLanes|n)?0:s,s!==0&&s!==c.retryLane)throw c.retryLane=s,Ta(e,s),Bt(i,e,s),Nb}l.data==="$?"||Uh(),t=ff(e,t,n)}else l.data==="$?"?(t.flags|=128,t.child=e.child,t=fk.bind(null,e),l._reactRetry=t,t=null):(e=c.treeContext,jt=Un(l.nextSibling),It=t,Ie=!0,Ln=null,Wn=!1,e!==null&&(mn[pn++]=_s,mn[pn++]=Os,mn[pn++]=hr,_s=e.id,Os=e.overflow,hr=t),t=Eh(t,s.children),t.flags|=4096);return t}return a?(na(),a=s.fallback,l=t.mode,c=e.child,d=c.sibling,s=ba(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&31457280,d!==null?a=ba(d,a):(a=pr(a,l,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=e.child.memoizedState,l===null?l=uf(n):(c=l.cachePool,c!==null?(d=mt._currentValue,c=c.parent!==d?{parent:d,pool:d}:c):c=Uy(),l={baseLanes:l.baseLanes|n,cachePool:c}),a.memoizedState=l,a.childLanes=df(e,i,n),t.memoizedState=cf,s):(ta(t),n=e.child,e=n.sibling,n=ba(n,{mode:"visible",children:s.children}),n.return=t,n.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Eh(e,t){return t=kh({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function kh(e,t){return Qb(e,t,0,null)}function ff(e,t,n){return wr(t,e.child,null,n),e=Eh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function M0(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Th(e.return,t,n)}function hf(e,t,n,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=a)}function kb(e,t,n){var s=t.pendingProps,a=s.revealOrder,o=s.tail;if(Nt(e,t,s.children,n),s=gt.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&M0(e,n,t);else if(e.tag===19)M0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(Je(gt,s),a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&hu(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),hf(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&hu(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}hf(t,!0,n,null,o);break;case"together":hf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $s(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),_a|=t.lanes,!(n&t.childLanes))if(e!==null){if(Hl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,n=ba(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ba(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bp(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&vu(e)))}function WE(e,t,n){switch(t.tag){case 3:au(t,t.stateNode.containerInfo),sa(t,mt,e.memoizedState.cache),Ul();break;case 27:case 5:ih(t);break;case 4:au(t,t.stateNode.containerInfo);break;case 10:sa(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(ta(t),t.flags|=128,null):n&t.child.childLanes?Eb(e,t,n):(ta(t),e=$s(e,t,n),e!==null?e.sibling:null);ta(t);break;case 19:var a=(e.flags&128)!==0;if(s=(n&t.childLanes)!==0,s||(Hl(e,t,n,!1),s=(n&t.childLanes)!==0),a){if(s)return kb(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Je(gt,gt.current),s)break;return null;case 22:case 23:return t.lanes=0,Cb(e,t,n);case 24:sa(t,mt,e.memoizedState.cache)}return $s(e,t,n)}function Ab(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)wt=!0;else{if(!bp(e,n)&&!(t.flags&128))return wt=!1,WE(e,t,n);wt=!!(e.flags&131072)}else wt=!1,Ie&&t.flags&1048576&&Oy(t,du,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,a=s._init;if(s=a(s._payload),t.type=s,typeof s=="function")jp(s)?(e=Nr(s,e),t.tag=1,t=T0(null,t,s,e,n)):(t.tag=0,t=Ch(null,t,s,e,n));else{if(s!=null){if(a=s.$$typeof,a===Fm){t.tag=11,t=C0(null,t,s,e,n);break e}else if(a===Ym){t.tag=14,t=E0(null,t,s,e,n);break e}}throw t=rh(s)||s,Error(Z(306,t,""))}}return t;case 0:return Ch(e,t,t.type,t.pendingProps,n);case 1:return s=t.type,a=Nr(s,t.pendingProps),T0(e,t,s,a,n);case 3:e:{if(au(t,t.stateNode.containerInfo),e===null)throw Error(Z(387));var o=t.pendingProps;a=t.memoizedState,s=a.element,Mh(e,t),el(t,o,null,n);var i=t.memoizedState;if(o=i.cache,sa(t,mt,o),o!==a.cache&&Rh(t,[mt],n,!0),Ji(),o=i.element,a.isDehydrated)if(a={element:o,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=R0(e,t,o,n);break e}else if(o!==s){s=yn(Error(Z(424)),t),hl(s),t=R0(e,t,o,n);break e}else for(jt=Un(t.stateNode.containerInfo.firstChild),It=t,Ie=!0,Ln=null,Wn=!0,n=Py(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ul(),o===s){t=$s(e,t,n);break e}Nt(e,t,o,n)}t=t.child}return t;case 26:return Zi(e,t),e===null?(n=X0(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ie||(n=t.type,e=t.pendingProps,s=Cu(xa.current).createElement(n),s[Rt]=t,s[Xt]=e,Et(s,n,e),bt(s),t.stateNode=s):t.memoizedState=X0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ih(t),e===null&&Ie&&(s=t.stateNode=fw(t.type,t.pendingProps,xa.current),It=t,Wn=!0,jt=Un(s.firstChild)),s=t.pendingProps.children,e!==null||Ie?Nt(e,t,s,n):t.child=wr(t,null,s,n),Zi(e,t),t.child;case 5:return e===null&&Ie&&((a=s=jt)&&(s=Ak(s,t.type,t.pendingProps,Wn),s!==null?(t.stateNode=s,It=t,jt=Un(s.firstChild),Wn=!1,a=!0):a=!1),a||br(t)),ih(t),a=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Vh(a,o)?s=null:i!==null&&Vh(a,i)&&(t.flags|=32),t.memoizedState!==null&&(a=cp(e,t,FE,null,null,n),yl._currentValue=a),Zi(e,t),Nt(e,t,s,n),t.child;case 6:return e===null&&Ie&&((e=n=jt)&&(n=Tk(n,t.pendingProps,Wn),n!==null?(t.stateNode=n,It=t,jt=null,e=!0):e=!1),e||br(t)),null;case 13:return Eb(e,t,n);case 4:return au(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=wr(t,null,s,n):Nt(e,t,s,n),t.child;case 11:return C0(e,t,t.type,t.pendingProps,n);case 7:return Nt(e,t,t.pendingProps,n),t.child;case 8:return Nt(e,t,t.pendingProps.children,n),t.child;case 12:return Nt(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,sa(t,t.type,s.value),Nt(e,t,s.children,n),t.child;case 9:return a=t.type._context,s=t.pendingProps.children,jr(t),a=Mt(a),s=s(a),t.flags|=1,Nt(e,t,s,n),t.child;case 14:return E0(e,t,t.type,t.pendingProps,n);case 15:return jb(e,t,t.type,t.pendingProps,n);case 19:return kb(e,t,n);case 22:return Cb(e,t,n);case 24:return jr(t),s=Mt(mt),e===null?(a=ip(),a===null&&(a=Ke,o=op(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:s,cache:a},wp(t),sa(t,mt,a)):(e.lanes&n&&(Mh(e,t),el(t,null,null,n),Ji()),a=e.memoizedState,o=t.memoizedState,a.parent!==s?(a={parent:s,cache:s},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),sa(t,mt,s)):(s=o.cache,sa(t,mt,s),s!==a.cache&&Rh(t,[mt],n,!0))),Nt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(Z(156,t.tag))}var Ah=hs(null),Br=null,Ls=null;function sa(e,t,n){Je(Ah,t._currentValue),t._currentValue=n}function zs(e){e._currentValue=Ah.current,St(Ah)}function Th(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Rh(e,t,n,s){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var i=a.child;o=o.firstContext;e:for(;o!==null;){var l=o;o=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Th(o.return,n,e),s||(i=null);break e}o=l.next}}else if(a.tag===18){if(i=a.return,i===null)throw Error(Z(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Th(i,n,e),i=null}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===e){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}}function Hl(e,t,n,s){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var i=a.alternate;if(i===null)throw Error(Z(387));if(i=i.memoizedProps,i!==null){var l=a.type;rn(a.pendingProps.value,i.value)||(e!==null?e.push(l):e=[l])}}else if(a===su.current){if(i=a.alternate,i===null)throw Error(Z(387));i.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(yl):e=[yl])}a=a.return}e!==null&&Rh(t,e,n,s),t.flags|=262144}function vu(e){for(e=e.firstContext;e!==null;){if(!rn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function jr(e){Br=e,Ls=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Mt(e){return Tb(Br,e)}function gc(e,t){return Br===null&&jr(e),Tb(e,t)}function Tb(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ls===null){if(e===null)throw Error(Z(308));Ls=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ls=Ls.next=t;return n}var ea=!1;function wp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function va(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ya(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,nt&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,t=cu(e),_y(e,null,n),t}return ed(e,s,t,n),cu(e)}function Wi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,ry(e,n)}}function mf(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?a=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,callbacks:s.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var _h=!1;function Ji(){if(_h){var e=So;if(e!==null)throw e}}function el(e,t,n,s){_h=!1;var a=e.updateQueue;ea=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==i&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(o!==null){var h=a.baseState;i=0,f=d=c=null,l=o;do{var m=l.lane&-536870913,g=m!==l.lane;if(g?(Pe&m)===m:(s&m)===m){m!==0&&m===Qo&&(_h=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var b=e,x=l;m=t;var w=n;switch(x.tag){case 1:if(b=x.payload,typeof b=="function"){h=b.call(w,h,m);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,m=typeof b=="function"?b.call(w,h,m):b,m==null)break e;h=We({},h,m);break e;case 2:ea=!0}}m=l.callback,m!==null&&(e.flags|=64,g&&(e.flags|=8192),g=a.callbacks,g===null?a.callbacks=[m]:g.push(m))}else g={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=g,c=h):f=f.next=g,i|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;g=l,l=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);f===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=f,o===null&&(a.shared.lanes=0),_a|=i,e.lanes=i,e.memoizedState=h}}function Rb(e,t){if(typeof e!="function")throw Error(Z(191,e));e.call(t)}function Mb(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Rb(n[e],t)}function ql(e,t){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var a=s.next;n=a;do{if((n.tag&e)===e){s=void 0;var o=n.create,i=n.inst;s=o(),i.destroy=s}n=n.next}while(n!==a)}}catch(l){Qe(t,t.return,l)}}function Ma(e,t,n){try{var s=t.updateQueue,a=s!==null?s.lastEffect:null;if(a!==null){var o=a.next;s=o;do{if((s.tag&e)===e){var i=s.inst,l=i.destroy;if(l!==void 0){i.destroy=void 0,a=t;var c=n;try{l()}catch(d){Qe(a,c,d)}}}s=s.next}while(s!==o)}}catch(d){Qe(t,t.return,d)}}function _b(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Mb(t,n)}catch(s){Qe(e,e.return,s)}}}function Ob(e,t,n){n.props=Nr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){Qe(e,t,s)}}function nr(e,t){try{var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 26:case 27:case 5:var a=s;break;default:a=s}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(o){Qe(e,t,o)}}function en(e,t){var n=e.ref,s=e.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(a){Qe(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){Qe(e,t,a)}else n.current=null}function Db(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(a){Qe(e,e.return,a)}}function _0(e,t,n){try{var s=e.stateNode;Nk(s,e.type,n,t),s[Xt]=t}catch(a){Qe(e,e.return,a)}}function Lb(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function pf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Oh(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=id));else if(s!==4&&s!==27&&(e=e.child,e!==null))for(Oh(e,t,n),e=e.sibling;e!==null;)Oh(e,t,n),e=e.sibling}function yu(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&s!==27&&(e=e.child,e!==null))for(yu(e,t,n),e=e.sibling;e!==null;)yu(e,t,n),e=e.sibling}var As=!1,at=!1,gf=!1,O0=typeof WeakSet=="function"?WeakSet:Set,yt=null,D0=!1;function JE(e,t){if(e=e.containerInfo,Hh=Tu,e=Cy(e),ep(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,d=0,f=0,h=e,m=null;t:for(;;){for(var g;h!==n||a!==0&&h.nodeType!==3||(l=i+a),h!==o||s!==0&&h.nodeType!==3||(c=i+s),h.nodeType===3&&(i+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===e)break t;if(m===n&&++d===a&&(l=i),m===o&&++f===s&&(c=i),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(qh={focusedElem:e,selectionRange:n},Tu=!1,yt=t;yt!==null;)if(t=yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,yt=e;else for(;yt!==null;){switch(t=yt,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,s=n.stateNode;try{var b=Nr(n.type,a,n.elementType===n.type);e=s.getSnapshotBeforeUpdate(b,o),s.__reactInternalSnapshotBeforeUpdate=e}catch(x){Qe(n,n.return,x)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Fh(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Fh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(Z(163))}if(e=t.sibling,e!==null){e.return=t.return,yt=e;break}yt=t.return}return b=D0,D0=!1,b}function zb(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:bs(e,n),s&4&&ql(5,n);break;case 1:if(bs(e,n),s&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(l){Qe(n,n.return,l)}else{var a=Nr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){Qe(n,n.return,l)}}s&64&&_b(n),s&512&&nr(n,n.return);break;case 3:if(bs(e,n),s&64&&(s=n.updateQueue,s!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Mb(s,e)}catch(l){Qe(n,n.return,l)}}break;case 26:bs(e,n),s&512&&nr(n,n.return);break;case 27:case 5:bs(e,n),t===null&&s&4&&Db(n),s&512&&nr(n,n.return);break;case 12:bs(e,n);break;case 13:bs(e,n),s&4&&Ub(e,n);break;case 22:if(a=n.memoizedState!==null||As,!a){t=t!==null&&t.memoizedState!==null||at;var o=As,i=at;As=a,(at=t)&&!i?Ks(e,n,(n.subtreeFlags&8772)!==0):bs(e,n),As=o,at=i}s&512&&(n.memoizedProps.mode==="manual"?nr(n,n.return):en(n,n.return));break;default:bs(e,n)}}function Pb(e){var t=e.alternate;t!==null&&(e.alternate=null,Pb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Qm(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ct=null,Zt=!1;function ys(e,t,n){for(n=n.child;n!==null;)Ib(e,t,n),n=n.sibling}function Ib(e,t,n){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Ll,n)}catch{}switch(n.tag){case 26:at||en(n,t),ys(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:at||en(n,t);var s=ct,a=Zt;for(ct=n.stateNode,ys(e,t,n),n=n.stateNode,t=n.attributes;t.length;)n.removeAttributeNode(t[0]);Qm(n),ct=s,Zt=a;break;case 5:at||en(n,t);case 6:a=ct;var o=Zt;if(ct=null,ys(e,t,n),ct=a,Zt=o,ct!==null)if(Zt)try{e=ct,s=n.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)}catch(i){Qe(n,t,i)}else try{ct.removeChild(n.stateNode)}catch(i){Qe(n,t,i)}break;case 18:ct!==null&&(Zt?(t=ct,n=n.stateNode,t.nodeType===8?Af(t.parentNode,n):t.nodeType===1&&Af(t,n),Sl(t)):Af(ct,n.stateNode));break;case 4:s=ct,a=Zt,ct=n.stateNode.containerInfo,Zt=!0,ys(e,t,n),ct=s,Zt=a;break;case 0:case 11:case 14:case 15:at||Ma(2,n,t),at||Ma(4,n,t),ys(e,t,n);break;case 1:at||(en(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"&&Ob(n,t,s)),ys(e,t,n);break;case 21:ys(e,t,n);break;case 22:at||en(n,t),at=(s=at)||n.memoizedState!==null,ys(e,t,n),at=s;break;default:ys(e,t,n)}}function Ub(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Sl(e)}catch(n){Qe(t,t.return,n)}}function ek(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new O0),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new O0),t;default:throw Error(Z(435,e.tag))}}function xf(e,t){var n=ek(e);t.forEach(function(s){var a=hk.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}function cn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s],o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 27:case 5:ct=l.stateNode,Zt=!1;break e;case 3:ct=l.stateNode.containerInfo,Zt=!0;break e;case 4:ct=l.stateNode.containerInfo,Zt=!0;break e}l=l.return}if(ct===null)throw Error(Z(160));Ib(o,i,a),ct=null,Zt=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Bb(t,e),t=t.sibling}var On=null;function Bb(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:cn(t,e),un(e),s&4&&(Ma(3,e,e.return),ql(3,e),Ma(5,e,e.return));break;case 1:cn(t,e),un(e),s&512&&(at||n===null||en(n,n.return)),s&64&&As&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var a=On;if(cn(t,e),un(e),s&512&&(at||n===null||en(n,n.return)),s&4){var o=n!==null?n.memoizedState:null;if(s=e.memoizedState,n===null)if(s===null)if(e.stateNode===null){e:{s=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(s){case"title":o=a.getElementsByTagName("title")[0],(!o||o[cl]||o[Rt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=a.createElement(s),a.head.insertBefore(o,a.querySelector("head > title"))),Et(o,s,n),o[Rt]=e,bt(o),s=o;break e;case"link":var i=Z0("link","href",a).get(s+(n.href||""));if(i){for(var l=0;l<i.length;l++)if(o=i[l],o.getAttribute("href")===(n.href==null?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){i.splice(l,1);break t}}o=a.createElement(s),Et(o,s,n),a.head.appendChild(o);break;case"meta":if(i=Z0("meta","content",a).get(s+(n.content||""))){for(l=0;l<i.length;l++)if(o=i[l],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){i.splice(l,1);break t}}o=a.createElement(s),Et(o,s,n),a.head.appendChild(o);break;default:throw Error(Z(468,s))}o[Rt]=e,bt(o),s=o}e.stateNode=s}else W0(a,e.type,e.stateNode);else e.stateNode=K0(a,s,e.memoizedProps);else o!==s?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,s===null?W0(a,e.type,e.stateNode):K0(a,s,e.memoizedProps)):s===null&&e.stateNode!==null&&_0(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(s&4&&e.alternate===null){a=e.stateNode,o=e.memoizedProps;try{for(var c=a.firstChild;c;){var d=c.nextSibling,f=c.nodeName;c[cl]||f==="HEAD"||f==="BODY"||f==="SCRIPT"||f==="STYLE"||f==="LINK"&&c.rel.toLowerCase()==="stylesheet"||a.removeChild(c),c=d}for(var h=e.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Et(a,h,o),a[Rt]=e,a[Xt]=o}catch(b){Qe(e,e.return,b)}}case 5:if(cn(t,e),un(e),s&512&&(at||n===null||en(n,n.return)),e.flags&32){a=e.stateNode;try{Yo(a,"")}catch(b){Qe(e,e.return,b)}}s&4&&e.stateNode!=null&&(a=e.memoizedProps,_0(e,a,n!==null?n.memoizedProps:a)),s&1024&&(gf=!0);break;case 6:if(cn(t,e),un(e),s&4){if(e.stateNode===null)throw Error(Z(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(b){Qe(e,e.return,b)}}break;case 3:if(Vc=null,a=On,On=Eu(t.containerInfo),cn(t,e),On=a,un(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Sl(t.containerInfo)}catch(b){Qe(e,e.return,b)}gf&&(gf=!1,$b(e));break;case 4:s=On,On=Eu(e.stateNode.containerInfo),cn(t,e),un(e),On=s;break;case 12:cn(t,e),un(e);break;case 13:cn(t,e),un(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(kp=ss()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,xf(e,s)));break;case 22:if(s&512&&(at||n===null||en(n,n.return)),c=e.memoizedState!==null,d=n!==null&&n.memoizedState!==null,f=As,h=at,As=f||c,at=h||d,cn(t,e),at=h,As=f,un(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,s&8192&&(t._visibility=c?t._visibility&-2:t._visibility|1,c&&(t=As||at,n===null||d||t||no(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(n=null,t=e;;){if(t.tag===5||t.tag===26||t.tag===27){if(n===null){d=n=t;try{if(a=d.stateNode,c)o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{i=d.stateNode,l=d.memoizedProps.style;var g=l!=null&&l.hasOwnProperty("display")?l.display:null;i.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(b){Qe(d,d.return,b)}}}else if(t.tag===6){if(n===null){d=t;try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){Qe(d,d.return,b)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,xf(e,n))));break;case 19:cn(t,e),un(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,xf(e,s)));break;case 21:break;default:cn(t,e),un(e)}}function un(e){var t=e.flags;if(t&2){try{if(e.tag!==27){e:{for(var n=e.return;n!==null;){if(Lb(n)){var s=n;break e}n=n.return}throw Error(Z(160))}switch(s.tag){case 27:var a=s.stateNode,o=pf(e);yu(e,o,a);break;case 5:var i=s.stateNode;s.flags&32&&(Yo(i,""),s.flags&=-33);var l=pf(e);yu(e,l,i);break;case 3:case 4:var c=s.stateNode.containerInfo,d=pf(e);Oh(e,d,c);break;default:throw Error(Z(161))}}}catch(f){Qe(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $b(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;$b(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function bs(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)zb(e,t.alternate,t),t=t.sibling}function no(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ma(4,t,t.return),no(t);break;case 1:en(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Ob(t,t.return,n),no(t);break;case 26:case 27:case 5:en(t,t.return),no(t);break;case 22:en(t,t.return),t.memoizedState===null&&no(t);break;default:no(t)}e=e.sibling}}function Ks(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,a=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:Ks(a,o,n),ql(4,o);break;case 1:if(Ks(a,o,n),s=o,a=s.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(d){Qe(s,s.return,d)}if(s=o,a=s.updateQueue,a!==null){var l=s.stateNode;try{var c=a.shared.hiddenCallbacks;if(c!==null)for(a.shared.hiddenCallbacks=null,a=0;a<c.length;a++)Rb(c[a],l)}catch(d){Qe(s,s.return,d)}}n&&i&64&&_b(o),nr(o,o.return);break;case 26:case 27:case 5:Ks(a,o,n),n&&s===null&&i&4&&Db(o),nr(o,o.return);break;case 12:Ks(a,o,n);break;case 13:Ks(a,o,n),n&&i&4&&Ub(a,o);break;case 22:o.memoizedState===null&&Ks(a,o,n),nr(o,o.return);break;default:Ks(a,o,n)}t=t.sibling}}function Sp(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Bl(n))}function Np(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bl(e))}function Qs(e,t,n,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hb(e,t,n,s),t=t.sibling}function Hb(e,t,n,s){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Qs(e,t,n,s),a&2048&&ql(9,t);break;case 3:Qs(e,t,n,s),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bl(e)));break;case 12:if(a&2048){Qs(e,t,n,s),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,l=o.onPostCommit;typeof l=="function"&&l(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){Qe(t,t.return,c)}}else Qs(e,t,n,s);break;case 23:break;case 22:o=t.stateNode,t.memoizedState!==null?o._visibility&4?Qs(e,t,n,s):tl(e,t):o._visibility&4?Qs(e,t,n,s):(o._visibility|=4,so(e,t,n,s,(t.subtreeFlags&10256)!==0)),a&2048&&Sp(t.alternate,t);break;case 24:Qs(e,t,n,s),a&2048&&Np(t.alternate,t);break;default:Qs(e,t,n,s)}}function so(e,t,n,s,a){for(a=a&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=e,i=t,l=n,c=s,d=i.flags;switch(i.tag){case 0:case 11:case 15:so(o,i,l,c,a),ql(8,i);break;case 23:break;case 22:var f=i.stateNode;i.memoizedState!==null?f._visibility&4?so(o,i,l,c,a):tl(o,i):(f._visibility|=4,so(o,i,l,c,a)),a&&d&2048&&Sp(i.alternate,i);break;case 24:so(o,i,l,c,a),a&&d&2048&&Np(i.alternate,i);break;default:so(o,i,l,c,a)}t=t.sibling}}function tl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,s=t,a=s.flags;switch(s.tag){case 22:tl(n,s),a&2048&&Sp(s.alternate,s);break;case 24:tl(n,s),a&2048&&Np(s.alternate,s);break;default:tl(n,s)}t=t.sibling}}var Ii=8192;function Xr(e){if(e.subtreeFlags&Ii)for(e=e.child;e!==null;)qb(e),e=e.sibling}function qb(e){switch(e.tag){case 26:Xr(e),e.flags&Ii&&e.memoizedState!==null&&Hk(On,e.memoizedState,e.memoizedProps);break;case 5:Xr(e);break;case 3:case 4:var t=On;On=Eu(e.stateNode.containerInfo),Xr(e),On=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Ii,Ii=16777216,Xr(e),Ii=t):Xr(e));break;default:Xr(e)}}function Vb(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ai(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];yt=s,Yb(s,e)}Vb(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Fb(e),e=e.sibling}function Fb(e){switch(e.tag){case 0:case 11:case 15:Ai(e),e.flags&2048&&Ma(9,e,e.return);break;case 3:Ai(e);break;case 12:Ai(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,$c(e)):Ai(e);break;default:Ai(e)}}function $c(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];yt=s,Yb(s,e)}Vb(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ma(8,t,t.return),$c(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,$c(t));break;default:$c(t)}e=e.sibling}}function Yb(e,t){for(;yt!==null;){var n=yt;switch(n.tag){case 0:case 11:case 15:Ma(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Bl(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,yt=s;else e:for(n=e;yt!==null;){s=yt;var a=s.sibling,o=s.return;if(Pb(s),s===n){yt=null;break e}if(a!==null){a.return=o,yt=a;break e}yt=o}}}function tk(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,n,s){return new tk(e,t,n,s)}function jp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ba(e,t){var n=e.alternate;return n===null?(n=bn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Gb(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hc(e,t,n,s,a,o){var i=0;if(s=e,typeof e=="function")jp(e)&&(i=1);else if(typeof e=="string")i=Bk(e,n,ns.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ro:return pr(n.children,a,o,t);case Qv:i=8,a|=24;break;case nh:return e=bn(12,n,t,a|2),e.elementType=nh,e.lanes=o,e;case sh:return e=bn(13,n,t,a),e.elementType=sh,e.lanes=o,e;case ah:return e=bn(19,n,t,a),e.elementType=ah,e.lanes=o,e;case Kv:return Qb(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case EC:case Ms:i=10;break e;case Xv:i=9;break e;case Fm:i=11;break e;case Ym:i=14;break e;case Js:i=16,s=null;break e}i=29,n=Error(Z(130,e===null?"null":typeof e,"")),s=null}return t=bn(i,n,t,a),t.elementType=e,t.type=s,t.lanes=o,t}function pr(e,t,n,s){return e=bn(7,e,s,t),e.lanes=n,e}function Qb(e,t,n,s){e=bn(22,e,s,t),e.elementType=Kv,e.lanes=n;var a={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var o=a._current;if(o===null)throw Error(Z(456));if(!(a._pendingVisibility&2)){var i=Ta(o,2);i!==null&&(a._pendingVisibility|=2,Bt(i,o,2))}},attach:function(){var o=a._current;if(o===null)throw Error(Z(456));if(a._pendingVisibility&2){var i=Ta(o,2);i!==null&&(a._pendingVisibility&=-3,Bt(i,o,2))}}};return e.stateNode=a,e}function vf(e,t,n){return e=bn(6,e,null,t),e.lanes=n,e}function yf(e,t,n){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ws(e){e.flags|=4}function L0(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!pw(t)){if(t=Cn.current,t!==null&&((Pe&4194176)===Pe?as!==null:(Pe&62914560)!==Pe&&!(Pe&536870912)||t!==as))throw Qi=xh,Dy;e.flags|=8192}}function xc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?sy():536870912,e.lanes|=t,Ko|=t)}function Ti(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&31457280,s|=a.flags&31457280,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function nk(e,t,n){var s=t.pendingProps;switch(ap(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return et(t),null;case 3:return n=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),zs(mt),Vo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ei(t)?ws(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ln!==null&&(Ih(Ln),Ln=null))),et(t),null;case 26:return n=t.memoizedState,e===null?(ws(t),n!==null?(et(t),L0(t,n)):(et(t),t.flags&=-16777217)):n?n!==e.memoizedState?(ws(t),et(t),L0(t,n)):(et(t),t.flags&=-16777217):(e.memoizedProps!==s&&ws(t),et(t),t.flags&=-16777217),null;case 27:ru(t),n=xa.current;var a=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ws(t);else{if(!s){if(t.stateNode===null)throw Error(Z(166));return et(t),null}e=ns.current,Ei(t)?d0(t):(e=fw(a,s,n),t.stateNode=e,ws(t))}return et(t),null;case 5:if(ru(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ws(t);else{if(!s){if(t.stateNode===null)throw Error(Z(166));return et(t),null}if(e=ns.current,Ei(t))d0(t);else{switch(a=Cu(xa.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?a.createElement(n,{is:s.is}):a.createElement(n)}}e[Rt]=t,e[Xt]=s;e:for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(Et(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ws(t)}}return et(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&ws(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Z(166));if(e=xa.current,Ei(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,a=It,a!==null)switch(a.tag){case 27:case 5:s=a.memoizedProps}e[Rt]=t,e=!!(e.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||cw(e.nodeValue,n)),e||br(t)}else e=Cu(e).createTextNode(s),e[Rt]=t,t.stateNode=e}return et(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Ei(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(Z(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Z(317));a[Rt]=t}else Ul(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;et(t),a=!1}else Ln!==null&&(Ih(Ln),Ln=null),a=!0;if(!a)return t.flags&256?(Ds(t),t):(Ds(t),null)}if(Ds(t),t.flags&128)return t.lanes=n,t;if(n=s!==null,e=e!==null&&e.memoizedState!==null,n){s=t.child,a=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(a=s.alternate.memoizedState.cachePool.pool);var o=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),xc(t,t.updateQueue),et(t),null;case 4:return Vo(),e===null&&Rp(t.stateNode.containerInfo),et(t),null;case 10:return zs(t.type),et(t),null;case 19:if(St(gt),a=t.memoizedState,a===null)return et(t),null;if(s=(t.flags&128)!==0,o=a.rendering,o===null)if(s)Ti(a,!1);else{if(rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=hu(e),o!==null){for(t.flags|=128,Ti(a,!1),e=o.updateQueue,t.updateQueue=e,xc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Gb(n,e),n=n.sibling;return Je(gt,gt.current&1|2),t.child}e=e.sibling}a.tail!==null&&ss()>bu&&(t.flags|=128,s=!0,Ti(a,!1),t.lanes=4194304)}else{if(!s)if(e=hu(o),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,xc(t,e),Ti(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ie)return et(t),null}else 2*ss()-a.renderingStartTime>bu&&n!==536870912&&(t.flags|=128,s=!0,Ti(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(e=a.last,e!==null?e.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ss(),t.sibling=null,e=gt.current,Je(gt,s?e&1|2:e&1),t):(et(t),null);case 22:case 23:return Ds(t),rp(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?n&536870912&&!(t.flags&128)&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),n=t.updateQueue,n!==null&&xc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),e!==null&&St(mr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),zs(mt),et(t),null;case 25:return null}throw Error(Z(156,t.tag))}function sk(e,t){switch(ap(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zs(mt),Vo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ru(t),null;case 13:if(Ds(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));Ul()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return St(gt),null;case 4:return Vo(),null;case 10:return zs(t.type),null;case 22:case 23:return Ds(t),rp(),e!==null&&St(mr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return zs(mt),null;case 25:return null;default:return null}}function Xb(e,t){switch(ap(t),t.tag){case 3:zs(mt),Vo();break;case 26:case 27:case 5:ru(t);break;case 4:Vo();break;case 13:Ds(t);break;case 19:St(gt);break;case 10:zs(t.type);break;case 22:case 23:Ds(t),rp(),e!==null&&St(mr);break;case 24:zs(mt)}}var ak={getCacheForType:function(e){var t=Mt(mt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},rk=typeof WeakMap=="function"?WeakMap:Map,nt=0,Ke=null,Te=null,Pe=0,Xe=0,Wt=null,Ts=!1,ci=!1,Cp=!1,Hs=0,rt=0,_a=0,gr=0,Ep=0,wn=0,Ko=0,nl=null,Jn=null,Dh=!1,kp=0,bu=1/0,wu=null,wa=null,vc=!1,er=null,sl=0,Lh=0,zh=null,al=0,Ph=null;function sn(){if(nt&2&&Pe!==0)return Pe&-Pe;if(Se.T!==null){var e=Qo;return e!==0?e:Tp()}return iy()}function Kb(){wn===0&&(wn=!(Pe&536870912)||Ie?ny():536870912);var e=Cn.current;return e!==null&&(e.flags|=32),wn}function Bt(e,t,n){(e===Ke&&Xe===2||e.cancelPendingCommit!==null)&&(Zo(e,0),Rs(e,Pe,wn,!1)),Pl(e,n),(!(nt&2)||e!==Ke)&&(e===Ke&&(!(nt&2)&&(gr|=n),rt===4&&Rs(e,Pe,wn,!1)),ms(e))}function Zb(e,t,n){if(nt&6)throw Error(Z(327));var s=!n&&(t&60)===0&&(t&e.expiredLanes)===0||zl(e,t),a=s?lk(e,t):bf(e,t,!0),o=s;do{if(a===0){ci&&!s&&Rs(e,t,0,!1);break}else if(a===6)Rs(e,t,0,!Ts);else{if(n=e.current.alternate,o&&!ok(n)){a=bf(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var l=e;a=nl;var c=l.current.memoizedState.isDehydrated;if(c&&(Zo(l,i).flags|=256),i=bf(l,i,!1),i!==2){if(Cp&&!c){l.errorRecoveryDisabledLanes|=o,gr|=o,a=4;break e}o=Jn,Jn=a,o!==null&&Ih(o)}a=i}if(o=!1,a!==2)continue}}if(a===1){Zo(e,0),Rs(e,t,0,!0);break}e:{switch(s=e,a){case 0:case 1:throw Error(Z(345));case 4:if((t&4194176)===t){Rs(s,t,wn,!Ts);break e}break;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(Z(329))}if(s.finishedWork=n,s.finishedLanes=t,(t&62914560)===t&&(o=kp+300-ss(),10<o)){if(Rs(s,t,wn,!Ts),Xu(s,0)!==0)break e;s.timeoutHandle=dw(z0.bind(null,s,n,Jn,wu,Dh,t,wn,gr,Ko,Ts,2,-0,0),o);break e}z0(s,n,Jn,wu,Dh,t,wn,gr,Ko,Ts,0,-0,0)}}break}while(!0);ms(e)}function Ih(e){Jn===null?Jn=e:Jn.push.apply(Jn,e)}function z0(e,t,n,s,a,o,i,l,c,d,f,h,m){var g=t.subtreeFlags;if((g&8192||(g&16785408)===16785408)&&(vl={stylesheets:null,count:0,unsuspend:$k},qb(t),t=qk(),t!==null)){e.cancelPendingCommit=t(I0.bind(null,e,n,s,a,i,l,c,1,h,m)),Rs(e,o,i,!d);return}I0(e,n,s,a,i,l,c,f,h,m)}function ok(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var a=n[s],o=a.getSnapshot;a=a.value;try{if(!rn(o(),a))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rs(e,t,n,s){t&=~Ep,t&=~gr,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var a=t;0<a;){var o=31-nn(a),i=1<<o;s[o]=-1,a&=~i}n!==0&&ay(e,n,t)}function rd(){return nt&6?!0:(Vl(0),!1)}function Ap(){if(Te!==null){if(Xe===0)var e=Te.return;else e=Te,Ls=Br=null,fp(e),wo=null,ml=0,e=Te;for(;e!==null;)Xb(e.alternate,e),e=e.return;Te=null}}function Zo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Ck(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Ap(),Ke=e,Te=n=ba(e.current,null),Pe=t,Xe=0,Wt=null,Ts=!1,ci=zl(e,t),Cp=!1,Ko=wn=Ep=gr=_a=rt=0,Jn=nl=null,Dh=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var a=31-nn(s),o=1<<a;t|=e[a],s&=~o}return Hs=t,Ju(),n}function Wb(e,t){ke=null,Se.H=ls,t===Gi?(t=m0(),Xe=3):t===Dy?(t=m0(),Xe=4):Xe=t===Nb?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Wt=t,Te===null&&(rt=1,xu(e,yn(t,e.current)))}function Jb(){var e=Se.H;return Se.H=ls,e===null?ls:e}function ew(){var e=Se.A;return Se.A=ak,e}function Uh(){rt=4,Ts||(Pe&4194176)!==Pe&&Cn.current!==null||(ci=!0),!(_a&134217727)&&!(gr&134217727)||Ke===null||Rs(Ke,Pe,wn,!1)}function bf(e,t,n){var s=nt;nt|=2;var a=Jb(),o=ew();(Ke!==e||Pe!==t)&&(wu=null,Zo(e,t)),t=!1;var i=rt;e:do try{if(Xe!==0&&Te!==null){var l=Te,c=Wt;switch(Xe){case 8:Ap(),i=6;break e;case 3:case 2:case 6:Cn.current===null&&(t=!0);var d=Xe;if(Xe=0,Wt=null,go(e,l,c,d),n&&ci){i=0;break e}break;default:d=Xe,Xe=0,Wt=null,go(e,l,c,d)}}ik(),i=rt;break}catch(f){Wb(e,f)}while(!0);return t&&e.shellSuspendCounter++,Ls=Br=null,nt=s,Se.H=a,Se.A=o,Te===null&&(Ke=null,Pe=0,Ju()),i}function ik(){for(;Te!==null;)tw(Te)}function lk(e,t){var n=nt;nt|=2;var s=Jb(),a=ew();Ke!==e||Pe!==t?(wu=null,bu=ss()+500,Zo(e,t)):ci=zl(e,t);e:do try{if(Xe!==0&&Te!==null){t=Te;var o=Wt;t:switch(Xe){case 1:Xe=0,Wt=null,go(e,t,o,1);break;case 2:if(h0(o)){Xe=0,Wt=null,P0(t);break}t=function(){Xe===2&&Ke===e&&(Xe=7),ms(e)},o.then(t,t);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:h0(o)?(Xe=0,Wt=null,P0(t)):(Xe=0,Wt=null,go(e,t,o,7));break;case 5:var i=null;switch(Te.tag){case 26:i=Te.memoizedState;case 5:case 27:var l=Te;if(!i||pw(i)){Xe=0,Wt=null;var c=l.sibling;if(c!==null)Te=c;else{var d=l.return;d!==null?(Te=d,od(d)):Te=null}break t}}Xe=0,Wt=null,go(e,t,o,5);break;case 6:Xe=0,Wt=null,go(e,t,o,6);break;case 8:Ap(),rt=6;break e;default:throw Error(Z(462))}}ck();break}catch(f){Wb(e,f)}while(!0);return Ls=Br=null,Se.H=s,Se.A=a,nt=n,Te!==null?0:(Ke=null,Pe=0,Ju(),rt)}function ck(){for(;Te!==null&&!MC();)tw(Te)}function tw(e){var t=Ab(e.alternate,e,Hs);e.memoizedProps=e.pendingProps,t===null?od(e):Te=t}function P0(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=A0(n,t,t.pendingProps,t.type,void 0,Pe);break;case 11:t=A0(n,t,t.pendingProps,t.type.render,t.ref,Pe);break;case 5:fp(t);default:Xb(n,t),t=Te=Gb(t,Hs),t=Ab(n,t,Hs)}e.memoizedProps=e.pendingProps,t===null?od(e):Te=t}function go(e,t,n,s){Ls=Br=null,fp(t),wo=null,ml=0;var a=t.return;try{if(ZE(e,a,t,n,Pe)){rt=1,xu(e,yn(n,e.current)),Te=null;return}}catch(o){if(a!==null)throw Te=a,o;rt=1,xu(e,yn(n,e.current)),Te=null;return}t.flags&32768?(Ie||s===1?e=!0:ci||Pe&536870912?e=!1:(Ts=e=!0,(s===2||s===3||s===6)&&(s=Cn.current,s!==null&&s.tag===13&&(s.flags|=16384))),nw(t,e)):od(t)}function od(e){var t=e;do{if(t.flags&32768){nw(t,Ts);return}e=t.return;var n=nk(t.alternate,t,Hs);if(n!==null){Te=n;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);rt===0&&(rt=5)}function nw(e,t){do{var n=sk(e.alternate,e);if(n!==null){n.flags&=32767,Te=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Te=e;return}Te=e=n}while(e!==null);rt=6,Te=null}function I0(e,t,n,s,a,o,i,l,c,d){var f=Se.T,h=Ze.p;try{Ze.p=2,Se.T=null,uk(e,t,n,s,h,a,o,i,l,c,d)}finally{Se.T=f,Ze.p=h}}function uk(e,t,n,s,a,o,i,l){do Co();while(er!==null);if(nt&6)throw Error(Z(327));var c=e.finishedWork;if(s=e.finishedLanes,c===null)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var d=c.lanes|c.childLanes;if(d|=tp,HC(e,s,d,o,i,l),e===Ke&&(Te=Ke=null,Pe=0),!(c.subtreeFlags&10256)&&!(c.flags&10256)||vc||(vc=!0,Lh=d,zh=n,mk(ou,function(){return Co(),null})),n=(c.flags&15990)!==0,c.subtreeFlags&15990||n?(n=Se.T,Se.T=null,o=Ze.p,Ze.p=2,i=nt,nt|=4,JE(e,c),Bb(c,e),DE(qh,e.containerInfo),Tu=!!Hh,qh=Hh=null,e.current=c,zb(e,c.alternate,c),_C(),nt=i,Ze.p=o,Se.T=n):e.current=c,vc?(vc=!1,er=e,sl=s):sw(e,d),d=e.pendingLanes,d===0&&(wa=null),PC(c.stateNode),ms(e),t!==null)for(a=e.onRecoverableError,c=0;c<t.length;c++)d=t[c],a(d.value,{componentStack:d.stack});return sl&3&&Co(),d=e.pendingLanes,s&4194218&&d&42?e===Ph?al++:(al=0,Ph=e):al=0,Vl(0),null}function sw(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Bl(t)))}function Co(){if(er!==null){var e=er,t=Lh;Lh=0;var n=oy(sl),s=Se.T,a=Ze.p;try{if(Ze.p=32>n?32:n,Se.T=null,er===null)var o=!1;else{n=zh,zh=null;var i=er,l=sl;if(er=null,sl=0,nt&6)throw Error(Z(331));var c=nt;if(nt|=4,Fb(i.current),Hb(i,i.current,l,n),nt=c,Vl(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Ll,i)}catch{}o=!0}return o}finally{Ze.p=a,Se.T=s,sw(e,t)}}return!1}function U0(e,t,n){t=yn(n,t),t=jh(e.stateNode,t,2),e=ya(e,t,2),e!==null&&(Pl(e,2),ms(e))}function Qe(e,t,n){if(e.tag===3)U0(e,e,n);else for(;t!==null;){if(t.tag===3){U0(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(wa===null||!wa.has(s))){e=yn(n,e),n=wb(2),s=ya(t,n,2),s!==null&&(Sb(n,s,t,e),Pl(s,2),ms(s));break}}t=t.return}}function wf(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new rk;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(Cp=!0,a.add(n),e=dk.bind(null,e,t,n),t.then(e,e))}function dk(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ke===e&&(Pe&n)===n&&(rt===4||rt===3&&(Pe&62914560)===Pe&&300>ss()-kp?!(nt&2)&&Zo(e,0):Ep|=n,Ko===Pe&&(Ko=0)),ms(e)}function aw(e,t){t===0&&(t=sy()),e=Ta(e,t),e!==null&&(Pl(e,t),ms(e))}function fk(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),aw(e,n)}function hk(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(Z(314))}s!==null&&s.delete(t),aw(e,n)}function mk(e,t){return Gm(e,t)}var Su=null,ao=null,Bh=!1,Nu=!1,Sf=!1,xr=0;function ms(e){e!==ao&&e.next===null&&(ao===null?Su=ao=e:ao=ao.next=e),Nu=!0,Bh||(Bh=!0,gk(pk))}function Vl(e,t){if(!Sf&&Nu){Sf=!0;do for(var n=!1,s=Su;s!==null;){if(e!==0){var a=s.pendingLanes;if(a===0)var o=0;else{var i=s.suspendedLanes,l=s.pingedLanes;o=(1<<31-nn(42|e)+1)-1,o&=a&~(i&~l),o=o&201326677?o&201326677|1:o?o|2:0}o!==0&&(n=!0,B0(s,o))}else o=Pe,o=Xu(s,s===Ke?o:0),!(o&3)||zl(s,o)||(n=!0,B0(s,o));s=s.next}while(n);Sf=!1}}function pk(){Nu=Bh=!1;var e=0;xr!==0&&(jk()&&(e=xr),xr=0);for(var t=ss(),n=null,s=Su;s!==null;){var a=s.next,o=rw(s,t);o===0?(s.next=null,n===null?Su=a:n.next=a,a===null&&(ao=n)):(n=s,(e!==0||o&3)&&(Nu=!0)),s=a}Vl(e)}function rw(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var i=31-nn(o),l=1<<i,c=a[i];c===-1?(!(l&n)||l&s)&&(a[i]=$C(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}if(t=Ke,n=Pe,n=Xu(e,e===t?n:0),s=e.callbackNode,n===0||e===t&&Xe===2||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Zd(s),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||zl(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(s!==null&&Zd(s),oy(n)){case 2:case 8:n=ey;break;case 32:n=ou;break;case 268435456:n=ty;break;default:n=ou}return s=ow.bind(null,e),n=Gm(n,s),e.callbackPriority=t,e.callbackNode=n,t}return s!==null&&s!==null&&Zd(s),e.callbackPriority=2,e.callbackNode=null,2}function ow(e,t){var n=e.callbackNode;if(Co()&&e.callbackNode!==n)return null;var s=Pe;return s=Xu(e,e===Ke?s:0),s===0?null:(Zb(e,s,t),rw(e,ss()),e.callbackNode!=null&&e.callbackNode===n?ow.bind(null,e):null)}function B0(e,t){if(Co())return null;Zb(e,t,!0)}function gk(e){Ek(function(){nt&6?Gm(Jv,e):e()})}function Tp(){return xr===0&&(xr=ny()),xr}function $0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Lc(""+e)}function H0(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function xk(e,t,n,s,a){if(t==="submit"&&n&&n.stateNode===a){var o=$0((a[Xt]||null).action),i=s.submitter;i&&(t=(t=i[Xt]||null)?$0(t.formAction):i.getAttribute("formAction"),t!==null&&(o=t,i=null));var l=new Ku("action","action",null,s,a);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(xr!==0){var c=i?H0(a,i):new FormData(a);Sh(n,{pending:!0,data:c,method:a.method,action:o},null,c)}}else typeof o=="function"&&(l.preventDefault(),c=i?H0(a,i):new FormData(a),Sh(n,{pending:!0,data:c,method:a.method,action:o},o,c))},currentTarget:a}]})}}for(var Nf=0;Nf<c0.length;Nf++){var jf=c0[Nf],vk=jf.toLowerCase(),yk=jf[0].toUpperCase()+jf.slice(1);Yn(vk,"on"+yk)}Yn(ky,"onAnimationEnd");Yn(Ay,"onAnimationIteration");Yn(Ty,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn(zE,"onTransitionRun");Yn(PE,"onTransitionStart");Yn(IE,"onTransitionCancel");Yn(Ry,"onTransitionEnd");Fo("onMouseEnter",["mouseout","mouseover"]);Fo("onMouseLeave",["mouseout","mouseover"]);Fo("onPointerEnter",["pointerout","pointerover"]);Fo("onPointerLeave",["pointerout","pointerover"]);Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gl));function iw(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;o=l,a.currentTarget=d;try{o(a)}catch(f){gu(f)}a.currentTarget=null,o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;o=l,a.currentTarget=d;try{o(a)}catch(f){gu(f)}a.currentTarget=null,o=c}}}}function Oe(e,t){var n=t[ch];n===void 0&&(n=t[ch]=new Set);var s=e+"__bubble";n.has(s)||(lw(t,e,2,!1),n.add(s))}function Cf(e,t,n){var s=0;t&&(s|=4),lw(n,e,s,t)}var yc="_reactListening"+Math.random().toString(36).slice(2);function Rp(e){if(!e[yc]){e[yc]=!0,ly.forEach(function(n){n!=="selectionchange"&&(bk.has(n)||Cf(n,!1,e),Cf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yc]||(t[yc]=!0,Cf("selectionchange",!1,t))}}function lw(e,t,n,s){switch(bw(t)){case 2:var a=Yk;break;case 8:a=Gk;break;default:a=Dp}n=a.bind(null,t,n,e),a=void 0,!hh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ef(e,t,n,s,a){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=tr(l),i===null)return;if(c=i.tag,c===5||c===6||c===26||c===27){s=o=i;continue e}l=l.parentNode}}s=s.return}gy(function(){var d=o,f=Km(n),h=[];e:{var m=My.get(e);if(m!==void 0){var g=Ku,b=e;switch(e){case"keypress":if(Pc(n)===0)break e;case"keydown":case"keyup":g=hE;break;case"focusin":b="focus",g=nf;break;case"focusout":b="blur",g=nf;break;case"beforeblur":case"afterblur":g=nf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Zg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=tE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=gE;break;case ky:case Ay:case Ty:g=aE;break;case Ry:g=vE;break;case"scroll":case"scrollend":g=JC;break;case"wheel":g=bE;break;case"copy":case"cut":case"paste":g=oE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Jg;break;case"toggle":case"beforetoggle":g=SE}var x=(t&4)!==0,w=!x&&(e==="scroll"||e==="scrollend"),v=x?m!==null?m+"Capture":null:m;x=[];for(var p=d,y;p!==null;){var S=p;if(y=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||y===null||v===null||(S=ul(p,v),S!=null&&x.push(xl(p,S,y))),w)break;p=p.return}0<x.length&&(m=new g(m,b,null,n,f),h.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==fh&&(b=n.relatedTarget||n.fromElement)&&(tr(b)||b[ii]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(b=n.relatedTarget||n.toElement,g=d,b=b?tr(b):null,b!==null&&(w=oi(b),x=b.tag,b!==w||x!==5&&x!==27&&x!==6)&&(b=null)):(g=null,b=d),g!==b)){if(x=Zg,S="onMouseLeave",v="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(x=Jg,S="onPointerLeave",v="onPointerEnter",p="pointer"),w=g==null?m:Pi(g),y=b==null?m:Pi(b),m=new x(S,p+"leave",g,n,f),m.target=w,m.relatedTarget=y,S=null,tr(f)===d&&(x=new x(v,p+"enter",b,n,f),x.target=y,x.relatedTarget=w,S=x),w=S,g&&b)t:{for(x=g,v=b,p=0,y=x;y;y=Kr(y))p++;for(y=0,S=v;S;S=Kr(S))y++;for(;0<p-y;)x=Kr(x),p--;for(;0<y-p;)v=Kr(v),y--;for(;p--;){if(x===v||v!==null&&x===v.alternate)break t;x=Kr(x),v=Kr(v)}x=null}else x=null;g!==null&&q0(h,m,g,x,!1),b!==null&&w!==null&&q0(h,w,b,x,!0)}}e:{if(m=d?Pi(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var j=s0;else if(n0(m))if(Sy)j=_E;else{j=RE;var k=TE}else g=m.nodeName,!g||g.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?d&&Xm(d.elementType)&&(j=s0):j=ME;if(j&&(j=j(e,d))){wy(h,j,n,f);break e}k&&k(e,m,d),e==="focusout"&&d&&m.type==="number"&&d.memoizedProps.value!=null&&dh(m,"number",m.value)}switch(k=d?Pi(d):window,e){case"focusin":(n0(k)||k.contentEditable==="true")&&(co=k,mh=d,Yi=null);break;case"focusout":Yi=mh=co=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,l0(h,n,f);break;case"selectionchange":if(LE)break;case"keydown":case"keyup":l0(h,n,f)}var N;if(Jm)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else lo?yy(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(vy&&n.locale!=="ko"&&(lo||E!=="onCompositionStart"?E==="onCompositionEnd"&&lo&&(N=xy()):(ga=f,Zm="value"in ga?ga.value:ga.textContent,lo=!0)),k=ju(d,E),0<k.length&&(E=new Wg(E,e,null,n,f),h.push({event:E,listeners:k}),N?E.data=N:(N=by(n),N!==null&&(E.data=N)))),(N=jE?CE(e,n):EE(e,n))&&(E=ju(d,"onBeforeInput"),0<E.length&&(k=new Wg("onBeforeInput","beforeinput",null,n,f),h.push({event:k,listeners:E}),k.data=N)),xk(h,e,d,n,f)}iw(h,t)})}function xl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ju(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,o=a.stateNode;a=a.tag,a!==5&&a!==26&&a!==27||o===null||(a=ul(e,n),a!=null&&s.unshift(xl(e,a,o)),a=ul(e,t),a!=null&&s.push(xl(e,a,o))),e=e.return}return s}function Kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function q0(e,t,n,s,a){for(var o=t._reactName,i=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||d===null||(c=d,a?(d=ul(n,o),d!=null&&i.unshift(xl(n,d,c))):a||(d=ul(n,o),d!=null&&i.push(xl(n,d,c)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var wk=/\r\n?/g,Sk=/\u0000|\uFFFD/g;function V0(e){return(typeof e=="string"?e:""+e).replace(wk,`
`).replace(Sk,"")}function cw(e,t){return t=V0(t),V0(e)===t}function id(){}function Ve(e,t,n,s,a,o){switch(n){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Yo(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Yo(e,""+s);break;case"className":dc(e,"class",s);break;case"tabIndex":dc(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":dc(e,n,s);break;case"style":py(e,s,o);break;case"data":if(t!=="object"){dc(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=Lc(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&Ve(e,t,"name",a.name,a,null),Ve(e,t,"formEncType",a.formEncType,a,null),Ve(e,t,"formMethod",a.formMethod,a,null),Ve(e,t,"formTarget",a.formTarget,a,null)):(Ve(e,t,"encType",a.encType,a,null),Ve(e,t,"method",a.method,a,null),Ve(e,t,"target",a.target,a,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=Lc(""+s),e.setAttribute(n,s);break;case"onClick":s!=null&&(e.onclick=id);break;case"onScroll":s!=null&&Oe("scroll",e);break;case"onScrollEnd":s!=null&&Oe("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Z(61));if(n=s.__html,n!=null){if(a.children!=null)throw Error(Z(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}n=Lc(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":s===!0?e.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Oe("beforetoggle",e),Oe("toggle",e),Dc(e,"popover",s);break;case"xlinkActuate":vs(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":vs(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":vs(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":vs(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":vs(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":vs(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":vs(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":vs(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":vs(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Dc(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=ZC.get(n)||n,Dc(e,n,s))}}function $h(e,t,n,s,a,o){switch(n){case"style":py(e,s,o);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(Z(61));if(n=s.__html,n!=null){if(a.children!=null)throw Error(Z(60));e.innerHTML=n}}break;case"children":typeof s=="string"?Yo(e,s):(typeof s=="number"||typeof s=="bigint")&&Yo(e,""+s);break;case"onScroll":s!=null&&Oe("scroll",e);break;case"onScrollEnd":s!=null&&Oe("scrollend",e);break;case"onClick":s!=null&&(e.onclick=id);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cy.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),o=e[Xt]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,a),typeof s=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,a);break e}n in e?e[n]=s:s===!0?e.setAttribute(n,""):Dc(e,n,s)}}}function Et(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",e),Oe("load",e);var s=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var i=n[o];if(i!=null)switch(o){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Z(137,t));default:Ve(e,t,o,i,n,null)}}a&&Ve(e,t,"srcSet",n.srcSet,n,null),s&&Ve(e,t,"src",n.src,n,null);return;case"input":Oe("invalid",e);var l=o=i=a=null,c=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var f=n[s];if(f!=null)switch(s){case"name":a=f;break;case"type":i=f;break;case"checked":c=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(Z(137,t));break;default:Ve(e,t,s,f,n,null)}}fy(e,o,l,c,d,i,a,!1),iu(e);return;case"select":Oe("invalid",e),s=i=o=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":o=l;break;case"defaultValue":i=l;break;case"multiple":s=l;default:Ve(e,t,a,l,n,null)}t=o,n=i,e.multiple=!!s,t!=null?yo(e,!!s,t,!1):n!=null&&yo(e,!!s,n,!0);return;case"textarea":Oe("invalid",e),o=a=s=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":a=l;break;case"children":o=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(Z(91));break;default:Ve(e,t,i,l,n,null)}my(e,s,a,o),iu(e);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ve(e,t,c,s,n,null)}return;case"dialog":Oe("cancel",e),Oe("close",e);break;case"iframe":case"object":Oe("load",e);break;case"video":case"audio":for(s=0;s<gl.length;s++)Oe(gl[s],e);break;case"image":Oe("error",e),Oe("load",e);break;case"details":Oe("toggle",e);break;case"embed":case"source":case"link":Oe("error",e),Oe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(s=n[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(Z(137,t));default:Ve(e,t,d,s,n,null)}return;default:if(Xm(t)){for(f in n)n.hasOwnProperty(f)&&(s=n[f],s!==void 0&&$h(e,t,f,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&Ve(e,t,l,s,n,null))}function Nk(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,o=null,i=null,l=null,c=null,d=null,f=null;for(g in n){var h=n[g];if(n.hasOwnProperty(g)&&h!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(g)||Ve(e,t,g,null,s,h)}}for(var m in s){var g=s[m];if(h=n[m],s.hasOwnProperty(m)&&(g!=null||h!=null))switch(m){case"type":o=g;break;case"name":a=g;break;case"checked":d=g;break;case"defaultChecked":f=g;break;case"value":i=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(Z(137,t));break;default:g!==h&&Ve(e,t,m,g,s,h)}}uh(e,i,l,c,d,f,o,a);return;case"select":g=i=l=m=null;for(o in n)if(c=n[o],n.hasOwnProperty(o)&&c!=null)switch(o){case"value":break;case"multiple":g=c;default:s.hasOwnProperty(o)||Ve(e,t,o,null,s,c)}for(a in s)if(o=s[a],c=n[a],s.hasOwnProperty(a)&&(o!=null||c!=null))switch(a){case"value":m=o;break;case"defaultValue":l=o;break;case"multiple":i=o;default:o!==c&&Ve(e,t,a,o,s,c)}t=l,n=i,s=g,m!=null?yo(e,!!n,m,!1):!!s!=!!n&&(t!=null?yo(e,!!n,t,!0):yo(e,!!n,n?[]:"",!1));return;case"textarea":g=m=null;for(l in n)if(a=n[l],n.hasOwnProperty(l)&&a!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ve(e,t,l,null,s,a)}for(i in s)if(a=s[i],o=n[i],s.hasOwnProperty(i)&&(a!=null||o!=null))switch(i){case"value":m=a;break;case"defaultValue":g=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(Z(91));break;default:a!==o&&Ve(e,t,i,a,s,o)}hy(e,m,g);return;case"option":for(var b in n)if(m=n[b],n.hasOwnProperty(b)&&m!=null&&!s.hasOwnProperty(b))switch(b){case"selected":e.selected=!1;break;default:Ve(e,t,b,null,s,m)}for(c in s)if(m=s[c],g=n[c],s.hasOwnProperty(c)&&m!==g&&(m!=null||g!=null))switch(c){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ve(e,t,c,m,s,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!=null&&!s.hasOwnProperty(x)&&Ve(e,t,x,null,s,m);for(d in s)if(m=s[d],g=n[d],s.hasOwnProperty(d)&&m!==g&&(m!=null||g!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(Z(137,t));break;default:Ve(e,t,d,m,s,g)}return;default:if(Xm(t)){for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!==void 0&&!s.hasOwnProperty(w)&&$h(e,t,w,void 0,s,m);for(f in s)m=s[f],g=n[f],!s.hasOwnProperty(f)||m===g||m===void 0&&g===void 0||$h(e,t,f,m,s,g);return}}for(var v in n)m=n[v],n.hasOwnProperty(v)&&m!=null&&!s.hasOwnProperty(v)&&Ve(e,t,v,null,s,m);for(h in s)m=s[h],g=n[h],!s.hasOwnProperty(h)||m===g||m==null&&g==null||Ve(e,t,h,m,s,g)}var Hh=null,qh=null;function Cu(e){return e.nodeType===9?e:e.ownerDocument}function F0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uw(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Vh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kf=null;function jk(){var e=window.event;return e&&e.type==="popstate"?e===kf?!1:(kf=e,!0):(kf=null,!1)}var dw=typeof setTimeout=="function"?setTimeout:void 0,Ck=typeof clearTimeout=="function"?clearTimeout:void 0,Y0=typeof Promise=="function"?Promise:void 0,Ek=typeof queueMicrotask=="function"?queueMicrotask:typeof Y0<"u"?function(e){return Y0.resolve(null).then(e).catch(kk)}:dw;function kk(e){setTimeout(function(){throw e})}function Af(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Sl(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Sl(t)}function Fh(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Fh(n),Qm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Ak(e,t,n,s){for(;e.nodeType===1;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[cl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==a.rel||e.getAttribute("href")!==(a.href==null?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=Un(e.nextSibling),e===null)break}return null}function Tk(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Un(e.nextSibling),e===null))return null;return e}function Un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}function G0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function fw(e,t,n){switch(t=Cu(n),e){case"html":if(e=t.documentElement,!e)throw Error(Z(452));return e;case"head":if(e=t.head,!e)throw Error(Z(453));return e;case"body":if(e=t.body,!e)throw Error(Z(454));return e;default:throw Error(Z(451))}}var En=new Map,Q0=new Set;function Eu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var Ys=Ze.d;Ze.d={f:Rk,r:Mk,D:_k,C:Ok,L:Dk,m:Lk,X:Pk,S:zk,M:Ik};function Rk(){var e=Ys.f(),t=rd();return e||t}function Mk(e){var t=li(e);t!==null&&t.tag===5&&t.type==="form"?fb(t):Ys.r(e)}var ui=typeof document>"u"?null:document;function hw(e,t,n){var s=ui;if(s&&typeof t=="string"&&t){var a=vn(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),Q0.has(a)||(Q0.add(a),e={rel:e,crossOrigin:n,href:t},s.querySelector(a)===null&&(t=s.createElement("link"),Et(t,"link",e),bt(t),s.head.appendChild(t)))}}function _k(e){Ys.D(e),hw("dns-prefetch",e,null)}function Ok(e,t){Ys.C(e,t),hw("preconnect",e,t)}function Dk(e,t,n){Ys.L(e,t,n);var s=ui;if(s&&e&&t){var a='link[rel="preload"][as="'+vn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+vn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+vn(n.imageSizes)+'"]')):a+='[href="'+vn(e)+'"]';var o=a;switch(t){case"style":o=Wo(e);break;case"script":o=di(e)}En.has(o)||(e=We({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),En.set(o,e),s.querySelector(a)!==null||t==="style"&&s.querySelector(Fl(o))||t==="script"&&s.querySelector(Yl(o))||(t=s.createElement("link"),Et(t,"link",e),bt(t),s.head.appendChild(t)))}}function Lk(e,t){Ys.m(e,t);var n=ui;if(n&&e){var s=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+vn(s)+'"][href="'+vn(e)+'"]',o=a;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=di(e)}if(!En.has(o)&&(e=We({rel:"modulepreload",href:e},t),En.set(o,e),n.querySelector(a)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Yl(o)))return}s=n.createElement("link"),Et(s,"link",e),bt(s),n.head.appendChild(s)}}}function zk(e,t,n){Ys.S(e,t,n);var s=ui;if(s&&e){var a=vo(s).hoistableStyles,o=Wo(e);t=t||"default";var i=a.get(o);if(!i){var l={loading:0,preload:null};if(i=s.querySelector(Fl(o)))l.loading=5;else{e=We({rel:"stylesheet",href:e,"data-precedence":t},n),(n=En.get(o))&&Mp(e,n);var c=i=s.createElement("link");bt(c),Et(c,"link",e),c._p=new Promise(function(d,f){c.onload=d,c.onerror=f}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,qc(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:l},a.set(o,i)}}}function Pk(e,t){Ys.X(e,t);var n=ui;if(n&&e){var s=vo(n).hoistableScripts,a=di(e),o=s.get(a);o||(o=n.querySelector(Yl(a)),o||(e=We({src:e,async:!0},t),(t=En.get(a))&&_p(e,t),o=n.createElement("script"),bt(o),Et(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(a,o))}}function Ik(e,t){Ys.M(e,t);var n=ui;if(n&&e){var s=vo(n).hoistableScripts,a=di(e),o=s.get(a);o||(o=n.querySelector(Yl(a)),o||(e=We({src:e,async:!0,type:"module"},t),(t=En.get(a))&&_p(e,t),o=n.createElement("script"),bt(o),Et(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(a,o))}}function X0(e,t,n,s){var a=(a=xa.current)?Eu(a):null;if(!a)throw Error(Z(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Wo(n.href),n=vo(a).hoistableStyles,s=n.get(t),s||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Wo(n.href);var o=vo(a).hoistableStyles,i=o.get(e);if(i||(a=a.ownerDocument||a,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,i),(o=a.querySelector(Fl(e)))&&!o._p&&(i.instance=o,i.state.loading=5),En.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},En.set(e,n),o||Uk(a,e,n,i.state))),t&&s===null)throw Error(Z(528,""));return i}if(t&&s!==null)throw Error(Z(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=di(n),n=vo(a).hoistableScripts,s=n.get(t),s||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(Z(444,e))}}function Wo(e){return'href="'+vn(e)+'"'}function Fl(e){return'link[rel="stylesheet"]['+e+"]"}function mw(e){return We({},e,{"data-precedence":e.precedence,precedence:null})}function Uk(e,t,n,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Et(t,"link",n),bt(t),e.head.appendChild(t))}function di(e){return'[src="'+vn(e)+'"]'}function Yl(e){return"script[async]"+e}function K0(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+vn(n.href)+'"]');if(s)return t.instance=s,bt(s),s;var a=We({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),bt(s),Et(s,"style",a),qc(s,n.precedence,e),t.instance=s;case"stylesheet":a=Wo(n.href);var o=e.querySelector(Fl(a));if(o)return t.state.loading|=4,t.instance=o,bt(o),o;s=mw(n),(a=En.get(a))&&Mp(s,a),o=(e.ownerDocument||e).createElement("link"),bt(o);var i=o;return i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Et(o,"link",s),t.state.loading|=4,qc(o,n.precedence,e),t.instance=o;case"script":return o=di(n.src),(a=e.querySelector(Yl(o)))?(t.instance=a,bt(a),a):(s=n,(a=En.get(o))&&(s=We({},n),_p(s,a)),e=e.ownerDocument||e,a=e.createElement("script"),bt(a),Et(a,"link",s),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(Z(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,qc(s,n.precedence,e));return t.instance}function qc(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=s.length?s[s.length-1]:null,o=a,i=0;i<s.length;i++){var l=s[i];if(l.dataset.precedence===t)o=l;else if(o!==a)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Mp(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function _p(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Vc=null;function Z0(e,t,n){if(Vc===null){var s=new Map,a=Vc=new Map;a.set(n,s)}else a=Vc,s=a.get(n),s||(s=new Map,a.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var o=n[a];if(!(o[cl]||o[Rt]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var i=o.getAttribute(t)||"";i=e+i;var l=s.get(i);l?l.push(o):s.set(i,[o])}}return s}function W0(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Bk(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function pw(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var vl=null;function $k(){}function Hk(e,t,n){if(vl===null)throw Error(Z(475));var s=vl;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var a=Wo(n.href),o=e.querySelector(Fl(a));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=ku.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=o,bt(o);return}o=e.ownerDocument||e,n=mw(n),(a=En.get(a))&&Mp(n,a),o=o.createElement("link"),bt(o);var i=o;i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Et(o,"link",n),t.instance=o}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(s.count++,t=ku.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function qk(){if(vl===null)throw Error(Z(475));var e=vl;return e.stylesheets&&e.count===0&&Yh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Yh(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function ku(){if(this.count--,this.count===0){if(this.stylesheets)Yh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Au=null;function Yh(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Au=new Map,t.forEach(Vk,e),Au=null,ku.call(e))}function Vk(e,t){if(!(t.state.loading&4)){var n=Au.get(e);if(n)var s=n.get(null);else{n=new Map,Au.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<a.length;o++){var i=a[o];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(n.set(i.dataset.precedence,i),s=i)}s&&n.set(null,s)}a=t.instance,i=a.getAttribute("data-precedence"),o=n.get(i)||s,o===s&&n.set(null,a),n.set(i,a),this.count++,s=ku.bind(this),a.addEventListener("load",s),a.addEventListener("error",s),o?o.parentNode.insertBefore(a,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var yl={$$typeof:Ms,Provider:null,Consumer:null,_currentValue:fr,_currentValue2:fr,_threadCount:0};function Fk(e,t,n,s,a,o,i,l){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wd(0),this.hiddenUpdates=Wd(null),this.identifierPrefix=s,this.onUncaughtError=a,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function gw(e,t,n,s,a,o,i,l,c,d,f,h){return e=new Fk(e,t,n,i,l,c,d,h),t=1,o===!0&&(t|=24),o=bn(3,null,null,t),e.current=o,o.stateNode=e,t=op(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:s,isDehydrated:n,cache:t},wp(o),e}function xw(e){return e?(e=ho,e):ho}function vw(e,t,n,s,a,o){a=xw(a),s.context===null?s.context=a:s.pendingContext=a,s=va(t),s.payload={element:n},o=o===void 0?null:o,o!==null&&(s.callback=o),n=ya(e,s,t),n!==null&&(Bt(n,e,t),Wi(n,e,t))}function J0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Op(e,t){J0(e,t),(e=e.alternate)&&J0(e,t)}function yw(e){if(e.tag===13){var t=Ta(e,67108864);t!==null&&Bt(t,e,67108864),Op(e,67108864)}}var Tu=!0;function Yk(e,t,n,s){var a=Se.T;Se.T=null;var o=Ze.p;try{Ze.p=2,Dp(e,t,n,s)}finally{Ze.p=o,Se.T=a}}function Gk(e,t,n,s){var a=Se.T;Se.T=null;var o=Ze.p;try{Ze.p=8,Dp(e,t,n,s)}finally{Ze.p=o,Se.T=a}}function Dp(e,t,n,s){if(Tu){var a=Gh(s);if(a===null)Ef(e,t,s,Ru,n),ex(e,s);else if(Xk(a,e,t,n,s))s.stopPropagation();else if(ex(e,s),t&4&&-1<Qk.indexOf(e)){for(;a!==null;){var o=li(a);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var i=Wa(o.pendingLanes);if(i!==0){var l=o;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var c=1<<31-nn(i);l.entanglements[1]|=c,i&=~c}ms(o),!(nt&6)&&(bu=ss()+500,Vl(0))}}break;case 13:l=Ta(o,2),l!==null&&Bt(l,o,2),rd(),Op(o,2)}if(o=Gh(s),o===null&&Ef(e,t,s,Ru,n),o===a)break;a=o}a!==null&&s.stopPropagation()}else Ef(e,t,s,null,n)}}function Gh(e){return e=Km(e),Lp(e)}var Ru=null;function Lp(e){if(Ru=null,e=tr(e),e!==null){var t=oi(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Zv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ru=e,null}function bw(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(OC()){case Jv:return 2;case ey:return 8;case ou:case DC:return 32;case ty:return 268435456;default:return 32}default:return 32}}var Qh=!1,Sa=null,Na=null,ja=null,bl=new Map,wl=new Map,aa=[],Qk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ex(e,t){switch(e){case"focusin":case"focusout":Sa=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":bl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(t.pointerId)}}function Ri(e,t,n,s,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},t!==null&&(t=li(t),t!==null&&yw(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Xk(e,t,n,s,a){switch(t){case"focusin":return Sa=Ri(Sa,e,t,n,s,a),!0;case"dragenter":return Na=Ri(Na,e,t,n,s,a),!0;case"mouseover":return ja=Ri(ja,e,t,n,s,a),!0;case"pointerover":var o=a.pointerId;return bl.set(o,Ri(bl.get(o)||null,e,t,n,s,a)),!0;case"gotpointercapture":return o=a.pointerId,wl.set(o,Ri(wl.get(o)||null,e,t,n,s,a)),!0}return!1}function ww(e){var t=tr(e.target);if(t!==null){var n=oi(t);if(n!==null){if(t=n.tag,t===13){if(t=Zv(n),t!==null){e.blockedOn=t,qC(e.priority,function(){if(n.tag===13){var s=sn(),a=Ta(n,s);a!==null&&Bt(a,n,s),Op(n,s)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gh(e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);fh=s,n.target.dispatchEvent(s),fh=null}else return t=li(n),t!==null&&yw(t),e.blockedOn=n,!1;t.shift()}return!0}function tx(e,t,n){Fc(e)&&n.delete(t)}function Kk(){Qh=!1,Sa!==null&&Fc(Sa)&&(Sa=null),Na!==null&&Fc(Na)&&(Na=null),ja!==null&&Fc(ja)&&(ja=null),bl.forEach(tx),wl.forEach(tx)}function bc(e,t){e.blockedOn===t&&(e.blockedOn=null,Qh||(Qh=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,Kk)))}var wc=null;function nx(e){wc!==e&&(wc=e,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,function(){wc===e&&(wc=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],a=e[t+2];if(typeof s!="function"){if(Lp(s||n)===null)continue;break}var o=li(n);o!==null&&(e.splice(t,3),t-=3,Sh(o,{pending:!0,data:a,method:n.method,action:s},s,a))}}))}function Sl(e){function t(c){return bc(c,e)}Sa!==null&&bc(Sa,e),Na!==null&&bc(Na,e),ja!==null&&bc(ja,e),bl.forEach(t),wl.forEach(t);for(var n=0;n<aa.length;n++){var s=aa[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<aa.length&&(n=aa[0],n.blockedOn===null);)ww(n),n.blockedOn===null&&aa.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var a=n[s],o=n[s+1],i=a[Xt]||null;if(typeof o=="function")i||nx(n);else if(i){var l=null;if(o&&o.hasAttribute("formAction")){if(a=o,i=o[Xt]||null)l=i.formAction;else if(Lp(a)!==null)continue}else l=i.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),nx(n)}}}function zp(e){this._internalRoot=e}ld.prototype.render=zp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));var n=t.current,s=sn();vw(n,s,e,t,null,null)};ld.prototype.unmount=zp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e.tag===0&&Co(),vw(e.current,2,null,e,null,null),rd(),t[ii]=null}};function ld(e){this._internalRoot=e}ld.prototype.unstable_scheduleHydration=function(e){if(e){var t=iy();e={blockedOn:null,target:e,priority:t};for(var n=0;n<aa.length&&t!==0&&t<aa[n].priority;n++);aa.splice(n,0,e),n===0&&ww(e)}};var sx=Yv.version;if(sx!=="19.0.0")throw Error(Z(527,sx,"19.0.0"));Ze.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=RC(t),e=e!==null?Wv(e):null,e=e===null?null:e.stateNode,e};var Zk={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:Se,findFiberByHostInstance:tr,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sc.isDisabled&&Sc.supportsFiber)try{Ll=Sc.inject(Zk),tn=Sc}catch{}}Gu.createRoot=function(e,t){if(!Gv(e))throw Error(Z(299));var n=!1,s="",a=vb,o=yb,i=bb,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=gw(e,1,!1,null,null,n,s,a,o,i,l,null),e[ii]=t.current,Rp(e.nodeType===8?e.parentNode:e),new zp(t)};Gu.hydrateRoot=function(e,t,n){if(!Gv(e))throw Error(Z(299));var s=!1,a="",o=vb,i=yb,l=bb,c=null,d=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(i=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(c=n.unstable_transitionCallbacks),n.formState!==void 0&&(d=n.formState)),t=gw(e,1,!0,t,n??null,s,a,o,i,l,c,d),t.context=xw(null),n=t.current,s=sn(),a=va(s),a.callback=null,ya(n,a,s),t.current.lanes=s,Pl(t,s),ms(t),e[ii]=t.current,Rp(e),new ld(t)};Gu.version="19.0.0";function Sw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sw)}catch(e){console.error(e)}}Sw(),Ov.exports=Gu;var Wk=Ov.exports;function Jk(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,s,a,o,i=[],l="",c=e.split("/");for(c[0]||c.shift();a=c.shift();)n=a[0],n==="*"?(i.push(n),l+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(s=a.indexOf("?",1),o=a.indexOf(".",1),i.push(a.substring(1,~s?s:~o?o:a.length)),l+=~s&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(l+=(~s?"?":"")+"\\"+a.substring(o))):l+="/"+a;return{keys:i,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var Nw={exports:{}},jw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=u;function eA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tA=typeof Object.is=="function"?Object.is:eA,nA=Jo.useState,sA=Jo.useEffect,aA=Jo.useLayoutEffect,rA=Jo.useDebugValue;function oA(e,t){var n=t(),s=nA({inst:{value:n,getSnapshot:t}}),a=s[0].inst,o=s[1];return aA(function(){a.value=n,a.getSnapshot=t,Tf(a)&&o({inst:a})},[e,n,t]),sA(function(){return Tf(a)&&o({inst:a}),e(function(){Tf(a)&&o({inst:a})})},[e]),rA(n),n}function Tf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tA(e,n)}catch{return!0}}function iA(e,t){return t()}var lA=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?iA:oA;jw.useSyncExternalStore=Jo.useSyncExternalStore!==void 0?Jo.useSyncExternalStore:lA;Nw.exports=jw;var cA=Nw.exports;const uA=Vm.useInsertionEffect,dA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fA=dA?u.useLayoutEffect:u.useEffect,hA=uA||fA,Cw=e=>{const t=u.useRef([e,(...n)=>t[0](...n)]).current;return hA(()=>{t[0]=e}),t[1]},mA="popstate",Pp="pushState",Ip="replaceState",pA="hashchange",ax=[mA,Pp,Ip,pA],gA=e=>{for(const t of ax)addEventListener(t,e);return()=>{for(const t of ax)removeEventListener(t,e)}},Ew=(e,t)=>cA.useSyncExternalStore(gA,e,t),xA=()=>location.search,vA=({ssrSearch:e=""}={})=>Ew(xA,()=>e),rx=()=>location.pathname,yA=({ssrPath:e}={})=>Ew(rx,e?()=>e:rx),bA=(e,{replace:t=!1,state:n=null}={})=>history[t?Ip:Pp](n,"",e),wA=(e={})=>[yA(e),bA],ox=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[ox]>"u"){for(const e of[Pp,Ip]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,ox,{value:!0})}const SA=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",kw=(e="")=>e==="/"?"":e,NA=(e,t)=>e[0]==="~"?e.slice(1):kw(t)+e,jA=(e="",t)=>SA(ix(kw(e)),ix(t)),ix=e=>{try{return decodeURI(e)}catch{return e}},Aw={hook:wA,searchHook:vA,parser:Jk,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},Tw=u.createContext(Aw),Gl=()=>u.useContext(Tw),Rw={},Mw=u.createContext(Rw),_w=()=>u.useContext(Mw),cd=e=>{const[t,n]=e.hook(e);return[jA(e.base,t),Cw((s,a)=>n(NA(s,e.base),a))]},$r=()=>cd(Gl()),Ow=(e,t,n,s)=>{const{pattern:a,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),i=a.exec(n)||[],[l,...c]=i;return l!==void 0?[!0,(()=>{const d=o!==!1?Object.fromEntries(o.map((h,m)=>[h,c[m]])):i.groups;let f={...c};return d&&Object.assign(f,d),f})(),...s?[l]:[]]:[!1,null]},CA=({children:e,...t})=>{var f,h;const n=Gl(),s=t.hook?Aw:n;let a=s;const[o,i]=((f=t.ssrPath)==null?void 0:f.split("?"))??[];i&&(t.ssrSearch=i,t.ssrPath=o),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let l=u.useRef({}),c=l.current,d=c;for(let m in s){const g=m==="base"?s[m]+(t[m]||""):t[m]||s[m];c===d&&g!==d[m]&&(l.current=d={...d}),d[m]=g,(g!==s[m]||g!==a[m])&&(a=d)}return u.createElement(Tw.Provider,{value:a,children:e})},lx=({children:e,component:t},n)=>t?u.createElement(t,{params:n}):typeof e=="function"?e(n):e,EA=e=>{let t=u.useRef(Rw);const n=t.current;return t.current=Object.keys(e).length!==Object.keys(n).length||Object.entries(e).some(([s,a])=>a!==n[s])?e:n},Tn=({path:e,nest:t,match:n,...s})=>{const a=Gl(),[o]=cd(a),[i,l,c]=n??Ow(a.parser,e,o,t),d=EA({..._w(),...l});if(!i)return null;const f=c?u.createElement(CA,{base:c},lx(s,d)):lx(s,d);return u.createElement(Mw.Provider,{value:d,children:f})};u.forwardRef((e,t)=>{const n=Gl(),[s,a]=cd(n),{to:o="",href:i=o,onClick:l,asChild:c,children:d,className:f,replace:h,state:m,...g}=e,b=Cw(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(l==null||l(w),w.defaultPrevented||(w.preventDefault(),a(i,e)))}),x=n.hrefs(i[0]==="~"?i.slice(1):n.base+i,n);return c&&u.isValidElement(d)?u.cloneElement(d,{onClick:b,href:x}):u.createElement("a",{...g,onClick:b,href:x,className:f!=null&&f.call?f(s===i):f,children:d,ref:t})});const Dw=e=>Array.isArray(e)?e.flatMap(t=>Dw(t&&t.type===u.Fragment?t.props.children:t)):[e],kA=({children:e,location:t})=>{const n=Gl(),[s]=cd(n);for(const a of Dw(e)){let o=0;if(u.isValidElement(a)&&(o=Ow(n.parser,a.props.path,t||s,a.props.nest))[0])return u.cloneElement(a,{match:o})}return null};var fi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Cr=typeof window>"u"||"Deno"in globalThis;function zt(){}function AA(e,t){return typeof e=="function"?e(t):e}function Xh(e){return typeof e=="number"&&e>=0&&e!==1/0}function Lw(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ca(e,t){return typeof e=="function"?e(t):e}function zn(e,t){return typeof e=="function"?e(t):e}function cx(e,t){const{type:n="all",exact:s,fetchStatus:a,predicate:o,queryKey:i,stale:l}=e;if(i){if(s){if(t.queryHash!==Up(i,t.options))return!1}else if(!Nl(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||o&&!o(t))}function ux(e,t){const{exact:n,status:s,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(Er(t.options.mutationKey)!==Er(o))return!1}else if(!Nl(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function Up(e,t){return((t==null?void 0:t.queryKeyHashFn)||Er)(e)}function Er(e){return JSON.stringify(e,(t,n)=>Kh(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function Nl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Nl(e[n],t[n])):!1}function zw(e,t){if(e===t)return e;const n=dx(e)&&dx(t);if(n||Kh(e)&&Kh(t)){const s=n?e:Object.keys(e),a=s.length,o=n?t:Object.keys(t),i=o.length,l=n?[]:{},c=new Set(s);let d=0;for(let f=0;f<i;f++){const h=n?f:o[f];(!n&&c.has(h)||n)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,d++):(l[h]=zw(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&d++)}return a===i&&d===a?e:l}return t}function Mu(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function dx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Kh(e){if(!fx(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!fx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function fx(e){return Object.prototype.toString.call(e)==="[object Object]"}function TA(e){return new Promise(t=>{setTimeout(t,e)})}function Zh(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?zw(e,t):t}function RA(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function MA(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var Bp=Symbol();function Pw(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Bp?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Iw(e,t){return typeof e=="function"?e(...t):!!e}var sr,ra,_o,bv,_A=(bv=class extends fi{constructor(){super();ve(this,sr);ve(this,ra);ve(this,_o);ue(this,_o,t=>{if(!Cr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){L(this,ra)||this.setEventListener(L(this,_o))}onUnsubscribe(){var t;this.hasListeners()||((t=L(this,ra))==null||t.call(this),ue(this,ra,void 0))}setEventListener(t){var n;ue(this,_o,t),(n=L(this,ra))==null||n.call(this),ue(this,ra,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){L(this,sr)!==t&&(ue(this,sr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof L(this,sr)=="boolean"?L(this,sr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},sr=new WeakMap,ra=new WeakMap,_o=new WeakMap,bv),$p=new _A,Oo,oa,Do,wv,OA=(wv=class extends fi{constructor(){super();ve(this,Oo,!0);ve(this,oa);ve(this,Do);ue(this,Do,t=>{if(!Cr&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){L(this,oa)||this.setEventListener(L(this,Do))}onUnsubscribe(){var t;this.hasListeners()||((t=L(this,oa))==null||t.call(this),ue(this,oa,void 0))}setEventListener(t){var n;ue(this,Do,t),(n=L(this,oa))==null||n.call(this),ue(this,oa,t(this.setOnline.bind(this)))}setOnline(t){L(this,Oo)!==t&&(ue(this,Oo,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return L(this,Oo)}},Oo=new WeakMap,oa=new WeakMap,Do=new WeakMap,wv),_u=new OA;function Wh(){let e,t;const n=new Promise((a,o)=>{e=a,t=o});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},n.reject=a=>{s({status:"rejected",reason:a}),t(a)},n}function DA(e){return Math.min(1e3*2**e,3e4)}function Uw(e){return(e??"online")==="online"?_u.isOnline():!0}var Bw=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Rf(e){return e instanceof Bw}function $w(e){let t=!1,n=0,s=!1,a;const o=Wh(),i=x=>{var w;s||(m(new Bw(x)),(w=e.abort)==null||w.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>$p.isFocused()&&(e.networkMode==="always"||_u.isOnline())&&e.canRun(),f=()=>Uw(e.networkMode)&&e.canRun(),h=x=>{var w;s||(s=!0,(w=e.onSuccess)==null||w.call(e,x),a==null||a(),o.resolve(x))},m=x=>{var w;s||(s=!0,(w=e.onError)==null||w.call(e,x),a==null||a(),o.reject(x))},g=()=>new Promise(x=>{var w;a=v=>{(s||d())&&x(v)},(w=e.onPause)==null||w.call(e)}).then(()=>{var x;a=void 0,s||(x=e.onContinue)==null||x.call(e)}),b=()=>{if(s)return;let x;const w=n===0?e.initialPromise:void 0;try{x=w??e.fn()}catch(v){x=Promise.reject(v)}Promise.resolve(x).then(h).catch(v=>{var k;if(s)return;const p=e.retry??(Cr?0:3),y=e.retryDelay??DA,S=typeof y=="function"?y(n,v):y,j=p===!0||typeof p=="number"&&n<p||typeof p=="function"&&p(n,v);if(t||!j){m(v);return}n++,(k=e.onFail)==null||k.call(e,n,v),TA(S).then(()=>d()?void 0:g()).then(()=>{t?m(v):b()})})};return{promise:o,cancel:i,continue:()=>(a==null||a(),o),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?b():g().then(b),o)}}var LA=e=>setTimeout(e,0);function zA(){let e=[],t=0,n=l=>{l()},s=l=>{l()},a=LA;const o=l=>{t?e.push(l):a(()=>{n(l)})},i=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var pt=zA(),ar,Sv,Hw=(Sv=class{constructor(){ve(this,ar)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Xh(this.gcTime)&&ue(this,ar,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Cr?1/0:5*60*1e3))}clearGcTimeout(){L(this,ar)&&(clearTimeout(L(this,ar)),ue(this,ar,void 0))}},ar=new WeakMap,Sv),Lo,rr,dn,or,Tt,Ml,ir,Mn,Ns,Nv,PA=(Nv=class extends Hw{constructor(t){super();ve(this,Mn);ve(this,Lo);ve(this,rr);ve(this,dn);ve(this,or);ve(this,Tt);ve(this,Ml);ve(this,ir);ue(this,ir,!1),ue(this,Ml,t.defaultOptions),this.setOptions(t.options),this.observers=[],ue(this,or,t.client),ue(this,dn,L(this,or).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ue(this,Lo,IA(this.options)),this.state=t.state??L(this,Lo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=L(this,Tt))==null?void 0:t.promise}setOptions(t){this.options={...L(this,Ml),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,dn).remove(this)}setData(t,n){const s=Zh(this.state.data,t,this.options);return je(this,Mn,Ns).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){je(this,Mn,Ns).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,a;const n=(s=L(this,Tt))==null?void 0:s.promise;return(a=L(this,Tt))==null||a.cancel(t),n?n.then(zt).catch(zt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,Lo))}isActive(){return this.observers.some(t=>zn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Bp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ca(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Lw(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=L(this,Tt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=L(this,Tt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),L(this,dn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(L(this,Tt)&&(L(this,ir)?L(this,Tt).cancel({revert:!0}):L(this,Tt).cancelRetry()),this.scheduleGc()),L(this,dn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||je(this,Mn,Ns).call(this,{type:"invalidate"})}fetch(t,n){var d,f,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(L(this,Tt))return L(this,Tt).continueRetry(),L(this,Tt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(ue(this,ir,!0),s.signal)})},o=()=>{const m=Pw(this.options,n),b=(()=>{const x={client:L(this,or),queryKey:this.queryKey,meta:this.meta};return a(x),x})();return ue(this,ir,!1),this.options.persister?this.options.persister(m,b,this):m(b)},l=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:L(this,or),state:this.state,fetchFn:o};return a(m),m})();(d=this.options.behavior)==null||d.onFetch(l,this),ue(this,rr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&je(this,Mn,Ns).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=m=>{var g,b,x,w;Rf(m)&&m.silent||je(this,Mn,Ns).call(this,{type:"error",error:m}),Rf(m)||((b=(g=L(this,dn).config).onError)==null||b.call(g,m,this),(w=(x=L(this,dn).config).onSettled)==null||w.call(x,this.state.data,m,this)),this.scheduleGc()};return ue(this,Tt,$w({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var g,b,x,w;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(v){c(v);return}(b=(g=L(this,dn).config).onSuccess)==null||b.call(g,m,this),(w=(x=L(this,dn).config).onSettled)==null||w.call(x,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,g)=>{je(this,Mn,Ns).call(this,{type:"failed",failureCount:m,error:g})},onPause:()=>{je(this,Mn,Ns).call(this,{type:"pause"})},onContinue:()=>{je(this,Mn,Ns).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),L(this,Tt).start()}},Lo=new WeakMap,rr=new WeakMap,dn=new WeakMap,or=new WeakMap,Tt=new WeakMap,Ml=new WeakMap,ir=new WeakMap,Mn=new WeakSet,Ns=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...qw(s.data,this.options),fetchMeta:t.meta??null};case"success":return ue(this,rr,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Rf(a)&&a.revert&&L(this,rr)?{...L(this,rr),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),pt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),L(this,dn).notify({query:this,type:"updated",action:t})})},Nv);function qw(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Uw(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function IA(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Xn,jv,UA=(jv=class extends fi{constructor(t={}){super();ve(this,Xn);this.config=t,ue(this,Xn,new Map)}build(t,n,s){const a=n.queryKey,o=n.queryHash??Up(a,n);let i=this.get(o);return i||(i=new PA({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(i)),i}add(t){L(this,Xn).has(t.queryHash)||(L(this,Xn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=L(this,Xn).get(t.queryHash);n&&(t.destroy(),n===t&&L(this,Xn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){pt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return L(this,Xn).get(t)}getAll(){return[...L(this,Xn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>cx(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>cx(t,s)):n}notify(t){pt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){pt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){pt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Xn=new WeakMap,jv),Kn,Dt,lr,Zn,Zs,Cv,BA=(Cv=class extends Hw{constructor(t){super();ve(this,Zn);ve(this,Kn);ve(this,Dt);ve(this,lr);this.mutationId=t.mutationId,ue(this,Dt,t.mutationCache),ue(this,Kn,[]),this.state=t.state||Vw(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){L(this,Kn).includes(t)||(L(this,Kn).push(t),this.clearGcTimeout(),L(this,Dt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ue(this,Kn,L(this,Kn).filter(n=>n!==t)),this.scheduleGc(),L(this,Dt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){L(this,Kn).length||(this.state.status==="pending"?this.scheduleGc():L(this,Dt).remove(this))}continue(){var t;return((t=L(this,lr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,i,l,c,d,f,h,m,g,b,x,w,v,p,y,S,j,k,N,E;const n=()=>{je(this,Zn,Zs).call(this,{type:"continue"})};ue(this,lr,$w({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(A,T)=>{je(this,Zn,Zs).call(this,{type:"failed",failureCount:A,error:T})},onPause:()=>{je(this,Zn,Zs).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,Dt).canRun(this)}));const s=this.state.status==="pending",a=!L(this,lr).canStart();try{if(s)n();else{je(this,Zn,Zs).call(this,{type:"pending",variables:t,isPaused:a}),await((i=(o=L(this,Dt).config).onMutate)==null?void 0:i.call(o,t,this));const T=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));T!==this.state.context&&je(this,Zn,Zs).call(this,{type:"pending",context:T,variables:t,isPaused:a})}const A=await L(this,lr).start();return await((f=(d=L(this,Dt).config).onSuccess)==null?void 0:f.call(d,A,t,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,A,t,this.state.context)),await((b=(g=L(this,Dt).config).onSettled)==null?void 0:b.call(g,A,null,this.state.variables,this.state.context,this)),await((w=(x=this.options).onSettled)==null?void 0:w.call(x,A,null,t,this.state.context)),je(this,Zn,Zs).call(this,{type:"success",data:A}),A}catch(A){try{throw await((p=(v=L(this,Dt).config).onError)==null?void 0:p.call(v,A,t,this.state.context,this)),await((S=(y=this.options).onError)==null?void 0:S.call(y,A,t,this.state.context)),await((k=(j=L(this,Dt).config).onSettled)==null?void 0:k.call(j,void 0,A,this.state.variables,this.state.context,this)),await((E=(N=this.options).onSettled)==null?void 0:E.call(N,void 0,A,t,this.state.context)),A}finally{je(this,Zn,Zs).call(this,{type:"error",error:A})}}finally{L(this,Dt).runNext(this)}}},Kn=new WeakMap,Dt=new WeakMap,lr=new WeakMap,Zn=new WeakSet,Zs=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),pt.batch(()=>{L(this,Kn).forEach(s=>{s.onMutationUpdate(t)}),L(this,Dt).notify({mutation:this,type:"updated",action:t})})},Cv);function Vw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Es,_n,_l,Ev,$A=(Ev=class extends fi{constructor(t={}){super();ve(this,Es);ve(this,_n);ve(this,_l);this.config=t,ue(this,Es,new Set),ue(this,_n,new Map),ue(this,_l,0)}build(t,n,s){const a=new BA({mutationCache:this,mutationId:++oc(this,_l)._,options:t.defaultMutationOptions(n),state:s});return this.add(a),a}add(t){L(this,Es).add(t);const n=Nc(t);if(typeof n=="string"){const s=L(this,_n).get(n);s?s.push(t):L(this,_n).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(L(this,Es).delete(t)){const n=Nc(t);if(typeof n=="string"){const s=L(this,_n).get(n);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&L(this,_n).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Nc(t);if(typeof n=="string"){const s=L(this,_n).get(n),a=s==null?void 0:s.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const n=Nc(t);if(typeof n=="string"){const a=(s=L(this,_n).get(n))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){pt.batch(()=>{L(this,Es).forEach(t=>{this.notify({type:"removed",mutation:t})}),L(this,Es).clear(),L(this,_n).clear()})}getAll(){return Array.from(L(this,Es))}find(t){const n={exact:!0,...t};return this.getAll().find(s=>ux(n,s))}findAll(t={}){return this.getAll().filter(n=>ux(t,n))}notify(t){pt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return pt.batch(()=>Promise.all(t.map(n=>n.continue().catch(zt))))}},Es=new WeakMap,_n=new WeakMap,_l=new WeakMap,Ev);function Nc(e){var t;return(t=e.options.scope)==null?void 0:t.id}function hx(e){return{onFetch:(t,n)=>{var f,h,m,g,b;const s=t.options,a=(m=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,o=((g=t.state.data)==null?void 0:g.pages)||[],i=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const w=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},v=Pw(t.options,t.fetchOptions),p=async(y,S,j)=>{if(x)return Promise.reject();if(S==null&&y.pages.length)return Promise.resolve(y);const N=(()=>{const I={client:t.client,queryKey:t.queryKey,pageParam:S,direction:j?"backward":"forward",meta:t.options.meta};return w(I),I})(),E=await v(N),{maxPages:A}=t.options,T=j?MA:RA;return{pages:T(y.pages,E,A),pageParams:T(y.pageParams,S,A)}};if(a&&o.length){const y=a==="backward",S=y?HA:mx,j={pages:o,pageParams:i},k=S(s,j);l=await p(j,k,y)}else{const y=e??o.length;do{const S=c===0?i[0]??s.initialPageParam:mx(s,l);if(c>0&&S==null)break;l=await p(l,S),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>{var x,w;return(w=(x=t.options).persister)==null?void 0:w.call(x,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function mx(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function HA(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var st,ia,la,zo,Po,ca,Io,Uo,kv,qA=(kv=class{constructor(e={}){ve(this,st);ve(this,ia);ve(this,la);ve(this,zo);ve(this,Po);ve(this,ca);ve(this,Io);ve(this,Uo);ue(this,st,e.queryCache||new UA),ue(this,ia,e.mutationCache||new $A),ue(this,la,e.defaultOptions||{}),ue(this,zo,new Map),ue(this,Po,new Map),ue(this,ca,0)}mount(){oc(this,ca)._++,L(this,ca)===1&&(ue(this,Io,$p.subscribe(async e=>{e&&(await this.resumePausedMutations(),L(this,st).onFocus())})),ue(this,Uo,_u.subscribe(async e=>{e&&(await this.resumePausedMutations(),L(this,st).onOnline())})))}unmount(){var e,t;oc(this,ca)._--,L(this,ca)===0&&((e=L(this,Io))==null||e.call(this),ue(this,Io,void 0),(t=L(this,Uo))==null||t.call(this),ue(this,Uo,void 0))}isFetching(e){return L(this,st).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return L(this,ia).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=L(this,st).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=L(this,st).build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Ca(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return L(this,st).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),a=L(this,st).get(s.queryHash),o=a==null?void 0:a.state.data,i=AA(t,o);if(i!==void 0)return L(this,st).build(this,s).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return pt.batch(()=>L(this,st).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=L(this,st).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=L(this,st);pt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=L(this,st);return pt.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=pt.batch(()=>L(this,st).findAll(e).map(a=>a.cancel(n)));return Promise.all(s).then(zt).catch(zt)}invalidateQueries(e,t={}){return pt.batch(()=>(L(this,st).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=pt.batch(()=>L(this,st).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,n);return n.throwOnError||(o=o.catch(zt)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(zt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=L(this,st).build(this,t);return n.isStaleByTime(Ca(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(zt).catch(zt)}fetchInfiniteQuery(e){return e.behavior=hx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(zt).catch(zt)}ensureInfiniteQueryData(e){return e.behavior=hx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return _u.isOnline()?L(this,ia).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,st)}getMutationCache(){return L(this,ia)}getDefaultOptions(){return L(this,la)}setDefaultOptions(e){ue(this,la,e)}setQueryDefaults(e,t){L(this,zo).set(Er(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...L(this,zo).values()],n={};return t.forEach(s=>{Nl(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){L(this,Po).set(Er(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...L(this,Po).values()],n={};return t.forEach(s=>{Nl(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...L(this,la).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Up(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Bp&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...L(this,la).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){L(this,st).clear(),L(this,ia).clear()}},st=new WeakMap,ia=new WeakMap,la=new WeakMap,zo=new WeakMap,Po=new WeakMap,ca=new WeakMap,Io=new WeakMap,Uo=new WeakMap,kv),Vt,_e,Ol,Lt,cr,Bo,ua,da,Dl,$o,Ho,ur,dr,fa,qo,$e,Ui,Jh,em,tm,nm,sm,am,rm,Fw,Av,VA=(Av=class extends fi{constructor(t,n){super();ve(this,$e);ve(this,Vt);ve(this,_e);ve(this,Ol);ve(this,Lt);ve(this,cr);ve(this,Bo);ve(this,ua);ve(this,da);ve(this,Dl);ve(this,$o);ve(this,Ho);ve(this,ur);ve(this,dr);ve(this,fa);ve(this,qo,new Set);this.options=n,ue(this,Vt,t),ue(this,da,null),ue(this,ua,Wh()),this.options.experimental_prefetchInRender||L(this,ua).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(L(this,_e).addObserver(this),px(L(this,_e),this.options)?je(this,$e,Ui).call(this):this.updateResult(),je(this,$e,nm).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return om(L(this,_e),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return om(L(this,_e),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,je(this,$e,sm).call(this),je(this,$e,am).call(this),L(this,_e).removeObserver(this)}setOptions(t){const n=this.options,s=L(this,_e);if(this.options=L(this,Vt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zn(this.options.enabled,L(this,_e))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");je(this,$e,rm).call(this),L(this,_e).setOptions(this.options),n._defaulted&&!Mu(this.options,n)&&L(this,Vt).getQueryCache().notify({type:"observerOptionsUpdated",query:L(this,_e),observer:this});const a=this.hasListeners();a&&gx(L(this,_e),s,this.options,n)&&je(this,$e,Ui).call(this),this.updateResult(),a&&(L(this,_e)!==s||zn(this.options.enabled,L(this,_e))!==zn(n.enabled,L(this,_e))||Ca(this.options.staleTime,L(this,_e))!==Ca(n.staleTime,L(this,_e)))&&je(this,$e,Jh).call(this);const o=je(this,$e,em).call(this);a&&(L(this,_e)!==s||zn(this.options.enabled,L(this,_e))!==zn(n.enabled,L(this,_e))||o!==L(this,fa))&&je(this,$e,tm).call(this,o)}getOptimisticResult(t){const n=L(this,Vt).getQueryCache().build(L(this,Vt),t),s=this.createResult(n,t);return YA(this,s)&&(ue(this,Lt,s),ue(this,Bo,this.options),ue(this,cr,L(this,_e).state)),s}getCurrentResult(){return L(this,Lt)}trackResult(t,n){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),n==null||n(a),Reflect.get(s,a))})}trackProp(t){L(this,qo).add(t)}getCurrentQuery(){return L(this,_e)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=L(this,Vt).defaultQueryOptions(t),s=L(this,Vt).getQueryCache().build(L(this,Vt),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return je(this,$e,Ui).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),L(this,Lt)))}createResult(t,n){var A;const s=L(this,_e),a=this.options,o=L(this,Lt),i=L(this,cr),l=L(this,Bo),d=t!==s?t.state:L(this,Ol),{state:f}=t;let h={...f},m=!1,g;if(n._optimisticResults){const T=this.hasListeners(),I=!T&&px(t,n),R=T&&gx(t,s,n,a);(I||R)&&(h={...h,...qw(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:b,errorUpdatedAt:x,status:w}=h;g=h.data;let v=!1;if(n.placeholderData!==void 0&&g===void 0&&w==="pending"){let T;o!=null&&o.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(T=o.data,v=!0):T=typeof n.placeholderData=="function"?n.placeholderData((A=L(this,Ho))==null?void 0:A.state.data,L(this,Ho)):n.placeholderData,T!==void 0&&(w="success",g=Zh(o==null?void 0:o.data,T,n),m=!0)}if(n.select&&g!==void 0&&!v)if(o&&g===(i==null?void 0:i.data)&&n.select===L(this,Dl))g=L(this,$o);else try{ue(this,Dl,n.select),g=n.select(g),g=Zh(o==null?void 0:o.data,g,n),ue(this,$o,g),ue(this,da,null)}catch(T){ue(this,da,T)}L(this,da)&&(b=L(this,da),g=L(this,$o),x=Date.now(),w="error");const p=h.fetchStatus==="fetching",y=w==="pending",S=w==="error",j=y&&p,k=g!==void 0,E={status:w,fetchStatus:h.fetchStatus,isPending:y,isSuccess:w==="success",isError:S,isInitialLoading:j,isLoading:j,data:g,dataUpdatedAt:h.dataUpdatedAt,error:b,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:p,isRefetching:p&&!y,isLoadingError:S&&!k,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:S&&k,isStale:Hp(t,n),refetch:this.refetch,promise:L(this,ua)};if(this.options.experimental_prefetchInRender){const T=$=>{E.status==="error"?$.reject(E.error):E.data!==void 0&&$.resolve(E.data)},I=()=>{const $=ue(this,ua,E.promise=Wh());T($)},R=L(this,ua);switch(R.status){case"pending":t.queryHash===s.queryHash&&T(R);break;case"fulfilled":(E.status==="error"||E.data!==R.value)&&I();break;case"rejected":(E.status!=="error"||E.error!==R.reason)&&I();break}}return E}updateResult(){const t=L(this,Lt),n=this.createResult(L(this,_e),this.options);if(ue(this,cr,L(this,_e).state),ue(this,Bo,this.options),L(this,cr).data!==void 0&&ue(this,Ho,L(this,_e)),Mu(n,t))return;ue(this,Lt,n);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!L(this,qo).size)return!0;const i=new Set(o??L(this,qo));return this.options.throwOnError&&i.add("error"),Object.keys(L(this,Lt)).some(l=>{const c=l;return L(this,Lt)[c]!==t[c]&&i.has(c)})};je(this,$e,Fw).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&je(this,$e,nm).call(this)}},Vt=new WeakMap,_e=new WeakMap,Ol=new WeakMap,Lt=new WeakMap,cr=new WeakMap,Bo=new WeakMap,ua=new WeakMap,da=new WeakMap,Dl=new WeakMap,$o=new WeakMap,Ho=new WeakMap,ur=new WeakMap,dr=new WeakMap,fa=new WeakMap,qo=new WeakMap,$e=new WeakSet,Ui=function(t){je(this,$e,rm).call(this);let n=L(this,_e).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(zt)),n},Jh=function(){je(this,$e,sm).call(this);const t=Ca(this.options.staleTime,L(this,_e));if(Cr||L(this,Lt).isStale||!Xh(t))return;const s=Lw(L(this,Lt).dataUpdatedAt,t)+1;ue(this,ur,setTimeout(()=>{L(this,Lt).isStale||this.updateResult()},s))},em=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(L(this,_e)):this.options.refetchInterval)??!1},tm=function(t){je(this,$e,am).call(this),ue(this,fa,t),!(Cr||zn(this.options.enabled,L(this,_e))===!1||!Xh(L(this,fa))||L(this,fa)===0)&&ue(this,dr,setInterval(()=>{(this.options.refetchIntervalInBackground||$p.isFocused())&&je(this,$e,Ui).call(this)},L(this,fa)))},nm=function(){je(this,$e,Jh).call(this),je(this,$e,tm).call(this,je(this,$e,em).call(this))},sm=function(){L(this,ur)&&(clearTimeout(L(this,ur)),ue(this,ur,void 0))},am=function(){L(this,dr)&&(clearInterval(L(this,dr)),ue(this,dr,void 0))},rm=function(){const t=L(this,Vt).getQueryCache().build(L(this,Vt),this.options);if(t===L(this,_e))return;const n=L(this,_e);ue(this,_e,t),ue(this,Ol,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Fw=function(t){pt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(L(this,Lt))}),L(this,Vt).getQueryCache().notify({query:L(this,_e),type:"observerResultsUpdated"})})},Av);function FA(e,t){return zn(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function px(e,t){return FA(e,t)||e.state.data!==void 0&&om(e,t,t.refetchOnMount)}function om(e,t,n){if(zn(t.enabled,e)!==!1&&Ca(t.staleTime,e)!=="static"){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&Hp(e,t)}return!1}function gx(e,t,n,s){return(e!==t||zn(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Hp(e,n)}function Hp(e,t){return zn(t.enabled,e)!==!1&&e.isStaleByTime(Ca(t.staleTime,e))}function YA(e,t){return!Mu(e.getCurrentResult(),t)}var ha,ma,Ft,ks,Is,Yc,im,Tv,GA=(Tv=class extends fi{constructor(n,s){super();ve(this,Is);ve(this,ha);ve(this,ma);ve(this,Ft);ve(this,ks);ue(this,ha,n),this.setOptions(s),this.bindMethods(),je(this,Is,Yc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const s=this.options;this.options=L(this,ha).defaultMutationOptions(n),Mu(this.options,s)||L(this,ha).getMutationCache().notify({type:"observerOptionsUpdated",mutation:L(this,Ft),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Er(s.mutationKey)!==Er(this.options.mutationKey)?this.reset():((a=L(this,Ft))==null?void 0:a.state.status)==="pending"&&L(this,Ft).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=L(this,Ft))==null||n.removeObserver(this)}onMutationUpdate(n){je(this,Is,Yc).call(this),je(this,Is,im).call(this,n)}getCurrentResult(){return L(this,ma)}reset(){var n;(n=L(this,Ft))==null||n.removeObserver(this),ue(this,Ft,void 0),je(this,Is,Yc).call(this),je(this,Is,im).call(this)}mutate(n,s){var a;return ue(this,ks,s),(a=L(this,Ft))==null||a.removeObserver(this),ue(this,Ft,L(this,ha).getMutationCache().build(L(this,ha),this.options)),L(this,Ft).addObserver(this),L(this,Ft).execute(n)}},ha=new WeakMap,ma=new WeakMap,Ft=new WeakMap,ks=new WeakMap,Is=new WeakSet,Yc=function(){var s;const n=((s=L(this,Ft))==null?void 0:s.state)??Vw();ue(this,ma,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},im=function(n){pt.batch(()=>{var s,a,o,i,l,c,d,f;if(L(this,ks)&&this.hasListeners()){const h=L(this,ma).variables,m=L(this,ma).context;(n==null?void 0:n.type)==="success"?((a=(s=L(this,ks)).onSuccess)==null||a.call(s,n.data,h,m),(i=(o=L(this,ks)).onSettled)==null||i.call(o,n.data,null,h,m)):(n==null?void 0:n.type)==="error"&&((c=(l=L(this,ks)).onError)==null||c.call(l,n.error,h,m),(f=(d=L(this,ks)).onSettled)==null||f.call(d,void 0,n.error,h,m))}this.listeners.forEach(h=>{h(L(this,ma))})})},Tv),Yw=u.createContext(void 0),Hr=e=>{const t=u.useContext(Yw);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},QA=({client:e,children:t})=>(u.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(Yw.Provider,{value:e,children:t})),Gw=u.createContext(!1),XA=()=>u.useContext(Gw);Gw.Provider;function KA(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ZA=u.createContext(KA()),WA=()=>u.useContext(ZA),JA=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},eT=e=>{u.useEffect(()=>{e.clearReset()},[e])},tT=({result:e,errorResetBoundary:t,throwOnError:n,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||Iw(n,[e.error,s])),nT=e=>{if(e.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...s)=>t(n(...s)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},sT=(e,t)=>e.isLoading&&e.isFetching&&!t,aT=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,xx=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function rT(e,t,n){var h,m,g,b,x;const s=XA(),a=WA(),o=Hr(),i=o.defaultQueryOptions(e);(m=(h=o.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,i),i._optimisticResults=s?"isRestoring":"optimistic",nT(i),JA(i,a),eT(a);const l=!o.getQueryCache().get(i.queryHash),[c]=u.useState(()=>new t(o,i)),d=c.getOptimisticResult(i),f=!s&&e.subscribed!==!1;if(u.useSyncExternalStore(u.useCallback(w=>{const v=f?c.subscribe(pt.batchCalls(w)):zt;return c.updateResult(),v},[c,f]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),u.useEffect(()=>{c.setOptions(i)},[i,c]),aT(i,d))throw xx(i,c,a);if(tT({result:d,errorResetBoundary:a,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;if((b=(g=o.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||b.call(g,i,d),i.experimental_prefetchInRender&&!Cr&&sT(d,s)){const w=l?xx(i,c,a):(x=o.getQueryCache().get(i.queryHash))==null?void 0:x.promise;w==null||w.catch(zt).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function Sn(e,t){return rT(e,VA)}function Ql(e,t){const n=Hr(),[s]=u.useState(()=>new GA(n,e));u.useEffect(()=>{s.setOptions(e)},[s,e]);const a=u.useSyncExternalStore(u.useCallback(i=>s.subscribe(pt.batchCalls(i)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=u.useCallback((i,l)=>{s.mutate(i,l).catch(zt)},[s]);if(a.error&&Iw(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}async function Qw(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function rs(e,t){const{method:n="GET",body:s}=t||{},a={};let o;s instanceof FormData?o=s:s&&(a["Content-Type"]="application/json",o=JSON.stringify(s));const i=await fetch(e,{method:n,headers:a,body:o,credentials:"include"});return await Qw(i),await i.json()}const oT=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});return await Qw(n),await n.json()},xo=new qA({defaultOptions:{queries:{queryFn:oT({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});function iT(){return null}function re(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function vx(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ud(...e){return t=>{let n=!1;const s=e.map(a=>{const o=vx(a,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():vx(e[a],null)}}}}function we(...e){return u.useCallback(ud(...e),e)}function lT(e,t){const n=u.createContext(t),s=o=>{const{children:i,...l}=o,c=u.useMemo(()=>l,Object.values(l));return r.jsx(n.Provider,{value:c,children:i})};s.displayName=e+"Provider";function a(o){const i=u.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function on(e,t=[]){let n=[];function s(o,i){const l=u.createContext(i),c=n.length;n=[...n,i];const d=h=>{var v;const{scope:m,children:g,...b}=h,x=((v=m==null?void 0:m[e])==null?void 0:v[c])||l,w=u.useMemo(()=>b,Object.values(b));return r.jsx(x.Provider,{value:w,children:g})};d.displayName=o+"Provider";function f(h,m){var x;const g=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,b=u.useContext(g);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,f]}const a=()=>{const o=n.map(i=>u.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return u.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,cT(a,...t)]}function cT(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function Oa(e){const t=dT(e),n=u.forwardRef((s,a)=>{const{children:o,...i}=s,l=u.Children.toArray(o),c=l.find(hT);if(c){const d=c.props.children,f=l.map(h=>h===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...i,ref:a,children:u.isValidElement(d)?u.cloneElement(d,void 0,f):null})}return r.jsx(t,{...i,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}var uT=Oa("Slot");function dT(e){const t=u.forwardRef((n,s)=>{const{children:a,...o}=n;if(u.isValidElement(a)){const i=pT(a),l=mT(o,a.props);return a.type!==u.Fragment&&(l.ref=s?ud(s,i):i),u.cloneElement(a,l)}return u.Children.count(a)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Xw=Symbol("radix.slottable");function fT(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Xw,t}function hT(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Xw}function mT(e,t){const n={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?n[s]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(n[s]=a):s==="style"?n[s]={...a,...o}:s==="className"&&(n[s]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function pT(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var gT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=gT.reduce((e,t)=>{const n=Oa(`Primitive.${t}`),s=u.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function Kw(e,t){e&&ri.flushSync(()=>e.dispatchEvent(t))}function Ct(e){const t=u.useRef(e);return u.useEffect(()=>{t.current=e}),u.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function xT(e,t=globalThis==null?void 0:globalThis.document){const n=Ct(e);u.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var vT="DismissableLayer",lm="dismissableLayer.update",yT="dismissableLayer.pointerDownOutside",bT="dismissableLayer.focusOutside",yx,Zw=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hi=u.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=u.useContext(Zw),[f,h]=u.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=u.useState({}),b=we(t,N=>h(N)),x=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=x.indexOf(w),p=f?x.indexOf(f):-1,y=d.layersWithOutsidePointerEventsDisabled.size>0,S=p>=v,j=NT(N=>{const E=N.target,A=[...d.branches].some(T=>T.contains(E));!S||A||(a==null||a(N),i==null||i(N),N.defaultPrevented||l==null||l())},m),k=jT(N=>{const E=N.target;[...d.branches].some(T=>T.contains(E))||(o==null||o(N),i==null||i(N),N.defaultPrevented||l==null||l())},m);return xT(N=>{p===d.layers.size-1&&(s==null||s(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},m),u.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(yx=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),bx(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=yx)}},[f,m,n,d]),u.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),bx())},[f,d]),u.useEffect(()=>{const N=()=>g({});return document.addEventListener(lm,N),()=>document.removeEventListener(lm,N)},[]),r.jsx(xe.div,{...c,ref:b,style:{pointerEvents:y?S?"auto":"none":void 0,...e.style},onFocusCapture:re(e.onFocusCapture,k.onFocusCapture),onBlurCapture:re(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:re(e.onPointerDownCapture,j.onPointerDownCapture)})});hi.displayName=vT;var wT="DismissableLayerBranch",ST=u.forwardRef((e,t)=>{const n=u.useContext(Zw),s=u.useRef(null),a=we(t,s);return u.useEffect(()=>{const o=s.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),r.jsx(xe.div,{...e,ref:a})});ST.displayName=wT;function NT(e,t=globalThis==null?void 0:globalThis.document){const n=Ct(e),s=u.useRef(!1),a=u.useRef(()=>{});return u.useEffect(()=>{const o=l=>{if(l.target&&!s.current){let c=function(){Ww(yT,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function jT(e,t=globalThis==null?void 0:globalThis.document){const n=Ct(e),s=u.useRef(!1);return u.useEffect(()=>{const a=o=>{o.target&&!s.current&&Ww(bT,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function bx(){const e=new CustomEvent(lm);document.dispatchEvent(e)}function Ww(e,t,n,{discrete:s}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?Kw(a,o):a.dispatchEvent(o)}var kt=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},CT=Vm[" useId ".trim().toString()]||(()=>{}),ET=0;function Bn(e){const[t,n]=u.useState(CT());return kt(()=>{n(s=>s??String(ET++))},[e]),t?`radix-${t}`:""}const kT=["top","right","bottom","left"],Da=Math.min,Jt=Math.max,Ou=Math.round,jc=Math.floor,os=e=>({x:e,y:e}),AT={left:"right",right:"left",bottom:"top",top:"bottom"},TT={start:"end",end:"start"};function cm(e,t,n){return Jt(e,Da(t,n))}function qs(e,t){return typeof e=="function"?e(t):e}function Vs(e){return e.split("-")[0]}function mi(e){return e.split("-")[1]}function qp(e){return e==="x"?"y":"x"}function Vp(e){return e==="y"?"height":"width"}const RT=new Set(["top","bottom"]);function ts(e){return RT.has(Vs(e))?"y":"x"}function Fp(e){return qp(ts(e))}function MT(e,t,n){n===void 0&&(n=!1);const s=mi(e),a=Fp(e),o=Vp(a);let i=a==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Du(i)),[i,Du(i)]}function _T(e){const t=Du(e);return[um(e),t,um(t)]}function um(e){return e.replace(/start|end/g,t=>TT[t])}const wx=["left","right"],Sx=["right","left"],OT=["top","bottom"],DT=["bottom","top"];function LT(e,t,n){switch(e){case"top":case"bottom":return n?t?Sx:wx:t?wx:Sx;case"left":case"right":return t?OT:DT;default:return[]}}function zT(e,t,n,s){const a=mi(e);let o=LT(Vs(e),n==="start",s);return a&&(o=o.map(i=>i+"-"+a),t&&(o=o.concat(o.map(um)))),o}function Du(e){return e.replace(/left|right|bottom|top/g,t=>AT[t])}function PT(e){return{top:0,right:0,bottom:0,left:0,...e}}function Jw(e){return typeof e!="number"?PT(e):{top:e,right:e,bottom:e,left:e}}function Lu(e){const{x:t,y:n,width:s,height:a}=e;return{width:s,height:a,top:n,left:t,right:t+s,bottom:n+a,x:t,y:n}}function Nx(e,t,n){let{reference:s,floating:a}=e;const o=ts(t),i=Fp(t),l=Vp(i),c=Vs(t),d=o==="y",f=s.x+s.width/2-a.width/2,h=s.y+s.height/2-a.height/2,m=s[l]/2-a[l]/2;let g;switch(c){case"top":g={x:f,y:s.y-a.height};break;case"bottom":g={x:f,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:h};break;case"left":g={x:s.x-a.width,y:h};break;default:g={x:s.x,y:s.y}}switch(mi(t)){case"start":g[i]-=m*(n&&d?-1:1);break;case"end":g[i]+=m*(n&&d?-1:1);break}return g}const IT=async(e,t,n)=>{const{placement:s="bottom",strategy:a="absolute",middleware:o=[],platform:i}=n,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:h}=Nx(d,s,c),m=s,g={},b=0;for(let x=0;x<l.length;x++){const{name:w,fn:v}=l[x],{x:p,y,data:S,reset:j}=await v({x:f,y:h,initialPlacement:s,placement:m,strategy:a,middlewareData:g,rects:d,platform:i,elements:{reference:e,floating:t}});f=p??f,h=y??h,g={...g,[w]:{...g[w],...S}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(d=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:f,y:h}=Nx(d,m,c)),x=-1)}return{x:f,y:h,placement:m,strategy:a,middlewareData:g}};async function jl(e,t){var n;t===void 0&&(t={});const{x:s,y:a,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=qs(t,e),b=Jw(g),w=l[m?h==="floating"?"reference":"floating":h],v=Lu(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:c})),p=h==="floating"?{x:s,y:a,width:i.floating.width,height:i.floating.height}:i.reference,y=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),S=await(o.isElement==null?void 0:o.isElement(y))?await(o.getScale==null?void 0:o.getScale(y))||{x:1,y:1}:{x:1,y:1},j=Lu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:p,offsetParent:y,strategy:c}):p);return{top:(v.top-j.top+b.top)/S.y,bottom:(j.bottom-v.bottom+b.bottom)/S.y,left:(v.left-j.left+b.left)/S.x,right:(j.right-v.right+b.right)/S.x}}const UT=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:a,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:f=0}=qs(e,t)||{};if(d==null)return{};const h=Jw(f),m={x:n,y:s},g=Fp(a),b=Vp(g),x=await i.getDimensions(d),w=g==="y",v=w?"top":"left",p=w?"bottom":"right",y=w?"clientHeight":"clientWidth",S=o.reference[b]+o.reference[g]-m[g]-o.floating[b],j=m[g]-o.reference[g],k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let N=k?k[y]:0;(!N||!await(i.isElement==null?void 0:i.isElement(k)))&&(N=l.floating[y]||o.floating[b]);const E=S/2-j/2,A=N/2-x[b]/2-1,T=Da(h[v],A),I=Da(h[p],A),R=T,$=N-x[b]-I,K=N/2-x[b]/2+E,C=cm(R,K,$),D=!c.arrow&&mi(a)!=null&&K!==C&&o.reference[b]/2-(K<R?T:I)-x[b]/2<0,H=D?K<R?K-R:K-$:0;return{[g]:m[g]+H,data:{[g]:C,centerOffset:K-C-H,...D&&{alignmentOffset:H}},reset:D}}}),BT=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:a,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...w}=qs(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=Vs(a),p=ts(l),y=Vs(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(d.floating)),j=m||(y||!x?[Du(l)]:_T(l)),k=b!=="none";!m&&k&&j.push(...zT(l,x,b,S));const N=[l,...j],E=await jl(t,w),A=[];let T=((s=o.flip)==null?void 0:s.overflows)||[];if(f&&A.push(E[v]),h){const K=MT(a,i,S);A.push(E[K[0]],E[K[1]])}if(T=[...T,{placement:a,overflows:A}],!A.every(K=>K<=0)){var I,R;const K=(((I=o.flip)==null?void 0:I.index)||0)+1,C=N[K];if(C&&(!(h==="alignment"?p!==ts(C):!1)||T.every(M=>M.overflows[0]>0&&ts(M.placement)===p)))return{data:{index:K,overflows:T},reset:{placement:C}};let D=(R=T.filter(H=>H.overflows[0]<=0).sort((H,M)=>H.overflows[1]-M.overflows[1])[0])==null?void 0:R.placement;if(!D)switch(g){case"bestFit":{var $;const H=($=T.filter(M=>{if(k){const U=ts(M.placement);return U===p||U==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(U=>U>0).reduce((U,z)=>U+z,0)]).sort((M,U)=>M[1]-U[1])[0])==null?void 0:$[0];H&&(D=H);break}case"initialPlacement":D=l;break}if(a!==D)return{reset:{placement:D}}}return{}}}};function jx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Cx(e){return kT.some(t=>e[t]>=0)}const $T=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...a}=qs(e,t);switch(s){case"referenceHidden":{const o=await jl(t,{...a,elementContext:"reference"}),i=jx(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Cx(i)}}}case"escaped":{const o=await jl(t,{...a,altBoundary:!0}),i=jx(o,n.floating);return{data:{escapedOffsets:i,escaped:Cx(i)}}}default:return{}}}}},e1=new Set(["left","top"]);async function HT(e,t){const{placement:n,platform:s,elements:a}=e,o=await(s.isRTL==null?void 0:s.isRTL(a.floating)),i=Vs(n),l=mi(n),c=ts(n)==="y",d=e1.has(i)?-1:1,f=o&&c?-1:1,h=qs(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof b=="number"&&(g=l==="end"?b*-1:b),c?{x:g*f,y:m*d}:{x:m*d,y:g*f}}const qT=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:a,y:o,placement:i,middlewareData:l}=t,c=await HT(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:i}}}}},VT=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:a}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x:v,y:p}=w;return{x:v,y:p}}},...c}=qs(e,t),d={x:n,y:s},f=await jl(t,c),h=ts(Vs(a)),m=qp(h);let g=d[m],b=d[h];if(o){const w=m==="y"?"top":"left",v=m==="y"?"bottom":"right",p=g+f[w],y=g-f[v];g=cm(p,g,y)}if(i){const w=h==="y"?"top":"left",v=h==="y"?"bottom":"right",p=b+f[w],y=b-f[v];b=cm(p,b,y)}const x=l.fn({...t,[m]:g,[h]:b});return{...x,data:{x:x.x-n,y:x.y-s,enabled:{[m]:o,[h]:i}}}}}},FT=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:a,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=qs(e,t),f={x:n,y:s},h=ts(a),m=qp(h);let g=f[m],b=f[h];const x=qs(l,t),w=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const y=m==="y"?"height":"width",S=o.reference[m]-o.floating[y]+w.mainAxis,j=o.reference[m]+o.reference[y]-w.mainAxis;g<S?g=S:g>j&&(g=j)}if(d){var v,p;const y=m==="y"?"width":"height",S=e1.has(Vs(a)),j=o.reference[h]-o.floating[y]+(S&&((v=i.offset)==null?void 0:v[h])||0)+(S?0:w.crossAxis),k=o.reference[h]+o.reference[y]+(S?0:((p=i.offset)==null?void 0:p[h])||0)-(S?w.crossAxis:0);b<j?b=j:b>k&&(b=k)}return{[m]:g,[h]:b}}}},YT=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:a,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...d}=qs(e,t),f=await jl(t,d),h=Vs(a),m=mi(a),g=ts(a)==="y",{width:b,height:x}=o.floating;let w,v;h==="top"||h==="bottom"?(w=h,v=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(v=h,w=m==="end"?"top":"bottom");const p=x-f.top-f.bottom,y=b-f.left-f.right,S=Da(x-f[w],p),j=Da(b-f[v],y),k=!t.middlewareData.shift;let N=S,E=j;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(E=y),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(N=p),k&&!m){const T=Jt(f.left,0),I=Jt(f.right,0),R=Jt(f.top,0),$=Jt(f.bottom,0);g?E=b-2*(T!==0||I!==0?T+I:Jt(f.left,f.right)):N=x-2*(R!==0||$!==0?R+$:Jt(f.top,f.bottom))}await c({...t,availableWidth:E,availableHeight:N});const A=await i.getDimensions(l.floating);return b!==A.width||x!==A.height?{reset:{rects:!0}}:{}}}};function dd(){return typeof window<"u"}function pi(e){return t1(e)?(e.nodeName||"").toLowerCase():"#document"}function an(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ps(e){var t;return(t=(t1(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function t1(e){return dd()?e instanceof Node||e instanceof an(e).Node:!1}function Hn(e){return dd()?e instanceof Element||e instanceof an(e).Element:!1}function cs(e){return dd()?e instanceof HTMLElement||e instanceof an(e).HTMLElement:!1}function Ex(e){return!dd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof an(e).ShadowRoot}const GT=new Set(["inline","contents"]);function Xl(e){const{overflow:t,overflowX:n,overflowY:s,display:a}=qn(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!GT.has(a)}const QT=new Set(["table","td","th"]);function XT(e){return QT.has(pi(e))}const KT=[":popover-open",":modal"];function fd(e){return KT.some(t=>{try{return e.matches(t)}catch{return!1}})}const ZT=["transform","translate","scale","rotate","perspective"],WT=["transform","translate","scale","rotate","perspective","filter"],JT=["paint","layout","strict","content"];function Yp(e){const t=Gp(),n=Hn(e)?qn(e):e;return ZT.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||WT.some(s=>(n.willChange||"").includes(s))||JT.some(s=>(n.contain||"").includes(s))}function eR(e){let t=La(e);for(;cs(t)&&!ei(t);){if(Yp(t))return t;if(fd(t))return null;t=La(t)}return null}function Gp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tR=new Set(["html","body","#document"]);function ei(e){return tR.has(pi(e))}function qn(e){return an(e).getComputedStyle(e)}function hd(e){return Hn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function La(e){if(pi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ex(e)&&e.host||ps(e);return Ex(t)?t.host:t}function n1(e){const t=La(e);return ei(t)?e.ownerDocument?e.ownerDocument.body:e.body:cs(t)&&Xl(t)?t:n1(t)}function Cl(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=n1(e),o=a===((s=e.ownerDocument)==null?void 0:s.body),i=an(a);if(o){const l=dm(i);return t.concat(i,i.visualViewport||[],Xl(a)?a:[],l&&n?Cl(l):[])}return t.concat(a,Cl(a,[],n))}function dm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function s1(e){const t=qn(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=cs(e),o=a?e.offsetWidth:n,i=a?e.offsetHeight:s,l=Ou(n)!==o||Ou(s)!==i;return l&&(n=o,s=i),{width:n,height:s,$:l}}function Qp(e){return Hn(e)?e:e.contextElement}function Eo(e){const t=Qp(e);if(!cs(t))return os(1);const n=t.getBoundingClientRect(),{width:s,height:a,$:o}=s1(t);let i=(o?Ou(n.width):n.width)/s,l=(o?Ou(n.height):n.height)/a;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const nR=os(0);function a1(e){const t=an(e);return!Gp()||!t.visualViewport?nR:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function sR(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==an(e)?!1:t}function kr(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),o=Qp(e);let i=os(1);t&&(s?Hn(s)&&(i=Eo(s)):i=Eo(e));const l=sR(o,n,s)?a1(o):os(0);let c=(a.left+l.x)/i.x,d=(a.top+l.y)/i.y,f=a.width/i.x,h=a.height/i.y;if(o){const m=an(o),g=s&&Hn(s)?an(s):s;let b=m,x=dm(b);for(;x&&s&&g!==b;){const w=Eo(x),v=x.getBoundingClientRect(),p=qn(x),y=v.left+(x.clientLeft+parseFloat(p.paddingLeft))*w.x,S=v.top+(x.clientTop+parseFloat(p.paddingTop))*w.y;c*=w.x,d*=w.y,f*=w.x,h*=w.y,c+=y,d+=S,b=an(x),x=dm(b)}}return Lu({width:f,height:h,x:c,y:d})}function Xp(e,t){const n=hd(e).scrollLeft;return t?t.left+n:kr(ps(e)).left+n}function r1(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(n?0:Xp(e,s)),o=s.top+t.scrollTop;return{x:a,y:o}}function aR(e){let{elements:t,rect:n,offsetParent:s,strategy:a}=e;const o=a==="fixed",i=ps(s),l=t?fd(t.floating):!1;if(s===i||l&&o)return n;let c={scrollLeft:0,scrollTop:0},d=os(1);const f=os(0),h=cs(s);if((h||!h&&!o)&&((pi(s)!=="body"||Xl(i))&&(c=hd(s)),cs(s))){const g=kr(s);d=Eo(s),f.x=g.x+s.clientLeft,f.y=g.y+s.clientTop}const m=i&&!h&&!o?r1(i,c,!0):os(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+f.x+m.x,y:n.y*d.y-c.scrollTop*d.y+f.y+m.y}}function rR(e){return Array.from(e.getClientRects())}function oR(e){const t=ps(e),n=hd(e),s=e.ownerDocument.body,a=Jt(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=Jt(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-n.scrollLeft+Xp(e);const l=-n.scrollTop;return qn(s).direction==="rtl"&&(i+=Jt(t.clientWidth,s.clientWidth)-a),{width:a,height:o,x:i,y:l}}function iR(e,t){const n=an(e),s=ps(e),a=n.visualViewport;let o=s.clientWidth,i=s.clientHeight,l=0,c=0;if(a){o=a.width,i=a.height;const d=Gp();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:o,height:i,x:l,y:c}}const lR=new Set(["absolute","fixed"]);function cR(e,t){const n=kr(e,!0,t==="fixed"),s=n.top+e.clientTop,a=n.left+e.clientLeft,o=cs(e)?Eo(e):os(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=a*o.x,d=s*o.y;return{width:i,height:l,x:c,y:d}}function kx(e,t,n){let s;if(t==="viewport")s=iR(e,n);else if(t==="document")s=oR(ps(e));else if(Hn(t))s=cR(t,n);else{const a=a1(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Lu(s)}function o1(e,t){const n=La(e);return n===t||!Hn(n)||ei(n)?!1:qn(n).position==="fixed"||o1(n,t)}function uR(e,t){const n=t.get(e);if(n)return n;let s=Cl(e,[],!1).filter(l=>Hn(l)&&pi(l)!=="body"),a=null;const o=qn(e).position==="fixed";let i=o?La(e):e;for(;Hn(i)&&!ei(i);){const l=qn(i),c=Yp(i);!c&&l.position==="fixed"&&(a=null),(o?!c&&!a:!c&&l.position==="static"&&!!a&&lR.has(a.position)||Xl(i)&&!c&&o1(e,i))?s=s.filter(f=>f!==i):a=l,i=La(i)}return t.set(e,s),s}function dR(e){let{element:t,boundary:n,rootBoundary:s,strategy:a}=e;const i=[...n==="clippingAncestors"?fd(t)?[]:uR(t,this._c):[].concat(n),s],l=i[0],c=i.reduce((d,f)=>{const h=kx(t,f,a);return d.top=Jt(h.top,d.top),d.right=Da(h.right,d.right),d.bottom=Da(h.bottom,d.bottom),d.left=Jt(h.left,d.left),d},kx(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function fR(e){const{width:t,height:n}=s1(e);return{width:t,height:n}}function hR(e,t,n){const s=cs(t),a=ps(t),o=n==="fixed",i=kr(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=os(0);function d(){c.x=Xp(a)}if(s||!s&&!o)if((pi(t)!=="body"||Xl(a))&&(l=hd(t)),s){const g=kr(t,!0,o,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else a&&d();o&&!s&&a&&d();const f=a&&!s&&!o?r1(a,l):os(0),h=i.left+l.scrollLeft-c.x-f.x,m=i.top+l.scrollTop-c.y-f.y;return{x:h,y:m,width:i.width,height:i.height}}function Mf(e){return qn(e).position==="static"}function Ax(e,t){if(!cs(e)||qn(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ps(e)===n&&(n=n.ownerDocument.body),n}function i1(e,t){const n=an(e);if(fd(e))return n;if(!cs(e)){let a=La(e);for(;a&&!ei(a);){if(Hn(a)&&!Mf(a))return a;a=La(a)}return n}let s=Ax(e,t);for(;s&&XT(s)&&Mf(s);)s=Ax(s,t);return s&&ei(s)&&Mf(s)&&!Yp(s)?n:s||eR(e)||n}const mR=async function(e){const t=this.getOffsetParent||i1,n=this.getDimensions,s=await n(e.floating);return{reference:hR(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function pR(e){return qn(e).direction==="rtl"}const gR={convertOffsetParentRelativeRectToViewportRelativeRect:aR,getDocumentElement:ps,getClippingRect:dR,getOffsetParent:i1,getElementRects:mR,getClientRects:rR,getDimensions:fR,getScale:Eo,isElement:Hn,isRTL:pR};function l1(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function xR(e,t){let n=null,s;const a=ps(e);function o(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const d=e.getBoundingClientRect(),{left:f,top:h,width:m,height:g}=d;if(l||t(),!m||!g)return;const b=jc(h),x=jc(a.clientWidth-(f+m)),w=jc(a.clientHeight-(h+g)),v=jc(f),y={rootMargin:-b+"px "+-x+"px "+-w+"px "+-v+"px",threshold:Jt(0,Da(1,c))||1};let S=!0;function j(k){const N=k[0].intersectionRatio;if(N!==c){if(!S)return i();N?i(!1,N):s=setTimeout(()=>{i(!1,1e-7)},1e3)}N===1&&!l1(d,e.getBoundingClientRect())&&i(),S=!1}try{n=new IntersectionObserver(j,{...y,root:a.ownerDocument})}catch{n=new IntersectionObserver(j,y)}n.observe(e)}return i(!0),o}function vR(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=Qp(e),f=a||o?[...d?Cl(d):[],...Cl(t)]:[];f.forEach(v=>{a&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const h=d&&l?xR(d,n):null;let m=-1,g=null;i&&(g=new ResizeObserver(v=>{let[p]=v;p&&p.target===d&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var y;(y=g)==null||y.observe(t)})),n()}),d&&!c&&g.observe(d),g.observe(t));let b,x=c?kr(e):null;c&&w();function w(){const v=kr(e);x&&!l1(x,v)&&n(),x=v,b=requestAnimationFrame(w)}return n(),()=>{var v;f.forEach(p=>{a&&p.removeEventListener("scroll",n),o&&p.removeEventListener("resize",n)}),h==null||h(),(v=g)==null||v.disconnect(),g=null,c&&cancelAnimationFrame(b)}}const yR=qT,bR=VT,wR=BT,SR=YT,NR=$T,Tx=UT,jR=FT,CR=(e,t,n)=>{const s=new Map,a={platform:gR,...n},o={...a.platform,_c:s};return IT(e,t,{...a,platform:o})};var ER=typeof document<"u",kR=function(){},Gc=ER?u.useLayoutEffect:kR;function zu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!zu(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=n;s--!==0;){const o=a[s];if(!(o==="_owner"&&e.$$typeof)&&!zu(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function c1(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Rx(e,t){const n=c1(e);return Math.round(t*n)/n}function _f(e){const t=u.useRef(e);return Gc(()=>{t.current=e}),t}function AR(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:a,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[f,h]=u.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=u.useState(s);zu(m,s)||g(s);const[b,x]=u.useState(null),[w,v]=u.useState(null),p=u.useCallback(M=>{M!==k.current&&(k.current=M,x(M))},[]),y=u.useCallback(M=>{M!==N.current&&(N.current=M,v(M))},[]),S=o||b,j=i||w,k=u.useRef(null),N=u.useRef(null),E=u.useRef(f),A=c!=null,T=_f(c),I=_f(a),R=_f(d),$=u.useCallback(()=>{if(!k.current||!N.current)return;const M={placement:t,strategy:n,middleware:m};I.current&&(M.platform=I.current),CR(k.current,N.current,M).then(U=>{const z={...U,isPositioned:R.current!==!1};K.current&&!zu(E.current,z)&&(E.current=z,ri.flushSync(()=>{h(z)}))})},[m,t,n,I,R]);Gc(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(M=>({...M,isPositioned:!1})))},[d]);const K=u.useRef(!1);Gc(()=>(K.current=!0,()=>{K.current=!1}),[]),Gc(()=>{if(S&&(k.current=S),j&&(N.current=j),S&&j){if(T.current)return T.current(S,j,$);$()}},[S,j,$,T,A]);const C=u.useMemo(()=>({reference:k,floating:N,setReference:p,setFloating:y}),[p,y]),D=u.useMemo(()=>({reference:S,floating:j}),[S,j]),H=u.useMemo(()=>{const M={position:n,left:0,top:0};if(!D.floating)return M;const U=Rx(D.floating,f.x),z=Rx(D.floating,f.y);return l?{...M,transform:"translate("+U+"px, "+z+"px)",...c1(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:z}},[n,l,D.floating,f.x,f.y]);return u.useMemo(()=>({...f,update:$,refs:C,elements:D,floatingStyles:H}),[f,$,C,D,H])}const TR=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:a}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?Tx({element:s.current,padding:a}).fn(n):{}:s?Tx({element:s,padding:a}).fn(n):{}}}},RR=(e,t)=>({...yR(e),options:[e,t]}),MR=(e,t)=>({...bR(e),options:[e,t]}),_R=(e,t)=>({...jR(e),options:[e,t]}),OR=(e,t)=>({...wR(e),options:[e,t]}),DR=(e,t)=>({...SR(e),options:[e,t]}),LR=(e,t)=>({...NR(e),options:[e,t]}),zR=(e,t)=>({...TR(e),options:[e,t]});var PR="Arrow",u1=u.forwardRef((e,t)=>{const{children:n,width:s=10,height:a=5,...o}=e;return r.jsx(xe.svg,{...o,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});u1.displayName=PR;var IR=u1;function d1(e){const[t,n]=u.useState(void 0);return kt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var Kp="Popper",[f1,$a]=on(Kp),[UR,h1]=f1(Kp),m1=e=>{const{__scopePopper:t,children:n}=e,[s,a]=u.useState(null);return r.jsx(UR,{scope:t,anchor:s,onAnchorChange:a,children:n})};m1.displayName=Kp;var p1="PopperAnchor",g1=u.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...a}=e,o=h1(p1,n),i=u.useRef(null),l=we(t,i);return u.useEffect(()=>{o.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:r.jsx(xe.div,{...a,ref:l})});g1.displayName=p1;var Zp="PopperContent",[BR,$R]=f1(Zp),x1=u.forwardRef((e,t)=>{var B,J,q,Y,ae,ee;const{__scopePopper:n,side:s="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:b,...x}=e,w=h1(Zp,n),[v,p]=u.useState(null),y=we(t,de=>p(de)),[S,j]=u.useState(null),k=d1(S),N=(k==null?void 0:k.width)??0,E=(k==null?void 0:k.height)??0,A=s+(o!=="center"?"-"+o:""),T=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},I=Array.isArray(d)?d:[d],R=I.length>0,$={padding:T,boundary:I.filter(qR),altBoundary:R},{refs:K,floatingStyles:C,placement:D,isPositioned:H,middlewareData:M}=AR({strategy:"fixed",placement:A,whileElementsMounted:(...de)=>vR(...de,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[RR({mainAxis:a+E,alignmentAxis:i}),c&&MR({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?_R():void 0,...$}),c&&OR({...$}),DR({...$,apply:({elements:de,rects:Re,availableWidth:fe,availableHeight:ye})=>{const{width:Le,height:He}=Re.reference,Ge=de.floating.style;Ge.setProperty("--radix-popper-available-width",`${fe}px`),Ge.setProperty("--radix-popper-available-height",`${ye}px`),Ge.setProperty("--radix-popper-anchor-width",`${Le}px`),Ge.setProperty("--radix-popper-anchor-height",`${He}px`)}}),S&&zR({element:S,padding:l}),VR({arrowWidth:N,arrowHeight:E}),m&&LR({strategy:"referenceHidden",...$})]}),[U,z]=b1(D),P=Ct(b);kt(()=>{H&&(P==null||P())},[H,P]);const V=(B=M.arrow)==null?void 0:B.x,Q=(J=M.arrow)==null?void 0:J.y,_=((q=M.arrow)==null?void 0:q.centerOffset)!==0,[se,oe]=u.useState();return kt(()=>{v&&oe(window.getComputedStyle(v).zIndex)},[v]),r.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...C,transform:H?C.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(Y=M.transformOrigin)==null?void 0:Y.x,(ae=M.transformOrigin)==null?void 0:ae.y].join(" "),...((ee=M.hide)==null?void 0:ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(BR,{scope:n,placedSide:U,onArrowChange:j,arrowX:V,arrowY:Q,shouldHideArrow:_,children:r.jsx(xe.div,{"data-side":U,"data-align":z,...x,ref:y,style:{...x.style,animation:H?void 0:"none"}})})})});x1.displayName=Zp;var v1="PopperArrow",HR={top:"bottom",right:"left",bottom:"top",left:"right"},y1=u.forwardRef(function(t,n){const{__scopePopper:s,...a}=t,o=$R(v1,s),i=HR[o.placedSide];return r.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:r.jsx(IR,{...a,ref:n,style:{...a.style,display:"block"}})})});y1.displayName=v1;function qR(e){return e!==null}var VR=e=>({name:"transformOrigin",options:e,fn(t){var w,v,p;const{placement:n,rects:s,middlewareData:a}=t,i=((w=a.arrow)==null?void 0:w.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,f]=b1(n),h={start:"0%",center:"50%",end:"100%"}[f],m=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,g=(((p=a.arrow)==null?void 0:p.y)??0)+c/2;let b="",x="";return d==="bottom"?(b=i?h:`${m}px`,x=`${-c}px`):d==="top"?(b=i?h:`${m}px`,x=`${s.floating.height+c}px`):d==="right"?(b=`${-c}px`,x=i?h:`${g}px`):d==="left"&&(b=`${s.floating.width+c}px`,x=i?h:`${g}px`),{data:{x:b,y:x}}}});function b1(e){const[t,n="center"]=e.split("-");return[t,n]}var Wp=m1,Kl=g1,md=x1,pd=y1,FR="Portal",Zl=u.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[a,o]=u.useState(!1);kt(()=>o(!0),[]);const i=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?NC.createPortal(r.jsx(xe.div,{...s,ref:t}),i):null});Zl.displayName=FR;function YR(e,t){return u.useReducer((n,s)=>t[n][s]??n,e)}var _t=e=>{const{present:t,children:n}=e,s=GR(t),a=typeof n=="function"?n({present:s.isPresent}):u.Children.only(n),o=we(s.ref,QR(a));return typeof n=="function"||s.isPresent?u.cloneElement(a,{ref:o}):null};_t.displayName="Presence";function GR(e){const[t,n]=u.useState(),s=u.useRef(null),a=u.useRef(e),o=u.useRef("none"),i=e?"mounted":"unmounted",[l,c]=YR(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=Cc(s.current);o.current=l==="mounted"?d:"none"},[l]),kt(()=>{const d=s.current,f=a.current;if(f!==e){const m=o.current,g=Cc(d);e?c("MOUNT"):g==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),kt(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,h=g=>{const x=Cc(s.current).includes(g.animationName);if(g.target===t&&x&&(c("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=g=>{g.target===t&&(o.current=Cc(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{s.current=d?getComputedStyle(d):null,n(d)},[])}}function Cc(e){return(e==null?void 0:e.animationName)||"none"}function QR(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var XR=Vm[" useInsertionEffect ".trim().toString()]||kt;function za({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[a,o,i]=KR({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const f=u.useRef(e!==void 0);u.useEffect(()=>{const h=f.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,s])}const d=u.useCallback(f=>{var h;if(l){const m=ZR(f)?f(e):f;m!==e&&((h=i.current)==null||h.call(i,m))}else o(f)},[l,e,o,i]);return[c,d]}function KR({defaultProp:e,onChange:t}){const[n,s]=u.useState(e),a=u.useRef(n),o=u.useRef(t);return XR(()=>{o.current=t},[t]),u.useEffect(()=>{var i;a.current!==n&&((i=o.current)==null||i.call(o,n),a.current=n)},[n,a]),[n,s,o]}function ZR(e){return typeof e=="function"}var w1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),WR="VisuallyHidden",S1=u.forwardRef((e,t)=>r.jsx(xe.span,{...e,ref:t,style:{...w1,...e.style}}));S1.displayName=WR;var JR=S1,[gd,xz]=on("Tooltip",[$a]),Jp=$a(),N1="TooltipProvider",e4=700,Mx="tooltip.open",[t4,j1]=gd(N1),C1=e=>{const{__scopeTooltip:t,delayDuration:n=e4,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=e,i=u.useRef(!0),l=u.useRef(!1),c=u.useRef(0);return u.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(t4,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:u.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:u.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:u.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:o})};C1.displayName=N1;var E1="Tooltip",[vz,xd]=gd(E1),fm="TooltipTrigger",n4=u.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=xd(fm,n),o=j1(fm,n),i=Jp(n),l=u.useRef(null),c=we(t,l,a.onTriggerChange),d=u.useRef(!1),f=u.useRef(!1),h=u.useCallback(()=>d.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(Kl,{asChild:!0,...i,children:r.jsx(xe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:re(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:re(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:re(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:re(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:re(e.onBlur,a.onClose),onClick:re(e.onClick,a.onClose)})})});n4.displayName=fm;var s4="TooltipPortal",[yz,a4]=gd(s4,{forceMount:void 0}),ti="TooltipContent",k1=u.forwardRef((e,t)=>{const n=a4(ti,e.__scopeTooltip),{forceMount:s=n.forceMount,side:a="top",...o}=e,i=xd(ti,e.__scopeTooltip);return r.jsx(_t,{present:s||i.open,children:i.disableHoverableContent?r.jsx(A1,{side:a,...o,ref:t}):r.jsx(r4,{side:a,...o,ref:t})})}),r4=u.forwardRef((e,t)=>{const n=xd(ti,e.__scopeTooltip),s=j1(ti,e.__scopeTooltip),a=u.useRef(null),o=we(t,a),[i,l]=u.useState(null),{trigger:c,onClose:d}=n,f=a.current,{onPointerInTransitChange:h}=s,m=u.useCallback(()=>{l(null),h(!1)},[h]),g=u.useCallback((b,x)=>{const w=b.currentTarget,v={x:b.clientX,y:b.clientY},p=u4(v,w.getBoundingClientRect()),y=d4(v,p),S=f4(x.getBoundingClientRect()),j=m4([...y,...S]);l(j),h(!0)},[h]);return u.useEffect(()=>()=>m(),[m]),u.useEffect(()=>{if(c&&f){const b=w=>g(w,f),x=w=>g(w,c);return c.addEventListener("pointerleave",b),f.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",b),f.removeEventListener("pointerleave",x)}}},[c,f,g,m]),u.useEffect(()=>{if(i){const b=x=>{const w=x.target,v={x:x.clientX,y:x.clientY},p=(c==null?void 0:c.contains(w))||(f==null?void 0:f.contains(w)),y=!h4(v,i);p?m():y&&(m(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,f,i,d,m]),r.jsx(A1,{...e,ref:o})}),[o4,i4]=gd(E1,{isInside:!1}),l4=fT("TooltipContent"),A1=u.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=xd(ti,n),d=Jp(n),{onClose:f}=c;return u.useEffect(()=>(document.addEventListener(Mx,f),()=>document.removeEventListener(Mx,f)),[f]),u.useEffect(()=>{if(c.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),r.jsx(hi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:r.jsxs(md,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(l4,{children:s}),r.jsx(o4,{scope:n,isInside:!0,children:r.jsx(JR,{id:c.contentId,role:"tooltip",children:a||s})})]})})});k1.displayName=ti;var T1="TooltipArrow",c4=u.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=Jp(n);return i4(T1,n).isInside?null:r.jsx(pd,{...a,...s,ref:t})});c4.displayName=T1;function u4(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,s,a,o)){case o:return"left";case a:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function d4(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function f4(e){const{top:t,right:n,bottom:s,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:s},{x:a,y:s}]}function h4(e,t){const{x:n,y:s}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,f=l.y,h=c.x,m=c.y;f>s!=m>s&&n<(h-d)*(s-f)/(m-f)+d&&(a=!a)}return a}function m4(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),p4(t)}function p4(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var g4=C1,R1=k1;function M1(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=M1(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function _1(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=M1(e))&&(s&&(s+=" "),s+=t);return s}const eg="-",x4=e=>{const t=y4(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(eg);return l[0]===""&&l.length!==1&&l.shift(),O1(l,t)||v4(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},O1=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),a=s?O1(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(eg);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},_x=/^\[(.+)\]$/,v4=e=>{if(_x.test(e)){const t=_x.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},y4=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const a in n)hm(n[a],s,a,t);return s},hm=(e,t,n,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:Ox(t,a);o.classGroupId=n;return}if(typeof a=="function"){if(b4(a)){hm(a(s),t,n,s);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([o,i])=>{hm(i,Ox(t,o),n,s)})})},Ox=(e,t)=>{let n=e;return t.split(eg).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},b4=e=>e.isThemeGetter,w4=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const a=(o,i)=>{n.set(o,i),t++,t>e&&(t=0,s=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return a(o,i),i},set(o,i){n.has(o)?n.set(o,i):a(o,i)}}},mm="!",pm=":",S4=pm.length,N4=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=a=>{const o=[];let i=0,l=0,c=0,d;for(let b=0;b<a.length;b++){let x=a[b];if(i===0&&l===0){if(x===pm){o.push(a.slice(c,b)),c=b+S4;continue}if(x==="/"){d=b;continue}}x==="["?i++:x==="]"?i--:x==="("?l++:x===")"&&l--}const f=o.length===0?a:a.substring(c),h=j4(f),m=h!==f,g=d&&d>c?d-c:void 0;return{modifiers:o,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+pm,o=s;s=i=>i.startsWith(a)?o(i.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(n){const a=s;s=o=>n({className:o,parseClassName:a})}return s},j4=e=>e.endsWith(mm)?e.substring(0,e.length-1):e.startsWith(mm)?e.substring(1):e,C4=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const a=[];let o=[];return s.forEach(i=>{i[0]==="["||t[i]?(a.push(...o.sort(),i),o=[]):o.push(i)}),a.push(...o.sort()),a}},E4=e=>({cache:w4(e.cacheSize),parseClassName:N4(e),sortModifiers:C4(e),...x4(e)}),k4=/\s+/,A4=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:o}=t,i=[],l=e.trim().split(k4);let c="";for(let d=l.length-1;d>=0;d-=1){const f=l[d],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:b,maybePostfixModifierPosition:x}=n(f);if(h){c=f+(c.length>0?" "+c:c);continue}let w=!!x,v=s(w?b.substring(0,x):b);if(!v){if(!w){c=f+(c.length>0?" "+c:c);continue}if(v=s(b),!v){c=f+(c.length>0?" "+c:c);continue}w=!1}const p=o(m).join(":"),y=g?p+mm:p,S=y+v;if(i.includes(S))continue;i.push(S);const j=a(v,w);for(let k=0;k<j.length;++k){const N=j[k];i.push(y+N)}c=f+(c.length>0?" "+c:c)}return c};function T4(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=D1(t))&&(s&&(s+=" "),s+=n);return s}const D1=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=D1(e[s]))&&(n&&(n+=" "),n+=t);return n};function R4(e,...t){let n,s,a,o=i;function i(c){const d=t.reduce((f,h)=>h(f),e());return n=E4(d),s=n.cache.get,a=n.cache.set,o=l,l(c)}function l(c){const d=s(c);if(d)return d;const f=A4(c,n);return a(c,f),f}return function(){return o(T4.apply(null,arguments))}}const ht=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},L1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,z1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,M4=/^\d+\/\d+$/,_4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,O4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,D4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,L4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,z4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zr=e=>M4.test(e),Ee=e=>!!e&&!Number.isNaN(Number(e)),Xs=e=>!!e&&Number.isInteger(Number(e)),Of=e=>e.endsWith("%")&&Ee(e.slice(0,-1)),Ss=e=>_4.test(e),P4=()=>!0,I4=e=>O4.test(e)&&!D4.test(e),P1=()=>!1,U4=e=>L4.test(e),B4=e=>z4.test(e),$4=e=>!me(e)&&!pe(e),H4=e=>gi(e,B1,P1),me=e=>L1.test(e),Za=e=>gi(e,$1,I4),Df=e=>gi(e,G4,Ee),Dx=e=>gi(e,I1,P1),q4=e=>gi(e,U1,B4),Ec=e=>gi(e,H1,U4),pe=e=>z1.test(e),Mi=e=>xi(e,$1),V4=e=>xi(e,Q4),Lx=e=>xi(e,I1),F4=e=>xi(e,B1),Y4=e=>xi(e,U1),kc=e=>xi(e,H1,!0),gi=(e,t,n)=>{const s=L1.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},xi=(e,t,n=!1)=>{const s=z1.exec(e);return s?s[1]?t(s[1]):n:!1},I1=e=>e==="position"||e==="percentage",U1=e=>e==="image"||e==="url",B1=e=>e==="length"||e==="size"||e==="bg-size",$1=e=>e==="length",G4=e=>e==="number",Q4=e=>e==="family-name",H1=e=>e==="shadow",X4=()=>{const e=ht("color"),t=ht("font"),n=ht("text"),s=ht("font-weight"),a=ht("tracking"),o=ht("leading"),i=ht("breakpoint"),l=ht("container"),c=ht("spacing"),d=ht("radius"),f=ht("shadow"),h=ht("inset-shadow"),m=ht("text-shadow"),g=ht("drop-shadow"),b=ht("blur"),x=ht("perspective"),w=ht("aspect"),v=ht("ease"),p=ht("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...S(),pe,me],k=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],E=()=>[pe,me,c],A=()=>[Zr,"full","auto",...E()],T=()=>[Xs,"none","subgrid",pe,me],I=()=>["auto",{span:["full",Xs,pe,me]},Xs,pe,me],R=()=>[Xs,"auto",pe,me],$=()=>["auto","min","max","fr",pe,me],K=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],C=()=>["start","end","center","stretch","center-safe","end-safe"],D=()=>["auto",...E()],H=()=>[Zr,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],M=()=>[e,pe,me],U=()=>[...S(),Lx,Dx,{position:[pe,me]}],z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],P=()=>["auto","cover","contain",F4,H4,{size:[pe,me]}],V=()=>[Of,Mi,Za],Q=()=>["","none","full",d,pe,me],_=()=>["",Ee,Mi,Za],se=()=>["solid","dashed","dotted","double"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>[Ee,Of,Lx,Dx],J=()=>["","none",b,pe,me],q=()=>["none",Ee,pe,me],Y=()=>["none",Ee,pe,me],ae=()=>[Ee,pe,me],ee=()=>[Zr,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ss],breakpoint:[Ss],color:[P4],container:[Ss],"drop-shadow":[Ss],ease:["in","out","in-out"],font:[$4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ss],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ss],shadow:[Ss],spacing:["px",Ee],text:[Ss],"text-shadow":[Ss],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Zr,me,pe,w]}],container:["container"],columns:[{columns:[Ee,me,pe,l]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[Xs,"auto",pe,me]}],basis:[{basis:[Zr,"full","auto",l,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ee,Zr,"auto","initial","none",me]}],grow:[{grow:["",Ee,pe,me]}],shrink:[{shrink:["",Ee,pe,me]}],order:[{order:[Xs,"first","last","none",pe,me]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:I()}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:I()}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...K(),"normal"]}],"justify-items":[{"justify-items":[...C(),"normal"]}],"justify-self":[{"justify-self":["auto",...C()]}],"align-content":[{content:["normal",...K()]}],"align-items":[{items:[...C(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...C(),{baseline:["","last"]}]}],"place-content":[{"place-content":K()}],"place-items":[{"place-items":[...C(),"baseline"]}],"place-self":[{"place-self":["auto",...C()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:D()}],mx:[{mx:D()}],my:[{my:D()}],ms:[{ms:D()}],me:[{me:D()}],mt:[{mt:D()}],mr:[{mr:D()}],mb:[{mb:D()}],ml:[{ml:D()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:H()}],w:[{w:[l,"screen",...H()]}],"min-w":[{"min-w":[l,"screen","none",...H()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},...H()]}],h:[{h:["screen","lh",...H()]}],"min-h":[{"min-h":["screen","lh","none",...H()]}],"max-h":[{"max-h":["screen","lh",...H()]}],"font-size":[{text:["base",n,Mi,Za]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,pe,Df]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Of,me]}],"font-family":[{font:[V4,me,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,pe,me]}],"line-clamp":[{"line-clamp":[Ee,"none",pe,Df]}],leading:[{leading:[o,...E()]}],"list-image":[{"list-image":["none",pe,me]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",pe,me]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ee,"from-font","auto",pe,Za]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[Ee,"auto",pe,me]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pe,me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pe,me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:U()}],"bg-repeat":[{bg:z()}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Xs,pe,me],radial:["",pe,me],conic:[Xs,pe,me]},Y4,q4]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:_()}],"border-w-x":[{"border-x":_()}],"border-w-y":[{"border-y":_()}],"border-w-s":[{"border-s":_()}],"border-w-e":[{"border-e":_()}],"border-w-t":[{"border-t":_()}],"border-w-r":[{"border-r":_()}],"border-w-b":[{"border-b":_()}],"border-w-l":[{"border-l":_()}],"divide-x":[{"divide-x":_()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":_()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...se(),"hidden","none"]}],"divide-style":[{divide:[...se(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...se(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ee,pe,me]}],"outline-w":[{outline:["",Ee,Mi,Za]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",f,kc,Ec]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",h,kc,Ec]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[Ee,Za]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":_()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",m,kc,Ec]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[Ee,pe,me]}],"mix-blend":[{"mix-blend":[...oe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":oe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ee]}],"mask-image-linear-from-pos":[{"mask-linear-from":B()}],"mask-image-linear-to-pos":[{"mask-linear-to":B()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":B()}],"mask-image-t-to-pos":[{"mask-t-to":B()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":B()}],"mask-image-r-to-pos":[{"mask-r-to":B()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":B()}],"mask-image-b-to-pos":[{"mask-b-to":B()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":B()}],"mask-image-l-to-pos":[{"mask-l-to":B()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":B()}],"mask-image-x-to-pos":[{"mask-x-to":B()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":B()}],"mask-image-y-to-pos":[{"mask-y-to":B()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[pe,me]}],"mask-image-radial-from-pos":[{"mask-radial-from":B()}],"mask-image-radial-to-pos":[{"mask-radial-to":B()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[Ee]}],"mask-image-conic-from-pos":[{"mask-conic-from":B()}],"mask-image-conic-to-pos":[{"mask-conic-to":B()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:U()}],"mask-repeat":[{mask:z()}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",pe,me]}],filter:[{filter:["","none",pe,me]}],blur:[{blur:J()}],brightness:[{brightness:[Ee,pe,me]}],contrast:[{contrast:[Ee,pe,me]}],"drop-shadow":[{"drop-shadow":["","none",g,kc,Ec]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",Ee,pe,me]}],"hue-rotate":[{"hue-rotate":[Ee,pe,me]}],invert:[{invert:["",Ee,pe,me]}],saturate:[{saturate:[Ee,pe,me]}],sepia:[{sepia:["",Ee,pe,me]}],"backdrop-filter":[{"backdrop-filter":["","none",pe,me]}],"backdrop-blur":[{"backdrop-blur":J()}],"backdrop-brightness":[{"backdrop-brightness":[Ee,pe,me]}],"backdrop-contrast":[{"backdrop-contrast":[Ee,pe,me]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ee,pe,me]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ee,pe,me]}],"backdrop-invert":[{"backdrop-invert":["",Ee,pe,me]}],"backdrop-opacity":[{"backdrop-opacity":[Ee,pe,me]}],"backdrop-saturate":[{"backdrop-saturate":[Ee,pe,me]}],"backdrop-sepia":[{"backdrop-sepia":["",Ee,pe,me]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",pe,me]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ee,"initial",pe,me]}],ease:[{ease:["linear","initial",v,pe,me]}],delay:[{delay:[Ee,pe,me]}],animate:[{animate:["none",p,pe,me]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,pe,me]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:q()}],"rotate-x":[{"rotate-x":q()}],"rotate-y":[{"rotate-y":q()}],"rotate-z":[{"rotate-z":q()}],scale:[{scale:Y()}],"scale-x":[{"scale-x":Y()}],"scale-y":[{"scale-y":Y()}],"scale-z":[{"scale-z":Y()}],"scale-3d":["scale-3d"],skew:[{skew:ae()}],"skew-x":[{"skew-x":ae()}],"skew-y":[{"skew-y":ae()}],transform:[{transform:[pe,me,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ee()}],"translate-x":[{"translate-x":ee()}],"translate-y":[{"translate-y":ee()}],"translate-z":[{"translate-z":ee()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pe,me]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pe,me]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[Ee,Mi,Za,Df]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},K4=R4(X4);function be(...e){return K4(_1(e))}const Z4=g4,W4=u.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(R1,{ref:s,sideOffset:t,className:be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));W4.displayName=R1.displayName;const J4={theme:"system",setTheme:()=>null},q1=u.createContext(J4);function eM({children:e,defaultTheme:t="system",storageKey:n="bible-companion-theme",...s}){const[a,o]=u.useState(()=>(localStorage==null?void 0:localStorage.getItem(n))||t);u.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),a==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(a)},[a]);const i={theme:a,setTheme:l=>{localStorage==null||localStorage.setItem(n,l),o(l)}};return r.jsx(q1.Provider,{...s,value:i,children:e})}const tM=()=>{const e=u.useContext(q1);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},us=Object.create(null);us.open="0";us.close="1";us.ping="2";us.pong="3";us.message="4";us.upgrade="5";us.noop="6";const Qc=Object.create(null);Object.keys(us).forEach(e=>{Qc[us[e]]=e});const gm={type:"error",data:"parser error"},V1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",F1=typeof ArrayBuffer=="function",Y1=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,tg=({type:e,data:t},n,s)=>V1&&t instanceof Blob?n?s(t):zx(t,s):F1&&(t instanceof ArrayBuffer||Y1(t))?n?s(t):zx(new Blob([t]),s):s(us[e]+(t||"")),zx=(e,t)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];t("b"+(s||""))},n.readAsDataURL(e)};function Px(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Lf;function nM(e,t){if(V1&&e.data instanceof Blob)return e.data.arrayBuffer().then(Px).then(t);if(F1&&(e.data instanceof ArrayBuffer||Y1(e.data)))return t(Px(e.data));tg(e,!1,n=>{Lf||(Lf=new TextEncoder),t(Lf.encode(n))})}const Ix="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bi=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Ix.length;e++)Bi[Ix.charCodeAt(e)]=e;const sM=e=>{let t=e.length*.75,n=e.length,s,a=0,o,i,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),f=new Uint8Array(d);for(s=0;s<n;s+=4)o=Bi[e.charCodeAt(s)],i=Bi[e.charCodeAt(s+1)],l=Bi[e.charCodeAt(s+2)],c=Bi[e.charCodeAt(s+3)],f[a++]=o<<2|i>>4,f[a++]=(i&15)<<4|l>>2,f[a++]=(l&3)<<6|c&63;return d},aM=typeof ArrayBuffer=="function",ng=(e,t)=>{if(typeof e!="string")return{type:"message",data:G1(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:rM(e.substring(1),t)}:Qc[n]?e.length>1?{type:Qc[n],data:e.substring(1)}:{type:Qc[n]}:gm},rM=(e,t)=>{if(aM){const n=sM(e);return G1(n,t)}else return{base64:!0,data:e}},G1=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Q1="",oM=(e,t)=>{const n=e.length,s=new Array(n);let a=0;e.forEach((o,i)=>{tg(o,!1,l=>{s[i]=l,++a===n&&t(s.join(Q1))})})},iM=(e,t)=>{const n=e.split(Q1),s=[];for(let a=0;a<n.length;a++){const o=ng(n[a],t);if(s.push(o),o.type==="error")break}return s};function lM(){return new TransformStream({transform(e,t){nM(e,n=>{const s=n.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,s)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(n)})}})}let zf;function Ac(e){return e.reduce((t,n)=>t+n.length,0)}function Tc(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let a=0;a<t;a++)n[a]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function cM(e,t){zf||(zf=new TextDecoder);const n=[];let s=0,a=-1,o=!1;return new TransformStream({transform(i,l){for(n.push(i);;){if(s===0){if(Ac(n)<1)break;const c=Tc(n,1);o=(c[0]&128)===128,a=c[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(Ac(n)<2)break;const c=Tc(n,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(Ac(n)<8)break;const c=Tc(n,8),d=new DataView(c.buffer,c.byteOffset,c.length),f=d.getUint32(0);if(f>Math.pow(2,21)-1){l.enqueue(gm);break}a=f*Math.pow(2,32)+d.getUint32(4),s=3}else{if(Ac(n)<a)break;const c=Tc(n,a);l.enqueue(ng(o?c:zf.decode(c),t)),s=0}if(a===0||a>e){l.enqueue(gm);break}}}})}const X1=4;function dt(e){if(e)return uM(e)}function uM(e){for(var t in dt.prototype)e[t]=dt.prototype[t];return e}dt.prototype.on=dt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};dt.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};dt.prototype.off=dt.prototype.removeListener=dt.prototype.removeAllListeners=dt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,a=0;a<n.length;a++)if(s=n[a],s===t||s.fn===t){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+e],this};dt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,a=n.length;s<a;++s)n[s].apply(this,t)}return this};dt.prototype.emitReserved=dt.prototype.emit;dt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};dt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const vd=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),gn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),dM="arraybuffer";function K1(e,...t){return t.reduce((n,s)=>(e.hasOwnProperty(s)&&(n[s]=e[s]),n),{})}const fM=gn.setTimeout,hM=gn.clearTimeout;function yd(e,t){t.useNativeTimers?(e.setTimeoutFn=fM.bind(gn),e.clearTimeoutFn=hM.bind(gn)):(e.setTimeoutFn=gn.setTimeout.bind(gn),e.clearTimeoutFn=gn.clearTimeout.bind(gn))}const mM=1.33;function pM(e){return typeof e=="string"?gM(e):Math.ceil((e.byteLength||e.size)*mM)}function gM(e){let t=0,n=0;for(let s=0,a=e.length;s<a;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}function Z1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function xM(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function vM(e){let t={},n=e.split("&");for(let s=0,a=n.length;s<a;s++){let o=n[s].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class yM extends Error{constructor(t,n,s){super(t),this.description=n,this.context=s,this.type="TransportError"}}class sg extends dt{constructor(t){super(),this.writable=!1,yd(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,s){return super.emitReserved("error",new yM(t,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=ng(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=xM(t);return n.length?"?"+n:""}}class bM extends sg{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};iM(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,oM(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Z1()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let W1=!1;try{W1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const wM=W1;function SM(){}class NM extends bM{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,n){const s=this.request({method:"POST",data:t});s.on("success",n),s.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=t}}class is extends dt{constructor(t,n,s){super(),this.createRequest=t,yd(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const n=K1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=is.requestsCount++,is.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=SM,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete is.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}is.requestsCount=0;is.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ux);else if(typeof addEventListener=="function"){const e="onpagehide"in gn?"pagehide":"unload";addEventListener(e,Ux,!1)}}function Ux(){for(let e in is.requests)is.requests.hasOwnProperty(e)&&is.requests[e].abort()}const jM=function(){const e=J1({xdomain:!1});return e&&e.responseType!==null}();class CM extends NM{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=jM&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new is(J1,this.uri(),t)}}function J1(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||wM))return new XMLHttpRequest}catch{}if(!t)try{return new gn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const eS=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class EM extends sg{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,s=eS?{}:K1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],a=n===t.length-1;tg(s,this.supportsBinary,o=>{try{this.doWrite(s,o)}catch{}a&&vd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Z1()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Pf=gn.WebSocket||gn.MozWebSocket;class kM extends EM{createSocket(t,n,s){return eS?new Pf(t,n,s):n?new Pf(t,n):new Pf(t)}doWrite(t,n){this.ws.send(n)}}class AM extends sg{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=cM(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(n).getReader(),a=lM();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const o=()=>{s.read().then(({done:l,value:c})=>{l||(this.onPacket(c),o())}).catch(l=>{})};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],a=n===t.length-1;this._writer.write(s).then(()=>{a&&vd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const TM={websocket:kM,webtransport:AM,polling:CM},RM=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,MM=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function xm(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");n!=-1&&s!=-1&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let a=RM.exec(e||""),o={},i=14;for(;i--;)o[MM[i]]=a[i]||"";return n!=-1&&s!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=_M(o,o.path),o.queryKey=OM(o,o.query),o}function _M(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function OM(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,o){a&&(n[a]=o)}),n}const vm=typeof addEventListener=="function"&&typeof removeEventListener=="function",Xc=[];vm&&addEventListener("offline",()=>{Xc.forEach(e=>e())},!1);class Ea extends dt{constructor(t,n){if(super(),this.binaryType=dM,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const s=xm(t);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=xm(n.host).host);yd(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=vM(this.opts.query)),vm&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Xc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=X1,n.transport=t,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Ea.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Ea.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const a=this.writeBuffer[s].data;if(a&&(n+=pM(a)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,vd(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,s){return this._sendPacket("message",t,n,s),this}send(t,n,s){return this._sendPacket("message",t,n,s),this}_sendPacket(t,n,s,a){if(typeof n=="function"&&(a=n,n=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const o={type:t,data:n,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(Ea.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),vm&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Xc.indexOf(this._offlineEventListener);s!==-1&&Xc.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Ea.protocol=X1;class DM extends Ea{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),s=!1;Ea.priorWebsocketSuccess=!1;const a=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ea.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=n.name,this.emitReserved("upgradeError",m)}}))};function o(){s||(s=!0,f(),n.close(),n=null)}const i=h=>{const m=new Error("probe error: "+h);m.transport=n.name,o(),this.emitReserved("upgradeError",m)};function l(){i("transport closed")}function c(){i("socket closed")}function d(h){n&&h.name!==n.name&&o()}const f=()=>{n.removeListener("open",a),n.removeListener("error",i),n.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};n.once("open",a),n.once("error",i),n.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&n.push(t[s]);return n}}let LM=class extends DM{constructor(t,n={}){const s=typeof t=="object"?t:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>TM[a]).filter(a=>!!a)),super(t,s)}};function zM(e,t="",n){let s=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),s=xm(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+t,s.href=s.protocol+"://"+o+(n&&n.port===s.port?"":":"+s.port),s}const PM=typeof ArrayBuffer=="function",IM=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,tS=Object.prototype.toString,UM=typeof Blob=="function"||typeof Blob<"u"&&tS.call(Blob)==="[object BlobConstructor]",BM=typeof File=="function"||typeof File<"u"&&tS.call(File)==="[object FileConstructor]";function ag(e){return PM&&(e instanceof ArrayBuffer||IM(e))||UM&&e instanceof Blob||BM&&e instanceof File}function Kc(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(Kc(e[n]))return!0;return!1}if(ag(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Kc(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Kc(e[n]))return!0;return!1}function $M(e){const t=[],n=e.data,s=e;return s.data=ym(n,t),s.attachments=t.length,{packet:s,buffers:t}}function ym(e,t){if(!e)return e;if(ag(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=ym(e[s],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=ym(e[s],t));return n}return e}function HM(e,t){return e.data=bm(e.data,t),delete e.attachments,e}function bm(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=bm(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=bm(e[n],t));return e}const qM=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],VM=5;var De;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(De||(De={}));class FM{constructor(t){this.replacer=t}encode(t){return(t.type===De.EVENT||t.type===De.ACK)&&Kc(t)?this.encodeAsBinary({type:t.type===De.EVENT?De.BINARY_EVENT:De.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===De.BINARY_EVENT||t.type===De.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=$M(t),s=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(s),a}}function Bx(e){return Object.prototype.toString.call(e)==="[object Object]"}class rg extends dt{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const s=n.type===De.BINARY_EVENT;s||n.type===De.BINARY_ACK?(n.type=s?De.EVENT:De.ACK,this.reconstructor=new YM(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(ag(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const s={type:Number(t.charAt(0))};if(De[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===De.BINARY_EVENT||s.type===De.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const i=t.substring(o,n);if(i!=Number(i)||t.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(i)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););s.nsp=t.substring(o,n)}else s.nsp="/";const a=t.charAt(n+1);if(a!==""&&Number(a)==a){const o=n+1;for(;++n;){const i=t.charAt(n);if(i==null||Number(i)!=i){--n;break}if(n===t.length)break}s.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(rg.isPayloadValid(s.type,o))s.data=o;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case De.CONNECT:return Bx(n);case De.DISCONNECT:return n===void 0;case De.CONNECT_ERROR:return typeof n=="string"||Bx(n);case De.EVENT:case De.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&qM.indexOf(n[0])===-1);case De.ACK:case De.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class YM{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=HM(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const GM=Object.freeze(Object.defineProperty({__proto__:null,Decoder:rg,Encoder:FM,get PacketType(){return De},protocol:VM},Symbol.toStringTag,{value:"Module"}));function Dn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const QM=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class nS extends dt{constructor(t,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Dn(t,"open",this.onopen.bind(this)),Dn(t,"packet",this.onpacket.bind(this)),Dn(t,"error",this.onerror.bind(this)),Dn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var s,a,o;if(QM.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:De.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const f=this.ids++,h=n.pop();this._registerAckCallback(f,h),i.id=f}const l=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,n){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[t]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},a),i=(...l)=>{this.io.clearTimeoutFn(o),n.apply(this,l)};i.withError=!0,this.acks[t]=i}emitWithAck(t,...n){return new Promise((s,a)=>{const o=(i,l)=>i?a(i):s(l);o.withError=!0,n.push(o),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...o)=>s!==this._queue[0]?void 0:(a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...o)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:De.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case De.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case De.EVENT:case De.BINARY_EVENT:this.onevent(t);break;case De.ACK:case De.BINARY_ACK:this.onack(t);break;case De.DISCONNECT:this.ondisconnect();break;case De.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let s=!1;return function(...a){s||(s=!0,n.packet({type:De.ACK,id:t,data:a}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:De.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,t.data)}}}function vi(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}vi.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};vi.prototype.reset=function(){this.attempts=0};vi.prototype.setMin=function(e){this.ms=e};vi.prototype.setMax=function(e){this.max=e};vi.prototype.setJitter=function(e){this.jitter=e};class wm extends dt{constructor(t,n){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,yd(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new vi({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const a=n.parser||GM;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new LM(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=Dn(n,"open",function(){s.onopen(),t&&t()}),o=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},i=Dn(n,"error",o);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Dn(t,"ping",this.onping.bind(this)),Dn(t,"data",this.ondata.bind(this)),Dn(t,"error",this.onerror.bind(this)),Dn(t,"close",this.onclose.bind(this)),Dn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){vd(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new nS(this,t,n),this.nsps[t]=s),s}_destroy(t){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let s=0;s<n.length;s++)this.engine.write(n[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const _i={};function Zc(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=zM(e,t.path||"/socket.io"),s=n.source,a=n.id,o=n.path,i=_i[a]&&o in _i[a].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||i;let c;return l?c=new wm(s,t):(_i[a]||(_i[a]=new wm(s,t)),c=_i[a]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(Zc,{Manager:wm,Socket:nS,io:Zc,connect:Zc});const XM=1,KM=1e6;let If=0;function ZM(){return If=(If+1)%Number.MAX_SAFE_INTEGER,If.toString()}const Uf=new Map,$x=e=>{if(Uf.has(e))return;const t=setTimeout(()=>{Uf.delete(e),rl({type:"REMOVE_TOAST",toastId:e})},KM);Uf.set(e,t)},WM=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,XM)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?$x(n):e.toasts.forEach(s=>{$x(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Wc=[];let Jc={toasts:[]};function rl(e){Jc=WM(Jc,e),Wc.forEach(t=>{t(Jc)})}function JM({...e}){const t=ZM(),n=a=>rl({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>rl({type:"DISMISS_TOAST",toastId:t});return rl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:n}}function Ht(){const[e,t]=u.useState(Jc);return u.useEffect(()=>(Wc.push(t),()=>{const n=Wc.indexOf(t);n>-1&&Wc.splice(n,1)}),[e]),{...e,toast:JM,dismiss:n=>rl({type:"DISMISS_TOAST",toastId:n})}}const sS=u.createContext(null);function e_({children:e}){const[t,n]=u.useState(null),[s,a]=u.useState(!1),[o,i]=u.useState([]),[l,c]=u.useState(null),[d,f]=u.useState([]),[h,m]=u.useState(null),[g,b]=u.useState(!1),x=u.useRef(0),w=5,{toast:v}=Ht(),p=u.useRef(!1);u.useEffect(()=>{if(p.current)return;p.current=!0;const A=()=>{if(t&&t.connected)return console.log("Socket already connected, skipping initialization"),t;const T=Zc("http://localhost:3001",{transports:["websocket","polling"],autoConnect:!0,reconnection:!0,reconnectionAttempts:w,reconnectionDelay:1e3,forceNew:!1});return T.on("connect",()=>{if(console.log("Connected to AI Agent system"),a(!0),x.current=0,T.emit("requestAgentStatus"),h)console.log("Session already exists:",h);else{const I=setTimeout(()=>{console.warn("Session creation timeout - proceeding without session")},5e3);T.emit("createSession",{userId:2},R=>{clearTimeout(I),R!=null&&R.sessionId&&!h?(m(R.sessionId),console.log("Chat session created:",R.sessionId)):R!=null&&R.error?console.error("Session creation failed:",R.error):console.warn("Session creation - unexpected response:",R)})}}),T.on("disconnect",()=>{console.log("Disconnected from AI Agent system"),a(!1)}),T.on("connect_error",I=>{console.error("Connection error:",I),console.error("Error details:",{message:I.message,stack:I.stack,name:I.name}),a(!1),x.current++,x.current>=w&&console.error("Max reconnection attempts reached")}),T.on("agentStatus",I=>{c(I),i(I.agents||[])}),T.on("systemStatus",I=>{c(I),i(I.agents||[])}),T.on("insightsGenerated",I=>{f(R=>[...I.insights,...R].slice(0,20))}),T.on("analysisCompleted",I=>{console.log("Analysis completed:",I)}),T.on("taskCompleted",I=>{console.log("Task completed:",I)}),T.on("taskFailed",I=>{console.error("Task failed:",I)}),T.on("agentLog",I=>{console.log(`[${I.agent}] ${I.message}`)}),T};if(!t||!t.connected){const T=A();T&&T!==t&&n(T)}return()=>{t&&t.connected&&(console.log("Cleaning up global agent socket connection"),t.disconnect())}},[]),u.useEffect(()=>{if(h){const A=localStorage.getItem("lastGlobalSessionId");if(A&&A!==h){console.log("🔄 Global server restart detected"),b(!0);const T=[];for(let I=0;I<localStorage.length;I++){const R=localStorage.key(I);R&&(R.includes("ai_chat_")||R.includes("discussion_"))&&T.push(R)}T.forEach(I=>localStorage.removeItem(I)),v({title:"Server Restarted",description:"AI conversations have been reset due to server restart. Learning data is preserved.",duration:5e3}),setTimeout(()=>b(!1),5e3)}localStorage.setItem("lastGlobalSessionId",h)}},[h,v]);const E={socket:t,isConnected:s,agentStatuses:o,systemStatus:l,insights:d,sessionId:h,serverRestartDetected:g,sendMessage:async(A,T)=>{if(!t||!s)throw new Error("Not connected to agent system");if(!h)throw new Error("Chat session not initialized");return new Promise((I,R)=>{const $=setTimeout(()=>{R(new Error("Message timeout"))},18e4),K={...T,sessionId:h,userId:(T==null?void 0:T.userId)||2};t.emit("chatMessage",{message:A,context:K},C=>{clearTimeout($),C!=null&&C.error?R(new Error(C.error)):I()})})},requestAnalysis:async(A,T,I)=>{if(!t||!s)throw new Error("Not connected to agent system");return new Promise((R,$)=>{const K=setTimeout(()=>{$(new Error("Analysis request timeout"))},5e3);t.emit("requestAnalysis",{documentId:A,chapter:T,agentType:I||"text-analysis"},C=>{clearTimeout(K),C!=null&&C.error?$(new Error(C.error)):R()})})},refreshStatus:()=>{t&&s&&t.emit("requestAgentStatus")},getConnectionStatus:()=>({isConnected:s,reconnectAttempts:x.current,maxReconnectAttempts:w,canReconnect:x.current<w}),reconnect:()=>{t&&x.current<w&&t.connect()}};return r.jsx(sS.Provider,{value:E,children:e})}function t_(){const e=u.useContext(sS);if(!e)throw new Error("useAgentSocket must be used within an AgentSocketProvider");return e}const Oi=[{code:"en",name:"English",nativeName:"English",rtl:!1,flag:"🇺🇸",gemmaSupported:!0},{code:"es",name:"Spanish",nativeName:"Español",rtl:!1,flag:"🇪🇸",gemmaSupported:!0},{code:"fr",name:"French",nativeName:"Français",rtl:!1,flag:"🇫🇷",gemmaSupported:!0},{code:"de",name:"German",nativeName:"Deutsch",rtl:!1,flag:"🇩🇪",gemmaSupported:!0},{code:"ja",name:"Japanese",nativeName:"日本語",rtl:!1,flag:"🇯🇵",gemmaSupported:!0},{code:"ko",name:"Korean",nativeName:"한국어",rtl:!1,flag:"🇰🇷",gemmaSupported:!0}],aS=u.createContext(void 0);function n_({children:e}){const[t,n]=u.useState(()=>{var x;const g=localStorage.getItem("bible-companion-language");if(g&&Oi.find(w=>w.code===g))return g;const b=navigator.language.split("-")[0];return((x=Oi.find(w=>w.code===b))==null?void 0:x.code)||"en"}),[s,a]=u.useState(!1),o=g=>{n(g),localStorage.setItem("bible-companion-language",g),document.documentElement.lang=g;const b=Oi.find(x=>x.code===g);b!=null&&b.rtl?document.documentElement.dir="rtl":document.documentElement.dir="ltr"},i=async g=>{if(g.targetLanguage===t&&!g.sourceLanguage)return g.text;a(!0);try{const b=await fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:g.text,targetLanguage:g.targetLanguage,sourceLanguage:g.sourceLanguage||t,context:g.context||"general"})});if(!b.ok)throw new Error("Translation failed");return(await b.json()).translatedText}catch(b){return console.error("Translation error:",b),g.text}finally{a(!1)}},l=async g=>{a(!0);try{const b=await fetch("/api/translate-batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:g})});if(!b.ok)throw new Error("Batch translation failed");return(await b.json()).translations}catch(b){return console.error("Batch translation error:",b),g.map(x=>x.text)}finally{a(!1)}},c=async g=>{try{const b=await fetch("/api/detect-language",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:g})});if(!b.ok)throw new Error("Language detection failed");return(await b.json()).language||"en"}catch(b){return console.error("Language detection error:",b),"en"}},d=async(g,b)=>i({text:g,targetLanguage:b,context:"biblical"}),f=async(g,b)=>{const x=await Promise.all(g.questions.map(async w=>{var v;return{...w,question:await i({text:w.question,targetLanguage:b,context:"quiz"}),options:await l(((v=w.options)==null?void 0:v.map(p=>({text:p,targetLanguage:b,context:"quiz"})))||[]),explanation:await i({text:w.explanation,targetLanguage:b,context:"explanation"})}}));return{...g,title:await i({text:g.title,targetLanguage:b,context:"quiz"}),description:await i({text:g.description,targetLanguage:b,context:"quiz"}),questions:x}},h=g=>Oi.find(b=>b.code===g);u.useEffect(()=>{document.documentElement.lang=t},[t]);const m={currentLanguage:t,setLanguage:o,translate:i,translateBatch:l,isTranslating:s,supportedLanguages:Oi,getLanguageConfig:h,detectLanguage:c,translateDocumentContent:d,translateQuizContent:f};return r.jsx(aS.Provider,{value:m,children:e})}const bd=()=>{const e=u.useContext(aS);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},Hx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,qx=_1,wd=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return qx(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(d=>{const f=n==null?void 0:n[d],h=o==null?void 0:o[d];if(f===null)return null;const m=Hx(f)||Hx(h);return a[d][m]}),l=n&&Object.entries(n).reduce((d,f)=>{let[h,m]=f;return m===void 0||(d[h]=m),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:h,className:m,...g}=f;return Object.entries(g).every(b=>{let[x,w]=b;return Array.isArray(w)?w.includes({...o,...l}[x]):{...o,...l}[x]===w})?[...d,h,m]:d},[]);return qx(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)},s_=wd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),F=u.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...a},o)=>{const i=s?uT:"button";return r.jsx(i,{className:be(s_({variant:t,size:n,className:e})),ref:o,...a})});F.displayName="Button";/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r_=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),Vx=e=>{const t=r_(e);return t.charAt(0).toUpperCase()+t.slice(1)},rS=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),o_=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:i,...l},c)=>u.createElement("svg",{ref:c,...i_,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:rS("lucide",a),...!o&&!o_(l)&&{"aria-hidden":"true"},...l},[...i.map(([d,f])=>u.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(e,t)=>{const n=u.forwardRef(({className:s,...a},o)=>u.createElement(l_,{ref:o,iconNode:t,className:rS(`lucide-${a_(Vx(e))}`,`lucide-${e}`,s),...a}));return n.displayName=Vx(e),n};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Sm=le("activity",c_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ha=le("arrow-left",u_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],f_=le("arrow-right",d_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],m_=le("book-marked",h_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Pn=le("book-open",p_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],x_=le("bookmark-plus",g_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Ar=le("bookmark",v_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Nn=le("bot",y_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],xn=le("brain",b_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Wl=le("calendar",w_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],N_=le("chart-column",S_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Sd=le("check",j_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Nd=le("chevron-down",C_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Fx=le("chevron-left",E_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],og=le("chevron-right",k_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],oS=le("chevron-up",A_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ko=le("circle-alert",T_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Nm=le("circle-check-big",R_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],__=le("circle-help",M_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],D_=le("circle",O_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Jl=le("clock",L_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],P_=le("copy",z_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],iS=le("database",I_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],lS=le("download",U_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cS=le("eye",B_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$n=le("file-text",$_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],ig=le("file",H_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],uS=le("folder-open",q_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],F_=le("globe",V_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Ao=le("graduation-cap",Y_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Q_=le("hard-drive",G_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],K_=le("hash",X_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],Pu=le("highlighter",Z_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],J_=le("house",W_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],tO=le("layout-grid",eO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],dS=le("library",nO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],aO=le("lightbulb",sO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],oO=le("list",rO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],El=le("loader-circle",iO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],qr=le("maximize-2",lO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],To=le("message-circle",cO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],ka=le("message-square",uO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],Yx=le("mic",dO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],qa=le("minimize-2",fO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],mO=le("moon",hO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],gO=le("palette",pO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],vO=le("pause",xO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],bO=le("pen-line",yO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],fS=le("play",wO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Aa=le("plus",SO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],jO=le("quote",NO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ol=le("refresh-cw",CO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Tr=le("search",EO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],jd=le("send",kO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ro=le("settings",AO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],RO=le("share-2",TO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],_O=le("shield",MO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],hS=le("sparkles",OO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],mS=le("square-pen",DO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],pS=le("star",LO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],Vn=le("sticky-note",zO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],IO=le("sun",PO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],lg=le("tag",UO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$O=le("target",BO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],cg=le("thumbs-down",HO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],ug=le("thumbs-up",qO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Vr=le("trash-2",VO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],dg=le("trending-up",FO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Gx=le("triangle-alert",YO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],jm=le("upload",GO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gS=le("user",QO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],KO=le("users",XO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],xS=le("volume-2",ZO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],kn=le("x",WO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Qt=le("zap",JO);function Cd(e){const t=e+"CollectionProvider",[n,s]=on(t),[a,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=x=>{const{scope:w,children:v}=x,p=js.useRef(null),y=js.useRef(new Map).current;return r.jsx(a,{scope:w,itemMap:y,collectionRef:p,children:v})};i.displayName=t;const l=e+"CollectionSlot",c=Oa(l),d=js.forwardRef((x,w)=>{const{scope:v,children:p}=x,y=o(l,v),S=we(w,y.collectionRef);return r.jsx(c,{ref:S,children:p})});d.displayName=l;const f=e+"CollectionItemSlot",h="data-radix-collection-item",m=Oa(f),g=js.forwardRef((x,w)=>{const{scope:v,children:p,...y}=x,S=js.useRef(null),j=we(w,S),k=o(f,v);return js.useEffect(()=>(k.itemMap.set(S,{ref:S,...y}),()=>void k.itemMap.delete(S))),r.jsx(m,{[h]:"",ref:j,children:p})});g.displayName=f;function b(x){const w=o(e+"CollectionConsumer",x);return js.useCallback(()=>{const p=w.collectionRef.current;if(!p)return[];const y=Array.from(p.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((k,N)=>y.indexOf(k.ref.current)-y.indexOf(N.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:d,ItemSlot:g},b,s]}var e3=u.createContext(void 0);function yi(e){const t=u.useContext(e3);return e||t||"ltr"}var Bf=0;function Ed(){u.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Qx()),document.body.insertAdjacentElement("beforeend",e[1]??Qx()),Bf++,()=>{Bf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Bf--}},[])}function Qx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var $f="focusScope.autoFocusOnMount",Hf="focusScope.autoFocusOnUnmount",Xx={bubbles:!1,cancelable:!0},t3="FocusScope",ec=u.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[l,c]=u.useState(null),d=Ct(a),f=Ct(o),h=u.useRef(null),m=we(t,x=>c(x)),g=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(s){let x=function(y){if(g.paused||!l)return;const S=y.target;l.contains(S)?h.current=S:Ws(h.current,{select:!0})},w=function(y){if(g.paused||!l)return;const S=y.relatedTarget;S!==null&&(l.contains(S)||Ws(h.current,{select:!0}))},v=function(y){if(document.activeElement===document.body)for(const j of y)j.removedNodes.length>0&&Ws(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",w);const p=new MutationObserver(v);return l&&p.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",w),p.disconnect()}}},[s,l,g.paused]),u.useEffect(()=>{if(l){Zx.add(g);const x=document.activeElement;if(!l.contains(x)){const v=new CustomEvent($f,Xx);l.addEventListener($f,d),l.dispatchEvent(v),v.defaultPrevented||(n3(i3(vS(l)),{select:!0}),document.activeElement===x&&Ws(l))}return()=>{l.removeEventListener($f,d),setTimeout(()=>{const v=new CustomEvent(Hf,Xx);l.addEventListener(Hf,f),l.dispatchEvent(v),v.defaultPrevented||Ws(x??document.body,{select:!0}),l.removeEventListener(Hf,f),Zx.remove(g)},0)}}},[l,d,f,g]);const b=u.useCallback(x=>{if(!n&&!s||g.paused)return;const w=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,v=document.activeElement;if(w&&v){const p=x.currentTarget,[y,S]=s3(p);y&&S?!x.shiftKey&&v===S?(x.preventDefault(),n&&Ws(y,{select:!0})):x.shiftKey&&v===y&&(x.preventDefault(),n&&Ws(S,{select:!0})):v===p&&x.preventDefault()}},[n,s,g.paused]);return r.jsx(xe.div,{tabIndex:-1,...i,ref:m,onKeyDown:b})});ec.displayName=t3;function n3(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Ws(s,{select:t}),document.activeElement!==n)return}function s3(e){const t=vS(e),n=Kx(t,e),s=Kx(t.reverse(),e);return[n,s]}function vS(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Kx(e,t){for(const n of e)if(!a3(n,{upTo:t}))return n}function a3(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function r3(e){return e instanceof HTMLInputElement&&"select"in e}function Ws(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&r3(e)&&t&&e.select()}}var Zx=o3();function o3(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Wx(e,t),e.unshift(t)},remove(t){var n;e=Wx(e,t),(n=e[0])==null||n.resume()}}}function Wx(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function i3(e){return e.filter(t=>t.tagName!=="A")}var qf="rovingFocusGroup.onEntryFocus",l3={bubbles:!1,cancelable:!0},tc="RovingFocusGroup",[Cm,yS,c3]=Cd(tc),[u3,kd]=on(tc,[c3]),[d3,f3]=u3(tc),bS=u.forwardRef((e,t)=>r.jsx(Cm.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Cm.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(h3,{...e,ref:t})})}));bS.displayName=tc;var h3=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...h}=e,m=u.useRef(null),g=we(t,m),b=yi(o),[x,w]=za({prop:i,defaultProp:l??null,onChange:c,caller:tc}),[v,p]=u.useState(!1),y=Ct(d),S=yS(n),j=u.useRef(!1),[k,N]=u.useState(0);return u.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(qf,y),()=>E.removeEventListener(qf,y)},[y]),r.jsx(d3,{scope:n,orientation:s,dir:b,loop:a,currentTabStopId:x,onItemFocus:u.useCallback(E=>w(E),[w]),onItemShiftTab:u.useCallback(()=>p(!0),[]),onFocusableItemAdd:u.useCallback(()=>N(E=>E+1),[]),onFocusableItemRemove:u.useCallback(()=>N(E=>E-1),[]),children:r.jsx(xe.div,{tabIndex:v||k===0?-1:0,"data-orientation":s,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:re(e.onMouseDown,()=>{j.current=!0}),onFocus:re(e.onFocus,E=>{const A=!j.current;if(E.target===E.currentTarget&&A&&!v){const T=new CustomEvent(qf,l3);if(E.currentTarget.dispatchEvent(T),!T.defaultPrevented){const I=S().filter(D=>D.focusable),R=I.find(D=>D.active),$=I.find(D=>D.id===x),C=[R,$,...I].filter(Boolean).map(D=>D.ref.current);NS(C,f)}}j.current=!1}),onBlur:re(e.onBlur,()=>p(!1))})})}),wS="RovingFocusGroupItem",SS=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:o,children:i,...l}=e,c=Bn(),d=o||c,f=f3(wS,n),h=f.currentTabStopId===d,m=yS(n),{onFocusableItemAdd:g,onFocusableItemRemove:b,currentTabStopId:x}=f;return u.useEffect(()=>{if(s)return g(),()=>b()},[s,g,b]),r.jsx(Cm.ItemSlot,{scope:n,id:d,focusable:s,active:a,children:r.jsx(xe.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:re(e.onMouseDown,w=>{s?f.onItemFocus(d):w.preventDefault()}),onFocus:re(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:re(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){f.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=g3(w,f.orientation,f.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let y=m().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")y.reverse();else if(v==="prev"||v==="next"){v==="prev"&&y.reverse();const S=y.indexOf(w.currentTarget);y=f.loop?x3(y,S+1):y.slice(S+1)}setTimeout(()=>NS(y))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:x!=null}):i})})});SS.displayName=wS;var m3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function p3(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function g3(e,t,n){const s=p3(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return m3[s]}function NS(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function x3(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var jS=bS,CS=SS,v3=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Wr=new WeakMap,Rc=new WeakMap,Mc={},Vf=0,ES=function(e){return e&&(e.host||ES(e.parentNode))},y3=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=ES(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},b3=function(e,t,n,s){var a=y3(t,Array.isArray(e)?e:[e]);Mc[n]||(Mc[n]=new WeakMap);var o=Mc[n],i=[],l=new Set,c=new Set(a),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};a.forEach(d);var f=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))f(m);else try{var g=m.getAttribute(s),b=g!==null&&g!=="false",x=(Wr.get(m)||0)+1,w=(o.get(m)||0)+1;Wr.set(m,x),o.set(m,w),i.push(m),x===1&&b&&Rc.set(m,!0),w===1&&m.setAttribute(n,"true"),b||m.setAttribute(s,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return f(t),l.clear(),Vf++,function(){i.forEach(function(h){var m=Wr.get(h)-1,g=o.get(h)-1;Wr.set(h,m),o.set(h,g),m||(Rc.has(h)||h.removeAttribute(s),Rc.delete(h)),g||h.removeAttribute(n)}),Vf--,Vf||(Wr=new WeakMap,Wr=new WeakMap,Rc=new WeakMap,Mc={})}},Ad=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=v3(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),b3(s,a,n,"aria-hidden")):function(){return null}},es=function(){return es=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},es.apply(this,arguments)};function kS(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function w3(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var eu="right-scroll-bar-position",tu="width-before-scroll-bar",S3="with-scroll-bars-hidden",N3="--removed-body-scroll-bar-size";function Ff(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function j3(e,t){var n=u.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=t,n.facade}var C3=typeof window<"u"?u.useLayoutEffect:u.useEffect,Jx=new WeakMap;function E3(e,t){var n=j3(null,function(s){return e.forEach(function(a){return Ff(a,s)})});return C3(function(){var s=Jx.get(n);if(s){var a=new Set(s),o=new Set(e),i=n.current;a.forEach(function(l){o.has(l)||Ff(l,null)}),o.forEach(function(l){a.has(l)||Ff(l,i)})}Jx.set(n,e)},[e]),n}function k3(e){return e}function A3(e,t){t===void 0&&(t=k3);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,s);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(s=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){s=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(o),i=n}var c=function(){var f=i;i=[],f.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(f){i.push(f),d()},filter:function(f){return i=i.filter(f),n}}}};return a}function T3(e){e===void 0&&(e={});var t=A3(null);return t.options=es({async:!0,ssr:!1},e),t}var AS=function(e){var t=e.sideCar,n=kS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return u.createElement(s,es({},n))};AS.isSideCarExport=!0;function R3(e,t){return e.useMedium(t),AS}var TS=T3(),Yf=function(){},Td=u.forwardRef(function(e,t){var n=u.useRef(null),s=u.useState({onScrollCapture:Yf,onWheelCapture:Yf,onTouchMoveCapture:Yf}),a=s[0],o=s[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,g=e.noRelative,b=e.noIsolation,x=e.inert,w=e.allowPinchZoom,v=e.as,p=v===void 0?"div":v,y=e.gapMode,S=kS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,k=E3([n,t]),N=es(es({},S),a);return u.createElement(u.Fragment,null,f&&u.createElement(j,{sideCar:TS,removeScrollBar:d,shards:h,noRelative:g,noIsolation:b,inert:x,setCallbacks:o,allowPinchZoom:!!w,lockRef:n,gapMode:y}),i?u.cloneElement(u.Children.only(l),es(es({},N),{ref:k})):u.createElement(p,es({},N,{className:c,ref:k}),l))});Td.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Td.classNames={fullWidth:tu,zeroRight:eu};var M3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _3(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=M3();return t&&e.setAttribute("nonce",t),e}function O3(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function D3(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var L3=function(){var e=0,t=null;return{add:function(n){e==0&&(t=_3())&&(O3(t,n),D3(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},z3=function(){var e=L3();return function(t,n){u.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},RS=function(){var e=z3(),t=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return t},P3={left:0,top:0,right:0,gap:0},Gf=function(e){return parseInt(e||"",10)||0},I3=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Gf(n),Gf(s),Gf(a)]},U3=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return P3;var t=I3(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},B3=RS(),Mo="data-scroll-locked",$3=function(e,t,n,s){var a=e.left,o=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(S3,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Mo,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(eu,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(tu,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(eu," .").concat(eu,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(tu," .").concat(tu,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Mo,`] {
    `).concat(N3,": ").concat(l,`px;
  }
`)},ev=function(){var e=parseInt(document.body.getAttribute(Mo)||"0",10);return isFinite(e)?e:0},H3=function(){u.useEffect(function(){return document.body.setAttribute(Mo,(ev()+1).toString()),function(){var e=ev()-1;e<=0?document.body.removeAttribute(Mo):document.body.setAttribute(Mo,e.toString())}},[])},q3=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;H3();var o=u.useMemo(function(){return U3(a)},[a]);return u.createElement(B3,{styles:$3(o,!t,a,n?"":"!important")})},Em=!1;if(typeof window<"u")try{var _c=Object.defineProperty({},"passive",{get:function(){return Em=!0,!0}});window.addEventListener("test",_c,_c),window.removeEventListener("test",_c,_c)}catch{Em=!1}var Jr=Em?{passive:!1}:!1,V3=function(e){return e.tagName==="TEXTAREA"},MS=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!V3(e)&&n[t]==="visible")},F3=function(e){return MS(e,"overflowY")},Y3=function(e){return MS(e,"overflowX")},tv=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=_S(e,s);if(a){var o=OS(e,s),i=o[1],l=o[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},G3=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},Q3=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},_S=function(e,t){return e==="v"?F3(t):Y3(t)},OS=function(e,t){return e==="v"?G3(t):Q3(t)},X3=function(e,t){return e==="h"&&t==="rtl"?-1:1},K3=function(e,t,n,s,a){var o=X3(e,window.getComputedStyle(t).direction),i=o*s,l=n.target,c=t.contains(l),d=!1,f=i>0,h=0,m=0;do{if(!l)break;var g=OS(e,l),b=g[0],x=g[1],w=g[2],v=x-w-o*b;(b||v)&&_S(e,l)&&(h+=v,m+=b);var p=l.parentNode;l=p&&p.nodeType===Node.DOCUMENT_FRAGMENT_NODE?p.host:p}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&Math.abs(h)<1||!f&&Math.abs(m)<1)&&(d=!0),d},Oc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},nv=function(e){return[e.deltaX,e.deltaY]},sv=function(e){return e&&"current"in e?e.current:e},Z3=function(e,t){return e[0]===t[0]&&e[1]===t[1]},W3=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},J3=0,eo=[];function e5(e){var t=u.useRef([]),n=u.useRef([0,0]),s=u.useRef(),a=u.useState(J3++)[0],o=u.useState(RS)[0],i=u.useRef(e);u.useEffect(function(){i.current=e},[e]),u.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var x=w3([e.lockRef.current],(e.shards||[]).map(sv),!0).filter(Boolean);return x.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=u.useCallback(function(x,w){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!i.current.allowPinchZoom;var v=Oc(x),p=n.current,y="deltaX"in x?x.deltaX:p[0]-v[0],S="deltaY"in x?x.deltaY:p[1]-v[1],j,k=x.target,N=Math.abs(y)>Math.abs(S)?"h":"v";if("touches"in x&&N==="h"&&k.type==="range")return!1;var E=tv(N,k);if(!E)return!0;if(E?j=N:(j=N==="v"?"h":"v",E=tv(N,k)),!E)return!1;if(!s.current&&"changedTouches"in x&&(y||S)&&(s.current=j),!j)return!0;var A=s.current||j;return K3(A,w,x,A==="h"?y:S)},[]),c=u.useCallback(function(x){var w=x;if(!(!eo.length||eo[eo.length-1]!==o)){var v="deltaY"in w?nv(w):Oc(w),p=t.current.filter(function(j){return j.name===w.type&&(j.target===w.target||w.target===j.shadowParent)&&Z3(j.delta,v)})[0];if(p&&p.should){w.cancelable&&w.preventDefault();return}if(!p){var y=(i.current.shards||[]).map(sv).filter(Boolean).filter(function(j){return j.contains(w.target)}),S=y.length>0?l(w,y[0]):!i.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),d=u.useCallback(function(x,w,v,p){var y={name:x,delta:w,target:v,should:p,shadowParent:t5(v)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(S){return S!==y})},1)},[]),f=u.useCallback(function(x){n.current=Oc(x),s.current=void 0},[]),h=u.useCallback(function(x){d(x.type,nv(x),x.target,l(x,e.lockRef.current))},[]),m=u.useCallback(function(x){d(x.type,Oc(x),x.target,l(x,e.lockRef.current))},[]);u.useEffect(function(){return eo.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Jr),document.addEventListener("touchmove",c,Jr),document.addEventListener("touchstart",f,Jr),function(){eo=eo.filter(function(x){return x!==o}),document.removeEventListener("wheel",c,Jr),document.removeEventListener("touchmove",c,Jr),document.removeEventListener("touchstart",f,Jr)}},[]);var g=e.removeScrollBar,b=e.inert;return u.createElement(u.Fragment,null,b?u.createElement(o,{styles:W3(a)}):null,g?u.createElement(q3,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function t5(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const n5=R3(TS,e5);var nc=u.forwardRef(function(e,t){return u.createElement(Td,es({},e,{ref:t,sideCar:n5}))});nc.classNames=Td.classNames;var km=["Enter"," "],s5=["ArrowDown","PageUp","Home"],DS=["ArrowUp","PageDown","End"],a5=[...s5,...DS],r5={ltr:[...km,"ArrowRight"],rtl:[...km,"ArrowLeft"]},o5={ltr:["ArrowLeft"],rtl:["ArrowRight"]},sc="Menu",[kl,i5,l5]=Cd(sc),[Fr,LS]=on(sc,[l5,$a,kd]),Rd=$a(),zS=kd(),[c5,Yr]=Fr(sc),[u5,ac]=Fr(sc),PS=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:a,onOpenChange:o,modal:i=!0}=e,l=Rd(t),[c,d]=u.useState(null),f=u.useRef(!1),h=Ct(o),m=yi(a);return u.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),r.jsx(Wp,{...l,children:r.jsx(c5,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:r.jsx(u5,{scope:t,onClose:u.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:m,modal:i,children:s})})})};PS.displayName=sc;var d5="MenuAnchor",fg=u.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=Rd(n);return r.jsx(Kl,{...a,...s,ref:t})});fg.displayName=d5;var hg="MenuPortal",[f5,IS]=Fr(hg,{forceMount:void 0}),US=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:a}=e,o=Yr(hg,t);return r.jsx(f5,{scope:t,forceMount:n,children:r.jsx(_t,{present:n||o.open,children:r.jsx(Zl,{asChild:!0,container:a,children:s})})})};US.displayName=hg;var jn="MenuContent",[h5,mg]=Fr(jn),BS=u.forwardRef((e,t)=>{const n=IS(jn,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,o=Yr(jn,e.__scopeMenu),i=ac(jn,e.__scopeMenu);return r.jsx(kl.Provider,{scope:e.__scopeMenu,children:r.jsx(_t,{present:s||o.open,children:r.jsx(kl.Slot,{scope:e.__scopeMenu,children:i.modal?r.jsx(m5,{...a,ref:t}):r.jsx(p5,{...a,ref:t})})})})}),m5=u.forwardRef((e,t)=>{const n=Yr(jn,e.__scopeMenu),s=u.useRef(null),a=we(t,s);return u.useEffect(()=>{const o=s.current;if(o)return Ad(o)},[]),r.jsx(pg,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:re(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),p5=u.forwardRef((e,t)=>{const n=Yr(jn,e.__scopeMenu);return r.jsx(pg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),g5=Oa("MenuContent.ScrollLock"),pg=u.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:b,...x}=e,w=Yr(jn,n),v=ac(jn,n),p=Rd(n),y=zS(n),S=i5(n),[j,k]=u.useState(null),N=u.useRef(null),E=we(t,N,w.onContentChange),A=u.useRef(0),T=u.useRef(""),I=u.useRef(0),R=u.useRef(null),$=u.useRef("right"),K=u.useRef(0),C=b?nc:u.Fragment,D=b?{as:g5,allowPinchZoom:!0}:void 0,H=U=>{var B,J;const z=T.current+U,P=S().filter(q=>!q.disabled),V=document.activeElement,Q=(B=P.find(q=>q.ref.current===V))==null?void 0:B.textValue,_=P.map(q=>q.textValue),se=A5(_,z,Q),oe=(J=P.find(q=>q.textValue===se))==null?void 0:J.ref.current;(function q(Y){T.current=Y,window.clearTimeout(A.current),Y!==""&&(A.current=window.setTimeout(()=>q(""),1e3))})(z),oe&&setTimeout(()=>oe.focus())};u.useEffect(()=>()=>window.clearTimeout(A.current),[]),Ed();const M=u.useCallback(U=>{var P,V;return $.current===((P=R.current)==null?void 0:P.side)&&R5(U,(V=R.current)==null?void 0:V.area)},[]);return r.jsx(h5,{scope:n,searchRef:T,onItemEnter:u.useCallback(U=>{M(U)&&U.preventDefault()},[M]),onItemLeave:u.useCallback(U=>{var z;M(U)||((z=N.current)==null||z.focus(),k(null))},[M]),onTriggerLeave:u.useCallback(U=>{M(U)&&U.preventDefault()},[M]),pointerGraceTimerRef:I,onPointerGraceIntentChange:u.useCallback(U=>{R.current=U},[]),children:r.jsx(C,{...D,children:r.jsx(ec,{asChild:!0,trapped:a,onMountAutoFocus:re(o,U=>{var z;U.preventDefault(),(z=N.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:r.jsx(hi,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:r.jsx(jS,{asChild:!0,...y,dir:v.dir,orientation:"vertical",loop:s,currentTabStopId:j,onCurrentTabStopIdChange:k,onEntryFocus:re(c,U=>{v.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(md,{role:"menu","aria-orientation":"vertical","data-state":nN(w.open),"data-radix-menu-content":"",dir:v.dir,...p,...x,ref:E,style:{outline:"none",...x.style},onKeyDown:re(x.onKeyDown,U=>{const P=U.target.closest("[data-radix-menu-content]")===U.currentTarget,V=U.ctrlKey||U.altKey||U.metaKey,Q=U.key.length===1;P&&(U.key==="Tab"&&U.preventDefault(),!V&&Q&&H(U.key));const _=N.current;if(U.target!==_||!a5.includes(U.key))return;U.preventDefault();const oe=S().filter(B=>!B.disabled).map(B=>B.ref.current);DS.includes(U.key)&&oe.reverse(),E5(oe)}),onBlur:re(e.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(A.current),T.current="")}),onPointerMove:re(e.onPointerMove,Al(U=>{const z=U.target,P=K.current!==U.clientX;if(U.currentTarget.contains(z)&&P){const V=U.clientX>K.current?"right":"left";$.current=V,K.current=U.clientX}}))})})})})})})});BS.displayName=jn;var x5="MenuGroup",gg=u.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(xe.div,{role:"group",...s,ref:t})});gg.displayName=x5;var v5="MenuLabel",$S=u.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(xe.div,{...s,ref:t})});$S.displayName=v5;var Iu="MenuItem",av="menu.itemSelect",Md=u.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...a}=e,o=u.useRef(null),i=ac(Iu,e.__scopeMenu),l=mg(Iu,e.__scopeMenu),c=we(t,o),d=u.useRef(!1),f=()=>{const h=o.current;if(!n&&h){const m=new CustomEvent(av,{bubbles:!0,cancelable:!0});h.addEventListener(av,g=>s==null?void 0:s(g),{once:!0}),Kw(h,m),m.defaultPrevented?d.current=!1:i.onClose()}};return r.jsx(HS,{...a,ref:c,disabled:n,onClick:re(e.onClick,f),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),d.current=!0},onPointerUp:re(e.onPointerUp,h=>{var m;d.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:re(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||km.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Md.displayName=Iu;var HS=u.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:a,...o}=e,i=mg(Iu,n),l=zS(n),c=u.useRef(null),d=we(t,c),[f,h]=u.useState(!1),[m,g]=u.useState("");return u.useEffect(()=>{const b=c.current;b&&g((b.textContent??"").trim())},[o.children]),r.jsx(kl.ItemSlot,{scope:n,disabled:s,textValue:a??m,children:r.jsx(CS,{asChild:!0,...l,focusable:!s,children:r.jsx(xe.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...o,ref:d,onPointerMove:re(e.onPointerMove,Al(b=>{s?i.onItemLeave(b):(i.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:re(e.onPointerLeave,Al(b=>i.onItemLeave(b))),onFocus:re(e.onFocus,()=>h(!0)),onBlur:re(e.onBlur,()=>h(!1))})})})}),y5="MenuCheckboxItem",qS=u.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...a}=e;return r.jsx(QS,{scope:e.__scopeMenu,checked:n,children:r.jsx(Md,{role:"menuitemcheckbox","aria-checked":Uu(n)?"mixed":n,...a,ref:t,"data-state":vg(n),onSelect:re(a.onSelect,()=>s==null?void 0:s(Uu(n)?!0:!n),{checkForDefaultPrevented:!1})})})});qS.displayName=y5;var VS="MenuRadioGroup",[b5,w5]=Fr(VS,{value:void 0,onValueChange:()=>{}}),FS=u.forwardRef((e,t)=>{const{value:n,onValueChange:s,...a}=e,o=Ct(s);return r.jsx(b5,{scope:e.__scopeMenu,value:n,onValueChange:o,children:r.jsx(gg,{...a,ref:t})})});FS.displayName=VS;var YS="MenuRadioItem",GS=u.forwardRef((e,t)=>{const{value:n,...s}=e,a=w5(YS,e.__scopeMenu),o=n===a.value;return r.jsx(QS,{scope:e.__scopeMenu,checked:o,children:r.jsx(Md,{role:"menuitemradio","aria-checked":o,...s,ref:t,"data-state":vg(o),onSelect:re(s.onSelect,()=>{var i;return(i=a.onValueChange)==null?void 0:i.call(a,n)},{checkForDefaultPrevented:!1})})})});GS.displayName=YS;var xg="MenuItemIndicator",[QS,S5]=Fr(xg,{checked:!1}),XS=u.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...a}=e,o=S5(xg,n);return r.jsx(_t,{present:s||Uu(o.checked)||o.checked===!0,children:r.jsx(xe.span,{...a,ref:t,"data-state":vg(o.checked)})})});XS.displayName=xg;var N5="MenuSeparator",KS=u.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(xe.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});KS.displayName=N5;var j5="MenuArrow",ZS=u.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=Rd(n);return r.jsx(pd,{...a,...s,ref:t})});ZS.displayName=j5;var C5="MenuSub",[wz,WS]=Fr(C5),$i="MenuSubTrigger",JS=u.forwardRef((e,t)=>{const n=Yr($i,e.__scopeMenu),s=ac($i,e.__scopeMenu),a=WS($i,e.__scopeMenu),o=mg($i,e.__scopeMenu),i=u.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,d={__scopeMenu:e.__scopeMenu},f=u.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return u.useEffect(()=>f,[f]),u.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),r.jsx(fg,{asChild:!0,...d,children:r.jsx(HS,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":nN(n.open),...e,ref:ud(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:re(e.onPointerMove,Al(h=>{o.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:re(e.onPointerLeave,Al(h=>{var g,b;f();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const x=(b=n.content)==null?void 0:b.dataset.side,w=x==="right",v=w?-5:5,p=m[w?"left":"right"],y=m[w?"right":"left"];o.onPointerGraceIntentChange({area:[{x:h.clientX+v,y:h.clientY},{x:p,y:m.top},{x:y,y:m.top},{x:y,y:m.bottom},{x:p,y:m.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(h),h.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:re(e.onKeyDown,h=>{var g;const m=o.searchRef.current!=="";e.disabled||m&&h.key===" "||r5[s.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});JS.displayName=$i;var eN="MenuSubContent",tN=u.forwardRef((e,t)=>{const n=IS(jn,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,o=Yr(jn,e.__scopeMenu),i=ac(jn,e.__scopeMenu),l=WS(eN,e.__scopeMenu),c=u.useRef(null),d=we(t,c);return r.jsx(kl.Provider,{scope:e.__scopeMenu,children:r.jsx(_t,{present:s||o.open,children:r.jsx(kl.Slot,{scope:e.__scopeMenu,children:r.jsx(pg,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;i.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:re(e.onFocusOutside,f=>{f.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:re(e.onEscapeKeyDown,f=>{i.onClose(),f.preventDefault()}),onKeyDown:re(e.onKeyDown,f=>{var g;const h=f.currentTarget.contains(f.target),m=o5[i.dir].includes(f.key);h&&m&&(o.onOpenChange(!1),(g=l.trigger)==null||g.focus(),f.preventDefault())})})})})})});tN.displayName=eN;function nN(e){return e?"open":"closed"}function Uu(e){return e==="indeterminate"}function vg(e){return Uu(e)?"indeterminate":e?"checked":"unchecked"}function E5(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function k5(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function A5(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=k5(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function T5(e,t){const{x:n,y:s}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,f=l.y,h=c.x,m=c.y;f>s!=m>s&&n<(h-d)*(s-f)/(m-f)+d&&(a=!a)}return a}function R5(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return T5(n,t)}function Al(e){return t=>t.pointerType==="mouse"?e(t):void 0}var M5=PS,_5=fg,O5=US,D5=BS,L5=gg,z5=$S,P5=Md,I5=qS,U5=FS,B5=GS,$5=XS,H5=KS,q5=ZS,V5=JS,F5=tN,_d="DropdownMenu",[Y5,Sz]=on(_d,[LS]),qt=LS(),[G5,sN]=Y5(_d),aN=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:a,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,c=qt(t),d=u.useRef(null),[f,h]=za({prop:a,defaultProp:o??!1,onChange:i,caller:_d});return r.jsx(G5,{scope:t,triggerId:Bn(),triggerRef:d,contentId:Bn(),open:f,onOpenChange:h,onOpenToggle:u.useCallback(()=>h(m=>!m),[h]),modal:l,children:r.jsx(M5,{...c,open:f,onOpenChange:h,dir:s,modal:l,children:n})})};aN.displayName=_d;var rN="DropdownMenuTrigger",oN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...a}=e,o=sN(rN,n),i=qt(n);return r.jsx(_5,{asChild:!0,...i,children:r.jsx(xe.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:ud(t,o.triggerRef),onPointerDown:re(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:re(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});oN.displayName=rN;var Q5="DropdownMenuPortal",iN=e=>{const{__scopeDropdownMenu:t,...n}=e,s=qt(t);return r.jsx(O5,{...s,...n})};iN.displayName=Q5;var lN="DropdownMenuContent",cN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=sN(lN,n),o=qt(n),i=u.useRef(!1);return r.jsx(D5,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...s,ref:t,onCloseAutoFocus:re(e.onCloseAutoFocus,l=>{var c;i.current||(c=a.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:re(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,f=c.button===2||d;(!a.modal||f)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});cN.displayName=lN;var X5="DropdownMenuGroup",K5=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=qt(n);return r.jsx(L5,{...a,...s,ref:t})});K5.displayName=X5;var Z5="DropdownMenuLabel",uN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=qt(n);return r.jsx(z5,{...a,...s,ref:t})});uN.displayName=Z5;var W5="DropdownMenuItem",dN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=qt(n);return r.jsx(P5,{...a,...s,ref:t})});dN.displayName=W5;var J5="DropdownMenuCheckboxItem",fN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=qt(n);return r.jsx(I5,{...a,...s,ref:t})});fN.displayName=J5;var eD="DropdownMenuRadioGroup",tD=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=qt(n);return r.jsx(U5,{...a,...s,ref:t})});tD.displayName=eD;var nD="DropdownMenuRadioItem",hN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=qt(n);return r.jsx(B5,{...a,...s,ref:t})});hN.displayName=nD;var sD="DropdownMenuItemIndicator",mN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=qt(n);return r.jsx($5,{...a,...s,ref:t})});mN.displayName=sD;var aD="DropdownMenuSeparator",pN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=qt(n);return r.jsx(H5,{...a,...s,ref:t})});pN.displayName=aD;var rD="DropdownMenuArrow",oD=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=qt(n);return r.jsx(q5,{...a,...s,ref:t})});oD.displayName=rD;var iD="DropdownMenuSubTrigger",gN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=qt(n);return r.jsx(V5,{...a,...s,ref:t})});gN.displayName=iD;var lD="DropdownMenuSubContent",xN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=qt(n);return r.jsx(F5,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xN.displayName=lD;var cD=aN,uD=oN,dD=iN,vN=cN,yN=uN,bN=dN,wN=fN,SN=hN,NN=mN,jN=pN,CN=gN,EN=xN;const kN=cD,AN=uD,fD=u.forwardRef(({className:e,inset:t,children:n,...s},a)=>r.jsxs(CN,{ref:a,className:be("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s,children:[n,r.jsx(og,{className:"ml-auto"})]}));fD.displayName=CN.displayName;const hD=u.forwardRef(({className:e,...t},n)=>r.jsx(EN,{ref:n,className:be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));hD.displayName=EN.displayName;const yg=u.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(dD,{children:r.jsx(vN,{ref:s,sideOffset:t,className:be("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));yg.displayName=vN.displayName;const il=u.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(bN,{ref:s,className:be("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));il.displayName=bN.displayName;const mD=u.forwardRef(({className:e,children:t,checked:n,...s},a)=>r.jsxs(wN,{ref:a,className:be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(NN,{children:r.jsx(Sd,{className:"h-4 w-4"})})}),t]}));mD.displayName=wN.displayName;const pD=u.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(SN,{ref:s,className:be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(NN,{children:r.jsx(D_,{className:"h-2 w-2 fill-current"})})}),t]}));pD.displayName=SN.displayName;const TN=u.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(yN,{ref:s,className:be("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));TN.displayName=yN.displayName;const Am=u.forwardRef(({className:e,...t},n)=>r.jsx(jN,{ref:n,className:be("-mx-1 my-1 h-px bg-muted",e),...t}));Am.displayName=jN.displayName;function rv(){const{setTheme:e}=tM();return r.jsxs(kN,{children:[r.jsx(AN,{asChild:!0,children:r.jsxs(F,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-muted/60 transition-all duration-200",children:[r.jsx(IO,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),r.jsx(mO,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),r.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),r.jsxs(yg,{align:"end",children:[r.jsx(il,{onClick:()=>e("light"),children:"Light"}),r.jsx(il,{onClick:()=>e("dark"),children:"Dark"}),r.jsx(il,{onClick:()=>e("system"),children:"System"})]})]})}const gD=wd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Be({className:e,variant:t,...n}){return r.jsx("div",{className:be(gD({variant:t}),e),...n})}function xD(){const{currentLanguage:e,setLanguage:t,supportedLanguages:n,getLanguageConfig:s,isTranslating:a}=bd(),o=s(e);return r.jsxs(kN,{children:[r.jsx(AN,{asChild:!0,children:r.jsxs(F,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-muted/60 transition-all duration-200",children:[a?r.jsx(El,{className:"h-4 w-4 animate-spin"}):r.jsx("span",{className:"text-sm",children:(o==null?void 0:o.flag)||"🌐"}),r.jsx("span",{className:"sr-only",children:"Select language"})]})}),r.jsxs(yg,{align:"end",className:"w-56",children:[r.jsxs(TN,{className:"flex items-center gap-2",children:[r.jsx(F_,{className:"h-4 w-4"}),"Choose Language"]}),r.jsx(Am,{}),n.map(i=>r.jsxs(il,{onClick:()=>t(i.code),className:"flex items-center justify-between gap-2 cursor-pointer",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-base",children:i.flag}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:i.name}),r.jsx("span",{className:"text-xs text-muted-foreground",children:i.nativeName})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[i.gemmaSupported&&r.jsx(Be,{variant:"secondary",className:"text-xs px-1.5 py-0.5",children:"AI"}),e===i.code&&r.jsx(Sd,{className:"h-4 w-4 text-primary"})]})]},i.code)),r.jsx(Am,{}),r.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:"✨ Powered by Gemma 3n AI"})]})]})}function vD({book:e,chapter:t,darkMode:n,onToggleDarkMode:s,onToggleAiChat:a,onToggleAutoLearning:o,onToggleChapterNotes:i,onToggleDiscussionAgent:l,onTogglePowerSummaries:c,onToggleQuizAgent:d,onToggleTeacherAgent:f,aiChatOpen:h=!1,autoLearningOpen:m=!1,chapterNotesOpen:g=!1,discussionAgentOpen:b=!1,powerSummariesOpen:x=!1,quizAgentOpen:w=!1,teacherAgentOpen:v=!1}){return r.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-border/50 bg-background/95 backdrop-blur-xl shadow-sm supports-[backdrop-filter]:bg-background/80 h-16 flex items-center",children:r.jsxs("div",{className:"container flex h-full items-center px-4 lg:px-6",children:[r.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-2 sm:px-4",children:r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[r.jsx("h1",{className:"text-sm sm:text-base lg:text-lg font-semibold tracking-tight text-foreground truncate max-w-[200px] sm:max-w-[300px] lg:max-w-none",children:e}),r.jsxs("div",{className:"flex items-center space-x-1 px-1.5 sm:px-2 py-1 rounded-md bg-primary/10 border border-primary/20",children:[r.jsx("span",{className:"text-xs font-medium text-primary hidden sm:inline",children:"Chapter"}),r.jsxs("span",{className:"text-xs font-bold text-primary",children:["Ch. ",t]})]})]})}),r.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3",children:[r.jsxs("div",{className:"hidden md:flex lg:flex items-center space-x-1",children:[r.jsxs("div",{className:"hidden lg:flex items-center space-x-1 px-2 py-1 rounded-lg bg-muted/30 border border-border/50",children:[r.jsxs(F,{variant:"ghost",size:"sm",onClick:i,className:`h-8 px-2.5 transition-all duration-200 ${g?"bg-green-500/10 text-green-700 border border-green-200/50":"hover:bg-muted/60"}`,title:"Chapter Notes",children:[r.jsx($n,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Notes"})]}),r.jsxs(F,{variant:"ghost",size:"sm",onClick:o,className:`h-8 px-2.5 transition-all duration-200 ${m?"bg-purple-500/10 text-purple-700 border border-purple-200/50":"hover:bg-muted/60"}`,title:"Auto Learning",children:[r.jsx(xn,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Learn"})]}),r.jsxs(F,{variant:"ghost",size:"sm",onClick:c,className:`h-8 px-2.5 transition-all duration-200 ${x?"bg-yellow-500/10 text-yellow-700 border border-yellow-200/50":"hover:bg-muted/60"}`,title:"Power Summaries",children:[r.jsx(Qt,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Summary"})]})]}),r.jsxs("div",{className:"hidden lg:flex items-center space-x-1 px-2 py-1 rounded-lg bg-muted/30 border border-border/50",children:[r.jsxs(F,{variant:"ghost",size:"sm",onClick:a,className:`h-8 px-2.5 transition-all duration-200 ${h?"bg-blue-500/10 text-blue-700 border border-blue-200/50":"hover:bg-muted/60"}`,title:"AI Chat Assistant",children:[r.jsx(ka,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Chat"})]}),r.jsxs(F,{variant:"ghost",size:"sm",onClick:l,className:`h-8 px-2.5 transition-all duration-200 ${b?"bg-indigo-500/10 text-indigo-700 border border-indigo-200/50":"hover:bg-muted/60"}`,title:"Discussion Agent",children:[r.jsx(Nn,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Discuss"})]}),r.jsxs(F,{variant:"ghost",size:"sm",onClick:d,className:`h-8 px-2.5 transition-all duration-200 ${w?"bg-red-500/10 text-red-700 border border-red-200/50":"hover:bg-muted/60"}`,title:"Quiz Agent",children:[r.jsx($O,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Quiz"})]}),r.jsxs(F,{variant:"ghost",size:"sm",onClick:f,className:`h-8 px-2.5 transition-all duration-200 ${v?"bg-orange-500/10 text-orange-700 border border-orange-200/50":"hover:bg-muted/60"}`,title:"Teacher Agent",children:[r.jsx(Ao,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Teacher"})]})]}),r.jsxs("div",{className:"hidden md:flex lg:hidden items-center space-x-1 px-2 py-1 rounded-lg bg-muted/30 border border-border/50",children:[r.jsx(F,{variant:"ghost",size:"sm",onClick:a,className:`h-8 px-2 transition-all duration-200 ${h?"bg-blue-500/10 text-blue-700 border border-blue-200/50":"hover:bg-muted/60"}`,title:"AI Chat",children:r.jsx(ka,{className:"h-4 w-4"})}),r.jsx(F,{variant:"ghost",size:"sm",onClick:i,className:`h-8 px-2 transition-all duration-200 ${g?"bg-green-500/10 text-green-700 border border-green-200/50":"hover:bg-muted/60"}`,title:"Notes",children:r.jsx($n,{className:"h-4 w-4"})}),r.jsx(F,{variant:"ghost",size:"sm",onClick:c,className:`h-8 px-2 transition-all duration-200 ${x?"bg-yellow-500/10 text-yellow-700 border border-yellow-200/50":"hover:bg-muted/60"}`,title:"Summary",children:r.jsx(Qt,{className:"h-4 w-4"})}),r.jsx(F,{variant:"ghost",size:"sm",onClick:f,className:`h-8 px-2 transition-all duration-200 ${v?"bg-orange-500/10 text-orange-700 border border-orange-200/50":"hover:bg-muted/60"}`,title:"Teacher",children:r.jsx(Ao,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"md:hidden flex items-center space-x-1",children:[r.jsx(F,{variant:"ghost",size:"sm",onClick:a,className:`h-8 w-8 p-0 transition-all duration-200 ${h?"bg-blue-500/10 text-blue-700 border border-blue-200/50":"hover:bg-muted/60"}`,title:"AI Chat",children:r.jsx(ka,{className:"h-4 w-4"})}),r.jsx(F,{variant:"ghost",size:"sm",onClick:i,className:`h-8 w-8 p-0 transition-all duration-200 ${g?"bg-green-500/10 text-green-700 border border-green-200/50":"hover:bg-muted/60"}`,title:"Notes",children:r.jsx($n,{className:"h-4 w-4"})}),r.jsx(F,{variant:"ghost",size:"sm",onClick:f,className:`h-8 w-8 p-0 transition-all duration-200 ${v?"bg-orange-500/10 text-orange-700 border border-orange-200/50":"hover:bg-muted/60"}`,title:"Teacher",children:r.jsx(Ao,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"hidden sm:flex items-center space-x-1 px-2 py-1 rounded-lg bg-muted/30 border border-border/50",children:[r.jsx(xD,{}),r.jsx(rv,{})]}),r.jsx("div",{className:"sm:hidden flex items-center space-x-1",children:r.jsx(rv,{})}),r.jsxs(F,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-muted/60 transition-all duration-200",children:[r.jsx(gS,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"User profile"})]})]})]})})}var yD="Separator",ov="horizontal",bD=["horizontal","vertical"],RN=u.forwardRef((e,t)=>{const{decorative:n,orientation:s=ov,...a}=e,o=wD(s)?s:ov,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return r.jsx(xe.div,{"data-orientation":o,...l,...a,ref:t})});RN.displayName=yD;function wD(e){return bD.includes(e)}var MN=RN;const ds=u.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},a)=>r.jsx(MN,{ref:a,decorative:n,orientation:t,className:be("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));ds.displayName=MN.displayName;const gs={BOOKMARKS:"bible-companion-bookmarks",NOTES:"bible-companion-notes",HIGHLIGHTS:"bible-companion-highlights"};function bg(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch(t){return console.error(`Failed to load data from ${e}:`,t),[]}}function Gr(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(`Failed to save data to ${e}:`,n)}}function Fn(){return bg(gs.BOOKMARKS)}function _N(e){const t=Fn(),n={...e,id:`bookmark-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};return t.unshift(n),Gr(gs.BOOKMARKS,t),n}function SD(e,t){const n=Fn(),s=n.findIndex(a=>a.id===e);return s===-1?null:(n[s]={...n[s],...t},Gr(gs.BOOKMARKS,n),n[s])}function ND(e){const t=Fn(),n=t.filter(s=>s.id!==e);return n.length===t.length?!1:(Gr(gs.BOOKMARKS,n),!0)}function Fs(){return bg(gs.NOTES)}function jD(e){const t=Fs(),n={...e,id:`note-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};return t.unshift(n),Gr(gs.NOTES,t),n}function CD(e,t){const n=Fs(),s=n.findIndex(a=>a.id===e);return s===-1?null:(n[s]={...n[s],...t},Gr(gs.NOTES,n),n[s])}function ED(e){const t=Fs(),n=t.filter(s=>s.id!==e);return n.length===t.length?!1:(Gr(gs.NOTES,n),!0)}function Tl(){return bg(gs.HIGHLIGHTS)}function kD(e){const t=Tl(),n=t.filter(s=>s.id!==e);return n.length===t.length?!1:(Gr(gs.HIGHLIGHTS,n),!0)}function AD(e){const t=Fn(),n=e.toLowerCase();return t.filter(s=>{var a;return s.title.toLowerCase().includes(n)||s.content.toLowerCase().includes(n)||((a=s.notes)==null?void 0:a.toLowerCase().includes(n))||s.tags.some(o=>o.toLowerCase().includes(n))})}function TD(e){const t=Fs(),n=e.toLowerCase();return t.filter(s=>s.title.toLowerCase().includes(n)||s.content.toLowerCase().includes(n)||s.tags.some(a=>a.toLowerCase().includes(n)))}function RD(e){const t=Tl(),n=e.toLowerCase();return t.filter(s=>s.text.toLowerCase().includes(n))}function MD(){const e=Fn();return Array.from(new Set(e.map(t=>t.folder)))}function _D(){const e=Fs();return Array.from(new Set(e.map(t=>t.category)))}function ON(){const e=Fn(),t=Fs(),n=e.flatMap(a=>a.tags),s=t.flatMap(a=>a.tags);return Array.from(new Set([...n,...s]))}function OD({isOpen:e=!0,onToggle:t,currentPage:n="reader",documentId:s,currentChapter:a=1,totalChapters:o=1}){const[i,l]=u.useState(!1),[c,d]=u.useState(null),[f,h]=u.useState(!1),[m,g]=u.useState(0),[,b]=$r();u.useEffect(()=>{l(!0),h(!0)},[]),u.useEffect(()=>{const N=Fn();g(N.length)},[]);const x=()=>{d("sidebar"),l(!1)},w=()=>{d(null),l(!0)},v=[{id:"home",label:"Home",icon:r.jsx(J_,{className:"w-6 h-6"}),href:"/",section:"main"},{id:"library",label:"Library",icon:r.jsx(dS,{className:"w-6 h-6"}),href:"/library",section:"main",active:n==="library"},{id:"reader",label:"Reader",icon:r.jsx(Pn,{className:"w-6 h-6"}),section:"main",active:n==="reader",badge:s?`${a}/${o}`:void 0},{id:"search",label:"Search",icon:r.jsx(Tr,{className:"w-6 h-6"}),href:"/search",section:"main"},{id:"bookmarks",label:"Bookmarks",icon:r.jsx(Ar,{className:"w-6 h-6"}),href:"/bookmarks",section:"main",badge:m>0?m.toString():void 0},{id:"reading-progress",label:"Progress",icon:r.jsx(dg,{className:"w-6 h-6"}),section:"analytics"},{id:"performance",label:"Analytics",icon:r.jsx(N_,{className:"w-6 h-6"}),href:"/performance",section:"analytics"},{id:"ai-chat",label:"AI Chat",icon:r.jsx(ka,{className:"w-6 h-6"}),href:"/agents",section:"ai",badge:"New"},{id:"ai-assistant",label:"Assistant",icon:r.jsx(Nn,{className:"w-6 h-6"}),href:"/agents",section:"ai"}],p=[{id:"preferences",label:"Settings",icon:r.jsx(Ro,{className:"w-6 h-6"}),href:"/settings",section:"settings"},{id:"profile",label:"Profile",icon:r.jsx(gS,{className:"w-6 h-6"}),section:"settings"}],y=N=>{if(N.href&&(b(N.href),N.href==="/bookmarks")){const E=Fn();g(E.length)}N.onClick&&N.onClick()},S=N=>r.jsxs("div",{className:"relative group",onMouseEnter:()=>d(N.id),onMouseLeave:()=>d(null),children:[r.jsxs(F,{variant:N.active?"default":"ghost",className:`
          w-full h-11 px-3 transition-all duration-300 ease-out
          ${i?"justify-center px-2":"justify-start gap-3"}
          ${N.active?"bg-primary text-primary-foreground shadow-md scale-[1.02] ring-1 ring-primary/20":"hover:bg-muted/60 hover:shadow-sm hover:translate-x-1"}
          group-hover:shadow-lg transform-gpu
          rounded-lg
        `,onClick:()=>y(N),children:[r.jsx("div",{className:`
          flex items-center justify-center transition-all duration-200 ease-out
          ${N.active?"scale-110":"group-hover:scale-110"}
          w-5 h-5
        `,children:N.icon}),r.jsxs("div",{className:`
          flex-1 flex items-center justify-between overflow-hidden transition-all duration-300 ease-out
          ${i?"w-0 opacity-0 translate-x-2":"w-full opacity-100 translate-x-0"}
        `,children:[r.jsx("span",{className:"font-medium text-sm truncate",children:N.label}),N.badge&&r.jsx(Be,{variant:N.active?"secondary":"outline",className:`
                ml-2 text-xs px-1.5 py-0.5 transition-all duration-200
                ${N.badge==="New"?"bg-green-100 text-green-700 border-green-200":""}
                ${N.badge==="AI"?"bg-blue-100 text-blue-700 border-blue-200":""}
                ${N.badge==="Pro"?"bg-purple-100 text-purple-700 border-purple-200":""}
                hover:scale-105
              `,children:N.badge})]})]}),i&&c===N.id&&r.jsx("div",{className:"absolute left-full ml-3 top-1/2 transform -translate-y-1/2 z-50 animate-in slide-in-from-left-4 zoom-in-95 duration-300",children:r.jsxs("div",{className:"bg-popover text-popover-foreground px-4 py-3 rounded-lg shadow-2xl border text-sm whitespace-nowrap backdrop-blur-lg",children:[r.jsx("div",{className:"font-medium",children:N.label}),N.badge&&r.jsx(Be,{variant:"outline",className:"mt-1 text-xs animate-in scale-in-50 duration-200 delay-100",children:N.badge})]})})]},N.id),j=v.reduce((N,E)=>{const A=E.section||"main";return N[A]||(N[A]=[]),N[A].push(E),N},{}),k={main:"Navigation",analytics:"Analytics",ai:"AI Tools",settings:"Settings"};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`
          fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden transition-opacity duration-300
          ${e?"opacity-100":"opacity-0 pointer-events-none"}
        `,onClick:t}),r.jsxs("div",{className:`
           fixed left-0 top-0 h-full bg-background/95 backdrop-blur-sm border-r border-border/50 z-50
           transition-all duration-300 ease-out shadow-lg
           ${i?"w-16 hover:w-72":"w-72"}
           translate-x-0
           group
         `,onMouseEnter:x,onMouseLeave:w,children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/50 h-14",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-1.5 bg-primary rounded-lg shadow-sm",children:r.jsx(Pn,{className:"w-4 h-4 text-primary-foreground"})}),r.jsx("div",{className:`
               transition-all duration-300 ease-out overflow-hidden
               ${i?"w-0 opacity-0":"w-auto opacity-100"}
             `,children:r.jsx("h2",{className:"font-semibold text-base whitespace-nowrap",children:"Library Companion"})})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>l(!i),className:`
               h-8 w-8 p-0 transition-all duration-300 ease-out hover:bg-muted/60
               ${i?"rotate-180":"rotate-0"}
             `,children:r.jsx(Fx,{className:"w-4 h-4 transition-transform duration-300"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-4",children:[Object.entries(j).map(([N,E])=>r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:`
                transition-all duration-300 ease-out overflow-hidden
                ${i?"h-0 opacity-0":"h-auto opacity-100"}
              `,children:r.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider px-2 py-1.5",children:k[N]})}),r.jsx("div",{className:"space-y-1",children:E.map(S)}),N!=="settings"&&r.jsx("div",{className:`
                  transition-all duration-300 ease-out
                  ${i?"opacity-0":"opacity-100"}
                `,children:r.jsx(ds,{className:"my-2"})})]},N)),r.jsxs("div",{className:"space-y-2 pt-2 border-t border-border/50",children:[r.jsx("div",{className:`
              transition-all duration-300 ease-out overflow-hidden
              ${i?"h-0 opacity-0":"h-auto opacity-100"}
            `,children:r.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider px-2 py-1.5",children:"Settings"})}),r.jsx("div",{className:"space-y-1",children:p.map(S)})]})]}),r.jsx("div",{className:"p-3 border-t border-border/50",children:r.jsx("div",{className:`
            transition-all duration-300 ease-out overflow-hidden
            ${i?"h-0 opacity-0":"h-auto opacity-100"}
          `,children:r.jsxs("div",{className:"bg-muted/50 rounded-lg p-2.5 space-y-1.5 hover:bg-muted/70 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:"Reading Session Active"})]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:s&&`Chapter ${a} of ${o}`})]})})}),r.jsx(F,{variant:"outline",size:"sm",onClick:t,className:`
            absolute -right-3 top-4 w-6 h-6 rounded-full bg-background border shadow-md
            hover:scale-110 transition-all duration-200 lg:hidden
            ${i&&!f?"opacity-0":"opacity-100"}
          `,children:r.jsx(Fx,{className:`w-3 h-3 transition-transform duration-200 ${e?"":"rotate-180"}`})})]})]})}const Ae=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:be("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ae.displayName="Card";const Ue=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:be("flex flex-col space-y-1.5 p-6",e),...t}));Ue.displayName="CardHeader";const Ye=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:be("text-2xl font-semibold leading-none tracking-tight",e),...t}));Ye.displayName="CardTitle";const In=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:be("text-sm text-muted-foreground",e),...t}));In.displayName="CardDescription";const Me=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:be("p-6 pt-0",e),...t}));Me.displayName="CardContent";const DD=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:be("flex items-center p-6 pt-0",e),...t}));DD.displayName="CardFooter";var Od="Dialog",[DN,Nz]=on(Od),[LD,Gn]=DN(Od),LN=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:i=!0}=e,l=u.useRef(null),c=u.useRef(null),[d,f]=za({prop:s,defaultProp:a??!1,onChange:o,caller:Od});return r.jsx(LD,{scope:t,triggerRef:l,contentRef:c,contentId:Bn(),titleId:Bn(),descriptionId:Bn(),open:d,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(h=>!h),[f]),modal:i,children:n})};LN.displayName=Od;var zN="DialogTrigger",PN=u.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Gn(zN,n),o=we(t,a.triggerRef);return r.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Ng(a.open),...s,ref:o,onClick:re(e.onClick,a.onOpenToggle)})});PN.displayName=zN;var wg="DialogPortal",[zD,IN]=DN(wg,{forceMount:void 0}),UN=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:a}=e,o=Gn(wg,t);return r.jsx(zD,{scope:t,forceMount:n,children:u.Children.map(s,i=>r.jsx(_t,{present:n||o.open,children:r.jsx(Zl,{asChild:!0,container:a,children:i})}))})};UN.displayName=wg;var Bu="DialogOverlay",BN=u.forwardRef((e,t)=>{const n=IN(Bu,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=Gn(Bu,e.__scopeDialog);return o.modal?r.jsx(_t,{present:s||o.open,children:r.jsx(ID,{...a,ref:t})}):null});BN.displayName=Bu;var PD=Oa("DialogOverlay.RemoveScroll"),ID=u.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Gn(Bu,n);return r.jsx(nc,{as:PD,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(xe.div,{"data-state":Ng(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Rr="DialogContent",$N=u.forwardRef((e,t)=>{const n=IN(Rr,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=Gn(Rr,e.__scopeDialog);return r.jsx(_t,{present:s||o.open,children:o.modal?r.jsx(UD,{...a,ref:t}):r.jsx(BD,{...a,ref:t})})});$N.displayName=Rr;var UD=u.forwardRef((e,t)=>{const n=Gn(Rr,e.__scopeDialog),s=u.useRef(null),a=we(t,n.contentRef,s);return u.useEffect(()=>{const o=s.current;if(o)return Ad(o)},[]),r.jsx(HN,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:re(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:re(e.onFocusOutside,o=>o.preventDefault())})}),BD=u.forwardRef((e,t)=>{const n=Gn(Rr,e.__scopeDialog),s=u.useRef(!1),a=u.useRef(!1);return r.jsx(HN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=n.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),HN=u.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=e,l=Gn(Rr,n),c=u.useRef(null),d=we(t,c);return Ed(),r.jsxs(r.Fragment,{children:[r.jsx(ec,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:r.jsx(hi,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Ng(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx($D,{titleId:l.titleId}),r.jsx(qD,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Sg="DialogTitle",qN=u.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Gn(Sg,n);return r.jsx(xe.h2,{id:a.titleId,...s,ref:t})});qN.displayName=Sg;var VN="DialogDescription",FN=u.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Gn(VN,n);return r.jsx(xe.p,{id:a.descriptionId,...s,ref:t})});FN.displayName=VN;var YN="DialogClose",GN=u.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Gn(YN,n);return r.jsx(xe.button,{type:"button",...s,ref:t,onClick:re(e.onClick,()=>a.onOpenChange(!1))})});GN.displayName=YN;function Ng(e){return e?"open":"closed"}var QN="DialogTitleWarning",[jz,XN]=lT(QN,{contentName:Rr,titleName:Sg,docsSlug:"dialog"}),$D=({titleId:e})=>{const t=XN(QN),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return u.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},HD="DialogDescriptionWarning",qD=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${XN(HD).contentName}}.`;return u.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},VD=LN,FD=PN,YD=UN,KN=BN,ZN=$N,WN=qN,JN=FN,GD=GN;const Qr=VD,ej=FD,QD=YD,tj=u.forwardRef(({className:e,...t},n)=>r.jsx(KN,{ref:n,className:be("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));tj.displayName=KN.displayName;const Va=u.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(QD,{children:[r.jsx(tj,{}),r.jsxs(ZN,{ref:s,className:be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,r.jsxs(GD,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(kn,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Va.displayName=ZN.displayName;const Fa=({className:e,...t})=>r.jsx("div",{className:be("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Fa.displayName="DialogHeader";const Dd=({className:e,...t})=>r.jsx("div",{className:be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Dd.displayName="DialogFooter";const Ya=u.forwardRef(({className:e,...t},n)=>r.jsx(WN,{ref:n,className:be("text-lg font-semibold leading-none tracking-tight",e),...t}));Ya.displayName=WN.displayName;const bi=u.forwardRef(({className:e,...t},n)=>r.jsx(JN,{ref:n,className:be("text-sm text-muted-foreground",e),...t}));bi.displayName=JN.displayName;const it=u.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:be("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...n}));it.displayName="Input";var XD="Label",nj=u.forwardRef((e,t)=>r.jsx(xe.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));nj.displayName=XD;var sj=nj;const KD=wd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Pt=u.forwardRef(({className:e,...t},n)=>r.jsx(sj,{ref:n,className:be(KD(),e),...t}));Pt.displayName=sj.displayName;function ZD({onUploadSuccess:e}){const[t,n]=u.useState(null),[s,a]=u.useState(!1),{toast:o}=Ht(),i=d=>{var h;const f=(h=d.target.files)==null?void 0:h[0];if(f){if(!["application/pdf","text/plain"].includes(f.type)){o({title:"Invalid file type",description:"Please select a PDF or TXT file",variant:"destructive"});return}if(f.size>10*1024*1024){o({title:"File too large",description:"Please select a file smaller than 10MB",variant:"destructive"});return}n(f)}},l=async()=>{if(!t)return;a(!0);const d=new FormData;d.append("file",t);try{await rs("/api/documents/upload",{method:"POST",body:d}),o({title:"Upload successful",description:`${t.name} has been processed and is ready to read`}),n(null),e()}catch{o({title:"Upload failed",description:"There was an error processing your document. Please try again.",variant:"destructive"})}finally{a(!1)}},c=d=>d==="application/pdf"?r.jsx(ig,{className:"h-8 w-8 text-red-500"}):r.jsx($n,{className:"h-8 w-8 text-blue-500"});return r.jsxs(Ae,{className:"w-full max-w-md mx-auto",children:[r.jsxs(Ue,{children:[r.jsxs(Ye,{className:"flex items-center gap-2",children:[r.jsx(jm,{className:"h-5 w-5"}),"Upload Document"]}),r.jsx(In,{children:"Upload PDF or TXT files to start reading with intelligent chapter detection"})]}),r.jsxs(Me,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Pt,{htmlFor:"file-upload",children:"Select File"}),r.jsx(it,{id:"file-upload",type:"file",accept:".pdf,.txt,text/plain,application/pdf",onChange:i,disabled:s})]}),t&&r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[c(t.type),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:t.name}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[(t.size/1024/1024).toFixed(2)," MB"]})]})]}),r.jsx(F,{onClick:l,disabled:!t||s,className:"w-full",children:s?r.jsxs(r.Fragment,{children:[r.jsx(El,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(jm,{className:"mr-2 h-4 w-4"}),"Upload & Process"]})}),r.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[r.jsx("p",{children:"• Supported formats: PDF, TXT"}),r.jsx("p",{children:"• Maximum file size: 10MB"}),r.jsx("p",{children:"• Chapters will be automatically detected"})]})]})]})}function WD(){return r.jsxs(Ae,{className:"overflow-hidden animate-pulse",children:[r.jsx(Ue,{className:"pb-3",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-muted to-muted/60 rounded-lg skeleton-shimmer"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 bg-gradient-to-r from-muted to-muted/60 rounded skeleton-shimmer"}),r.jsx("div",{className:"h-3 bg-gradient-to-r from-muted to-muted/60 rounded w-2/3 skeleton-shimmer"})]})]})})}),r.jsx(Me,{className:"pt-0",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-16 h-6 bg-gradient-to-r from-muted to-muted/60 rounded skeleton-shimmer"}),r.jsx("div",{className:"w-12 h-6 bg-gradient-to-r from-muted to-muted/60 rounded skeleton-shimmer"})]}),r.jsx("div",{className:"w-20 h-4 bg-gradient-to-r from-muted to-muted/60 rounded skeleton-shimmer"})]})})]})}function JD({document:e,isOpen:t,onClose:n,onSelect:s}){return e?r.jsx(Qr,{open:t,onOpenChange:n,children:r.jsxs(Va,{className:"max-w-2xl animate-in fade-in-0 zoom-in-95 slide-in-from-bottom-4 duration-300",children:[r.jsx(Fa,{children:r.jsxs(Ya,{className:"flex items-center gap-2 animate-in slide-in-from-left-3 duration-300 delay-100",children:[r.jsx(m_,{className:"h-5 w-5 text-primary animate-pulse"}),e.title]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4 animate-in slide-in-from-left-3 duration-300 delay-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(ig,{className:"h-4 w-4"}),e.filename]}),r.jsxs(Be,{variant:"secondary",className:"animate-in scale-in-50 duration-300 delay-300",children:[r.jsx(Pn,{className:"h-3 w-3 mr-1"}),e.totalChapters," chapters"]}),r.jsx(Be,{variant:"outline",className:"animate-in scale-in-50 duration-300 delay-400",children:e.fileType.toUpperCase()})]}),r.jsx(Ae,{className:"animate-in slide-in-from-bottom-3 duration-300 delay-300",children:r.jsxs(Me,{className:"pt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Qt,{className:"h-5 w-5 text-primary animate-pulse"}),r.jsx("h3",{className:"font-semibold",children:"Document Information"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"animate-in slide-in-from-left-2 duration-300 delay-500",children:[r.jsx("span",{className:"text-muted-foreground",children:"Added on:"}),r.jsx("p",{className:"font-medium",children:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),r.jsxs("div",{className:"animate-in slide-in-from-right-2 duration-300 delay-600",children:[r.jsx("span",{className:"text-muted-foreground",children:"File type:"}),r.jsxs("p",{className:"font-medium",children:[e.fileType.toUpperCase()," Document"]})]})]})]})}),r.jsxs("div",{className:"flex gap-3 animate-in slide-in-from-bottom-3 duration-300 delay-400",children:[r.jsxs(F,{onClick:()=>s(e),className:"flex-1 group hover:scale-105 transition-all duration-200 hover:shadow-lg",children:[r.jsx(cS,{className:"mr-2 h-4 w-4 group-hover:animate-pulse"}),"Open Document"]}),r.jsx(F,{variant:"outline",className:"hover:scale-105 transition-all duration-200 hover:shadow-lg",children:r.jsx(lS,{className:"h-4 w-4"})})]})]})]})}):null}function Tm({onSelectDocument:e}){const[t,n]=u.useState(!1),[s,a]=u.useState(""),[o,i]=u.useState(null),[l,c]=u.useState(!1),[d,f]=u.useState("grid"),{toast:h}=Ht(),m=Hr(),{data:g=[],isLoading:b}=Sn({queryKey:["/api/documents"],queryFn:()=>rs("/api/documents")}),{data:x=[]}=Sn({queryKey:["/api/reading-progress"],queryFn:()=>rs("/api/reading-progress")}),w=Ql({mutationFn:A=>rs(`/api/documents/${A}`,{method:"DELETE"}),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/documents"]}),h({title:"Document deleted",description:"The document has been removed from your library"})},onError:()=>{h({title:"Delete failed",description:"Failed to delete the document. Please try again.",variant:"destructive"})}}),v=()=>{m.invalidateQueries({queryKey:["/api/documents"]}),n(!1)},p=(A,T)=>{A.stopPropagation(),confirm("Are you sure you want to delete this document?")&&w.mutate(T)},y=(A,T)=>{A.stopPropagation(),i(T),c(!0)},S=A=>A==="pdf"?r.jsx(Pn,{className:"h-10 w-10 text-slate-700 dark:text-slate-300 group-hover:scale-110 transition-transform duration-200"}):r.jsx(Pn,{className:"h-10 w-10 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform duration-200"}),j=g.filter(A=>A.title.toLowerCase().includes(s.toLowerCase())||A.filename.toLowerCase().includes(s.toLowerCase())),k=A=>{const T=JSON.parse(localStorage.getItem("readingPositions")||"{}");if(T[A])return T[A].chapter;const I=x.filter(R=>R.documentId===A);return I.length>0?Math.max(...I.map($=>$.chapter)):1},N=A=>{const T=JSON.parse(localStorage.getItem("readingPositions")||"{}");let I=1;if(T[A.id])I=T[A.id].chapter;else{const R=x.filter($=>$.documentId===A.id);R.length>0&&(I=Math.max(...R.map($=>$.chapter)))}return!A.totalChapters||A.totalChapters===0?0:Math.round(I/A.totalChapters*100)},E=A=>{alert(`Show chapter summary for: ${A.title}`)};return t?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 animate-in fade-in-0 duration-500",children:r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsx(F,{variant:"outline",onClick:()=>n(!1),className:"mb-4 hover:scale-105 transition-all duration-200 hover:shadow-md",children:"← Back to Library"})}),r.jsx(ZD,{onUploadSuccess:v})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-sm rounded-b-2xl px-6 py-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4 border-b border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-purple-400/10 rounded-xl shadow-md",children:r.jsx(dS,{className:"h-8 w-8 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-extrabold tracking-tight text-slate-900 dark:text-white mb-1",children:"Document Library"}),r.jsx("p",{className:"text-base text-slate-500 dark:text-slate-300",children:"All your study documents in one place"})]})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs(F,{variant:"outline",className:"rounded-full px-4 py-2 shadow-md hover:shadow-lg bg-white/70 dark:bg-slate-800/70 backdrop-blur-md",onClick:()=>n(!0),children:[r.jsx(Aa,{className:"h-5 w-5 mr-2"}),"Add Document"]})})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-8 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(it,{placeholder:"Search documents...",value:s,onChange:A=>a(A.target.value),className:"pl-12 pr-10 py-3 rounded-full shadow focus:shadow-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-lg transition-all"}),r.jsx(Tr,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-blue-400"}),s&&r.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-red-500 transition-colors",onClick:()=>a(""),"aria-label":"Clear search",children:"×"})]}),r.jsx(F,{variant:d==="grid"?"default":"outline",size:"icon",className:"rounded-full shadow-md hover:shadow-lg",onClick:()=>f("grid"),title:"Grid view",children:r.jsx(tO,{className:"h-5 w-5"})}),r.jsx(F,{variant:d==="list"?"default":"outline",size:"icon",className:"rounded-full shadow-md hover:shadow-lg",onClick:()=>f("list"),title:"List view",children:r.jsx(oO,{className:"h-5 w-5"})})]}),b?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Array.from({length:4}).map((A,T)=>r.jsx("div",{className:"animate-in slide-in-from-bottom-3 duration-500",style:{animationDelay:`${T*100}ms`},children:r.jsx(WD,{})},T))}):j.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-in fade-in-0 zoom-in-95 duration-500",children:[r.jsx("div",{className:"p-6 bg-muted/50 rounded-full mb-6 animate-pulse",children:r.jsx(Pn,{className:"h-16 w-16 text-muted-foreground"})}),r.jsx("h3",{className:"text-2xl font-semibold mb-3 animate-in slide-in-from-bottom-3 duration-500 delay-200",children:s?"No documents found":"Your library is empty"}),r.jsx("p",{className:"text-muted-foreground text-lg mb-8 text-center max-w-md animate-in slide-in-from-bottom-3 duration-500 delay-300",children:s?"Try adjusting your search terms or browse all documents":"Start building your digital library by uploading your first document"}),!s&&r.jsxs(F,{onClick:()=>n(!0),size:"lg",className:"animate-in slide-in-from-bottom-3 duration-500 delay-400 hover:scale-105 transition-all hover:shadow-xl group",children:[r.jsx(Aa,{className:"mr-2 h-5 w-5 group-hover:rotate-90 transition-transform duration-200"}),"Upload Your First Document"]})]}):r.jsx("div",{className:`grid gap-6 ${d==="grid"?"grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4":"grid-cols-1 max-w-6xl"}`,children:j.map(A=>r.jsxs("div",{className:"group relative rounded-3xl bg-white/90 dark:bg-slate-900/90 shadow-xl hover:shadow-2xl border border-slate-200/50 dark:border-slate-700/50 transition-all duration-500 cursor-pointer hover:scale-[1.03] hover:-translate-y-1 overflow-hidden backdrop-blur-lg",onClick:()=>e(A,k(A.id)),children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 to-transparent dark:from-slate-800/50 pointer-events-none"}),r.jsxs("div",{className:"relative p-8",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[S(A.fileType),N(A)>0&&r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white dark:border-slate-900 flex items-center justify-center",children:r.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white line-clamp-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors leading-tight",children:A.title}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 truncate",children:A.filename})]})]}),r.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-all duration-300 flex-shrink-0 ml-2",children:[r.jsx(F,{variant:"ghost",size:"icon",onClick:T=>y(T,A),className:"rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/50 h-8 w-8 shadow-sm",title:"Preview",children:r.jsx(cS,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),r.jsx(F,{variant:"ghost",size:"icon",onClick:T=>{T.stopPropagation(),E(A)},className:"rounded-full hover:bg-purple-100 dark:hover:bg-purple-900/50 h-8 w-8 shadow-sm",title:"Show summary",children:r.jsx(Qt,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),r.jsx(F,{variant:"ghost",size:"icon",onClick:T=>p(T,A.id),className:"rounded-full hover:bg-red-100 dark:hover:bg-red-900/50 h-8 w-8 shadow-sm",disabled:w.isPending,title:"Delete",children:w.isPending?r.jsx(El,{className:"h-4 w-4 animate-spin text-red-600 dark:text-red-400"}):r.jsx(Vr,{className:"h-4 w-4 text-red-600 dark:text-red-400"})})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-6",children:[r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800",children:[r.jsx(Pn,{className:"h-3 w-3 mr-1.5"}),A.totalChapters," chapters"]}),r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-700",children:[r.jsx(ig,{className:"h-3 w-3 mr-1.5"}),A.fileType.toUpperCase()]}),N(A)>0&&r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 border border-emerald-200 dark:border-emerald-800",children:[r.jsx(fS,{className:"h-3 w-3 mr-1.5"}),"In Progress"]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:N(A)>0?"Reading Progress":"Ready to start"}),r.jsxs("span",{className:"text-slate-500 dark:text-slate-400 font-mono",children:[N(A),"%"]})]}),r.jsx("div",{className:"relative w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5 overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full transition-all duration-1000 ease-out relative",style:{width:`${N(A)}%`},children:N(A)>0&&r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("div",{className:"flex items-center gap-1.5 text-slate-500 dark:text-slate-400",children:N(A)>0?r.jsxs(r.Fragment,{children:[r.jsx(Jl,{className:"h-3 w-3"}),r.jsxs("span",{children:["Chapter ",k(A.id)]})]}):r.jsxs(r.Fragment,{children:[r.jsx(pS,{className:"h-3 w-3"}),r.jsx("span",{children:"New document"})]})}),r.jsx("div",{className:"text-slate-400 dark:text-slate-500",children:N(A)>0?"Continue reading":"Start reading"})]})]})]})]},A.id))}),r.jsx(JD,{document:o,isOpen:l,onClose:()=>c(!1),onSelect:A=>e(A,k(A.id))})]})})}const fs=u.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:be("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));fs.displayName="Textarea";function Ld({isOpen:e,onClose:t,selectedText:n,documentId:s,documentTitle:a,chapter:o,paragraph:i,onAnnotationSaved:l}){const[c,d]=u.useState("");Hr();const{toast:f}=Ht(),h=Ql({mutationFn:async b=>await rs("/api/annotations",{method:"POST",body:b}),onSuccess:b=>{l==null||l({...b,note:c}),d(""),t(),f({title:"Note saved successfully",description:"Your note has been saved and the text has been highlighted."})},onError:()=>{f({title:"Failed to save note",description:"There was a problem saving your note. Please try again.",variant:"destructive"})}}),m=()=>{c.trim()&&h.mutate({documentId:s,chapter:o,paragraph:i,selectedText:n,note:c.trim()})},g=()=>{d(""),t()};return r.jsx(Qr,{open:e,onOpenChange:g,children:r.jsxs(Va,{className:"max-w-lg border-border",children:[r.jsxs(Fa,{className:"space-y-3",children:[r.jsxs(Ya,{className:"text-xl font-semibold flex items-center gap-2",children:[r.jsx(Vn,{className:"w-5 h-5 text-amber-500"}),"Add Study Note"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your personal notes and insights to this text"})]}),r.jsxs("div",{className:"space-y-6 mt-6",children:[r.jsxs("div",{children:[r.jsxs(Pt,{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[r.jsx(Ar,{className:"w-4 h-4 text-blue-500"}),"Selected Text"]}),r.jsx("div",{className:"p-4 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/30 dark:to-orange-900/30 border border-amber-200 dark:border-amber-700 rounded-lg text-sm leading-relaxed",children:r.jsxs("span",{className:"font-bold text-black dark:text-white",children:['"',n,'"']})})]}),r.jsxs("div",{children:[r.jsxs(Pt,{htmlFor:"note",className:"text-sm font-medium mb-3 flex items-center gap-2",children:[r.jsx(bO,{className:"w-4 h-4 text-green-500"}),"Your Note"]}),r.jsx(fs,{id:"note",value:c,onChange:b=>d(b.target.value),placeholder:"Share your thoughts, insights, or reflections on this text...",rows:5,className:"resize-none"}),r.jsxs("div",{className:"mt-2 text-xs text-muted-foreground text-right",children:[c.length," characters"]})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx(F,{variant:"outline",onClick:g,className:"flex-1",disabled:h.isPending,children:"Cancel"}),r.jsx(F,{onClick:m,className:"flex-1",disabled:!c.trim()||h.isPending,children:h.isPending?r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving Note..."]}):r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Sd,{className:"w-4 h-4"}),"Save Note"]})})]})]})]})})}function e6({onTextSelected:e,onHighlightRemoved:t,highlightColors:n=["bg-yellow-200 dark:bg-yellow-800/40","bg-blue-200 dark:bg-blue-800/40","bg-green-200 dark:bg-green-800/40","bg-pink-200 dark:bg-pink-800/40","bg-purple-200 dark:bg-purple-800/40","bg-orange-200 dark:bg-orange-800/40"]}){const[s,a]=u.useState(null),[o,i]=u.useState([]),[l,c]=u.useState(n[0]),[d,f]=u.useState(!1),[h,m]=u.useState({x:0,y:0}),g=u.useRef(null),b=u.useCallback(()=>{const p=window.getSelection();if(!p||p.rangeCount===0){a(null),f(!1);return}const y=p.getRangeAt(0),S=p.toString().trim();if(console.log("🔍 Raw selection text:",`"${p.toString()}"`),console.log("🔍 Trimmed text:",`"${S}"`),console.log("🔍 Text length:",S.length),console.log("🔍 Range details:",{startOffset:y.startOffset,endOffset:y.endOffset,collapsed:y.collapsed}),S.length===0){a(null),f(!1);return}let j=y.commonAncestorContainer;if(j.nodeType===Node.TEXT_NODE&&(j=j.parentElement),!j||!(j instanceof Element)){a(null),f(!1);return}if(!j.closest("p[data-verse], p[data-paragraph]")){a(null),f(!1);return}const{startContainer:N,endContainer:E}=y,A=N.nodeType===Node.TEXT_NODE?N.parentElement:N,T=E.nodeType===Node.TEXT_NODE?E.parentElement:E;if(!A.closest("p[data-verse], p[data-paragraph]")||!T.closest("p[data-verse], p[data-paragraph]")){a(null),f(!1);return}if(A.closest("p[data-verse], p[data-paragraph]")!==T.closest("p[data-verse], p[data-paragraph]")){a(null),f(!1);return}const I=y.getBoundingClientRect(),R=I.left+I.width/2,$=I.top-60;a({text:S,range:y,rect:I}),m({x:R,y:$}),f(!0)},[]),x=u.useCallback((p=l)=>{var E,A,T;if(!s)return;const y=`highlight-${Date.now()}`,S=s.text,j=s.range.cloneRange(),k={id:y,text:S,range:j,color:p,position:{x:s.rect.left,y:s.rect.top}};console.log("🎯 Enhanced selection - Original text:",S),console.log("🎯 Enhanced selection - Text length:",S.length);const N={startOffset:j.startOffset,endOffset:j.endOffset,containerText:j.startContainer.textContent||"",beforeText:((E=j.startContainer.textContent)==null?void 0:E.substring(0,j.startOffset))||"",afterText:((A=j.endContainer.textContent)==null?void 0:A.substring(j.endOffset))||""};console.log("🎯 Selection context:",N);try{const I=document.createElement("span");I.className=`highlight-text ${p}`,I.setAttribute("data-highlight-id",y),I.setAttribute("data-selection-highlight","true"),I.textContent=S,I.title="Highlighted text",s.range.deleteContents(),s.range.insertNode(I),i(C=>[...C,k]);const R=document.createRange(),$=j.commonAncestorContainer.nodeType===Node.TEXT_NODE?j.commonAncestorContainer.parentElement:j.commonAncestorContainer;$&&(R.selectNodeContents($),console.log("🎯 Context range created for:",$.tagName),console.log("🎯 Full context text:",R.toString().substring(0,100)+"..."));const K=new CustomEvent("preciseTextSelection",{detail:{text:S,selectionContext:N,type:"highlight"}});document.dispatchEvent(K),e==null||e(S,j,"highlight"),setTimeout(()=>{I.style.transition="all 0.3s ease",I.style.transform="scale(1.02)",setTimeout(()=>{I.style.transform="scale(1)"},300)},10)}catch(I){console.warn("Failed to create highlight:",I)}(T=window.getSelection())==null||T.removeAllRanges(),a(null),f(!1)},[s,l,e]),w=u.useCallback(async()=>{if(s)try{await navigator.clipboard.writeText(s.text);const p=g.current;p&&(p.classList.add("animate-pulse"),setTimeout(()=>p.classList.remove("animate-pulse"),500))}catch(p){console.warn("Failed to copy text:",p)}},[s]),v=u.useCallback(async()=>{if(s)if(navigator.share)try{await navigator.share({text:s.text,title:"Shared Text"})}catch(p){console.warn("Failed to share:",p)}else w()},[s,w]);return u.useEffect(()=>(document.addEventListener("mouseup",b),document.addEventListener("keyup",b),()=>{document.removeEventListener("mouseup",b),document.removeEventListener("keyup",b)}),[b]),u.useEffect(()=>{const p=y=>{g.current&&!g.current.contains(y.target)&&f(!1)};if(d)return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[d]),!d||!s?null:r.jsxs("div",{ref:g,className:"fixed z-50 animate-in slide-in-from-bottom duration-300 gpu-accelerated",style:{left:h.x,top:h.y,transform:"translateX(-50%)"},children:[r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-3 theme-transition card-hover note-creation",children:[r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 text-center study-stagger-1",children:"Study Highlighter"}),r.jsxs("div",{className:"flex items-center gap-2 pr-2 border-r border-gray-200 dark:border-gray-700 study-stagger-2",children:[r.jsx(gO,{className:"w-4 h-4 text-gray-500 dark:text-gray-400 study-timer"}),n.map((p,y)=>r.jsx("button",{className:`w-7 h-7 rounded-full border-2 transition-all duration-300 hover:scale-125 hover:rotate-12 ${p} ${l===p?"border-gray-900 dark:border-white shadow-lg scale-110 note-highlight":"border-gray-300 dark:border-gray-600"} highlight-apply`,style:{animationDelay:`${y*75}ms`},onClick:()=>c(p),title:`Study highlight color ${y+1}`},p))]})]}),r.jsxs("div",{className:"flex items-center gap-2 study-stagger-3",children:[r.jsx(F,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0 btn-scale hover:scale-110 transition-all duration-300 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 study-stagger-1",onClick:()=>x(),title:"Create study highlight",children:r.jsx(Pu,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 note-highlight"})}),r.jsx(F,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0 btn-scale hover:scale-110 transition-all duration-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 study-stagger-2",onClick:w,title:"Copy to clipboard",children:r.jsx(P_,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),r.jsx(F,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0 btn-scale hover:scale-110 transition-all duration-300 hover:bg-green-50 dark:hover:bg-green-900/20 study-stagger-3",onClick:v,title:"Share selection",children:r.jsx(RO,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),r.jsx(F,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0 btn-scale hover:scale-110 transition-all duration-300 hover:bg-purple-50 dark:hover:bg-purple-900/20 bookmark-save study-stagger-4",onClick:()=>e==null?void 0:e(s.text,s.range),title:"Add bookmark",children:r.jsx(x_,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),r.jsx(F,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0 btn-scale hover:scale-110 transition-all duration-300 hover:bg-amber-50 dark:hover:bg-amber-900/20 note-creation study-stagger-5",onClick:()=>e==null?void 0:e(s.text,s.range,"note"),title:"Add study note",children:r.jsx(Vn,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})})]}),r.jsx("div",{className:"pl-2 border-l border-gray-200 dark:border-gray-700",children:r.jsx(F,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 btn-scale animate-in slide-in-from-right",onClick:()=>f(!1),title:"Close",children:r.jsx(kn,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})})]}),r.jsxs("div",{className:"mt-2 bg-gray-900/90 dark:bg-gray-100/90 text-white dark:text-gray-900 text-xs px-2 py-1 rounded backdrop-blur-sm text-center animate-in fade-in delay-200",children:[s.text.length," characters selected"]})]})}function Rl(e,[t,n]){return Math.min(n,Math.max(t,e))}function t6(e,t){return u.useReducer((n,s)=>t[n][s]??n,e)}var jg="ScrollArea",[aj,Cz]=on(jg),[n6,An]=aj(jg),rj=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:a,scrollHideDelay:o=600,...i}=e,[l,c]=u.useState(null),[d,f]=u.useState(null),[h,m]=u.useState(null),[g,b]=u.useState(null),[x,w]=u.useState(null),[v,p]=u.useState(0),[y,S]=u.useState(0),[j,k]=u.useState(!1),[N,E]=u.useState(!1),A=we(t,I=>c(I)),T=yi(a);return r.jsx(n6,{scope:n,type:s,dir:T,scrollHideDelay:o,scrollArea:l,viewport:d,onViewportChange:f,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:b,scrollbarXEnabled:j,onScrollbarXEnabledChange:k,scrollbarY:x,onScrollbarYChange:w,scrollbarYEnabled:N,onScrollbarYEnabledChange:E,onCornerWidthChange:p,onCornerHeightChange:S,children:r.jsx(xe.div,{dir:T,...i,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});rj.displayName=jg;var oj="ScrollAreaViewport",ij=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:a,...o}=e,i=An(oj,n),l=u.useRef(null),c=we(t,l,i.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),r.jsx(xe.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});ij.displayName=oj;var xs="ScrollAreaScrollbar",Cg=u.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=An(xs,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=a,l=e.orientation==="horizontal";return u.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),a.type==="hover"?r.jsx(s6,{...s,ref:t,forceMount:n}):a.type==="scroll"?r.jsx(a6,{...s,ref:t,forceMount:n}):a.type==="auto"?r.jsx(lj,{...s,ref:t,forceMount:n}):a.type==="always"?r.jsx(Eg,{...s,ref:t}):null});Cg.displayName=xs;var s6=u.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=An(xs,e.__scopeScrollArea),[o,i]=u.useState(!1);return u.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),i(!0)},f=()=>{c=window.setTimeout(()=>i(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),r.jsx(_t,{present:n||o,children:r.jsx(lj,{"data-state":o?"visible":"hidden",...s,ref:t})})}),a6=u.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=An(xs,e.__scopeScrollArea),o=e.orientation==="horizontal",i=Pd(()=>c("SCROLL_END"),100),[l,c]=t6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return u.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),u.useEffect(()=>{const d=a.viewport,f=o?"scrollLeft":"scrollTop";if(d){let h=d[f];const m=()=>{const g=d[f];h!==g&&(c("SCROLL"),i()),h=g};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,o,c,i]),r.jsx(_t,{present:n||l!=="hidden",children:r.jsx(Eg,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:re(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:re(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),lj=u.forwardRef((e,t)=>{const n=An(xs,e.__scopeScrollArea),{forceMount:s,...a}=e,[o,i]=u.useState(!1),l=e.orientation==="horizontal",c=Pd(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?d:f)}},10);return ni(n.viewport,c),ni(n.content,c),r.jsx(_t,{present:s||o,children:r.jsx(Eg,{"data-state":o?"visible":"hidden",...a,ref:t})})}),Eg=u.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,a=An(xs,e.__scopeScrollArea),o=u.useRef(null),i=u.useRef(0),[l,c]=u.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=hj(l.viewport,l.content),f={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function h(m,g){return u6(m,i.current,l,g)}return n==="horizontal"?r.jsx(r6,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const m=a.viewport.scrollLeft,g=iv(m,l,a.dir);o.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?r.jsx(o6,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const m=a.viewport.scrollTop,g=iv(m,l);o.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),r6=u.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...a}=e,o=An(xs,e.__scopeScrollArea),[i,l]=u.useState(),c=u.useRef(null),d=we(t,c,o.onScrollbarXChange);return u.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(uj,{"data-orientation":"horizontal",...a,ref:d,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":zd(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(o.viewport){const m=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),pj(m,h)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&s({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Hu(i.paddingLeft),paddingEnd:Hu(i.paddingRight)}})}})}),o6=u.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...a}=e,o=An(xs,e.__scopeScrollArea),[i,l]=u.useState(),c=u.useRef(null),d=we(t,c,o.onScrollbarYChange);return u.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(uj,{"data-orientation":"vertical",...a,ref:d,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":zd(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(o.viewport){const m=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),pj(m,h)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&s({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Hu(i.paddingTop),paddingEnd:Hu(i.paddingBottom)}})}})}),[i6,cj]=aj(xs),uj=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:a,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:f,onResize:h,...m}=e,g=An(xs,n),[b,x]=u.useState(null),w=we(t,A=>x(A)),v=u.useRef(null),p=u.useRef(""),y=g.viewport,S=s.content-s.viewport,j=Ct(f),k=Ct(c),N=Pd(h,10);function E(A){if(v.current){const T=A.clientX-v.current.left,I=A.clientY-v.current.top;d({x:T,y:I})}}return u.useEffect(()=>{const A=T=>{const I=T.target;(b==null?void 0:b.contains(I))&&j(T,S)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[y,b,S,j]),u.useEffect(k,[s,k]),ni(b,N),ni(g.content,N),r.jsx(i6,{scope:n,scrollbar:b,hasThumb:a,onThumbChange:Ct(o),onThumbPointerUp:Ct(i),onThumbPositionChange:k,onThumbPointerDown:Ct(l),children:r.jsx(xe.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:re(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),v.current=b.getBoundingClientRect(),p.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),E(A))}),onPointerMove:re(e.onPointerMove,E),onPointerUp:re(e.onPointerUp,A=>{const T=A.target;T.hasPointerCapture(A.pointerId)&&T.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=p.current,g.viewport&&(g.viewport.style.scrollBehavior=""),v.current=null})})})}),$u="ScrollAreaThumb",dj=u.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=cj($u,e.__scopeScrollArea);return r.jsx(_t,{present:n||a.hasThumb,children:r.jsx(l6,{ref:t,...s})})}),l6=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...a}=e,o=An($u,n),i=cj($u,n),{onThumbPositionChange:l}=i,c=we(t,h=>i.onThumbChange(h)),d=u.useRef(void 0),f=Pd(()=>{d.current&&(d.current(),d.current=void 0)},100);return u.useEffect(()=>{const h=o.viewport;if(h){const m=()=>{if(f(),!d.current){const g=d6(h,l);d.current=g,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[o.viewport,f,l]),r.jsx(xe.div,{"data-state":i.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:re(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),b=h.clientX-g.left,x=h.clientY-g.top;i.onThumbPointerDown({x:b,y:x})}),onPointerUp:re(e.onPointerUp,i.onThumbPointerUp)})});dj.displayName=$u;var kg="ScrollAreaCorner",fj=u.forwardRef((e,t)=>{const n=An(kg,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?r.jsx(c6,{...e,ref:t}):null});fj.displayName=kg;var c6=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,a=An(kg,n),[o,i]=u.useState(0),[l,c]=u.useState(0),d=!!(o&&l);return ni(a.scrollbarX,()=>{var h;const f=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(f),c(f)}),ni(a.scrollbarY,()=>{var h;const f=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(f),i(f)}),d?r.jsx(xe.div,{...s,ref:t,style:{width:o,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Hu(e){return e?parseInt(e,10):0}function hj(e,t){const n=e/t;return isNaN(n)?0:n}function zd(e){const t=hj(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function u6(e,t,n,s="ltr"){const a=zd(n),o=a/2,i=t||o,l=a-i,c=n.scrollbar.paddingStart+i,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,h=s==="ltr"?[0,f]:[f*-1,0];return mj([c,d],h)(e)}function iv(e,t,n="ltr"){const s=zd(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,i=t.content-t.viewport,l=o-s,c=n==="ltr"?[0,i]:[i*-1,0],d=Rl(e,c);return mj([0,i],[0,l])(d)}function mj(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function pj(e,t){return e>0&&e<t}var d6=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},i=n.left!==o.left,l=n.top!==o.top;(i||l)&&t(),n=o,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function Pd(e,t){const n=Ct(e),s=u.useRef(0);return u.useEffect(()=>()=>window.clearTimeout(s.current),[]),u.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function ni(e,t){const n=Ct(t);kt(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,n])}var gj=rj,f6=ij,h6=fj;const Ps=u.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(gj,{ref:s,className:be("relative overflow-hidden",e),...n,children:[r.jsx(f6,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(xj,{}),r.jsx(h6,{})]}));Ps.displayName=gj.displayName;const xj=u.forwardRef(({className:e,orientation:t="vertical",...n},s)=>r.jsx(Cg,{ref:s,orientation:t,className:be("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:r.jsx(dj,{className:"relative flex-1 rounded-full bg-border"})}));xj.displayName=Cg.displayName;class m6{constructor(){this.learningDatabase=new Map,this.agentSubscriptions=new Map,this.crossReferences=new Map}subscribeAgent(t,n){this.agentSubscriptions.has(t)||this.agentSubscriptions.set(t,[]),this.agentSubscriptions.get(t).push(n)}unsubscribeAgent(t){this.agentSubscriptions.delete(t)}async addLearning(t){this.learningDatabase.set(t.id,t),this.updateCrossReferences(t);try{await fetch("/api/ai-learning/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(n){console.warn("Server persistence failed, continuing with local storage:",n instanceof Error?n.message:"Unknown error")}this.safelyBroadcastToAgents({fromAgent:t.agentSource,toAgent:"all",type:"share-learning",data:{term:t.term,content:t.content,context:t.context,relatedTerms:t.relatedTerms},timestamp:new Date().toISOString()})}getLearning(t){const n=[];Array.from(this.learningDatabase.entries()).forEach(([a,o])=>{(o.term.toLowerCase().includes(t.toLowerCase())||o.content.toLowerCase().includes(t.toLowerCase()))&&n.push(o)});const s=this.crossReferences.get(t.toLowerCase())||[];for(const a of s)Array.from(this.learningDatabase.entries()).forEach(([o,i])=>{i.term.toLowerCase()===a&&!n.includes(i)&&n.push(i)});return n.sort((a,o)=>o.context.confidence-a.context.confidence)}getContextualLearning(t,n){const s=[];return Array.from(this.learningDatabase.entries()).forEach(([a,o])=>{var i;((i=o.context.book)==null?void 0:i.toLowerCase())===t.toLowerCase()&&(!n||o.context.chapter===n)&&s.push(o)}),s.sort((a,o)=>new Date(o.context.timestamp).getTime()-new Date(a.context.timestamp).getTime())}getSmartSuggestions(t,n,s){const a=t?this.getContextualLearning(t,n):[],o=Array.from(this.learningDatabase.values()).sort((l,c)=>new Date(c.context.timestamp).getTime()-new Date(l.context.timestamp).getTime()).slice(0,10),i=[];return a.slice(0,3).forEach(l=>{i.push(`Explain: ${l.term}`),l.relatedTerms.slice(0,2).forEach(c=>{i.push(`Define: ${c}`)})}),o.slice(0,2).forEach(l=>{i.some(c=>c.includes(l.term))||i.push(`More about: ${l.term}`)}),i.slice(0,6)}async requestInformation(t,n,s){const a=this.getLearning(n);return this.safelyBroadcastToAgents({fromAgent:t,toAgent:"all",type:"request-info",data:{query:n,context:s},timestamp:new Date().toISOString()}),a}shareInsight(t,n,s,a=[]){const o={id:`insight-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,agentSource:t,type:"insight",term:s.term||"general insight",content:n,context:{book:s.book,chapter:s.chapter,timestamp:new Date().toISOString(),confidence:.8},relatedTerms:a,sources:s.sources||[],metadata:s};this.addLearning(o)}async getExpertInsights(t){try{const n=this.getContextualLearning(t);return n.length===0?null:{masteredConcepts:n.filter(a=>a.context.confidence>.7).map(a=>a.term).filter((a,o,i)=>i.indexOf(a)===o).slice(0,10)}}catch(n){return console.error("Failed to get expert insights:",n),null}}getAgentStats(){const t={};return Array.from(this.learningDatabase.entries()).forEach(([n,s])=>{const a=s.agentSource;t[a]||(t[a]={learningCount:0,lastActivity:s.context.timestamp}),t[a].learningCount++,new Date(s.context.timestamp)>new Date(t[a].lastActivity)&&(t[a].lastActivity=s.context.timestamp)}),t}updateCrossReferences(t){const n=t.term.toLowerCase();t.relatedTerms.forEach(s=>{const a=s.toLowerCase();this.crossReferences.has(a)||this.crossReferences.set(a,[]),this.crossReferences.get(a).includes(n)||this.crossReferences.get(a).push(n)}),this.crossReferences.has(n)||this.crossReferences.set(n,[]),t.relatedTerms.forEach(s=>{const a=s.toLowerCase();this.crossReferences.get(n).includes(a)||this.crossReferences.get(n).push(a)})}broadcastToAgents(t){if(t.toAgent==="all")Array.from(this.agentSubscriptions.entries()).forEach(([n,s])=>{n!==t.fromAgent&&s.forEach(a=>{try{a(t)}catch(o){console.error(`Error broadcasting to agent ${n}:`,o)}})});else{const n=this.agentSubscriptions.get(t.toAgent);n&&n.forEach(s=>{try{s(t)}catch(a){console.error(`Error sending to agent ${t.toAgent}:`,a)}})}}safelyBroadcastToAgents(t){const n=Array.from(this.agentSubscriptions.keys()),s=t.toAgent==="all"?n.filter(i=>i!==t.fromAgent):[t.toAgent];if(s.length===0){console.info(`🤖 No agents subscribed to receive communication from ${t.fromAgent}`);return}let a=0,o=0;s.forEach(i=>{const l=this.agentSubscriptions.get(i);l?l.forEach(c=>{try{c(t),a++}catch(d){o++,console.warn(`⚠️ Agent ${i} failed to receive communication:`,d instanceof Error?d.message:"Unknown error")}}):console.info(`🤖 Agent ${i} not currently subscribed`)}),a>0&&console.info(`✅ Successfully notified ${a} agents about "${t.data.term}"`),o>0&&console.warn(`⚠️ Failed to notify ${o} agents (they may not be running)`)}async initialize(){try{const t=await fetch("/api/ai-learning/all");t.ok&&(await t.json()).learningData.forEach(s=>{this.learningDatabase.set(s.id,s),this.updateCrossReferences(s)})}catch(t){console.error("Failed to initialize learning service:",t)}}async sendFeedback(t){try{const n=await fetch("/api/ai-learning/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const s=await n.json().catch(()=>({message:"Failed to submit feedback"}));throw new Error(s.message)}}catch(n){throw console.error("Error submitting feedback:",n),n}}}const Cs=new m6;Cs.initialize();function Id(){const e=t_(),{currentLanguage:t}=bd();return{...e,sendMessage:async(i,l)=>{const c={...l,language:t};return console.log(`🌐 Sending message with language: ${t}`),e.sendMessage(i,c)},sendQuizRequest:async(i,l)=>{if(!e.socket||!e.isConnected)throw new Error("Not connected to agent system");const c={...l,language:t,sessionId:e.sessionId,userId:(l==null?void 0:l.userId)||2};return console.log(`🎯 Sending quiz request in language: ${t}`),new Promise((d,f)=>{const h=setTimeout(()=>{f(new Error("Quiz request timeout"))},6e4);e.socket.emit("quizMessage",{message:i,context:c},m=>{clearTimeout(h),m!=null&&m.error?f(new Error(m.error)):d()})})},sendDiscussionMessage:async(i,l)=>{if(!e.socket||!e.isConnected)throw new Error("Not connected to agent system");const c={message:i,sessionId:e.sessionId,userId:(l==null?void 0:l.userId)||2,documentId:l==null?void 0:l.documentId,chapter:l==null?void 0:l.chapter,mode:l==null?void 0:l.mode,language:t,conversationHistory:(l==null?void 0:l.conversationHistory)||[]};return console.log("💬 Sending discussion message with payload:",{...c,conversationHistoryLength:c.conversationHistory.length}),new Promise((d,f)=>{const h=setTimeout(()=>{f(new Error("Discussion message timeout"))},18e4);e.socket.emit("discussionMessage",c,m=>{clearTimeout(h),m!=null&&m.error?f(new Error(m.error)):d()})})},requestAnalysis:async(i,l,c)=>e.requestAnalysis(i,l,c),currentLanguage:t,isLanguageAware:!0}}const p6={chat:{icon:ka,name:"AI Assistant",color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30",borderColor:"border-blue-200 dark:border-blue-800"},learning:{icon:xn,name:"Learning Agent",color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-100 dark:bg-purple-900/30",borderColor:"border-purple-200 dark:border-purple-800"},discussion:{icon:KO,name:"Discussion Agent",color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-100 dark:bg-orange-900/30",borderColor:"border-orange-200 dark:border-orange-800"},summary:{icon:Qt,name:"Summary Agent",color:"text-yellow-600 dark:text-yellow-400",bgColor:"bg-yellow-100 dark:bg-yellow-900/30",borderColor:"border-yellow-200 dark:border-yellow-800"},navigation:{icon:Nn,name:"Navigation Agent",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30",borderColor:"border-green-200 dark:border-green-800"}};function Ud({isTyping:e,agentType:t="chat",estimatedTime:n=3,currentProgress:s=0,customMessage:a}){const[o,i]=u.useState(""),[l,c]=u.useState(""),[d,f]=u.useState(!1),h=p6[t],m=h.icon,g=["Thinking...","Processing your request...","Analyzing content...","Generating response...","Almost ready...","Finalizing thoughts..."];return u.useEffect(()=>{if(!e){i("");return}const b=setInterval(()=>{i(x=>x.length>=3?"":x+".")},500);return()=>clearInterval(b)},[e]),u.useEffect(()=>{if(!e){c(""),f(!1);return}f(n>5);let b=0;if(c(a||g[0]),!a){const x=setInterval(()=>{b=(b+1)%g.length,c(g[b])},2e3);return()=>clearInterval(x)}},[e,a,n]),e?r.jsxs("div",{className:"flex items-start gap-3 p-4 animate-in slide-in-from-left duration-500",children:[r.jsx("div",{className:`
        flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center
        ${h.bgColor} ${h.borderColor} border-2 shadow-sm
        animate-in bounce-in duration-300
      `,children:r.jsx(m,{className:`w-5 h-5 ${h.color} animate-pulse`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1 animate-in fade-in delay-200",children:h.name}),r.jsxs("div",{className:`
          inline-block max-w-sm p-3 rounded-2xl rounded-tl-sm
          ${h.bgColor} ${h.borderColor} border
          shadow-sm animate-in scale-in duration-300 delay-300
        `,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"1.4s"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"200ms",animationDuration:"1.4s"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"400ms",animationDuration:"1.4s"}})]}),r.jsxs("div",{className:`text-sm ${h.color} font-medium animate-in fade-in delay-500`,children:[l,o]})]}),d&&r.jsxs("div",{className:"mt-3 animate-in slide-in-from-bottom delay-700",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Progress"}),r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:[Math.round(s),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:r.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ease-out bg-gradient-to-r ${t==="chat"?"from-blue-500 to-blue-600":t==="learning"?"from-purple-500 to-purple-600":t==="discussion"?"from-orange-500 to-orange-600":t==="summary"?"from-yellow-500 to-yellow-600":"from-green-500 to-green-600"}`,style:{width:`${s}%`}})}),n>0&&r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 animate-in fade-in delay-1000",children:["Estimated: ",n,"s remaining"]})]})]}),r.jsxs("div",{className:"mt-2 flex items-center gap-2 animate-in slide-in-from-left delay-1000",children:[r.jsx("div",{className:"flex space-x-1",children:[0,1,2,3,4].map(b=>r.jsx("div",{className:`w-1 h-1 rounded-full transition-all duration-300 ${h.color.replace("text-","bg-")}`,style:{animationDelay:`${b*100}ms`,animation:"pulse 2s infinite ease-in-out"}},b))}),r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 animate-pulse",children:"AI is analyzing..."})]})]})]}):null}const Qf="aiAgentChatPanelPosition",lv="aiAgentChatPanelMinimized";function g6({documentId:e,chapter:t,isOpen:n,onToggle:s}){const[a,o]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(()=>typeof window<"u"?localStorage.getItem(lv)==="true":!1),[f,h]=u.useState(""),[m,g]=u.useState(!1),[b,x]=u.useState(!1),[w,v]=u.useState(0),[p,y]=u.useState("chat"),[S,j]=u.useState(!1),[k,N]=u.useState(!1),E=u.useRef(null),[A,T]=u.useState(()=>{if(typeof window<"u"){const ce=localStorage.getItem(Qf);if(ce)try{const he=JSON.parse(ce);if(typeof he.x=="number"&&typeof he.y=="number")return he}catch{}}const X=window.innerWidth-400-16,G=window.innerHeight-600-16;return{x:Math.max(20,X),y:Math.max(96,G)}}),[I,R]=u.useState(!1),[$,K]=u.useState({x:0,y:0}),[C,D]=u.useState({x:0,y:0}),H=u.useRef(null),M=u.useRef(null),U=u.useRef(),{toast:z}=Ht(),[P,V]=u.useState({}),[Q,_]=u.useState(null),[se,oe]=u.useState(""),{socket:B,isConnected:J,sessionId:q,serverRestartDetected:Y,sendMessage:ae,requestAnalysis:ee}=Id();u.useEffect(()=>{var X;(X=E.current)==null||X.scrollIntoView({behavior:"smooth"})},[a]),u.useEffect(()=>{a.length>1&&q&&Re()},[a,q]),u.useEffect(()=>{q&&e&&fe()&&console.log("💾 Loaded saved AI chat conversation")},[q,e]),u.useEffect(()=>{Y&&(console.log("🔄 Server restart detected in AI chat, clearing conversation"),o([]),localStorage.removeItem(de()))},[Y]),u.useEffect(()=>{if(U.current===void 0){U.current=t;return}if(U.current!==t&&t!==void 0){const X={id:`msg-system-${Date.now()}`,role:"system",content:`Context updated to Chapter ${t}.`,timestamp:new Date,agent:"System"};o(G=>[...G,X]),z({title:"Context Updated",description:`The AI is now aware you are on chapter ${t}.`,duration:3e3}),U.current=t}},[t,z]);const de=()=>`ai_chat_${e||"general"}_${q}`,Re=()=>{try{j(!0);const X={messages:a,documentId:e,chapter:t,lastUpdated:new Date().toISOString(),sessionId:q};localStorage.setItem(de(),JSON.stringify(X)),setTimeout(()=>j(!1),500)}catch(X){console.error("Failed to save AI chat conversation:",X),j(!1)}},fe=()=>{try{const X=localStorage.getItem(de());if(X){const G=JSON.parse(X),ce=new Date(G.lastUpdated);if((new Date().getTime()-ce.getTime())/(1e3*60*60)<24&&G.sessionId===q)return o(G.messages.map(qe=>({...qe,timestamp:new Date(qe.timestamp)}))),!0}return!1}catch(X){return console.error("Failed to load saved AI chat conversation:",X),!1}},ye=()=>{confirm("Are you sure you want to clear this conversation? This action cannot be undone.")&&(o([]),localStorage.removeItem(de()),z({title:"Conversation Cleared",description:"Chat history has been cleared.",duration:2e3}))},Le=()=>{const X={title:`AI Chat: ${e?`Document ${e}`:"General"} ${t?`- Chapter ${t}`:""}`,timestamp:new Date().toISOString(),messages:a.map(Ne=>({role:Ne.role,content:Ne.content,timestamp:Ne.timestamp.toISOString(),agent:Ne.agent})),metadata:{documentId:e,chapter:t,sessionId:q}},G=new Blob([JSON.stringify(X,null,2)],{type:"application/json"}),ce=URL.createObjectURL(G),he=document.createElement("a");he.href=ce,he.download=`ai-chat-${e||"general"}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(ce),z({title:"Conversation Exported",description:"Chat history has been exported as JSON file.",duration:2e3})};u.useEffect(()=>{B&&(B.on("chatResponse",G=>{var he,Ne;const ce=G.isExpertResponse?`${(he=G.expertise)==null?void 0:he.domain} Expert (Level ${(Ne=G.expertise)==null?void 0:Ne.expertiseLevel}/10)`:"StudyAssistant";He("assistant",G.message,ce)}),B.on("analysisCompleted",G=>{He("system",`Analysis completed for ${G.documentId}, Chapter ${G.chapter}`,"TextAnalysis")}),B.on("insightsGenerated",G=>{He("system",`New insights generated: ${G.insights.length} insights available`,"InsightGeneration")}));const X=G=>{if(G.type==="share-learning")Cs.getLearning(G.data.term).length>0&&He("system",`💡 Other AI agents learned about "${G.data.term}": ${G.data.content}`,G.fromAgent);else if(G.type==="request-info"){const ce=a.filter(he=>he.content.toLowerCase().includes(G.data.query.toLowerCase()));ce.length>0&&Cs.shareInsight("chat",`Found ${ce.length} relevant conversation insights about "${G.data.query}"`,{term:G.data.query,conversationContext:!0},Ge(ce.map(he=>he.content).join(" ")))}};return Cs.subscribeAgent("chat",X),()=>{B&&(B.off("chatResponse"),B.off("analysisCompleted"),B.off("insightsGenerated")),Cs.unsubscribeAgent("chat")}},[B,a]);const He=(X,G,ce)=>{const he={id:`msg-${Date.now()}-${Math.random()}`,role:X,content:G,timestamp:new Date,agent:ce};if(o(Ne=>[...Ne,he]),X==="assistant"&&G.length>50){const Ne={id:`chat-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,agentSource:"chat",type:"conversation",term:"conversation insight",content:G,context:{book:e?"current document":void 0,chapter:t,timestamp:new Date().toISOString(),confidence:.7},relatedTerms:Ge(G),sources:[],metadata:{agent:ce,conversationContext:!0}};Cs.addLearning(Ne)}},Ge=X=>{const G=X.toLowerCase().split(/\s+/),ce=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","this","that","these","those"]),he=new Map;return G.forEach(qe=>{const vt=qe.replace(/[^\w]/g,"");vt.length>4&&!ce.has(vt)&&he.set(vt,(he.get(vt)||0)+1)}),Array.from(he.entries()).sort((qe,vt)=>vt[1]-qe[1]).slice(0,5).map(([qe])=>qe)},Ot=async()=>{if(!i.trim()||!J||!q)return;He("user",i),x(!0),v(0),y("chat");const X=setInterval(()=>{v(ce=>ce>=90?ce:ce+Math.random()*20)},500),G={userId:1,documentId:e,chapter:t};try{await ae(i,G),l("")}catch{He("system","Failed to send message. Please try again.")}finally{clearInterval(X),v(100),setTimeout(()=>{x(!1),v(0)},800)}},ln=async()=>{if(!(!e||!J))try{await ee(e,t),He("system","Analysis requested. You will be notified when complete.")}catch{He("system","Failed to request analysis.")}},Qn=X=>{h(X.content),g(!0)},lt=()=>{g(!1),h("")},At=()=>{var qe;const X=window.getSelection();if(!X||X.rangeCount===0)return;const G=X.toString().trim();if(G.length<3)return;const he=X.getRangeAt(0).commonAncestorContainer;(he.nodeType===Node.TEXT_NODE?(qe=he.parentElement)==null?void 0:qe.closest('[data-message-role="assistant"], [data-message-role="system"]'):he.closest('[data-message-role="assistant"], [data-message-role="system"]'))&&(h(G),g(!0),setTimeout(()=>{var vt;(vt=window.getSelection())==null||vt.removeAllRanges()},100))};u.useEffect(()=>{const X=()=>{I||setTimeout(At,50)};if(n)return document.addEventListener("mouseup",X),()=>{document.removeEventListener("mouseup",X)}},[n,I]);const ge=X=>{switch(X.toLowerCase()){case"textanalysisagent":return r.jsx(xn,{className:"h-4 w-4"});case"insightgenerationagent":return r.jsx(aO,{className:"h-4 w-4"});case"studyassistantagent":return r.jsx(Pn,{className:"h-4 w-4"});default:return r.jsx(Nn,{className:"h-4 w-4"})}},O=X=>{X.target.closest("button")||(X.preventDefault(),X.stopPropagation(),R(!0),K({x:X.clientX,y:X.clientY}),D({x:X.clientX-A.x,y:X.clientY-A.y}),H.current&&(H.current.style.cursor="grabbing",H.current.style.transform="scale(1.02)",H.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},W=X=>{I&&(X.preventDefault(),X.stopPropagation(),M.current&&cancelAnimationFrame(M.current),M.current=requestAnimationFrame(()=>{const ce=c?64:600,he=Math.max(10,Math.min(window.innerWidth-400-10,X.clientX-C.x)),Ne=Math.max(10,Math.min(window.innerHeight-ce-10,X.clientY-C.y));T({x:he,y:Ne})}))},te=()=>{R(!1),M.current&&(cancelAnimationFrame(M.current),M.current=null),H.current&&(H.current.style.cursor="",H.current.style.transform="",H.current.style.boxShadow="");const X=window.getSelection();X&&X.removeAllRanges(),localStorage.setItem(Qf,JSON.stringify(A))};u.useEffect(()=>{if(I){document.addEventListener("mousemove",W,{passive:!1}),document.addEventListener("mouseup",te,{passive:!0});const X=G=>{if(G.touches.length===1){const ce=G.touches[0],he={preventDefault:()=>G.preventDefault(),stopPropagation:()=>G.stopPropagation(),clientX:ce.clientX,clientY:ce.clientY};W(he)}};return document.addEventListener("touchmove",X,{passive:!1}),document.addEventListener("touchend",te,{passive:!0}),document.body.style.overflow="hidden",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",te),document.removeEventListener("touchmove",X),document.removeEventListener("touchend",te),document.body.style.overflow="",document.body.style.userSelect="",M.current&&(cancelAnimationFrame(M.current),M.current=null)}}},[I,C]),u.useEffect(()=>{localStorage.setItem(Qf,JSON.stringify(A))},[A]),u.useEffect(()=>{localStorage.setItem(lv,c?"true":"false")},[c]);const ne=async(X,G,ce)=>{if(P[X.id])return;const he={messageId:X.id,feedback:G,reason:ce,documentId:e,chapter:t,userId:1,agentId:X.agent,messageContent:X.content};try{await Cs.sendFeedback(he),V(Ne=>({...Ne,[X.id]:G})),z({title:"Feedback Submitted",description:"Thank you for helping us improve!"})}catch{z({title:"Feedback Error",description:"Could not submit your feedback at this time.",variant:"destructive"})}finally{_(null),oe("")}},ie=async(X,G)=>{if(G==="negative"){_(X);return}ne(X,G)},ze=()=>{Q&&ne(Q,"negative",se)};return n?r.jsxs("div",{ref:H,className:"fixed z-50",style:{left:`${A.x}px`,top:`${A.y}px`,transform:"none"},children:[r.jsxs(Ae,{className:`w-96 transition-all duration-300 ${c?"h-16":"h-[600px]"} shadow-2xl border-2 border-primary/20 ${I?"select-none cursor-grabbing":""}`,style:{willChange:I?"transform":"auto",transition:I?"box-shadow 0.2s ease-out":"all 0.3s ease-out",zIndex:I?60:50},children:[r.jsx(Ue,{className:`pb-2 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 select-none transition-all duration-200 ${I?"cursor-grabbing bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-800/30 dark:to-purple-800/30":"cursor-grab hover:from-blue-100 hover:to-purple-100 dark:hover:from-blue-800/30 dark:hover:to-purple-800/30"}`,onMouseDown:O,onDragStart:X=>X.preventDefault(),style:{userSelect:"none",touchAction:"none"},title:"Drag to move",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Ye,{className:"text-lg flex items-center gap-2",children:[r.jsx(Nn,{className:"h-5 w-5 text-primary"}),"AI Reading Companion",r.jsx(Be,{className:`text-xs ${J?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:J?"Online":"Offline"}),r.jsxs("div",{className:"flex gap-0.5 ml-2 opacity-50",children:[r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[S&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400 mr-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Saving..."]}),Y&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-orange-600 dark:text-orange-400 mr-2",children:[r.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Reset"]}),r.jsx(F,{onClick:()=>d(!c),className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:c?r.jsx(qr,{className:"h-4 w-4"}):r.jsx(qa,{className:"h-4 w-4"})}),r.jsx(F,{onClick:s,className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:r.jsx(kn,{className:"h-4 w-4"})})]})]})}),!c&&r.jsxs(Me,{className:"p-0 flex flex-col h-[520px]",children:[r.jsx(Ps,{className:"flex-1 p-4",children:r.jsxs("div",{className:"space-y-4",children:[a.length===0?r.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[r.jsx(Nn,{className:"h-12 w-12 mx-auto mb-4 text-primary/50"}),r.jsx("p",{className:"text-sm",children:"Welcome! Ask me anything about your reading."}),r.jsx("p",{className:"text-xs mt-2",children:"I can provide insights, explanations, and study guidance."})]}):a.map((X,G)=>r.jsx("div",{className:`flex ${X.role==="user"?"justify-end":"justify-start"} group ${X.role==="user"?"message-slide-right animate-in":"message-slide-left animate-in"} ${G<5?`message-stagger-${Math.min(G+1,5)}`:""}`,children:r.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 transition-all duration-300 message-bubble-pop gpu-accelerated ${X.role==="user"?"bg-primary text-primary-foreground hover:scale-[1.02] shadow-lg hover:shadow-xl transform hover:-translate-y-1":X.role==="system"?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 hover:bg-blue-200 dark:hover:bg-blue-800 hover:scale-[1.01] insight-sparkle":"bg-muted hover:bg-muted/80 hover:scale-[1.01] shadow-md hover:shadow-lg transform hover:-translate-y-0.5"} ${X.role==="assistant"||X.role==="system"?"cursor-text":""}`,"data-message-id":X.id,"data-message-role":X.role,"data-agent":X.agent||"AI Assistant",children:[X.agent&&r.jsxs("div",{className:"flex items-center justify-between gap-1 mb-1 text-xs opacity-70 message-header animate-in fade-in delay-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`relative agent-avatar ${X.role==="system"?"agent-thinking":"agent-active"} transition-all duration-300`,children:ge(X.agent)}),r.jsx("span",{className:"font-medium",children:X.agent})]}),(X.role==="assistant"||X.role==="system")&&r.jsx(F,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-blue-500 hover:text-blue-700 opacity-0 group-hover:opacity-100 transition-all duration-300 hover:scale-110 btn-scale",onClick:()=>Qn(X),title:"Save as note",children:r.jsx(Vn,{className:"h-3 w-3 animate-in bounce-in delay-500"})})]}),r.jsx("p",{className:"text-sm select-text agent-message-content",children:X.content}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs opacity-70 mt-1 timestamp",children:X.timestamp.toLocaleTimeString()}),(X.role==="assistant"||X.role==="system")&&r.jsxs("div",{className:"flex items-center gap-1 mt-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[r.jsx(F,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 hover:text-green-500 disabled:opacity-100 ${P[X.id]==="positive"?"text-green-500":"text-muted-foreground"}`,onClick:()=>ie(X,"positive"),disabled:!!P[X.id],title:"Good response",children:r.jsx(ug,{className:"h-3 w-3"})}),r.jsx(F,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 hover:text-red-500 disabled:opacity-100 ${P[X.id]==="negative"?"text-red-500":"text-muted-foreground"}`,onClick:()=>ie(X,"negative"),disabled:!!P[X.id],title:"Bad response",children:r.jsx(cg,{className:"h-3 w-3"})})]})]})]})},X.id)),b&&r.jsx(Ud,{isTyping:b,agentType:p,currentProgress:w,estimatedTime:3,customMessage:"Analyzing your question..."}),r.jsx("div",{ref:E})]})}),r.jsx(ds,{}),r.jsxs("div",{className:"p-4 space-y-2",children:[e&&r.jsxs(F,{onClick:ln,disabled:!J,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 disabled:opacity-50",children:[r.jsx(xn,{className:"h-4 w-4 mr-2"}),"Analyze Current Chapter"]}),a.length>0&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx(F,{onClick:ye,variant:"outline",size:"sm",className:"flex-1 px-3 py-2 text-sm border border-red-300 dark:border-red-600 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400",children:"Clear Chat"}),r.jsx(F,{onClick:Le,variant:"outline",size:"sm",className:"flex-1 px-3 py-2 text-sm border border-blue-300 dark:border-blue-600 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-blue-600 dark:text-blue-400",children:"Export"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(it,{placeholder:q?"Ask about your reading...":"Connecting...",value:i,onChange:X=>l(X.target.value),onKeyPress:X=>X.key==="Enter"&&Ot(),disabled:!J||!q,className:"flex-1"}),r.jsx(F,{onClick:Ot,disabled:!J||!q||!i.trim(),className:"px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white disabled:opacity-50",children:r.jsx(jd,{className:"h-4 w-4"})})]})]})]})]}),r.jsx(Ld,{isOpen:m,onClose:lt,selectedText:f,documentId:-2,chapter:t||1,documentTitle:"AI Chat",paragraph:0}),r.jsx(Qr,{open:!!Q,onOpenChange:X=>!X&&_(null),children:r.jsxs(Va,{children:[r.jsxs(Fa,{children:[r.jsx(Ya,{children:"Provide additional feedback"}),r.jsx(bi,{children:"Your feedback is valuable. Please provide a reason to help us improve the AI."})]}),r.jsx(fs,{value:se,onChange:X=>oe(X.target.value),placeholder:"e.g., This response was not relevant to my question.",className:"my-4"}),r.jsxs(Dd,{children:[r.jsx(F,{variant:"outline",onClick:()=>{_(null),oe("")},children:"Cancel"}),r.jsx(F,{onClick:ze,children:"Submit Feedback"})]})]})})]}):null}var Ag="Progress",Tg=100,[x6,Ez]=on(Ag),[v6,y6]=x6(Ag),vj=u.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:a,getValueLabel:o=b6,...i}=e;(a||a===0)&&!cv(a)&&console.error(w6(`${a}`,"Progress"));const l=cv(a)?a:Tg;s!==null&&!uv(s,l)&&console.error(S6(`${s}`,"Progress"));const c=uv(s,l)?s:null,d=qu(c)?o(c,l):void 0;return r.jsx(v6,{scope:n,value:c,max:l,children:r.jsx(xe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":qu(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":wj(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});vj.displayName=Ag;var yj="ProgressIndicator",bj=u.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,a=y6(yj,n);return r.jsx(xe.div,{"data-state":wj(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});bj.displayName=yj;function b6(e,t){return`${Math.round(e/t*100)}%`}function wj(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function qu(e){return typeof e=="number"}function cv(e){return qu(e)&&!isNaN(e)&&e>0}function uv(e,t){return qu(e)&&!isNaN(e)&&e<=t&&e>=0}function w6(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Tg}\`.`}function S6(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Tg} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Sj=vj,N6=bj;const Vu=u.forwardRef(({className:e,value:t,...n},s)=>r.jsx(Sj,{ref:s,className:be("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:r.jsx(N6,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Vu.displayName=Sj.displayName;const Xf="autoLearningPanelPosition",dv="autoLearningPanelMinimized";function j6({documentId:e,documentTitle:t,isOpen:n,onToggle:s}){const[a,o]=u.useState(null),[i,l]=u.useState(!1),[c,d]=u.useState(""),[f,h]=u.useState(""),[m,g]=u.useState(!1),[b,x]=u.useState(!1),[w,v]=u.useState(()=>typeof window<"u"?localStorage.getItem(dv)==="true":!1),[p,y]=u.useState(()=>{if(typeof window<"u"){const V=localStorage.getItem(Xf);if(V)try{const Q=JSON.parse(V);if(typeof Q.x=="number"&&typeof Q.y=="number")return Q}catch{}}const z=window.innerWidth-450-16,P=window.innerHeight-500-16;return{x:Math.max(20,z),y:Math.max(96,P)}}),[S,j]=u.useState(!1),[k,N]=u.useState({x:0,y:0}),[E,A]=u.useState({x:0,y:0}),T=u.useRef(null),I=u.useRef(null);u.useEffect(()=>{n&&R()},[e,n]),u.useEffect(()=>{if(n){const z=window.innerWidth-450-16,P=window.innerHeight-(w?64:b?700:500)-16;y({x:Math.max(20,z),y:Math.max(96,P)})}},[w,b]),u.useEffect(()=>{localStorage.setItem(Xf,JSON.stringify(p))},[p]),u.useEffect(()=>{localStorage.setItem(dv,w?"true":"false")},[w]),u.useEffect(()=>{a&&console.log("AI Expertise object:",a)},[a]);const R=async()=>{try{const P=await(await fetch(`/api/expertise/${e}`)).json();P.success&&o(P.expertise)}catch(z){console.error("Failed to fetch expertise:",z)}},$=async()=>{l(!0);try{if((await(await fetch(`/api/auto-learn/${e}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json()).success){let V=0;const Q=15,_=async()=>{if(V>=Q){l(!1);return}V++,await R();const oe=await(await fetch(`/api/expertise/${e}`)).json();if(oe.success&&oe.expertise.expertise){l(!1);return}const B=Math.min(3e4,3e3+V*2e3);setTimeout(_,B)};setTimeout(_,5e3)}}catch(z){console.error("Auto-learning failed:",z),l(!1)}},K=async()=>{if(c.trim()){g(!0);try{const P=await(await fetch(`/api/expert-chat/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:c})})).json();P.success&&h(P.response)}catch(z){console.error("Expert chat failed:",z),h("Sorry, I encountered an error while processing your question.")}finally{g(!1)}}},C=z=>{w||(z.preventDefault(),z.stopPropagation(),j(!0),N({x:z.clientX,y:z.clientY}),A({x:z.clientX-p.x,y:z.clientY-p.y}),T.current&&(T.current.style.cursor="grabbing",T.current.style.transform="scale(1.02)",T.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},D=z=>{S&&(z.preventDefault(),z.stopPropagation(),I.current&&cancelAnimationFrame(I.current),I.current=requestAnimationFrame(()=>{const P=w?300:400,V=w?60:b?700:500,Q=Math.max(10,Math.min(window.innerWidth-P-10,z.clientX-E.x)),_=Math.max(10,Math.min(window.innerHeight-V-10,z.clientY-E.y));y({x:Q,y:_})}))},H=()=>{j(!1),I.current&&(cancelAnimationFrame(I.current),I.current=null),T.current&&(T.current.style.cursor="",T.current.style.transform="",T.current.style.boxShadow="");const z=window.getSelection();z&&z.removeAllRanges(),localStorage.setItem(Xf,JSON.stringify(p))};u.useEffect(()=>{if(S){document.addEventListener("mousemove",D,{passive:!1}),document.addEventListener("mouseup",H,{passive:!0});const z=P=>{if(P.touches.length===1){const V=P.touches[0],Q={preventDefault:()=>P.preventDefault(),stopPropagation:()=>P.stopPropagation(),clientX:V.clientX,clientY:V.clientY};D(Q)}};return document.addEventListener("touchmove",z,{passive:!1}),document.addEventListener("touchend",H,{passive:!0}),document.body.style.overflow="hidden",()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",H),document.removeEventListener("touchmove",z),document.removeEventListener("touchend",H),document.body.style.overflow="",I.current&&(cancelAnimationFrame(I.current),I.current=null)}}},[S,E]);const M=z=>z>=8?"bg-green-500":z>=6?"bg-blue-500":z>=4?"bg-yellow-500":"bg-red-500",U=z=>z>=9?"Master Expert":z>=7?"Expert":z>=5?"Advanced":z>=3?"Intermediate":"Beginner";return n?r.jsxs("div",{ref:T,className:`fixed z-40 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden transition-all duration-300 ${S?"select-none cursor-grabbing":""}`,style:{left:p.x,top:p.y,width:w?"300px":"400px",height:w?"60px":b?"700px":"500px",maxWidth:"90vw",maxHeight:"90vh",overscrollBehavior:"contain",willChange:S?"transform":"auto",transition:S?"box-shadow 0.2s ease-out, transform 0.2s ease-out":"all 0.3s ease-out",transform:S?"scale(1.02)":"scale(1)",zIndex:S?80:60},onWheel:z=>z.stopPropagation(),onScroll:z=>z.stopPropagation(),onMouseEnter:z=>z.stopPropagation(),children:[r.jsxs("div",{className:`flex items-center justify-between p-4 bg-gradient-to-r from-purple-500 to-blue-600 text-white select-none transition-all duration-200 ${S?"cursor-grabbing bg-gradient-to-r from-purple-600 to-blue-700":"cursor-grab hover:from-purple-550 hover:to-blue-650"}`,onMouseDown:C,onDragStart:z=>z.preventDefault(),style:{userSelect:"none",touchAction:"none"},children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:r.jsx(xn,{className:"w-5 h-5"})}),r.jsxs("div",{className:"select-none",style:{userSelect:"none"},children:[r.jsx("h3",{className:"font-semibold select-none",style:{userSelect:"none"},children:"AI Auto-Learning"}),r.jsx("p",{className:"text-xs opacity-90 select-none",style:{userSelect:"none"},children:t})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[i&&r.jsxs("div",{className:"flex items-center space-x-1 text-xs bg-white/20 px-2 py-1 rounded",children:[r.jsx(xn,{className:"w-3 h-3 animate-pulse"}),r.jsx("span",{children:"Learning..."})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>v(!w),className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:w?r.jsx(qr,{className:"h-4 w-4"}):r.jsx(qa,{className:"h-4 w-4"})}),r.jsx(F,{variant:"ghost",size:"sm",onClick:s,className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:r.jsx(kn,{className:"h-4 w-4"})})]})]}),!w&&r.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto hide-scrollbar",style:{height:"calc(100% - 80px)"},children:[r.jsx("div",{className:"border-2 border-purple-200 dark:border-purple-700 bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg p-4",children:a!=null&&a.expertise?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:"AI Expertise Level"}),r.jsx(Be,{className:`${M(a.expertiseLevel||0)} text-white text-xs`,children:U(a.expertiseLevel||0)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsxs("span",{children:["Domain: ",a.domain]}),r.jsxs("span",{children:[a.expertiseLevel,"/10"]})]}),r.jsx(Vu,{value:(a.expertiseLevel||0)*10,className:"h-2"}),r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Mastery: ",(a.expertiseLevel||0)*10,"%"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 text-center",children:[r.jsx(Pn,{className:"h-6 w-6 text-blue-500 mx-auto mb-1"}),r.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:a.totalConcepts}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Concepts"})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 text-center",children:[r.jsx(dg,{className:"h-6 w-6 text-green-500 mx-auto mb-1"}),r.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:a.fineTuningExamples}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Examples"})]})]}),a.concepts&&a.concepts.length>0&&r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[r.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100 text-sm",children:"Key Concepts"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.concepts.slice(0,6).map((z,P)=>r.jsx(Be,{variant:"secondary",className:"text-xs bg-secondary dark:bg-secondary/80 text-secondary-foreground dark:text-secondary-foreground",children:z},P)),a.concepts.length>6&&r.jsxs(Be,{variant:"outline",className:"text-xs border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:["+",a.concepts.length-6]})]})]}),a.concepts&&a.concepts.length>0&&r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 mt-2",children:[r.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100 text-sm",children:"Concepts Learned"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:a.concepts.map((z,P)=>r.jsx(Be,{variant:"secondary",className:"text-xs bg-secondary dark:bg-secondary/80 text-secondary-foreground dark:text-secondary-foreground",children:z},P))})]}),a.examples&&a.examples.length>0&&r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 mt-2",children:[r.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100 text-sm",children:"Example Questions"}),r.jsx("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-800 dark:text-gray-200",children:a.examples.map((z,P)=>r.jsx("li",{children:z},P))})]}),r.jsxs(F,{onClick:()=>x(!b),className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[r.jsx(To,{className:"h-4 w-4 mr-2"}),b?"Hide Expert Chat":"Chat with AI Expert"]})]}):r.jsxs("div",{className:"text-center py-4",children:[r.jsx(xn,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-3"}),r.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Ready to Learn"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 text-sm",children:"The AI hasn't specialized in this document yet. Click below to start the auto-learning process."}),r.jsx(F,{onClick:$,disabled:i,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2",children:i?r.jsxs(r.Fragment,{children:[r.jsx(Qt,{className:"h-4 w-4 mr-2 animate-spin"}),"Learning..."]}):r.jsxs(r.Fragment,{children:[r.jsx(xn,{className:"h-4 w-4 mr-2"}),"Start Auto-Learning"]})})]})}),b&&(a==null?void 0:a.expertise)&&r.jsxs("div",{className:"border-2 border-blue-200 dark:border-blue-700 bg-white dark:bg-slate-900 rounded-lg p-4",children:[r.jsxs("h4",{className:"flex items-center gap-2 text-gray-900 dark:text-gray-100 font-semibold mb-3",children:[r.jsx(To,{className:"h-4 w-4 text-blue-600"}),"Expert Chat - ",a.domain]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(it,{placeholder:"Ask an expert question...",value:c,onChange:z=>d(z.target.value),onKeyPress:z=>z.key==="Enter"&&K()}),r.jsx(F,{onClick:K,disabled:m||!c.trim(),className:"w-full",children:m?r.jsxs(r.Fragment,{children:[r.jsx(xn,{className:"h-4 w-4 mr-2 animate-pulse"}),"AI Expert is thinking..."]}):r.jsxs(r.Fragment,{children:[r.jsx(To,{className:"h-4 w-4 mr-2"}),"Ask Expert"]})}),f&&r.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[r.jsxs("h5",{className:"font-semibold mb-2 flex items-center gap-2 text-gray-900 dark:text-gray-100 text-sm",children:[r.jsx(xn,{className:"h-4 w-4 text-purple-600"}),"Expert Response:"]}),r.jsx(fs,{value:f,readOnly:!0,className:"min-h-[100px] bg-white dark:bg-slate-900 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 text-sm"})]})]})]}),i&&r.jsx("div",{className:"border-2 border-yellow-200 dark:border-yellow-700 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Qt,{className:"h-8 w-8 text-yellow-600 dark:text-yellow-400 mx-auto mb-3 animate-pulse"}),r.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"AI is Learning..."}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3 text-xs",children:"The AI is analyzing your document and building expertise."}),r.jsx(Vu,{value:33,className:"h-2"})]})})]})]}):null}const Kf="aiChapterNotesPanelPosition",fv="aiChapterNotesPanelMinimized";function C6({documentId:e,chapter:t,isVisible:n,onToggle:s}){const[a,o]=u.useState(new Set),[i,l]=u.useState(()=>typeof window<"u"?localStorage.getItem(fv)==="true":!1),c=Hr(),[d,f]=u.useState(()=>{if(typeof window<"u"){const K=localStorage.getItem(Kf);if(K)try{const C=JSON.parse(K);if(typeof C.x=="number"&&typeof C.y=="number")return C}catch{}}const R=window.innerWidth-420-16,$=window.innerHeight-600-16;return{x:Math.max(20,R),y:Math.max(96,$)}}),[h,m]=u.useState(!1),[g,b]=u.useState({x:0,y:0}),[x,w]=u.useState({x:0,y:0}),v=u.useRef(null),p=u.useRef(null);u.useEffect(()=>{if(n){const R=window.innerWidth-420-16,$=window.innerHeight-(i?64:600)-16;f({x:Math.max(20,R),y:Math.max(96,$)})}},[i]),u.useEffect(()=>{localStorage.setItem(Kf,JSON.stringify(d))},[d]),u.useEffect(()=>{localStorage.setItem(fv,i?"true":"false")},[i]);const{data:y=[]}=Sn({queryKey:["/api/annotations"]}),S=Ql({mutationFn:async R=>await rs(`/api/annotations/${R}`,{method:"DELETE"}),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/annotations"]})}}),j=y.filter(R=>(R.documentId===-1||R.documentId===-2)&&R.chapter===t),k=R=>{const $=new Set(a);$.has(R)?$.delete(R):$.add(R),o($)},N=(R,$)=>{window.confirm(`Are you sure you want to delete this ${$} note? This action cannot be undone.`)&&S.mutate(R)},E=R=>{i||(R.preventDefault(),R.stopPropagation(),m(!0),b({x:R.clientX,y:R.clientY}),w({x:R.clientX-d.x,y:R.clientY-d.y}),v.current&&(v.current.style.cursor="grabbing",v.current.style.transform="scale(1.02)",v.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},A=R=>{h&&(R.preventDefault(),R.stopPropagation(),p.current&&cancelAnimationFrame(p.current),p.current=requestAnimationFrame(()=>{const $=i?300:400,K=i?60:600,C=Math.max(10,Math.min(window.innerWidth-$-10,R.clientX-x.x)),D=Math.max(10,Math.min(window.innerHeight-K-10,R.clientY-x.y));f({x:C,y:D})}))},T=()=>{m(!1),p.current&&(cancelAnimationFrame(p.current),p.current=null),v.current&&(v.current.style.cursor="",v.current.style.transform="",v.current.style.boxShadow="");const R=window.getSelection();R&&R.removeAllRanges(),localStorage.setItem(Kf,JSON.stringify(d))};u.useEffect(()=>{if(h){document.addEventListener("mousemove",A,{passive:!1}),document.addEventListener("mouseup",T,{passive:!0});const R=$=>{if($.touches.length===1){const K=$.touches[0],C={preventDefault:()=>$.preventDefault(),stopPropagation:()=>$.stopPropagation(),clientX:K.clientX,clientY:K.clientY};A(C)}};return document.addEventListener("touchmove",R,{passive:!1}),document.addEventListener("touchend",T,{passive:!0}),document.body.style.overflow="hidden",()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",T),document.removeEventListener("touchmove",R),document.removeEventListener("touchend",T),document.body.style.overflow="",p.current&&(cancelAnimationFrame(p.current),p.current=null)}}},[h,x]);const I=R=>R===-1?{name:"AI Discussion",icon:ka,color:"from-pink-500 to-rose-600",bgColor:"bg-pink-50 dark:bg-pink-900/20",textColor:"text-pink-700 dark:text-pink-300"}:R===-2?{name:"AI Chat",icon:Nn,color:"from-blue-500 to-purple-600",bgColor:"bg-blue-50 dark:bg-blue-900/20",textColor:"text-blue-700 dark:text-blue-300"}:{name:"AI Note",icon:Vn,color:"from-purple-500 to-indigo-600",bgColor:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-700 dark:text-purple-300"};return n?r.jsxs("div",{ref:v,className:`fixed z-40 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden transition-all duration-300 ${h?"select-none cursor-grabbing":""}`,style:{left:d.x,top:d.y,width:i?"300px":"400px",height:i?"60px":"600px",maxWidth:"90vw",maxHeight:"90vh",overscrollBehavior:"contain",willChange:h?"transform":"auto",transition:h?"box-shadow 0.2s ease-out, transform 0.2s ease-out":"all 0.3s ease-out",transform:h?"scale(1.02)":"scale(1)",zIndex:h?80:60},onWheel:R=>R.stopPropagation(),onScroll:R=>R.stopPropagation(),onMouseEnter:R=>R.stopPropagation(),children:[r.jsxs("div",{className:`flex items-center justify-between p-4 bg-gradient-to-r from-purple-500 to-indigo-600 text-white select-none transition-all duration-200 ${h?"cursor-grabbing bg-gradient-to-r from-purple-600 to-indigo-700":"cursor-grab hover:from-purple-550 hover:to-indigo-650"}`,onMouseDown:E,onDragStart:R=>R.preventDefault(),style:{userSelect:"none",touchAction:"none"},children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:r.jsx(hS,{className:"w-5 h-5"})}),r.jsxs("div",{className:"select-none",style:{userSelect:"none"},children:[r.jsx("h3",{className:"font-semibold select-none",style:{userSelect:"none"},children:"AI Chapter Notes"}),r.jsxs("p",{className:"text-xs opacity-90 select-none",style:{userSelect:"none"},children:["Chapter ",t," • ",j.length," ",j.length===1?"note":"notes"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>l(!i),className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:i?r.jsx(qr,{className:"h-4 w-4"}):r.jsx(qa,{className:"h-4 w-4"})}),r.jsx(F,{variant:"ghost",size:"sm",onClick:s,className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:r.jsx(kn,{className:"h-4 w-4"})})]})]}),!i&&r.jsx("div",{className:"p-4 overflow-y-auto",style:{height:"calc(100% - 80px)"},children:r.jsx("div",{className:"space-y-4",children:j.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[r.jsx(ka,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),r.jsx("p",{className:"text-sm font-medium",children:"No AI notes for this chapter yet"}),r.jsx("p",{className:"text-xs mt-1",children:"Use the AI Discussion or AI Chat to create notes for this chapter"})]}):j.sort((R,$)=>new Date($.createdAt).getTime()-new Date(R.createdAt).getTime()).map(R=>{const $=I(R.documentId),K=$.icon,C=a.has(R.id);return r.jsxs("div",{className:`border border-slate-200 dark:border-slate-700 hover:shadow-md transition-all duration-200 ${$.bgColor} rounded-lg p-4`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-r ${$.color} flex items-center justify-center`,children:r.jsx(K,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsx("div",{className:`text-sm font-medium ${$.textColor}`,children:$.name}),r.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[r.jsx(Jl,{className:"w-3 h-3"}),(()=>{try{const D=new Date(R.createdAt);return isNaN(D.getTime())||R.createdAt==="CURRENT_TIMESTAMP"?"Recently created":D.toLocaleDateString()}catch{return"Recently created"}})()]})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>N(R.id,$.name),className:"h-7 w-7 p-0 bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/40 text-red-600 hover:text-red-700 border border-red-200 dark:border-red-800",title:`Delete ${$.name} note`,disabled:S.isPending,children:r.jsx(Vr,{className:"h-3 w-3"})}),r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>k(R.id),className:"h-7 w-7 p-0 hover:bg-slate-200 dark:hover:bg-slate-700",children:C?r.jsx(Nd,{className:"h-4 w-4"}):r.jsx(og,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[r.jsx(Vn,{className:"w-3 h-3 text-slate-400"}),r.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:R.documentId===-1?"AI Discussion Note":R.documentId===-2?"AI Chat Note":"AI Note"})]}),r.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:r.jsx("p",{className:"text-sm text-slate-800 dark:text-slate-200 leading-relaxed",children:C?R.note:`${R.note.substring(0,150)}${R.note.length>150?"...":""}`})})]}),R.selectedText&&R.selectedText.trim()&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[r.jsx(jO,{className:"w-3 h-3 text-slate-400"}),r.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"Selected Text"})]}),r.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-lg p-3 border-l-4 border-purple-400",children:r.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:C?R.selectedText:`${R.selectedText.substring(0,100)}${R.selectedText.length>100?"...":""}`})})]}),(R.note.length>150||R.selectedText&&R.selectedText.length>100)&&r.jsx("div",{className:"mt-2 text-center",children:r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>k(R.id),className:"text-xs text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:C?"Show less":"Show more"})})]},R.id)})})})]}):null}const Zf="aiDiscussionAgentPanelPosition",Wf="aiDiscussionAgentPanelMinimized";function E6({documentId:e,chapter:t,isOpen:n,onToggle:s}){const[a,o]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(!1),[f,h]=u.useState(()=>typeof window<"u"?localStorage.getItem(Wf)==="true":!1),[m,g]=u.useState(""),[b,x]=u.useState(!1),[w,v]=u.useState(!1),[p,y]=u.useState(0),[S,j]=u.useState(!1),[k,N]=u.useState({}),[E,A]=u.useState(null),[T,I]=u.useState(""),R=u.useRef(null),[$,K]=u.useState(()=>{if(typeof window<"u"){const te=localStorage.getItem(Zf);if(te)try{const ne=JSON.parse(te);if(typeof ne.x=="number"&&typeof ne.y=="number"){const ie=window.innerWidth-384-20,ze=window.innerHeight-600-20;return{x:Math.max(20,Math.min(ne.x,ie)),y:Math.max(20,Math.min(ne.y,ze))}}}catch{}}const O=Math.max(20,window.innerWidth-384-20),W=Math.max(20,window.innerHeight-600-20);return{x:O,y:W}}),[C,D]=u.useState(!1),[H,M]=u.useState({x:0,y:0}),[U,z]=u.useState({x:0,y:0}),P=u.useRef(null),V=u.useRef(null),Q=u.useRef(),{toast:_}=Ht(),{socket:se,isConnected:oe,sessionId:B}=Id(),{translate:J,currentLanguage:q}=bd(),Y=u.useCallback(()=>{R.current&&R.current.scrollIntoView({behavior:"smooth"})},[]);u.useEffect(()=>{var O;(O=R.current)==null||O.scrollIntoView({behavior:"smooth"})},[a]),u.useEffect(()=>{a.length>1&&B&&ee()},[a,B]),u.useEffect(()=>{B&&e&&de()&&console.log("💾 Loaded saved Discussion Agent conversation")},[B,e]),u.useEffect(()=>{if(Q.current===void 0){Q.current=t;return}if(Q.current!==t&&t!==void 0){(async()=>{let te=`Discussion context updated to Chapter ${t}.`;if(q!=="en")try{te=await J({text:te,targetLanguage:q,context:"ui"})}catch(ie){console.error("Failed to translate system message:",ie)}const ne={id:`msg-system-${Date.now()}`,role:"system",content:te,timestamp:new Date,agent:"Discussion Agent"};o(ie=>[...ie,ne])})();let W=`The Discussion Agent is now aware you are on chapter ${t}.`;q!=="en"?J({text:W,targetLanguage:q,context:"ui"}).then(te=>{_({title:"Discussion Context Updated",description:te,duration:3e3})}).catch(()=>{_({title:"Discussion Context Updated",description:W,duration:3e3})}):_({title:"Discussion Context Updated",description:W,duration:3e3}),Q.current=t}},[t,q,J,_]),u.useEffect(()=>{n&&a.length===0&&ye()},[n]),u.useEffect(()=>{if(!se)return;const O=async W=>{if(console.log("💬 [FRONTEND] Received discussionResponse:",W),W.error){d(!1),v(!1);let ne="Sorry, I encountered an error processing your request. Please try again.";if(q!=="en")try{ne=await J({text:ne,targetLanguage:q,context:"ui"})}catch(ze){console.error("Failed to translate error message:",ze)}const ie={id:`msg-error-${Date.now()}`,role:"assistant",content:ne,timestamp:new Date,agent:"Discussion Agent"};o(ze=>[...ze,ie]);return}d(!1),v(!1);const te={id:`msg-ai-${Date.now()}`,role:"assistant",content:W.message,timestamp:new Date,agent:"Discussion Agent"};o(ne=>[...ne,te]),setTimeout(Y,100)};return se.on("discussionResponse",O),()=>{se.off("discussionResponse",O)}},[se,q,J,Y]);const ae=()=>`discussion_${B}_${e||"no-doc"}_${t||"no-chapter"}`,ee=()=>{if(a.length!==0)try{j(!0);const O=ae(),W={messages:a,timestamp:new Date().toISOString(),documentId:e,chapter:t};localStorage.setItem(O,JSON.stringify(W)),console.log("💾 Saved discussion conversation"),setTimeout(()=>j(!1),500)}catch(O){console.error("Failed to save discussion conversation:",O),j(!1)}},de=()=>{var O;try{const W=ae(),te=localStorage.getItem(W);if(te){const ne=JSON.parse(te);return o(ne.messages||[]),console.log("💾 Loaded discussion conversation with",((O=ne.messages)==null?void 0:O.length)||0,"messages"),!0}}catch(W){console.error("Failed to load discussion conversation:",W)}return!1},Re=()=>{o([]);try{const O=ae();localStorage.removeItem(O),console.log("🗑️ Cleared discussion conversation"),_({title:"Chat Cleared",description:"Discussion conversation has been cleared.",duration:2e3})}catch(O){console.error("Failed to clear discussion conversation:",O)}},fe=()=>{if(a.length!==0)try{const O={title:"Discussion Conversation",timestamp:new Date().toISOString(),documentId:e,chapter:t,messages:a.map(ie=>({role:ie.role,content:ie.content,timestamp:ie.timestamp.toISOString(),agent:ie.agent}))},W=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),te=URL.createObjectURL(W),ne=document.createElement("a");ne.href=te,ne.download=`discussion-conversation-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),URL.revokeObjectURL(te),_({title:"Conversation Exported",description:"Discussion conversation has been exported successfully.",duration:3e3})}catch(O){console.error("Failed to export discussion conversation:",O),_({title:"Export Failed",description:"Failed to export discussion conversation.",variant:"destructive",duration:3e3})}},ye=()=>{const O={id:`msg-welcome-${Date.now()}`,role:"assistant",content:"Hello! I'm your discussion partner. I'm here to chat, help with discussions, and assist with note-taking. What would you like to talk about?",timestamp:new Date,agent:"Discussion Agent"};o([O])},Le=async()=>{if(!i.trim()||c)return;const O={id:`msg-user-${Date.now()}`,role:"user",content:i,timestamp:new Date,agent:"User"};o(te=>[...te,O]),l(""),d(!0),v(!0),y(0);const W=setInterval(()=>{y(te=>te>=90?(clearInterval(W),90):te+10)},100);try{if(se&&oe)se.emit("discussionMessage",{message:O.content,sessionId:B,userId:2,documentId:e,chapter:t,language:q,conversationHistory:a.map(te=>({role:te.role,content:te.content,timestamp:te.timestamp.toISOString(),agent:te.agent}))});else throw new Error("Not connected to AI system")}catch(te){console.error("Failed to send discussion message:",te),d(!1),v(!1);let ne="Sorry, I encountered an error. Please try again.";if(q!=="en")try{ne=await J({text:ne,targetLanguage:q,context:"ui"})}catch(ze){console.error("Failed to translate error message:",ze)}const ie={id:`msg-error-${Date.now()}`,role:"assistant",content:ne,timestamp:new Date,agent:"Discussion Agent"};o(ze=>[...ze,ie])}},He=O=>{g(O.content),x(!0)},Ge=()=>{x(!1),g("")},Ot=async(O,W,te)=>{try{const ne={messageId:O.id,feedback:W,reason:te||"",documentId:e||void 0,chapter:t||void 0,userId:2,agentId:"discussion",messageContent:O.content.substring(0,500)};await Cs.sendFeedback(ne),N(ze=>({...ze,[O.id]:W})),A(null),I(""),_({title:"Feedback Submitted",description:W==="positive"?"Thank you for your feedback!":"Thank you for your feedback. I'll work on improving.",duration:3e3})}catch(ne){console.error("Failed to submit feedback:",ne),_({title:"Feedback Error",description:"Failed to submit feedback. Please try again.",variant:"destructive",duration:3e3})}},ln=async(O,W)=>{W==="negative"?A(O):await Ot(O,W)},Qn=()=>{E&&Ot(E,"negative",T)},lt=O=>{var ie;const W=O.target;if(W.closest("[data-drag-handle]"),W.closest("button")!==null)return;D(!0);const ne=(ie=P.current)==null?void 0:ie.getBoundingClientRect();ne&&(M({x:O.clientX,y:O.clientY}),z({x:O.clientX-ne.left,y:O.clientY-ne.top})),O.preventDefault()},At=O=>{C&&(V.current&&cancelAnimationFrame(V.current),V.current=requestAnimationFrame(()=>{const W=O.clientX-U.x,te=O.clientY-U.y,ne=f?320:384,ie=f?48:600,ze=window.innerWidth-ne-20,X=window.innerHeight-ie-20;K({x:Math.max(20,Math.min(W,ze)),y:Math.max(20,Math.min(te,X))})}))},ge=()=>{C&&(D(!1),localStorage.setItem(Zf,JSON.stringify($)))};return u.useEffect(()=>{const O=ne=>{var ce;if(ne.target.closest("button")!==null)return;D(!0);const X=ne.touches[0],G=(ce=P.current)==null?void 0:ce.getBoundingClientRect();G&&(M({x:X.clientX,y:X.clientY}),z({x:X.clientX-G.left,y:X.clientY-G.top}))},W=ne=>{if(!C)return;ne.preventDefault();const ie=ne.touches[0],ze=ie.clientX-U.x,X=ie.clientY-U.y,G=f?320:384,ce=f?48:600,he=window.innerWidth-G-20,Ne=window.innerHeight-ce-20;K({x:Math.max(20,Math.min(ze,he)),y:Math.max(20,Math.min(X,Ne))})},te=()=>{C&&(D(!1),localStorage.setItem(Zf,JSON.stringify($)))};return document.addEventListener("touchstart",O,{passive:!1}),document.addEventListener("touchmove",W,{passive:!1}),document.addEventListener("touchend",te),()=>{document.removeEventListener("touchstart",O),document.removeEventListener("touchmove",W),document.removeEventListener("touchend",te)}},[C,U,$,f]),u.useEffect(()=>(document.addEventListener("mousemove",At),document.addEventListener("mouseup",ge),()=>{document.removeEventListener("mousemove",At),document.removeEventListener("mouseup",ge)}),[C,U]),u.useEffect(()=>{localStorage.setItem(Wf,f.toString())},[f]),u.useEffect(()=>{const O=()=>{const W=f?320:384,te=f?48:600,ne=window.innerWidth-W-20,ie=window.innerHeight-te-20;K(ze=>({x:Math.max(20,Math.min(ze.x,ne)),y:Math.max(20,Math.min(ze.y,ie))}))};return window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[f]),n?r.jsxs("div",{ref:P,className:"fixed z-50",style:{left:`${$.x}px`,top:`${$.y}px`,transform:"none"},children:[r.jsxs(Ae,{className:`w-96 transition-all duration-300 ${f?"h-16":"h-[600px]"} shadow-2xl border-2 border-blue-200/30 ${C?"select-none cursor-grabbing":""}`,style:{willChange:C?"transform":"auto",transition:C?"box-shadow 0.2s ease-out":"all 0.3s ease-out",zIndex:C?60:50},children:[r.jsx(Ue,{className:`pb-2 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 select-none transition-all duration-200 ${C?"cursor-grabbing bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-800/30 dark:to-purple-800/30":"cursor-grab hover:from-blue-100 hover:to-purple-100 dark:hover:from-blue-800/30 dark:hover:to-purple-800/30"}`,onMouseDown:lt,onDragStart:O=>O.preventDefault(),style:{userSelect:"none",touchAction:"none"},title:"Drag to move",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Ye,{className:"text-lg flex items-center gap-2",children:[r.jsx(To,{className:"h-5 w-5 text-blue-600"}),"AI Discussion",r.jsx(Be,{className:`text-xs ${oe?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:oe?"Online":"Offline"}),r.jsxs("div",{className:"flex gap-0.5 ml-2 opacity-50",children:[r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[S&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400 mr-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Saving..."]}),r.jsx(F,{onClick:()=>{h(!f),localStorage.setItem(Wf,(!f).toString())},className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:f?r.jsx(qr,{className:"h-4 w-4"}):r.jsx(qa,{className:"h-4 w-4"})}),r.jsx(F,{onClick:s,className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:r.jsx(kn,{className:"h-4 w-4"})})]})]})}),!f&&r.jsxs(Me,{className:"p-0 flex flex-col h-[520px]",children:[r.jsx(Ps,{className:"flex-1 p-4",children:r.jsxs("div",{className:"space-y-4",children:[a.length===0?r.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[r.jsx(To,{className:"h-12 w-12 mx-auto mb-4 text-blue-500/50"}),r.jsx("p",{className:"text-sm",children:"Welcome to your AI Discussion Partner!"}),r.jsx("p",{className:"text-xs mt-2",children:"Let's have a meaningful conversation about your reading."})]}):a.map((O,W)=>r.jsx("div",{className:`flex ${O.role==="user"?"justify-end":"justify-start"} group ${O.role==="user"?"message-slide-right animate-in":"message-slide-left animate-in"} ${W<5?`message-stagger-${Math.min(W+1,5)}`:""}`,children:r.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 transition-all duration-300 message-bubble-pop gpu-accelerated ${O.role==="user"?"bg-blue-500 text-white hover:scale-[1.02] shadow-lg hover:shadow-xl transform hover:-translate-y-1":O.role==="system"?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 hover:bg-blue-200 dark:hover:bg-blue-800 hover:scale-[1.01] insight-sparkle":"bg-muted hover:bg-muted/80 hover:scale-[1.01] shadow-md hover:shadow-lg transform hover:-translate-y-0.5"} ${O.role==="assistant"||O.role==="system"?"cursor-text":""}`,"data-message-id":O.id,"data-message-role":O.role,"data-agent":O.agent||"Discussion Agent",children:[O.agent&&r.jsxs("div",{className:"flex items-center justify-between gap-1 mb-1 text-xs opacity-70 message-header animate-in fade-in delay-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`relative agent-avatar ${O.role==="system"?"agent-thinking":"agent-active"} transition-all duration-300`,children:r.jsx(To,{className:"h-3 w-3"})}),r.jsx("span",{className:"font-medium",children:O.agent})]}),(O.role==="assistant"||O.role==="system")&&r.jsx(F,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-blue-500 hover:text-blue-700 opacity-0 group-hover:opacity-100 transition-all duration-300 hover:scale-110 btn-scale",onClick:()=>He(O),title:"Save as note",children:r.jsx(Vn,{className:"h-3 w-3 animate-in bounce-in delay-500"})})]}),r.jsx("p",{className:"text-sm select-text agent-message-content",children:O.content}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs opacity-70 mt-1 timestamp",children:O.timestamp.toLocaleTimeString()}),(O.role==="assistant"||O.role==="system")&&r.jsxs("div",{className:"flex items-center gap-1 mt-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[r.jsx(F,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 hover:text-green-500 disabled:opacity-100 ${k[O.id]==="positive"?"text-green-500":"text-muted-foreground"}`,onClick:()=>ln(O,"positive"),disabled:!!k[O.id],title:"Good response",children:r.jsx(ug,{className:"h-3 w-3"})}),r.jsx(F,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 hover:text-red-500 disabled:opacity-100 ${k[O.id]==="negative"?"text-red-500":"text-muted-foreground"}`,onClick:()=>ln(O,"negative"),disabled:!!k[O.id],title:"Needs improvement",children:r.jsx(cg,{className:"h-3 w-3"})})]})]})]})},O.id)),w&&r.jsx(Ud,{isTyping:w,agentType:"discussion",currentProgress:p,estimatedTime:3,customMessage:"Thinking about your message..."}),r.jsx("div",{ref:R})]})}),r.jsx(ds,{}),r.jsxs("div",{className:"p-4 space-y-2",children:[a.length>0&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx(F,{onClick:Re,variant:"outline",size:"sm",className:"flex-1 px-3 py-2 text-sm border border-red-300 dark:border-red-600 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400",children:"Clear Chat"}),r.jsx(F,{onClick:fe,variant:"outline",size:"sm",className:"flex-1 px-3 py-2 text-sm border border-blue-300 dark:border-blue-600 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-blue-600 dark:text-blue-400",children:"Export"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(it,{placeholder:B?"Start a discussion...":"Connecting...",value:i,onChange:O=>l(O.target.value),onKeyPress:O=>O.key==="Enter"&&Le(),disabled:!oe||!B,className:"flex-1"}),r.jsx(F,{onClick:Le,disabled:!oe||!B||!i.trim(),className:"px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white disabled:opacity-50",children:r.jsx(jd,{className:"h-4 w-4"})})]})]})]})]}),r.jsx(Ld,{isOpen:b,onClose:Ge,selectedText:m,documentId:e||0,documentTitle:"Discussion Note",chapter:t||0,paragraph:null}),r.jsx(Qr,{open:!!E,onOpenChange:O=>!O&&A(null),children:r.jsxs(Va,{children:[r.jsxs(Fa,{children:[r.jsx(Ya,{children:"Provide additional feedback"}),r.jsx(bi,{children:"Your feedback helps improve the discussion experience. Please provide a reason."})]}),r.jsx(fs,{value:T,onChange:O=>I(O.target.value),placeholder:"Describe what could be improved...",className:"mt-2"}),r.jsxs(Dd,{children:[r.jsx(F,{variant:"outline",onClick:()=>A(null),children:"Cancel"}),r.jsx(F,{onClick:Qn,children:"Submit Feedback"})]})]})})]}):null}const hv="powerSummariesPanelMinimized";function k6({documentId:e,currentChapter:t,currentChapterData:n,isVisible:s,onToggle:a}){if(!e)return null;const[o,i]=u.useState(null),[l,c]=u.useState(!1),[d,f]=u.useState(!1),[h,m]=u.useState(()=>{if(typeof window<"u"){const Q=localStorage.getItem("powerSummariesPanelPosition");if(Q)try{const _=JSON.parse(Q);if(typeof _.x=="number"&&typeof _.y=="number")return _}catch{}}const P=window.innerWidth-420-16,V=window.innerHeight-600-16;return{x:Math.max(20,P),y:Math.max(96,V)}});u.useEffect(()=>{localStorage.setItem("powerSummariesPanelPosition",JSON.stringify(h))},[h]);const[g,b]=u.useState(!1),[x,w]=u.useState({x:0,y:0}),[v,p]=u.useState({x:0,y:0}),[y,S]=u.useState(()=>typeof window<"u"?localStorage.getItem(hv)==="true":!1);Hr();const j=u.useRef(null),k=u.useRef(null),N=u.useRef(null),E=u.useRef(null),{data:A,isLoading:T,error:I,refetch:R}=Sn({queryKey:[`power-summaries-${e}`],queryFn:()=>rs(`/api/power-summaries/${e}`),enabled:s&&!!e}),$=(A==null?void 0:A.summaries)||[],K=$.find(P=>P.chapter===t),C=Ql({mutationFn:async()=>{if(!e)throw new Error("Document ID is required");let P,V;if(n)P=n.paragraphs.map(se=>se.text).join(" "),V=n.title;else{const se=await fetch(`/api/documents/${e}/chapter/${t}`);if(!se.ok)throw new Error("Failed to fetch chapter data");const oe=await se.json();P=oe.paragraphs.map(B=>B.text).join(" "),V=oe.title}const Q=await fetch("/api/ai-power-summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentId:e,chapter:t,text:P,title:V})});if(!Q.ok)throw new Error("Failed to generate power summary");return(await Q.json()).summary},onSuccess:()=>{R(),setTimeout(()=>{const P=$.find(V=>V.chapter===t);P&&i(P.id)},100)}});u.useEffect(()=>{if(s){const P=window.innerWidth-420-16,V=window.innerHeight-(y?64:Math.min(window.innerHeight-80,600))-16;m({x:Math.max(20,P),y:Math.max(96,V)})}},[y]),u.useEffect(()=>{localStorage.setItem(hv,y?"true":"false")},[y]);const D=P=>{y||(P.preventDefault(),P.stopPropagation(),b(!0),w({x:P.clientX,y:P.clientY}),p({x:P.clientX-h.x,y:P.clientY-h.y}),N.current&&(N.current.style.cursor="grabbing",N.current.style.transform="scale(1.02)",N.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},H=P=>{g&&(P.preventDefault(),P.stopPropagation(),E.current&&cancelAnimationFrame(E.current),E.current=requestAnimationFrame(()=>{const Q=y?64:Math.min(window.innerHeight-80,600),_=Math.max(10,Math.min(window.innerWidth-420-10,P.clientX-v.x)),se=Math.max(10,Math.min(window.innerHeight-Q-10,P.clientY-v.y));m({x:_,y:se})}))},M=()=>{b(!1),E.current&&(cancelAnimationFrame(E.current),E.current=null),N.current&&(N.current.style.cursor="",N.current.style.transform="",N.current.style.boxShadow="");const P=window.getSelection();P&&P.removeAllRanges(),localStorage.setItem("powerSummariesPanelPosition",JSON.stringify(h))};u.useEffect(()=>{if(g){document.addEventListener("mousemove",H,{passive:!1}),document.addEventListener("mouseup",M,{passive:!0});const P=V=>{if(V.touches.length===1){const Q=V.touches[0],_={preventDefault:()=>V.preventDefault(),stopPropagation:()=>V.stopPropagation(),clientX:Q.clientX,clientY:Q.clientY};H(_)}};return document.addEventListener("touchmove",P,{passive:!1}),document.addEventListener("touchend",M,{passive:!0}),document.body.style.overflow="hidden",()=>{document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",M),document.removeEventListener("touchmove",P),document.removeEventListener("touchend",M),document.body.style.overflow="",E.current&&(cancelAnimationFrame(E.current),E.current=null)}}},[g,v]);const U=P=>{const V=o===P;i(V?null:P),V||setTimeout(()=>{var Q;(Q=k.current)==null||Q.scrollIntoView({behavior:"smooth",block:"nearest"})},150)};u.useEffect(()=>{const P=j.current;if(!P)return;const V=()=>{const Q=P.scrollTop,_=P.scrollHeight,se=P.clientHeight;c(Q>100),f(Q+se<_-50)};return P.addEventListener("scroll",V),()=>P.removeEventListener("scroll",V)},[]);const z=()=>{var P;(P=j.current)==null||P.scrollTo({top:0,behavior:"smooth"})};return s?r.jsx(r.Fragment,{children:r.jsxs("div",{ref:N,className:`fixed bg-slate-900/95 backdrop-blur-xl border border-slate-700/50 rounded-2xl shadow-2xl z-20 overflow-hidden transition-all duration-300 ${g?"select-none cursor-grabbing":""}`,style:{left:h.x,top:h.y,width:y?"300px":"400px",height:y?"60px":`${Math.min(window.innerHeight-80,600)}px`,maxWidth:"90vw",maxHeight:"90vh",overscrollBehavior:"contain",willChange:g?"transform":"auto",transition:g?"box-shadow 0.2s ease-out, transform 0.2s ease-out":"all 0.3s ease-out",transform:g?"scale(1.02)":"scale(1)",zIndex:g?80:60},onWheel:P=>P.stopPropagation(),onScroll:P=>P.stopPropagation(),onMouseEnter:P=>P.stopPropagation(),children:[r.jsxs("div",{className:`flex items-center justify-between p-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white select-none transition-all duration-200 ${g?"cursor-grabbing bg-gradient-to-r from-purple-600 to-pink-600":"cursor-grab hover:from-purple-550 hover:to-pink-550"}`,onMouseDown:D,onDragStart:P=>P.preventDefault(),style:{userSelect:"none",touchAction:"none"},children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:r.jsx(Qt,{className:"h-4 w-4"})}),r.jsxs("div",{className:"select-none",style:{userSelect:"none"},children:[r.jsx("h3",{className:"font-semibold select-none",style:{userSelect:"none"},children:"Power Summaries"}),!y&&r.jsxs("div",{className:"flex items-center gap-2 text-white/80 text-sm",children:[r.jsx(K_,{className:"h-3 w-3"}),r.jsxs("span",{children:[$.length," ",$.length===1?"summary":"summaries"]}),!K&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"•"}),r.jsxs("div",{className:"flex items-center gap-1 text-white/60 text-xs",children:[r.jsx(hS,{className:"h-3 w-3"}),r.jsxs("span",{children:["Ch. ",t," ready to summarize"]})]})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[!y&&!K&&!C.isPending&&r.jsx(F,{onClick:()=>C.mutate(),variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 p-2 h-8 w-8 group",title:`Generate summary for Chapter ${t}`,children:r.jsx(Aa,{className:"h-4 w-4 group-hover:rotate-90 transition-transform duration-200"})}),!y&&C.isPending&&r.jsxs("div",{className:"flex items-center gap-2 text-white/80 text-sm",children:[r.jsx(El,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{className:"text-xs",children:"Generating..."})]}),r.jsx(F,{variant:"ghost",size:"sm",onClick:()=>S(!y),className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:y?r.jsx(qr,{className:"h-4 w-4"}):r.jsx(qa,{className:"h-4 w-4"})}),r.jsx(F,{variant:"ghost",size:"sm",onClick:a,className:"h-8 w-8 p-0 hover:bg-white/20 text-white",title:"Close Power Summaries",children:r.jsx(kn,{className:"h-4 w-4"})})]})]}),!y&&r.jsxs("div",{className:"flex-1 relative",style:{height:"calc(100% - 80px)"},children:[r.jsxs("div",{ref:j,className:"h-full overflow-y-auto p-4 scrollbar-thin",style:{scrollBehavior:"smooth"},children:[C.isError&&r.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:r.jsx("p",{className:"text-red-400 text-sm",children:"Failed to generate summary. Please try again."})}),T?r.jsx("div",{className:"space-y-4",children:[...Array(3)].map((P,V)=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-slate-700 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-slate-700 rounded w-1/2"})]},V))}):I?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Qt,{className:"h-12 w-12 text-slate-600 mx-auto mb-3"}),r.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Failed to load summaries"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Please try again later"})]}):$.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsxs("div",{className:"relative mb-6",children:[r.jsx(Qt,{className:"h-12 w-12 text-slate-600 mx-auto mb-3"}),!K&&r.jsx(F,{onClick:()=>C.mutate(),disabled:C.isPending,className:"absolute -top-2 -right-2 h-6 w-6 p-0 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white border-0 shadow-lg",title:"Generate your first power summary",children:r.jsx(Aa,{className:"h-3 w-3"})})]}),r.jsx("p",{className:"text-sm font-medium text-slate-400",children:"No power summaries yet"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Click the + icon to generate your first power summary"})]}):r.jsxs("div",{className:"space-y-3",children:[K&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Pn,{className:"h-4 w-4 text-blue-400"}),r.jsx("span",{className:"text-sm font-medium text-blue-400",children:"Current Chapter"})]}),r.jsx(Rm,{ref:o===K.id?k:void 0,summary:K,isExpanded:o===K.id,onToggle:()=>U(K.id),isCurrentChapter:!0})]}),!K&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Pn,{className:"h-4 w-4 text-blue-400"}),r.jsx("span",{className:"text-sm font-medium text-blue-400",children:"Current Chapter"})]}),r.jsx("div",{className:"rounded-xl border border-dashed border-slate-600/50 bg-slate-800/30 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-lg flex items-center justify-center text-xs font-bold text-white",children:t}),r.jsxs("div",{children:[r.jsxs("h5",{className:"font-medium text-white text-sm",children:["Chapter ",t]}),r.jsx("p",{className:"text-xs text-slate-400",children:"No summary yet"})]})]}),r.jsx(F,{onClick:()=>C.mutate(),disabled:C.isPending,size:"sm",className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white border-0",children:C.isPending?r.jsx(El,{className:"h-3 w-3 animate-spin"}):r.jsx(Aa,{className:"h-3 w-3"})})]})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-3",children:"All Summaries"}),$.filter(P=>P.chapter!==t).map(P=>r.jsx(Rm,{ref:o===P.id?k:void 0,summary:P,isExpanded:o===P.id,onToggle:()=>U(P.id),isCurrentChapter:!1},P.id))]})]})]}),d&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-slate-900/95 to-transparent pointer-events-none"})]}),!y&&l&&r.jsx("button",{onClick:z,className:"absolute right-4 bottom-4 w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center z-10 group",title:"Scroll to top",children:r.jsx(oS,{className:"h-3 w-3 group-hover:animate-bounce"})})]})}):r.jsx("div",{className:"fixed bottom-56 right-6 z-10",children:r.jsxs(F,{onClick:a,className:"h-14 w-14 rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white border-0 relative",title:"Open Power Summaries",children:[r.jsx(Qt,{className:"h-6 w-6"}),$.length>0&&r.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-white/20 rounded-full flex items-center justify-center border-2 border-white/50",children:r.jsx("span",{className:"text-xs font-bold text-white",children:$.length})})]})})}const Rm=js.forwardRef(({summary:e,isExpanded:t,onToggle:n,isCurrentChapter:s},a)=>{const{toast:o}=Ht(),i=Hr(),[l,c]=u.useState(!1),d=async()=>{if(window.confirm("Delete this power summary?")){c(!0);try{if(!(await fetch(`/api/power-summaries/${e.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete");o({title:"Power summary deleted",variant:"default"}),i.invalidateQueries()}catch{o({title:"Failed to delete power summary",variant:"destructive"})}finally{c(!1)}}},f=h=>{try{const m=new Date(h);return isNaN(m.getTime())||h==="CURRENT_TIMESTAMP"?"Recently created":m.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Recently created"}};return r.jsxs("div",{ref:a,className:`rounded-xl border transition-all duration-300 ${s?"border-blue-500/50 bg-gradient-to-r from-blue-500/10 to-purple-500/10":"border-slate-700/50 bg-slate-800/50 hover:border-slate-600/50"}`,children:[r.jsxs("button",{onClick:n,className:"w-full p-4 text-left flex items-center justify-between hover:bg-slate-700/30 transition-colors rounded-xl",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("div",{className:`w-6 h-6 rounded-lg flex items-center justify-center text-xs font-bold ${s?"bg-blue-500 text-white":"bg-purple-500 text-white"}`,children:e.chapter}),r.jsx("h5",{className:"font-medium text-white text-sm truncate",children:e.chapterTitle})]}),r.jsx("p",{className:"text-xs text-slate-400 line-clamp-2",children:e.powerSummary}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx(Wl,{className:"h-3 w-3 text-slate-500"}),r.jsx("span",{className:"text-xs text-slate-500",children:f(e.createdAt)})]})]}),r.jsx("div",{className:"ml-3 flex-shrink-0",children:t?r.jsx(Nd,{className:"h-4 w-4 text-slate-400"}):r.jsx(og,{className:"h-4 w-4 text-slate-400"})})]}),t&&r.jsxs("div",{className:"px-4 pb-4 space-y-4 border-t border-slate-700/50 mt-2 pt-4",children:[r.jsx("div",{className:"flex justify-end mb-2",children:r.jsx(F,{variant:"ghost",size:"icon",className:"text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-full",onClick:d,disabled:l,title:"Delete power summary",children:r.jsx(Vr,{className:"h-5 w-5"})})}),r.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 to-cyan-500/10 rounded-lg p-3 border border-blue-500/20",children:[r.jsxs("h6",{className:"flex items-center gap-2 text-sm font-medium text-blue-300 mb-3",children:[r.jsx(Qt,{className:"h-4 w-4"}),"Power Summary"]}),r.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700/30",children:r.jsx("p",{className:"text-sm text-slate-200 leading-relaxed font-medium",children:e.powerSummary})})]})]})]})});Rm.displayName="PowerSummaryCard";var Bd="Tabs",[A6,kz]=on(Bd,[kd]),Nj=kd(),[T6,Rg]=A6(Bd),jj=u.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,f=yi(l),[h,m]=za({prop:s,onChange:a,defaultProp:o??"",caller:Bd});return r.jsx(T6,{scope:n,baseId:Bn(),value:h,onValueChange:m,orientation:i,dir:f,activationMode:c,children:r.jsx(xe.div,{dir:f,"data-orientation":i,...d,ref:t})})});jj.displayName=Bd;var Cj="TabsList",Ej=u.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...a}=e,o=Rg(Cj,n),i=Nj(n);return r.jsx(jS,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:r.jsx(xe.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});Ej.displayName=Cj;var kj="TabsTrigger",Aj=u.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...o}=e,i=Rg(kj,n),l=Nj(n),c=Mj(i.baseId,s),d=_j(i.baseId,s),f=s===i.value;return r.jsx(CS,{asChild:!0,...l,focusable:!a,active:f,children:r.jsx(xe.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...o,ref:t,onMouseDown:re(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?i.onValueChange(s):h.preventDefault()}),onKeyDown:re(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(s)}),onFocus:re(e.onFocus,()=>{const h=i.activationMode!=="manual";!f&&!a&&h&&i.onValueChange(s)})})})});Aj.displayName=kj;var Tj="TabsContent",Rj=u.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:a,children:o,...i}=e,l=Rg(Tj,n),c=Mj(l.baseId,s),d=_j(l.baseId,s),f=s===l.value,h=u.useRef(f);return u.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),r.jsx(_t,{present:a||f,children:({present:m})=>r.jsx(xe.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&o})})});Rj.displayName=Tj;function Mj(e,t){return`${e}-trigger-${t}`}function _j(e,t){return`${e}-content-${t}`}var R6=jj,Oj=Ej,Dj=Aj,Lj=Rj;const zj=R6,Mg=u.forwardRef(({className:e,...t},n)=>r.jsx(Oj,{ref:n,className:be("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Mg.displayName=Oj.displayName;const vr=u.forwardRef(({className:e,...t},n)=>r.jsx(Dj,{ref:n,className:be("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));vr.displayName=Dj.displayName;const yr=u.forwardRef(({className:e,...t},n)=>r.jsx(Lj,{ref:n,className:be("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));yr.displayName=Lj.displayName;const mv="aiQuizAgentPanelPosition",pv="aiQuizAgentPanelMinimized",M6=({quiz:e})=>{var m;const[t,n]=u.useState(0),[s,a]=u.useState({}),[o,i]=u.useState(!1),l=e.questions[t],c=g=>{a(b=>({...b,[t]:g}))},d=()=>{t<e.questions.length-1?n(g=>g+1):i(!0)},f=()=>{t>0&&n(g=>g-1)},h=()=>e.questions.reduce((g,b,x)=>s[x]===b.correctAnswer?g+1:g,0);return o?r.jsxs("div",{className:"p-4",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Quiz Results"}),r.jsxs("p",{className:"text-lg mb-4",children:["You scored ",h()," out of ",e.questions.length]}),r.jsx(F,{onClick:()=>{i(!1),n(0),a({})},children:"Retake Quiz"}),r.jsx("div",{className:"mt-6 space-y-4",children:e.questions.map((g,b)=>r.jsxs("div",{className:`p-3 rounded-lg ${s[b]===g.correctAnswer?"bg-green-100 dark:bg-green-900/50":"bg-red-100 dark:bg-red-900/50"}`,children:[r.jsxs("p",{className:"font-semibold",children:[b+1,". ",g.question]}),r.jsxs("p",{children:["Your answer: ",s[b]||"Not answered"]}),r.jsxs("p",{children:["Correct answer: ",g.correctAnswer]}),r.jsx("p",{className:"text-sm mt-2",children:r.jsx("em",{children:g.explanation})})]},g.id))})]}):l?r.jsxs("div",{className:"p-4 flex flex-col h-full",children:[r.jsxs("div",{className:"mb-4",children:[r.jsxs("p",{className:"text-sm text-zinc-500",children:["Question ",t+1," of ",e.questions.length]}),r.jsx("h2",{className:"text-lg font-semibold mt-1",children:l.question})]}),r.jsx("div",{className:"flex-1 space-y-3",children:(m=l.options)==null?void 0:m.map((g,b)=>r.jsxs("div",{onClick:()=>c(g),className:`flex items-center p-3 rounded-lg cursor-pointer transition-colors border-2 ${s[t]===g?"bg-blue-100 dark:bg-blue-900/50 border-blue-500":"bg-zinc-100 dark:bg-zinc-800 border-transparent hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:[r.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex-shrink-0 ${s[t]===g?"bg-blue-500 border-blue-500":"border-zinc-400"}`}),r.jsx("span",{children:g})]},b))}),r.jsxs("div",{className:"flex justify-between items-center mt-4",children:[r.jsx(F,{onClick:f,disabled:t===0,children:"Previous"}),r.jsx(F,{onClick:d,children:t===e.questions.length-1?"Finish":"Next"})]})]}):r.jsx("div",{children:"Loading question..."})},_6=({history:e,onTakeAgain:t})=>r.jsxs("div",{className:"space-y-4 h-full",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Quiz History"}),e.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-500",children:[r.jsx(Jl,{size:48}),r.jsx("p",{className:"mt-4 text-center",children:"No quiz history yet."}),r.jsx("p",{className:"text-sm text-center mt-2",children:"Complete some quizzes to see them here!"})]}):r.jsx(Ps,{className:"flex-1",children:r.jsx("div",{className:"space-y-3",children:e.map(n=>r.jsx(Ae,{className:"p-4",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold",children:n.title}),r.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:n.description}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsxs(Be,{variant:"outline",className:"text-xs",children:[n.questions.length," questions"]}),r.jsx(Be,{variant:"outline",className:"text-xs",children:n.difficulty}),r.jsxs(Be,{variant:"outline",className:"text-xs",children:[n.estimatedTime," min"]})]})]}),r.jsx(F,{size:"sm",onClick:()=>t(n),children:"Take Again"})]})},n.id))})})]});function O6({documentId:e,chapter:t,isOpen:n,onToggle:s}){const[a,o]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(()=>typeof window<"u"?localStorage.getItem(pv)==="true":!1),[f,h]=u.useState("chat"),[m,g]=u.useState(!1),[b,x]=u.useState(null),[w,v]=u.useState([]),p=u.useRef(null),[y,S]=u.useState(()=>{if(typeof window<"u"){const q=localStorage.getItem(mv);if(q)try{const Re=JSON.parse(q);if(typeof Re.x=="number"&&typeof Re.y=="number")return Re}catch{}const Y=Math.min(window.innerWidth*.8,1200),ae=window.innerHeight*.8,ee=(window.innerWidth-Y)/2,de=(window.innerHeight-ae)/2;return{x:ee,y:de}}return{x:100,y:100}}),[j,k]=u.useState(!1),[N,E]=u.useState({x:0,y:0}),[A,T]=u.useState({x:0,y:0}),I=u.useRef(null),R=u.useRef(null),$=u.useRef(),{toast:K}=Ht(),{socket:C,isConnected:D,agentStatuses:H,sendQuizRequest:M}=Id();u.useEffect(()=>{var q;(q=p.current)==null||q.scrollIntoView({behavior:"smooth"})},[a]),u.useEffect(()=>{if(!C)return;const q=Y=>{g(!1),o(ae=>{const ee=ae.filter(de=>!(de.role==="assistant"&&(de.content==="Processing your request..."||de.content.startsWith("Sorry, I encountered an error")||de.content.startsWith("I apologize, but the quiz generation is taking longer"))));if(Y.success&&Y.quiz){x(Y.quiz),h("quiz");const de={id:`msg-success-${Date.now()}`,role:"assistant",content:`✅ Quiz generated successfully!

**${Y.quiz.title}**
${Y.quiz.description}

📊 **Quiz Details:**
• ${Y.quiz.questions.length} questions
• ${Y.quiz.difficulty} difficulty
• Estimated time: ${Y.quiz.estimatedTime} minutes
• Tags: ${Y.quiz.tags.join(", ")}

Click on the "Quiz" tab to take the quiz!`,timestamp:new Date,quiz:Y.quiz};return[...ee,de]}else{const de=ee.filter(fe=>!(fe.role==="assistant"&&fe.content.startsWith("Sorry, I encountered an error"))),Re={id:`msg-error-${Date.now()}`,role:"assistant",content:Y.message||"Sorry, I encountered an error generating your quiz. Please try again with a different request.",timestamp:new Date};return[...de,Re]}})};return C.on("quizGenerated",q),()=>{C.off("quizGenerated",q)}},[C]),u.useEffect(()=>{if(n&&a.length===0){const q={id:`msg-welcome-${Date.now()}`,role:"assistant",content:`🎯 Welcome to the Quiz Agent! I can help you create personalized quizzes about the content you're reading.

**What I can do:**
• Generate quizzes from any chapter or document
• Create different question types (multiple choice, true/false, etc.)
• Adapt difficulty to your level
• Provide detailed explanations for answers
• Focus on the specific book's unique content and themes

**Try asking:**
• "Create a 10-question quiz about this chapter"
• "Make an easy quiz with multiple choice questions"
• "Generate a hard quiz with short answer questions"
• "Quiz me on the main characters and themes"

What kind of quiz would you like to create about this content?`,timestamp:new Date};o([q])}},[n,a.length]),u.useEffect(()=>{if($.current!==t&&t!==void 0){const q={id:`msg-system-${Date.now()}`,role:"system",content:`Context updated to Chapter ${t}. I can now create quizzes about this specific chapter.`,timestamp:new Date};o(Y=>[...Y,q]),K({title:"Context Updated",description:`The Quiz Agent is now aware you are on chapter ${t}.`,duration:3e3}),$.current=t}},[t,K]);const U=(q,Y,ae)=>{const ee={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:q,content:Y,timestamp:new Date,quiz:ae};o(de=>[...de,ee])},z=async()=>{if(!i.trim()||!D)return;const q=i.trim();l(""),U("user",q),U("assistant","Processing your request..."),g(!0);try{await M(q,{documentId:e,chapter:t,userId:2}),setTimeout(()=>{m&&(g(!1),U("assistant","I apologize, but the quiz generation is taking longer than expected. Please try again."))},6e4)}catch(Y){g(!1),U("assistant","Sorry, I encountered an error. Please try again."),console.error("Quiz message error:",Y)}},P=q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),z())},V=q=>{if(q.preventDefault(),k(!0),I.current){const Y=I.current.getBoundingClientRect();E({x:q.clientX,y:q.clientY}),T({x:q.clientX-Y.left,y:q.clientY-Y.top})}},Q=q=>{if(!j||!I.current)return;const Y=()=>{const ae=q.clientX-A.x,ee=q.clientY-A.y;S({x:ae,y:ee})};R.current&&cancelAnimationFrame(R.current),R.current=requestAnimationFrame(Y)},_=()=>{j&&(k(!1),localStorage.setItem(mv,JSON.stringify(y)))},se=q=>{if(!j||!I.current)return;const Y=()=>{const ae=q.touches[0],ee=ae.clientX-A.x,de=ae.clientY-A.y;S({x:ee,y:de})};R.current&&cancelAnimationFrame(R.current),R.current=requestAnimationFrame(Y)};u.useEffect(()=>(j?(window.addEventListener("mousemove",Q),window.addEventListener("mouseup",_),window.addEventListener("touchmove",se),window.addEventListener("touchend",_),document.body.style.userSelect="none"):(window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",_),window.removeEventListener("touchmove",se),window.removeEventListener("touchend",_),document.body.style.userSelect="auto"),()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",_),window.removeEventListener("touchmove",se),window.removeEventListener("touchend",_),R.current&&cancelAnimationFrame(R.current)}),[j]);const oe=()=>{d(!c),localStorage.setItem(pv,String(!c))},B=q=>q.split(/(\n|\*\*.*?\*\*|`.*?`)/g).filter(Boolean).map((ae,ee)=>ae===`
`?r.jsx("br",{},ee):ae.startsWith("**")&&ae.endsWith("**")?r.jsx("strong",{children:ae.slice(2,-2)},ee):ae.startsWith("`")&&ae.endsWith("`")?r.jsx("code",{className:"bg-zinc-200 dark:bg-zinc-700 rounded-sm px-1 font-mono text-xs",children:ae.slice(1,-1)},ee):r.jsx("span",{className:"break-words",children:ae},ee)),J=H.find(q=>q.name==="QuizAgent");return n?r.jsx("div",{ref:I,className:`fixed ${c?"bottom-4 right-4":""} z-50 flex items-center justify-center`,style:{left:c?"auto":`${y.x}px`,top:c?"auto":`${y.y}px`,touchAction:"none"},children:r.jsxs(Ae,{className:`bg-white/80 dark:bg-zinc-900/80 backdrop-blur-lg shadow-2xl rounded-xl border border-zinc-200 dark:border-zinc-800 transition-all duration-300 ease-in-out ${c?"w-80 h-12":"w-[80vw] max-w-[1200px] h-[80vh] flex flex-col"}`,children:[r.jsxs(Ue,{className:`flex flex-row items-center justify-between p-2 pl-4 bg-zinc-100/80 dark:bg-zinc-800/80 rounded-t-xl ${j?"cursor-grabbing":"cursor-grab"}`,onMouseDown:V,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Nn,{size:18,className:"text-zinc-600 dark:text-zinc-300"}),r.jsx(Ye,{className:"text-base font-semibold text-zinc-800 dark:text-zinc-100",children:"AI Quiz Agent"}),J&&r.jsx(Be,{variant:J.isRunning?"default":"secondary",children:J.isRunning?"Active":"Idle"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(F,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:oe,children:r.jsx(qa,{size:16})}),r.jsx(F,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:s,children:r.jsx(kn,{size:16})})]})]}),!c&&r.jsx(Me,{className:"p-0 flex-1 flex flex-col overflow-hidden",children:r.jsxs(zj,{value:f,onValueChange:q=>h(q),className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs(Mg,{className:"grid w-full grid-cols-3 rounded-none bg-zinc-100/80 dark:bg-zinc-800/80 flex-shrink-0",children:[r.jsx(vr,{value:"chat",children:"Chat"}),r.jsx(vr,{value:"quiz",disabled:!b,children:"Quiz"}),r.jsx(vr,{value:"history",children:"History"})]}),r.jsxs(yr,{value:"chat",className:"flex-1 flex flex-col overflow-hidden h-full",children:[r.jsx("div",{className:"flex-1 overflow-hidden",style:{minHeight:"300px"},children:r.jsx(Ps,{className:"h-full w-full",children:r.jsxs("div",{className:"space-y-4 p-4 pb-2 min-h-full",children:[a.map((q,Y)=>r.jsxs("div",{className:`flex items-start gap-3 ${q.role==="user"?"justify-end":""}`,children:[q.role==="assistant"&&r.jsx(Nn,{size:24,className:"text-zinc-500 flex-shrink-0"}),q.role==="system"&&r.jsx(__,{size:24,className:"text-blue-500 flex-shrink-0"}),r.jsxs("div",{className:`
                            p-3 rounded-lg max-w-lg break-words overflow-hidden
                            ${q.role==="user"?"bg-blue-500 text-white":"bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200"}
                            ${q.role==="system"?"bg-blue-100 dark:bg-blue-900/50 border border-blue-300 dark:border-blue-700 w-full max-w-none":""}
                          `,children:[r.jsx("div",{className:"text-sm overflow-hidden",children:B(q.content)}),r.jsx("p",{className:"text-xs text-right mt-2 opacity-60",children:new Date(q.timestamp).toLocaleTimeString()})]}),q.role==="user"&&r.jsx("div",{className:"w-6 h-6 rounded-full bg-zinc-300 flex items-center justify-center text-zinc-600 flex-shrink-0",children:"U"})]},q.id)),m&&r.jsx(Ud,{isTyping:m}),r.jsx("div",{ref:p})]})})}),r.jsx("div",{className:"flex-shrink-0 border-t border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 p-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(fs,{value:i,onChange:q=>l(q.target.value),onKeyPress:P,placeholder:"Ask a question or request a quiz...",className:"w-full pr-20 resize-none",rows:2}),r.jsx(F,{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:z,disabled:!i.trim()||!D||m,children:r.jsx(jd,{size:18})})]})})]}),r.jsx(yr,{value:"quiz",className:"flex-1 overflow-hidden p-4",children:b?r.jsx("div",{className:"h-full overflow-auto",children:r.jsx(M6,{quiz:b})}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-500",children:[r.jsx(Qt,{size:48}),r.jsx("p",{className:"mt-4",children:"No quiz active."}),r.jsx("p",{className:"text-sm text-center mt-2",children:"Generate a quiz from the chat tab to start."})]})}),r.jsx(yr,{value:"history",className:"flex-1 overflow-hidden p-4",children:r.jsx("div",{className:"h-full overflow-auto",children:r.jsx(_6,{history:w,onTakeAgain:q=>{x(q),h("quiz")}})})})]})})]})}):null}function Pj(e){const t=u.useRef({value:e,previous:e});return u.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Ij=["PageUp","PageDown"],Uj=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Bj={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},wi="Slider",[Mm,D6,L6]=Cd(wi),[$j,Az]=on(wi,[L6]),[z6,$d]=$j(wi),Hj=u.forwardRef((e,t)=>{const{name:n,min:s=0,max:a=100,step:o=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:f,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:b,...x}=e,w=u.useRef(new Set),v=u.useRef(0),y=i==="horizontal"?P6:I6,[S=[],j]=za({prop:f,defaultProp:d,onChange:I=>{var $;($=[...w.current][v.current])==null||$.focus(),h(I)}}),k=u.useRef(S);function N(I){const R=q6(S,I);T(I,R)}function E(I){T(I,v.current)}function A(){const I=k.current[v.current];S[v.current]!==I&&m(S)}function T(I,R,{commit:$}={commit:!1}){const K=G6(o),C=Q6(Math.round((I-s)/o)*o+s,K),D=Rl(C,[s,a]);j((H=[])=>{const M=$6(H,D,R);if(Y6(M,c*o)){v.current=M.indexOf(D);const U=String(M)!==String(H);return U&&$&&m(M),U?M:H}else return H})}return r.jsx(z6,{scope:e.__scopeSlider,name:n,disabled:l,min:s,max:a,valueIndexToChangeRef:v,thumbs:w.current,values:S,orientation:i,form:b,children:r.jsx(Mm.Provider,{scope:e.__scopeSlider,children:r.jsx(Mm.Slot,{scope:e.__scopeSlider,children:r.jsx(y,{"aria-disabled":l,"data-disabled":l?"":void 0,...x,ref:t,onPointerDown:re(x.onPointerDown,()=>{l||(k.current=S)}),min:s,max:a,inverted:g,onSlideStart:l?void 0:N,onSlideMove:l?void 0:E,onSlideEnd:l?void 0:A,onHomeKeyDown:()=>!l&&T(s,0,{commit:!0}),onEndKeyDown:()=>!l&&T(a,S.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:R})=>{if(!l){const C=Ij.includes(I.key)||I.shiftKey&&Uj.includes(I.key)?10:1,D=v.current,H=S[D],M=o*C*R;T(H+M,D,{commit:!0})}}})})})})});Hj.displayName=wi;var[qj,Vj]=$j(wi,{startEdge:"left",endEdge:"right",size:"width",direction:1}),P6=u.forwardRef((e,t)=>{const{min:n,max:s,dir:a,inverted:o,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...f}=e,[h,m]=u.useState(null),g=we(t,y=>m(y)),b=u.useRef(void 0),x=yi(a),w=x==="ltr",v=w&&!o||!w&&o;function p(y){const S=b.current||h.getBoundingClientRect(),j=[0,S.width],N=_g(j,v?[n,s]:[s,n]);return b.current=S,N(y-S.left)}return r.jsx(qj,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:r.jsx(Fj,{dir:x,"data-orientation":"horizontal",...f,ref:g,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:y=>{const S=p(y.clientX);i==null||i(S)},onSlideMove:y=>{const S=p(y.clientX);l==null||l(S)},onSlideEnd:()=>{b.current=void 0,c==null||c()},onStepKeyDown:y=>{const j=Bj[v?"from-left":"from-right"].includes(y.key);d==null||d({event:y,direction:j?-1:1})}})})}),I6=u.forwardRef((e,t)=>{const{min:n,max:s,inverted:a,onSlideStart:o,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c,...d}=e,f=u.useRef(null),h=we(t,f),m=u.useRef(void 0),g=!a;function b(x){const w=m.current||f.current.getBoundingClientRect(),v=[0,w.height],y=_g(v,g?[s,n]:[n,s]);return m.current=w,y(x-w.top)}return r.jsx(qj,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:r.jsx(Fj,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const w=b(x.clientY);o==null||o(w)},onSlideMove:x=>{const w=b(x.clientY);i==null||i(w)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:x=>{const v=Bj[g?"from-bottom":"from-top"].includes(x.key);c==null||c({event:x,direction:v?-1:1})}})})}),Fj=u.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c,...d}=e,f=$d(wi,n);return r.jsx(xe.span,{...d,ref:t,onKeyDown:re(e.onKeyDown,h=>{h.key==="Home"?(i(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):Ij.concat(Uj).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:re(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(m)?m.focus():s(h)}),onPointerMove:re(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:re(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),o(h))})})}),Yj="SliderTrack",Gj=u.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=$d(Yj,n);return r.jsx(xe.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});Gj.displayName=Yj;var _m="SliderRange",Qj=u.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=$d(_m,n),o=Vj(_m,n),i=u.useRef(null),l=we(t,i),c=a.values.length,d=a.values.map(m=>Zj(m,a.min,a.max)),f=c>1?Math.min(...d):0,h=100-Math.max(...d);return r.jsx(xe.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:l,style:{...e.style,[o.startEdge]:f+"%",[o.endEdge]:h+"%"}})});Qj.displayName=_m;var Om="SliderThumb",Xj=u.forwardRef((e,t)=>{const n=D6(e.__scopeSlider),[s,a]=u.useState(null),o=we(t,l=>a(l)),i=u.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return r.jsx(U6,{...e,ref:o,index:i})}),U6=u.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:a,...o}=e,i=$d(Om,n),l=Vj(Om,n),[c,d]=u.useState(null),f=we(t,p=>d(p)),h=c?i.form||!!c.closest("form"):!0,m=d1(c),g=i.values[s],b=g===void 0?0:Zj(g,i.min,i.max),x=H6(s,i.values.length),w=m==null?void 0:m[l.size],v=w?V6(w,b,l.direction):0;return u.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${b}% + ${v}px)`},children:[r.jsx(Mm.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(xe.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":i.min,"aria-valuenow":g,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:f,style:g===void 0?{display:"none"}:e.style,onFocus:re(e.onFocus,()=>{i.valueIndexToChangeRef.current=s})})}),h&&r.jsx(Kj,{name:a??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:g},s)]})});Xj.displayName=Om;var B6="RadioBubbleInput",Kj=u.forwardRef(({__scopeSlider:e,value:t,...n},s)=>{const a=u.useRef(null),o=we(a,s),i=Pj(t);return u.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&f){const h=new Event("input",{bubbles:!0});f.call(l,t),l.dispatchEvent(h)}},[i,t]),r.jsx(xe.input,{style:{display:"none"},...n,ref:o,defaultValue:t})});Kj.displayName=B6;function $6(e=[],t,n){const s=[...e];return s[n]=t,s.sort((a,o)=>a-o)}function Zj(e,t,n){const o=100/(n-t)*(e-t);return Rl(o,[0,100])}function H6(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function q6(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),s=Math.min(...n);return n.indexOf(s)}function V6(e,t,n){const s=e/2,o=_g([0,50],[0,s]);return(s-o(t)*n)*n}function F6(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Y6(e,t){if(t>0){const n=F6(e);return Math.min(...n)>=t}return!0}function _g(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function G6(e){return(String(e).split(".")[1]||"").length}function Q6(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Wj=Hj,X6=Gj,K6=Qj,Z6=Xj;const nu=u.forwardRef(({className:e,...t},n)=>r.jsxs(Wj,{ref:n,className:be("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(X6,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(K6,{className:"absolute h-full bg-primary"})}),r.jsx(Z6,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));nu.displayName=Wj.displayName;var W6=[" ","Enter","ArrowUp","ArrowDown"],J6=[" ","Enter"],Mr="Select",[Hd,qd,eL]=Cd(Mr),[Si,Tz]=on(Mr,[eL,$a]),Vd=$a(),[tL,Ga]=Si(Mr),[nL,sL]=Si(Mr),Jj=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:f,autoComplete:h,disabled:m,required:g,form:b}=e,x=Vd(t),[w,v]=u.useState(null),[p,y]=u.useState(null),[S,j]=u.useState(!1),k=yi(d),[N,E]=za({prop:s,defaultProp:a??!1,onChange:o,caller:Mr}),[A,T]=za({prop:i,defaultProp:l,onChange:c,caller:Mr}),I=u.useRef(null),R=w?b||!!w.closest("form"):!0,[$,K]=u.useState(new Set),C=Array.from($).map(D=>D.props.value).join(";");return r.jsx(Wp,{...x,children:r.jsxs(tL,{required:g,scope:t,trigger:w,onTriggerChange:v,valueNode:p,onValueNodeChange:y,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:Bn(),value:A,onValueChange:T,open:N,onOpenChange:E,dir:k,triggerPointerDownPosRef:I,disabled:m,children:[r.jsx(Hd.Provider,{scope:t,children:r.jsx(nL,{scope:e.__scopeSelect,onNativeOptionAdd:u.useCallback(D=>{K(H=>new Set(H).add(D))},[]),onNativeOptionRemove:u.useCallback(D=>{K(H=>{const M=new Set(H);return M.delete(D),M})},[]),children:n})}),R?r.jsxs(N2,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:A,onChange:D=>T(D.target.value),disabled:m,form:b,children:[A===void 0?r.jsx("option",{value:""}):null,Array.from($)]},C):null]})})};Jj.displayName=Mr;var e2="SelectTrigger",t2=u.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...a}=e,o=Vd(n),i=Ga(e2,n),l=i.disabled||s,c=we(t,i.onTriggerChange),d=qd(n),f=u.useRef("touch"),[h,m,g]=C2(x=>{const w=d().filter(y=>!y.disabled),v=w.find(y=>y.value===i.value),p=E2(w,x,v);p!==void 0&&i.onValueChange(p.value)}),b=x=>{l||(i.onOpenChange(!0),g()),x&&(i.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return r.jsx(Kl,{asChild:!0,...o,children:r.jsx(xe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":j2(i.value)?"":void 0,...a,ref:c,onClick:re(a.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&b(x)}),onPointerDown:re(a.onPointerDown,x=>{f.current=x.pointerType;const w=x.target;w.hasPointerCapture(x.pointerId)&&w.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(b(x),x.preventDefault())}),onKeyDown:re(a.onKeyDown,x=>{const w=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(w&&x.key===" ")&&W6.includes(x.key)&&(b(),x.preventDefault())})})})});t2.displayName=e2;var n2="SelectValue",s2=u.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,children:o,placeholder:i="",...l}=e,c=Ga(n2,n),{onValueNodeHasChildrenChange:d}=c,f=o!==void 0,h=we(t,c.onValueNodeChange);return kt(()=>{d(f)},[d,f]),r.jsx(xe.span,{...l,ref:h,style:{pointerEvents:"none"},children:j2(c.value)?r.jsx(r.Fragment,{children:i}):o})});s2.displayName=n2;var aL="SelectIcon",a2=u.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...a}=e;return r.jsx(xe.span,{"aria-hidden":!0,...a,ref:t,children:s||"▼"})});a2.displayName=aL;var rL="SelectPortal",r2=e=>r.jsx(Zl,{asChild:!0,...e});r2.displayName=rL;var _r="SelectContent",o2=u.forwardRef((e,t)=>{const n=Ga(_r,e.__scopeSelect),[s,a]=u.useState();if(kt(()=>{a(new DocumentFragment)},[]),!n.open){const o=s;return o?ri.createPortal(r.jsx(i2,{scope:e.__scopeSelect,children:r.jsx(Hd.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),o):null}return r.jsx(l2,{...e,ref:t})});o2.displayName=_r;var Rn=10,[i2,Qa]=Si(_r),oL="SelectContentImpl",iL=Oa("SelectContent.RemoveScroll"),l2=u.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:b,hideWhenDetached:x,avoidCollisions:w,...v}=e,p=Ga(_r,n),[y,S]=u.useState(null),[j,k]=u.useState(null),N=we(t,B=>S(B)),[E,A]=u.useState(null),[T,I]=u.useState(null),R=qd(n),[$,K]=u.useState(!1),C=u.useRef(!1);u.useEffect(()=>{if(y)return Ad(y)},[y]),Ed();const D=u.useCallback(B=>{const[J,...q]=R().map(ee=>ee.ref.current),[Y]=q.slice(-1),ae=document.activeElement;for(const ee of B)if(ee===ae||(ee==null||ee.scrollIntoView({block:"nearest"}),ee===J&&j&&(j.scrollTop=0),ee===Y&&j&&(j.scrollTop=j.scrollHeight),ee==null||ee.focus(),document.activeElement!==ae))return},[R,j]),H=u.useCallback(()=>D([E,y]),[D,E,y]);u.useEffect(()=>{$&&H()},[$,H]);const{onOpenChange:M,triggerPointerDownPosRef:U}=p;u.useEffect(()=>{if(y){let B={x:0,y:0};const J=Y=>{var ae,ee;B={x:Math.abs(Math.round(Y.pageX)-(((ae=U.current)==null?void 0:ae.x)??0)),y:Math.abs(Math.round(Y.pageY)-(((ee=U.current)==null?void 0:ee.y)??0))}},q=Y=>{B.x<=10&&B.y<=10?Y.preventDefault():y.contains(Y.target)||M(!1),document.removeEventListener("pointermove",J),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",J),document.addEventListener("pointerup",q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",J),document.removeEventListener("pointerup",q,{capture:!0})}}},[y,M,U]),u.useEffect(()=>{const B=()=>M(!1);return window.addEventListener("blur",B),window.addEventListener("resize",B),()=>{window.removeEventListener("blur",B),window.removeEventListener("resize",B)}},[M]);const[z,P]=C2(B=>{const J=R().filter(ae=>!ae.disabled),q=J.find(ae=>ae.ref.current===document.activeElement),Y=E2(J,B,q);Y&&setTimeout(()=>Y.ref.current.focus())}),V=u.useCallback((B,J,q)=>{const Y=!C.current&&!q;(p.value!==void 0&&p.value===J||Y)&&(A(B),Y&&(C.current=!0))},[p.value]),Q=u.useCallback(()=>y==null?void 0:y.focus(),[y]),_=u.useCallback((B,J,q)=>{const Y=!C.current&&!q;(p.value!==void 0&&p.value===J||Y)&&I(B)},[p.value]),se=s==="popper"?Dm:c2,oe=se===Dm?{side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:b,hideWhenDetached:x,avoidCollisions:w}:{};return r.jsx(i2,{scope:n,content:y,viewport:j,onViewportChange:k,itemRefCallback:V,selectedItem:E,onItemLeave:Q,itemTextRefCallback:_,focusSelectedItem:H,selectedItemText:T,position:s,isPositioned:$,searchRef:z,children:r.jsx(nc,{as:iL,allowPinchZoom:!0,children:r.jsx(ec,{asChild:!0,trapped:p.open,onMountAutoFocus:B=>{B.preventDefault()},onUnmountAutoFocus:re(a,B=>{var J;(J=p.trigger)==null||J.focus({preventScroll:!0}),B.preventDefault()}),children:r.jsx(hi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:B=>B.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:r.jsx(se,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:B=>B.preventDefault(),...v,...oe,onPlaced:()=>K(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:re(v.onKeyDown,B=>{const J=B.ctrlKey||B.altKey||B.metaKey;if(B.key==="Tab"&&B.preventDefault(),!J&&B.key.length===1&&P(B.key),["ArrowUp","ArrowDown","Home","End"].includes(B.key)){let Y=R().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);if(["ArrowUp","End"].includes(B.key)&&(Y=Y.slice().reverse()),["ArrowUp","ArrowDown"].includes(B.key)){const ae=B.target,ee=Y.indexOf(ae);Y=Y.slice(ee+1)}setTimeout(()=>D(Y)),B.preventDefault()}})})})})})})});l2.displayName=oL;var lL="SelectItemAlignedPosition",c2=u.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...a}=e,o=Ga(_r,n),i=Qa(_r,n),[l,c]=u.useState(null),[d,f]=u.useState(null),h=we(t,N=>f(N)),m=qd(n),g=u.useRef(!1),b=u.useRef(!0),{viewport:x,selectedItem:w,selectedItemText:v,focusSelectedItem:p}=i,y=u.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&x&&w&&v){const N=o.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),A=o.valueNode.getBoundingClientRect(),T=v.getBoundingClientRect();if(o.dir!=="rtl"){const ae=T.left-E.left,ee=A.left-ae,de=N.left-ee,Re=N.width+de,fe=Math.max(Re,E.width),ye=window.innerWidth-Rn,Le=Rl(ee,[Rn,Math.max(Rn,ye-fe)]);l.style.minWidth=Re+"px",l.style.left=Le+"px"}else{const ae=E.right-T.right,ee=window.innerWidth-A.right-ae,de=window.innerWidth-N.right-ee,Re=N.width+de,fe=Math.max(Re,E.width),ye=window.innerWidth-Rn,Le=Rl(ee,[Rn,Math.max(Rn,ye-fe)]);l.style.minWidth=Re+"px",l.style.right=Le+"px"}const I=m(),R=window.innerHeight-Rn*2,$=x.scrollHeight,K=window.getComputedStyle(d),C=parseInt(K.borderTopWidth,10),D=parseInt(K.paddingTop,10),H=parseInt(K.borderBottomWidth,10),M=parseInt(K.paddingBottom,10),U=C+D+$+M+H,z=Math.min(w.offsetHeight*5,U),P=window.getComputedStyle(x),V=parseInt(P.paddingTop,10),Q=parseInt(P.paddingBottom,10),_=N.top+N.height/2-Rn,se=R-_,oe=w.offsetHeight/2,B=w.offsetTop+oe,J=C+D+B,q=U-J;if(J<=_){const ae=I.length>0&&w===I[I.length-1].ref.current;l.style.bottom="0px";const ee=d.clientHeight-x.offsetTop-x.offsetHeight,de=Math.max(se,oe+(ae?Q:0)+ee+H),Re=J+de;l.style.height=Re+"px"}else{const ae=I.length>0&&w===I[0].ref.current;l.style.top="0px";const de=Math.max(_,C+x.offsetTop+(ae?V:0)+oe)+q;l.style.height=de+"px",x.scrollTop=J-_+x.offsetTop}l.style.margin=`${Rn}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=R+"px",s==null||s(),requestAnimationFrame(()=>g.current=!0)}},[m,o.trigger,o.valueNode,l,d,x,w,v,o.dir,s]);kt(()=>y(),[y]);const[S,j]=u.useState();kt(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const k=u.useCallback(N=>{N&&b.current===!0&&(y(),p==null||p(),b.current=!1)},[y,p]);return r.jsx(uL,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:k,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:r.jsx(xe.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});c2.displayName=lL;var cL="SelectPopperPosition",Dm=u.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:a=Rn,...o}=e,i=Vd(n);return r.jsx(md,{...i,...o,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Dm.displayName=cL;var[uL,Og]=Si(_r,{}),Lm="SelectViewport",u2=u.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...a}=e,o=Qa(Lm,n),i=Og(Lm,n),l=we(t,o.onViewportChange),c=u.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Hd.Slot,{scope:n,children:r.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:re(a.onScroll,d=>{const f=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&h){const g=Math.abs(c.current-f.scrollTop);if(g>0){const b=window.innerHeight-Rn*2,x=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),v=Math.max(x,w);if(v<b){const p=v+g,y=Math.min(b,p),S=p-y;h.style.height=y+"px",h.style.bottom==="0px"&&(f.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});u2.displayName=Lm;var d2="SelectGroup",[dL,fL]=Si(d2),hL=u.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Bn();return r.jsx(dL,{scope:n,id:a,children:r.jsx(xe.div,{role:"group","aria-labelledby":a,...s,ref:t})})});hL.displayName=d2;var f2="SelectLabel",h2=u.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=fL(f2,n);return r.jsx(xe.div,{id:a.id,...s,ref:t})});h2.displayName=f2;var Fu="SelectItem",[mL,m2]=Si(Fu),p2=u.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:a=!1,textValue:o,...i}=e,l=Ga(Fu,n),c=Qa(Fu,n),d=l.value===s,[f,h]=u.useState(o??""),[m,g]=u.useState(!1),b=we(t,p=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,p,s,a)}),x=Bn(),w=u.useRef("touch"),v=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(mL,{scope:n,value:s,disabled:a,textId:x,isSelected:d,onItemTextChange:u.useCallback(p=>{h(y=>y||((p==null?void 0:p.textContent)??"").trim())},[]),children:r.jsx(Hd.ItemSlot,{scope:n,value:s,disabled:a,textValue:f,children:r.jsx(xe.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:b,onFocus:re(i.onFocus,()=>g(!0)),onBlur:re(i.onBlur,()=>g(!1)),onClick:re(i.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:re(i.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:re(i.onPointerDown,p=>{w.current=p.pointerType}),onPointerMove:re(i.onPointerMove,p=>{var y;w.current=p.pointerType,a?(y=c.onItemLeave)==null||y.call(c):w.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:re(i.onPointerLeave,p=>{var y;p.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:re(i.onKeyDown,p=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&p.key===" "||(J6.includes(p.key)&&v(),p.key===" "&&p.preventDefault())})})})})});p2.displayName=Fu;var Hi="SelectItemText",g2=u.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,...o}=e,i=Ga(Hi,n),l=Qa(Hi,n),c=m2(Hi,n),d=sL(Hi,n),[f,h]=u.useState(null),m=we(t,v=>h(v),c.onItemTextChange,v=>{var p;return(p=l.itemTextRefCallback)==null?void 0:p.call(l,v,c.value,c.disabled)}),g=f==null?void 0:f.textContent,b=u.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:x,onNativeOptionRemove:w}=d;return kt(()=>(x(b),()=>w(b)),[x,w,b]),r.jsxs(r.Fragment,{children:[r.jsx(xe.span,{id:c.textId,...o,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?ri.createPortal(o.children,i.valueNode):null]})});g2.displayName=Hi;var x2="SelectItemIndicator",v2=u.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return m2(x2,n).isSelected?r.jsx(xe.span,{"aria-hidden":!0,...s,ref:t}):null});v2.displayName=x2;var zm="SelectScrollUpButton",y2=u.forwardRef((e,t)=>{const n=Qa(zm,e.__scopeSelect),s=Og(zm,e.__scopeSelect),[a,o]=u.useState(!1),i=we(t,s.onScrollButtonChange);return kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?r.jsx(w2,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});y2.displayName=zm;var Pm="SelectScrollDownButton",b2=u.forwardRef((e,t)=>{const n=Qa(Pm,e.__scopeSelect),s=Og(Pm,e.__scopeSelect),[a,o]=u.useState(!1),i=we(t,s.onScrollButtonChange);return kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<d;o(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?r.jsx(w2,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});b2.displayName=Pm;var w2=u.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...a}=e,o=Qa("SelectScrollButton",n),i=u.useRef(null),l=qd(n),c=u.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return u.useEffect(()=>()=>c(),[c]),kt(()=>{var f;const d=l().find(h=>h.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),r.jsx(xe.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:re(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:re(a.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:re(a.onPointerLeave,()=>{c()})})}),pL="SelectSeparator",S2=u.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(xe.div,{"aria-hidden":!0,...s,ref:t})});S2.displayName=pL;var Im="SelectArrow",gL=u.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Vd(n),o=Ga(Im,n),i=Qa(Im,n);return o.open&&i.position==="popper"?r.jsx(pd,{...a,...s,ref:t}):null});gL.displayName=Im;var xL="SelectBubbleInput",N2=u.forwardRef(({__scopeSelect:e,value:t,...n},s)=>{const a=u.useRef(null),o=we(s,a),i=Pj(t);return u.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&f){const h=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(h)}},[i,t]),r.jsx(xe.select,{...n,style:{...w1,...n.style},ref:o,defaultValue:t})});N2.displayName=xL;function j2(e){return e===""||e===void 0}function C2(e){const t=Ct(e),n=u.useRef(""),s=u.useRef(0),a=u.useCallback(i=>{const l=n.current+i;t(l),function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=u.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,a,o]}function E2(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=vL(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function vL(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var yL=Jj,k2=t2,bL=s2,wL=a2,SL=r2,A2=o2,NL=u2,T2=h2,R2=p2,jL=g2,CL=v2,M2=y2,_2=b2,O2=S2;const Or=yL,Dr=bL,Pa=u.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(k2,{ref:s,className:be("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(wL,{asChild:!0,children:r.jsx(Nd,{className:"h-4 w-4 opacity-50"})})]}));Pa.displayName=k2.displayName;const D2=u.forwardRef(({className:e,...t},n)=>r.jsx(M2,{ref:n,className:be("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(oS,{className:"h-4 w-4"})}));D2.displayName=M2.displayName;const L2=u.forwardRef(({className:e,...t},n)=>r.jsx(_2,{ref:n,className:be("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Nd,{className:"h-4 w-4"})}));L2.displayName=_2.displayName;const Ia=u.forwardRef(({className:e,children:t,position:n="popper",...s},a)=>r.jsx(SL,{children:r.jsxs(A2,{ref:a,className:be("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(D2,{}),r.jsx(NL,{className:be("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(L2,{})]})}));Ia.displayName=A2.displayName;const EL=u.forwardRef(({className:e,...t},n)=>r.jsx(T2,{ref:n,className:be("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));EL.displayName=T2.displayName;const Gt=u.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(R2,{ref:s,className:be("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(CL,{children:r.jsx(Sd,{className:"h-4 w-4"})})}),r.jsx(jL,{children:t})]}));Gt.displayName=R2.displayName;const kL=u.forwardRef(({className:e,...t},n)=>r.jsx(O2,{ref:n,className:be("-mx-1 my-1 h-px bg-muted",e),...t}));kL.displayName=O2.displayName;const gv=[{id:"elevenlabs-adam",name:"Adam (ElevenLabs)",description:"Deep, authoritative voice perfect for reading scripture with gravitas",gender:"male",accent:"American",age:"middle",style:"narration",provider:"elevenlabs",voiceId:"pNInz6obpgDQGcFmaJgB",premium:!0},{id:"elevenlabs-rachel",name:"Rachel (ElevenLabs)",description:"Warm, gentle female voice ideal for Psalms and comforting passages",gender:"female",accent:"American",age:"young",style:"gentle",provider:"elevenlabs",voiceId:"o7lPjDgzlF8ZloHzVPeK",premium:!0},{id:"elevenlabs-arnold",name:"Arnold (ElevenLabs)",description:"Rich, resonant voice with natural storytelling ability",gender:"male",accent:"American",age:"elderly",style:"storytelling",provider:"elevenlabs",voiceId:"ErXwobaYiN019PkySvjV",premium:!0},{id:"murf-david",name:"David (Murf)",description:"Professional narrator voice with clear pronunciation",gender:"male",accent:"British",age:"middle",style:"narration",provider:"murf",voiceId:"david_british_male",premium:!1},{id:"murf-sarah",name:"Sarah (Murf)",description:"Expressive storyteller with emotional range",gender:"female",accent:"American",age:"young",style:"storytelling",provider:"murf",voiceId:"sarah_american_female",premium:!1}];function AL(){const[e,t]=u.useState("elevenlabs-adam"),[n,s]=u.useState(!1),[a,o]=u.useState(null),[i,l]=u.useState(null),[c,d]=u.useState(""),[f,h]=u.useState({stability:.8,similarity:.8,style:.3,speakerBoost:!0,emotion:"neutral",speed:1}),m=u.useRef(null),g=u.useCallback(async(j,k,N)=>{var A;const E=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${k}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":N},body:JSON.stringify({text:j,model_id:"eleven_monolingual_v1",voice_settings:{stability:f.stability,similarity_boost:f.similarity,style:f.style,use_speaker_boost:f.speakerBoost}}),signal:(A=m.current)==null?void 0:A.signal});if(!E.ok)throw new Error(`ElevenLabs API error: ${E.status} ${E.statusText}`);return await E.blob()},[f]),b=u.useCallback(async(j,k,N)=>{var I;const E=await fetch("https://api.murf.ai/v1/speech/generate",{method:"POST",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"},body:JSON.stringify({voiceId:k,text:j,speed:f.speed,format:"mp3"}),signal:(I=m.current)==null?void 0:I.signal});if(!E.ok)throw new Error(`Murf API error: ${E.status} ${E.statusText}`);const A=await E.json();return await(await fetch(A.audioUrl)).blob()},[f]),x=u.useCallback(async j=>{if(!c)throw new Error("API key is required for AI voice generation");const k=gv.find(N=>N.id===e);if(!k)throw new Error("Selected voice not found");s(!0),m.current=new AbortController;try{console.log(`🤖 Generating AI speech with ${k.name}...`);let N;switch(k.provider){case"elevenlabs":N=await g(j,k.voiceId,c);break;case"murf":N=await b(j,k.voiceId,c);break;default:throw new Error(`Provider ${k.provider} not implemented`)}const E=URL.createObjectURL(N);return l(E),console.log(`✅ AI speech generated successfully (${N.size} bytes)`),E}catch(N){throw console.error("🚫 AI speech generation failed:",N),N}finally{s(!1),m.current=null}},[e,c,g,b]),w=u.useCallback(async j=>{try{a&&(a.pause(),a.currentTime=0);const k=new Audio(j);o(k),k.onloadstart=()=>console.log("🎵 Loading AI generated audio..."),k.oncanplay=()=>console.log("🎵 AI audio ready to play"),k.onplay=()=>console.log("🎵 AI speech playback started"),k.onpause=()=>console.log("⏸️ AI speech paused"),k.onended=()=>{console.log("🏁 AI speech playback completed"),o(null)},k.onerror=N=>{console.error("🚫 AI audio playback error:",N)},await k.play()}catch(k){throw console.error("🚫 Failed to play AI generated speech:",k),k}},[a]),v=u.useCallback(async j=>{try{const k=await x(j);await w(k)}catch(k){throw console.error("🚫 AI speech failed:",k),k}},[x,w]),p=u.useCallback(()=>{a&&(a.pause(),a.currentTime=0,o(null)),m.current&&m.current.abort()},[a]),y=u.useCallback(j=>{h(k=>({...k,...j}))},[]),S=u.useCallback(()=>{p(),i&&URL.revokeObjectURL(i)},[p,i]);return{selectedVoice:e,isGenerating:n,currentAudio:a,settings:f,apiKey:c,availableVoices:gv,setSelectedVoice:t,setApiKey:d,updateSettings:y,generateSpeech:x,playGeneratedSpeech:w,speakWithAI:v,stopSpeech:p,cleanup:S,isPlaying:a&&!a.paused,canGenerate:!!c&&!n}}const TL=[{id:"coqui-jenny",name:"Jenny (Coqui)",description:"High-quality female voice from Coqui TTS - completely free",gender:"female",language:"en",provider:"coqui",type:"local",modelName:"tts_models/en/ljspeech/tacotron2-DDC",offline:!0,quality:"excellent",speed:"medium"},{id:"coqui-male",name:"David (Coqui)",description:"Professional male narrator voice - open source",gender:"male",language:"en",provider:"coqui",type:"local",modelName:"tts_models/en/vctk/vits",offline:!0,quality:"excellent",speed:"medium"},{id:"bark-speaker-1",name:"Samuel (Bark)",description:"Natural conversational male voice with emotion - free",gender:"male",language:"en",provider:"bark",type:"local",voiceId:"v2/en_speaker_1",offline:!0,quality:"excellent",speed:"slow"},{id:"bark-speaker-2",name:"Sarah (Bark)",description:"Expressive female voice with laughter and emotions",gender:"female",language:"en",provider:"bark",type:"local",voiceId:"v2/en_speaker_2",offline:!0,quality:"excellent",speed:"slow"},{id:"chatterbox-default",name:"Alex (Chatterbox)",description:"Ultra-fast AI voice with emotion control - MIT licensed",gender:"neutral",language:"en",provider:"chatterbox",type:"local",offline:!0,quality:"good",speed:"fast"},{id:"browser-enhanced-female",name:"Enhanced Female",description:"Browser-based voice with AI processing effects",gender:"female",language:"en",provider:"browser",type:"browser",offline:!0,quality:"good",speed:"fast"},{id:"browser-enhanced-male",name:"Enhanced Male",description:"Browser-based voice with warmth and clarity processing",gender:"male",language:"en",provider:"browser",type:"browser",offline:!0,quality:"good",speed:"fast"},{id:"custom-upload-1",name:"My Custom Voice 1",description:"Upload your own voice sample for AI cloning",gender:"neutral",language:"en",provider:"custom",type:"uploaded",offline:!0,quality:"excellent",speed:"medium"}];function RL(){const[e,t]=u.useState("bark-speaker-1"),[n,s]=u.useState(!1),[a,o]=u.useState(null),[i,l]=u.useState(null),[c,d]=u.useState(""),[f,h]=u.useState({temperature:.7,speed:1,pitch:1,emotion:"neutral",addBreaths:!0,addEmphasis:!0}),[m,g]=u.useState([]),[b,x]=u.useState(!1),[w,v]=u.useState({step:"",progress:0}),[p,y]=u.useState(!1),S=u.useRef(null);u.useEffect(()=>{try{const z=JSON.parse(localStorage.getItem("customVoices")||"[]");if(console.log("📋 Loading saved custom voices:",z.length),z.length>0){const P=z.map(V=>{let Q=null;if(V.audioDataUrl)try{const _=atob(V.audioDataUrl.split(",")[1]),se=new Array(_.length);for(let J=0;J<_.length;J++)se[J]=_.charCodeAt(J);const oe=new Uint8Array(se),B=new Blob([oe],{type:"audio/mpeg"});Q=URL.createObjectURL(B)}catch(_){console.warn("⚠️ Failed to restore audio for voice:",V.name,_)}return{...V,customAudioFile:null,customAudioUrl:Q}});g(P),console.log("✅ Loaded custom voices from localStorage:",P.map(V=>V.name))}}catch(z){console.error("❌ Failed to load custom voices from localStorage:",z)}},[]);const j=u.useCallback(async(z,P)=>{var Q;d("Using Coqui TTS (requires Python setup)...");const V=await fetch("http://localhost:5000/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:z,model_name:P,speaker_idx:null,language_idx:null,speed:f.speed}),signal:(Q=S.current)==null?void 0:Q.signal});if(!V.ok)throw new Error(`Coqui TTS error: ${V.status}`);return await V.blob()},[f]),k=u.useCallback(async(z,P)=>{var oe;d("Generating with Bark AI (free)...");const V=await fetch("https://suno-bark.hf.space/api/v1/inference",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:z,voice_preset:P,temperature:f.temperature,length_penalty:1,repetition_penalty:1.35}),signal:(oe=S.current)==null?void 0:oe.signal});if(!V.ok)throw new Error(`Bark API error: ${V.status}`);const Q=await V.json(),_=atob(Q.audio),se=new Uint8Array(_.length);for(let B=0;B<_.length;B++)se[B]=_.charCodeAt(B);return new Blob([se],{type:"audio/wav"})},[f]),N=u.useCallback(async z=>{var V;d("Generating with Chatterbox (ultra-fast)...");const P=await fetch("https://api.chatterbox.run/v1/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:z,voice:"default",speed:f.speed,emotion_intensity:f.emotion==="neutral"?.5:.8}),signal:(V=S.current)==null?void 0:V.signal});if(!P.ok)throw new Error(`Chatterbox error: ${P.status}`);return await P.blob()},[f]),E=u.useCallback(async(z,P)=>(d("Processing with enhanced browser voice..."),new Promise((V,Q)=>{try{const _=new SpeechSynthesisUtterance(z),se=speechSynthesis.getVoices(),oe=se.find(B=>B.lang.startsWith("en")&&B.name.toLowerCase().includes(P==="female"?"female":"male"))||se.find(B=>B.lang.startsWith("en"))||se[0];switch(oe&&(_.voice=oe),_.rate=f.speed,_.pitch=f.pitch,_.volume=1,P==="male"&&(_.pitch=Math.max(.1,_.pitch*.8)),f.emotion){case"happy":_.pitch*=1.2,_.rate*=1.1;break;case"sad":_.pitch*=.8,_.rate*=.9;break;case"excited":_.pitch*=1.3,_.rate*=1.2;break;case"calm":_.pitch*=.9,_.rate*=.95;break}_.onend=()=>{const B=new Blob([""],{type:"audio/wav"});V(B)},_.onerror=B=>{Q(new Error(`Speech synthesis error: ${B.error}`))},console.log(`🎤 Speaking with ${(oe==null?void 0:oe.name)||"default"} voice (${P})`),speechSynthesis.speak(_)}catch(_){Q(_)}})),[f]);u.useCallback(async(z,P)=>{var V,Q;console.log(`🎤 Using RVC server for custom voice cloning (${P.name})`);try{console.log("🔍 Checking RVC server connection...");const _=await fetch("http://localhost:6006/health",{method:"GET",signal:(V=S.current)==null?void 0:V.signal});if(!_.ok)throw new Error("RVC server not responding");const se=await _.json();console.log("✅ RVC server connected:",se.message)}catch(_){return console.warn("⚠️ RVC server unavailable, falling back to browser speech:",_),new Promise((se,oe)=>{try{const B=new SpeechSynthesisUtterance(z),J=speechSynthesis.getVoices();let q=null;P.gender==="female"?q=J.find(Y=>Y.lang.startsWith("en")&&(Y.name.toLowerCase().includes("female")||Y.name.toLowerCase().includes("woman")||Y.name.toLowerCase().includes("zira")||Y.name.toLowerCase().includes("hazel"))):P.gender==="male"&&(q=J.find(Y=>Y.lang.startsWith("en")&&(Y.name.toLowerCase().includes("male")||Y.name.toLowerCase().includes("man")||Y.name.toLowerCase().includes("david")||Y.name.toLowerCase().includes("mark")))),q||(q=J.find(Y=>Y.lang.startsWith("en"))||J[0]),q&&(B.voice=q,console.log(`🎤 Fallback voice: ${q.name}`)),B.rate=f.speed,B.pitch=P.gender==="male"?.8:P.gender==="female"?1.2:1,B.onend=()=>{const Y=new Blob([""],{type:"audio/wav"});se(Y)},B.onerror=Y=>{if(Y.error==="interrupted"||Y.error==="canceled"||p){console.log("🔇 Fallback speech was intentionally stopped");const ae=new Blob([""],{type:"audio/wav"});se(ae)}else oe(new Error(`Speech synthesis error: ${Y.error}`))},console.log(`🗣️ Fallback speech: "${z.substring(0,50)}..."`),speechSynthesis.speak(B)}catch(B){oe(B)}})}try{console.log("🎤 Sending voice cloning request to RVC server..."),d("Analyzing your voice...");const _=await fetch("http://localhost:6006/voice-conversion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:z,reference_audio:P.customAudioUrl||"",speed:f.speed}),signal:(Q=S.current)==null?void 0:Q.signal});if(!_.ok)throw new Error(`RVC server error: ${_.status}`);console.log("📦 Received RVC response, processing instructions..."),d("Processing voice characteristics...");const se=await _.json();if(console.log("🎤 RVC response:",se),se.use_browser_tts)return console.log("🎤 Using enhanced browser TTS with custom voice characteristics"),new Promise((oe,B)=>{try{const J=new SpeechSynthesisUtterance(z),q=speechSynthesis.getVoices();let Y=null;const ae=se.voice_characteristics||{};P.gender==="female"||ae.gender==="female"?Y=q.find(ee=>ee.lang.startsWith("en")&&(ee.name.toLowerCase().includes("female")||ee.name.toLowerCase().includes("woman")||ee.name.toLowerCase().includes("zira")||ee.name.toLowerCase().includes("hazel"))):(P.gender==="male"||ae.gender==="male")&&(Y=q.find(ee=>ee.lang.startsWith("en")&&(ee.name.toLowerCase().includes("male")||ee.name.toLowerCase().includes("man")||ee.name.toLowerCase().includes("david")||ee.name.toLowerCase().includes("mark")))),Y||(Y=q.find(ee=>ee.lang.startsWith("en"))||q[0]),Y&&(J.voice=Y,console.log(`🎤 Enhanced voice: ${Y.name} (${ae.voice_type||"custom"})`)),J.rate=ae.speed||f.speed,J.pitch=ae.pitch||(P.gender==="male"?.8:P.gender==="female"?1.2:1),ae.emotion==="happy"?(J.pitch*=1.2,J.rate*=1.1):ae.emotion==="sad"&&(J.pitch*=.8,J.rate*=.9),console.log(`🎤 Enhanced speech settings: rate=${J.rate}, pitch=${J.pitch}`),J.onend=()=>{console.log(`✅ Enhanced custom voice speech completed (${P.name})`);const ee=new Blob([""],{type:"audio/wav"});oe(ee)},J.onerror=ee=>{B(new Error(`Enhanced speech synthesis error: ${ee.error}`))},console.log(`🗣️ Enhanced speech: "${z.substring(0,50)}..." with ${P.name} characteristics`),speechSynthesis.speak(J)}catch(J){B(J)}});throw new Error("RVC server did not provide TTS instructions")}catch(_){console.error("❌ RVC voice cloning failed:",_);const se=_ instanceof Error?_.message:String(_);throw new Error(`Custom voice cloning failed: ${se}`)}},[f]);const A=u.useCallback(async z=>{const V=U().find(Q=>Q.id===e);if(!V)throw new Error("Selected voice not found");s(!0),S.current=new AbortController;try{console.log(`🆓 Generating free AI speech with ${V.name}...`);let Q=null;switch(V.provider){case"coqui":Q=await j(z,V.modelName);break;case"bark":Q=await k(z,V.voiceId);break;case"chatterbox":Q=await N(z);break;case"browser":Q=await E(z,V.gender);break;case"custom":return console.log(`🎤 Using custom voice characteristics for: ${V.name}`),new Promise((se,oe)=>{try{const B=new SpeechSynthesisUtterance(z),J=speechSynthesis.getVoices();let q=null;V.gender==="female"?q=J.find(Y=>Y.lang.startsWith("en")&&(Y.name.toLowerCase().includes("female")||Y.name.toLowerCase().includes("woman")||Y.name.toLowerCase().includes("zira")||Y.name.toLowerCase().includes("hazel"))):V.gender==="male"&&(q=J.find(Y=>Y.lang.startsWith("en")&&(Y.name.toLowerCase().includes("male")||Y.name.toLowerCase().includes("man")||Y.name.toLowerCase().includes("david")||Y.name.toLowerCase().includes("mark")))),q||(q=J.find(Y=>Y.lang.startsWith("en"))||J[0]),q&&(B.voice=q,console.log(`🎤 Selected voice: ${q.name} for ${V.name}`)),B.rate=f.speed,B.pitch=V.gender==="male"?.7:V.gender==="female"?1.3:1,B.volume=1,B.onend=()=>{console.log(`✅ Custom voice speech completed: ${V.name}`);const Y=new Blob([""],{type:"audio/wav"}),ae=URL.createObjectURL(Y);se(ae)},B.onerror=Y=>{if(Y.error==="interrupted"||Y.error==="canceled"||p){console.log("🔇 Speech was intentionally stopped");const ae=new Blob([""],{type:"audio/wav"}),ee=URL.createObjectURL(ae);se(ee)}else oe(new Error(`Speech error: ${Y.error}`))},console.log(`🗣️ Speaking with ${V.name} voice...`),speechSynthesis.speak(B)}catch(B){oe(B)}});break;default:throw new Error(`Provider ${V.provider} not implemented`)}if(!Q)throw new Error("Failed to generate audio blob");const _=URL.createObjectURL(Q);return l(_),console.log(`✅ Free AI speech generated successfully (${Q.size} bytes)`),_}catch(Q){throw console.error("🚫 Free AI speech generation failed:",Q),Q}finally{s(!1),d(""),S.current=null}},[e,m,j,k,N,E]),T=u.useCallback(async z=>{try{if(a&&(a.pause(),a.currentTime=0),(await(await fetch(z)).blob()).size===0){console.log("🎤 Using direct speech synthesis (no audio file to play)");return}const Q=new Audio(z);o(Q),Q.onloadstart=()=>console.log("🎵 Loading free AI audio..."),Q.oncanplay=()=>console.log("🎵 Free AI audio ready"),Q.onplay=()=>console.log("🎵 Free AI speech started"),Q.onended=()=>{console.log("🏁 Free AI speech completed"),o(null)},Q.onerror=_=>{console.error("🚫 Free AI audio error:",_)},await Q.play()}catch(P){throw console.error("🚫 Failed to play free AI speech:",P),P}},[a]),I=u.useCallback(async z=>{try{const P=await A(z);if((await(await fetch(P)).blob()).size===0){URL.revokeObjectURL(P),console.log("✅ Custom voice speech completed successfully");return}await T(P)}catch(P){throw console.error("🚫 Free AI speech failed:",P),P}},[A,T]),R=u.useCallback(()=>{console.log("⏹️ Stopping speech"),y(!0),a&&(a.pause(),a.currentTime=0,o(null)),speechSynthesis.speaking&&(n||a)?(console.log("⏹️ Canceling speech synthesis (our speech)"),speechSynthesis.cancel()):speechSynthesis.speaking&&console.log("⏹️ Speech synthesis is active but not ours, leaving it alone"),S.current&&S.current.abort(),s(!1),d(""),setTimeout(()=>y(!1),100)},[a,n]),$=u.useCallback(z=>{h(P=>({...P,...z}))},[]),K=u.useCallback(z=>({coqui:`
# Install Coqui TTS (Free & Open Source)
pip install TTS

# Run local server
python -m TTS.server.server --list_models
python -m TTS.server.server --model_name tts_models/en/ljspeech/tacotron2-DDC

# Your local API will be at: http://localhost:5002
      `,bark:`
# Install Bark (Free)
pip install git+https://github.com/suno-ai/bark.git

# Or use HuggingFace Spaces (no installation needed)
# https://huggingface.co/spaces/suno/bark
      `,chatterbox:`
# Install Chatterbox (MIT License - Free)
pip install chatterbox-tts

# Python usage:
from chatterbox import ChatterboxTTS
tts = ChatterboxTTS()
audio = tts.synthesize("Hello world!")
      `})[z]||"Instructions not available",[]),C=u.useCallback(()=>{(n||a)&&R(),i&&URL.revokeObjectURL(i)},[R,i,n,a]),D=u.useCallback(async(z,P,V,Q,_)=>{var oe;x(!0),v({step:"Initializing...",progress:0});let se=null;try{if(console.log("🎤 Starting voice upload process...",{fileName:(z==null?void 0:z.name)||"unknown",fileSize:(z==null?void 0:z.size)||0,voiceName:P||"unnamed",hasMetadata:!!_}),!z)throw new Error("No audio file provided");if(!(P!=null&&P.trim()))throw new Error("Voice name is required");if(!(V!=null&&V.trim()))throw new Error("Voice description is required");v({step:"Analyzing audio properties...",progress:10}),console.log("📊 Analyzing audio properties...");let B=0,J=44100,q="mono";await new Promise(fe=>setTimeout(fe,10));try{if(typeof window<"u"&&(window.AudioContext||window.webkitAudioContext)){se=new(window.AudioContext||window.webkitAudioContext),console.log("📖 Reading audio file...");const fe=await Promise.race([z.arrayBuffer(),new Promise((ye,Le)=>setTimeout(()=>Le(new Error("File read timeout")),8e3))]);if(await new Promise(ye=>setTimeout(ye,10)),fe&&fe.byteLength>0)try{console.log("🔍 Decoding audio data...");const ye=await Promise.race([se.decodeAudioData(fe.slice(0)),new Promise((Le,He)=>setTimeout(()=>He(new Error("Audio decode timeout")),3e3))]);ye&&(B=Math.round(ye.duration*100)/100,J=ye.sampleRate||44100,q=ye.numberOfChannels===1?"mono":"stereo",console.log("✅ Audio analysis successful:",{duration:B,sampleRate:J,channels:q}))}catch(ye){console.warn("⚠️ Audio decode failed, using estimates:",ye),B=Math.max(1,Math.round(z.size/32e3))}}else console.warn("⚠️ AudioContext not available")}catch(fe){console.warn("⚠️ Audio analysis failed, using safe defaults:",fe)}finally{if(se){try{typeof se.close=="function"&&await se.close()}catch(fe){console.warn("⚠️ Could not close AudioContext:",fe)}se=null}}B<=0&&(B=Math.max(1,Math.round(z.size/32e3)),console.log("📏 Using fallback duration estimate:",B)),v({step:"Determining file format...",progress:30}),console.log("🔍 Determining file format...");let Y="mp3";try{const ye=(oe=(z.name||"").split(".").pop())==null?void 0:oe.toLowerCase();ye&&["wav","mp3","ogg","m4a"].includes(ye)?(Y=ye,console.log("✅ Format detected:",Y)):console.warn("⚠️ Unknown/missing file extension, defaulting to mp3:",ye)}catch(fe){console.warn("⚠️ Format detection failed, using mp3 default:",fe)}v({step:"Converting to base64 for storage...",progress:40}),console.log("💾 Converting to base64 for storage...");let ae="";await new Promise(fe=>setTimeout(fe,10));try{z.size>10*1024*1024?(console.warn("⚠️ File too large for base64 conversion, skipping persistence"),ae=""):(ae=await Promise.race([new Promise((fe,ye)=>{const Le=new FileReader;let He;Le.onprogress=Ge=>{if(Ge.lengthComputable){const Ot=Math.round(Ge.loaded/Ge.total*100);console.log(`📊 Base64 conversion progress: ${Ot}%`)}},Le.onload=()=>{clearTimeout(He);const Ge=Le.result;typeof Ge=="string"?fe(Ge):ye(new Error("FileReader result is not a string"))},Le.onerror=()=>{clearTimeout(He),ye(Le.error||new Error("FileReader failed"))},He=setTimeout(()=>{console.log("📊 Base64 conversion in progress...")},2e3),Le.readAsDataURL(z)}),new Promise((fe,ye)=>setTimeout(()=>ye(new Error("Base64 conversion timeout")),12e3))]),console.log("✅ Base64 conversion successful, size:",Math.round(ae.length/1024),"KB"))}catch(fe){console.warn("⚠️ Base64 conversion failed, voice will not persist across sessions:",fe)}await new Promise(fe=>setTimeout(fe,10)),v({step:"Generating metadata...",progress:60}),console.log("🤖 Generating auto-detected metadata...");const ee={age:(_==null?void 0:_.age)||(B>30?"adult":"young"),accent:(_==null?void 0:_.accent)||"american",tone:(_==null?void 0:_.tone)||"warm",style:(_==null?void 0:_.style)||"narrator",pitch:(_==null?void 0:_.pitch)||"medium",category:(_==null?void 0:_.category)||"religious",recordingQuality:B>0&&z.size/B>5e4?"professional":"good",backgroundNoise:(_==null?void 0:_.backgroundNoise)||"minimal"};v({step:"Creating voice object...",progress:70}),console.log("🎨 Creating voice object with metadata...");let de,Re="";await new Promise(fe=>setTimeout(fe,10));try{try{Re=URL.createObjectURL(z),console.log("✅ Audio URL created successfully")}catch(fe){throw console.error("❌ Failed to create audio URL:",fe),new Error("Could not create audio URL for voice sample")}de={id:`custom-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:P.trim(),description:V.trim(),gender:Q,language:"en",provider:"custom",type:"uploaded",customAudioFile:z,customAudioUrl:Re,audioDataUrl:ae||void 0,offline:!0,quality:"excellent",speed:"medium",age:(_==null?void 0:_.age)||ee.age,accent:(_==null?void 0:_.accent)||ee.accent,tone:(_==null?void 0:_.tone)||ee.tone,style:(_==null?void 0:_.style)||ee.style,pitch:(_==null?void 0:_.pitch)||ee.pitch,tags:(_==null?void 0:_.tags)||["custom","uploaded"],category:(_==null?void 0:_.category)||ee.category,intendedUse:(_==null?void 0:_.intendedUse)||`Custom voice: ${P}`,bestFor:(_==null?void 0:_.bestFor)||["Bible reading","General narration"],sampleRate:J>0?J:void 0,duration:B>0?Math.round(B*100)/100:void 0,fileSize:z.size,format:Y,channels:q,backgroundNoise:(_==null?void 0:_.backgroundNoise)||ee.backgroundNoise,recordingQuality:(_==null?void 0:_.recordingQuality)||ee.recordingQuality,creator:(_==null?void 0:_.creator)||"User",createdAt:new Date().toISOString(),usageCount:0,rating:5,notes:(_==null?void 0:_.notes)||"",favorite:(_==null?void 0:_.favorite)||!1,sampleText:(_==null?void 0:_.sampleText)||"",sampleContext:(_==null?void 0:_.sampleContext)||`Custom voice sample: ${P}`,voiceEmotions:[],isPrivate:(_==null?void 0:_.isPrivate)!==!1,source:"Recorded by user"},console.log("✅ Voice object created successfully")}catch(fe){if(console.error("❌ Error creating voice object:",fe),Re)try{URL.revokeObjectURL(Re)}catch(ye){console.warn("⚠️ Could not clean up audio URL:",ye)}throw new Error(`Failed to create voice object: ${fe instanceof Error?fe.message:"Unknown error"}`)}v({step:"Adding voice to application...",progress:85}),console.log("📝 Adding voice to state..."),await new Promise(fe=>setTimeout(fe,10));try{g(fe=>{const ye=[...fe,de];return console.log("📋 Updated custom voices:",ye.map(Le=>Le.name)),ye}),console.log("✅ Voice added to state successfully")}catch(fe){if(console.error("❌ Failed to add voice to state:",fe),de.customAudioUrl)try{URL.revokeObjectURL(de.customAudioUrl)}catch(ye){console.warn("⚠️ Could not clean up audio URL:",ye)}throw new Error(`Failed to add voice to application state: ${fe instanceof Error?fe.message:"Unknown error"}`)}v({step:"Saving voice data...",progress:95}),console.log("💾 Saving voice to localStorage..."),await new Promise(fe=>setTimeout(fe,10));try{const fe=JSON.parse(localStorage.getItem("customVoices")||"[]"),ye={...de,customAudioFile:null,customAudioUrl:null,audioDataUrl:ae};fe.push(ye),typeof requestIdleCallback<"u"?await new Promise(Le=>{requestIdleCallback(()=>{localStorage.setItem("customVoices",JSON.stringify(fe)),Le()})}):localStorage.setItem("customVoices",JSON.stringify(fe)),console.log("✅ Voice saved to localStorage successfully")}catch(fe){console.warn("⚠️ Could not save voice to localStorage:",fe),console.warn("Voice will still work for current session but will not persist after app restart")}return v({step:"Upload complete!",progress:100}),console.log("🎉 Custom voice upload completed successfully!"),console.log("📊 Final voice metadata:",{id:de.id,name:de.name,duration:de.duration,sampleRate:de.sampleRate,fileSize:de.fileSize,format:de.format,channels:de.channels,quality:de.recordingQuality,tags:de.tags,hasAudioUrl:!!de.customAudioUrl,hasDataUrl:!!ae,persistsAcrossSessions:!!ae}),de}catch(B){console.error("❌ Custom voice upload failed at top level:",B);let J="Failed to upload custom voice";B instanceof Error&&(B.message.includes("No audio file")?J="Please select an audio file to upload":B.message.includes("Voice name is required")?J="Please enter a name for your custom voice":B.message.includes("Voice description is required")?J="Please enter a description for your custom voice":B.message.includes("Could not create audio URL")?J="The selected audio file could not be processed. Please try a different file.":B.message.includes("File read timeout")?J="The audio file is too large or corrupted. Please try a smaller file.":J=`Upload failed: ${B.message}`);const q=new Error(J);throw q.name="VoiceUploadError",q}finally{x(!1),v({step:"",progress:0}),console.log("🔄 Voice upload process completed, cleaning up...")}},[]),H=u.useCallback(async(z,P)=>{if(!P.customAudioUrl)throw new Error("No custom audio sample available");try{const Q=await fetch("http://localhost:6006/voice-conversion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:z,reference_audio:P.customAudioUrl,speed:f.speed})});if(Q.ok)return await Q.blob()}catch{console.log("RVC not available, falling back to browser synthesis")}const V=P.gender==="neutral"?"male":P.gender;return E(z,V)},[f,E]),M=u.useCallback(z=>{g(P=>{const V=P.filter(oe=>oe.id!==z),Q=P.find(oe=>oe.id===z);Q!=null&&Q.customAudioUrl&&URL.revokeObjectURL(Q.customAudioUrl);const se=JSON.parse(localStorage.getItem("customVoices")||"[]").filter(oe=>oe.id!==z);return localStorage.setItem("customVoices",JSON.stringify(se)),console.log("🗑️ Deleted custom voice:",z),V})},[]),U=u.useCallback(()=>[...TL,...m],[m]);return{selectedVoice:e,isGenerating:n,currentAudio:a,settings:f,installationProgress:c,customVoices:m,isUploadingVoice:b,uploadProgress:w,isStopping:p,availableVoices:U(),setSelectedVoice:t,updateSettings:$,generateSpeech:A,playGeneratedSpeech:T,speakWithFreeAI:I,stopSpeech:R,getInstallationInstructions:K,cleanup:C,uploadCustomVoice:D,deleteCustomVoice:M,cloneVoiceFromSample:H,isPlaying:a&&!a.paused,canGenerate:!n&&!p}}function z2(e){const[t,n]=u.useState(!1),[s,a]=u.useState(0),[o,i]=u.useState(165),l=u.useRef(null),c=u.useRef(null),d=u.useRef(!1),f=u.useRef([]),h=()=>{if(console.log("🔊 useSpeech.speak() called"),console.log("📖 Verses:",e),console.log("📖 Verses length:",e.length),console.log("🌐 window.speechSynthesis available:",!!window.speechSynthesis),!window.speechSynthesis||e.length===0){console.log("❌ Cannot speak: no speechSynthesis or no verses");return}if(d.current){console.log("⚠️ Already speaking, stopping current speech first"),m(),setTimeout(()=>{d.current=!1,h()},100);return}window.speechSynthesis.cancel(),setTimeout(()=>{let b=e.map(w=>w.text).join(" ");console.log("📝 Combined text length:",b.length),console.log("📝 First 100 chars:",b.substring(0,100)),console.log("📝 Last 100 chars:",b.substring(b.length-100)),b.length>5e3&&console.log("⚠️ Warning: Text is very long, some browsers may have issues"),(b.includes(`
`)||b.includes("\r"))&&(console.log("⚠️ Warning: Text contains line breaks, cleaning..."),b=b.replace(/[\r\n]+/g," ").replace(/\s+/g," "),console.log("📝 Cleaned text length:",b.length));const x=new SpeechSynthesisUtterance(b);x.rate=.8,x.pitch=1,x.volume=1,x.onstart=()=>{console.log("✅ Speech started"),d.current=!0,n(!0),c.current=setInterval(()=>{a(w=>Math.min(w+1,o))},1e3)},x.onend=()=>{console.log("✅ Speech ended"),d.current=!1,n(!1),a(0),c.current&&(clearInterval(c.current),c.current=null)},x.onerror=w=>{console.error("❌ Speech error:",w),console.error("❌ Error details:",{error:w.error,elapsedTime:w.elapsedTime,charIndex:w.charIndex,name:w.name}),d.current=!1,n(!1),a(0),c.current&&(clearInterval(c.current),c.current=null)},l.current=x,console.log("🎤 Starting speech synthesis..."),window.speechSynthesis.speak(x)},200)},m=()=>{window.speechSynthesis&&(window.speechSynthesis.cancel(),d.current=!1,n(!1),a(0),c.current&&(clearInterval(c.current),c.current=null))},g=()=>{t?m():h()};return u.useEffect(()=>()=>{c.current&&clearInterval(c.current),window.speechSynthesis&&d.current&&window.speechSynthesis.cancel()},[]),u.useEffect(()=>{if(JSON.stringify(e)!==JSON.stringify(f.current)){console.log("📖 Verses changed, updating duration estimate"),f.current=e,t&&m();const x=e.reduce((w,v)=>w+v.text.split(" ").length,0);i(Math.ceil(x/2.5))}},[e,t]),{isPlaying:t,currentTime:s,duration:o,togglePlayback:g,speak:h,stop:m}}function ML({isPlaying:e,amplitude:t=.5}){const s=Array.from({length:12},(a,o)=>o);return r.jsx("div",{className:"flex items-center justify-center gap-1 h-8 px-3 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 rounded-md overflow-hidden relative",children:s.map(a=>r.jsx("div",{className:`w-1 rounded-full transition-all duration-200 ${e?"bg-gradient-to-t from-green-500 via-blue-500 to-purple-500":"bg-gradient-to-t from-green-400 to-blue-400"}`,style:{height:e?`${8+Math.random()*16*t}px`:"4px",animationDelay:`${a*60}ms`,animationDuration:`${800+Math.random()*400}ms`}},a))})}const Jf="aiVoiceReaderPosition",xv="aiVoiceReaderMinimized";function _L({content:e,documentId:t,currentChapter:n,onNavigateNext:s,canNavigateNext:a,className:o,isOpen:i,onToggle:l}){const{selectedVoice:c,isGenerating:d,settings:f,apiKey:h,availableVoices:m,setSelectedVoice:g,setApiKey:b,updateSettings:x,speakWithAI:w,stopSpeech:v,isPlaying:p}=AL(),{selectedVoice:y,isGenerating:S,isUploadingVoice:j,uploadCustomVoice:k,speakWithFreeAI:N,availableVoices:E}=RL(),A=e?e.map((G,ce)=>({number:ce+1,text:G.text||""})):[],{isPlaying:T,currentTime:I,duration:R,stop:$}=z2(A),[K,C]=u.useState(!0),[D,H]=u.useState(!0),[M,U]=u.useState(()=>typeof window<"u"?localStorage.getItem(xv)==="true":!1),[z,P]=u.useState("voices"),[V,Q]=u.useState(!1),[_,se]=u.useState(()=>{if(typeof window<"u"){const he=localStorage.getItem(Jf);if(he)try{const Ne=JSON.parse(he);if(typeof Ne.x=="number"&&typeof Ne.y=="number")return Ne}catch{}}const G=window.innerWidth-400-16,ce=window.innerHeight-600-16;return{x:Math.max(20,G),y:Math.max(96,ce)}}),[oe,B]=u.useState(!1),[J,q]=u.useState({x:0,y:0}),[Y,ae]=u.useState({x:0,y:0}),ee=u.useRef(null),de=u.useRef(null),[Re,fe]=u.useState(null),[ye,Le]=u.useState(""),[He,Ge]=u.useState(null);u.useEffect(()=>{const G=localStorage.getItem("ai-voice-api-key");G&&b(G)},[b]),u.useEffect(()=>{var G,ce;if(console.log("🔍 Checking speech synthesis status..."),console.log("🌐 Speech synthesis available:",!!window.speechSynthesis),console.log("🔊 Speech synthesis speaking:",(G=window.speechSynthesis)==null?void 0:G.speaking),console.log("⏸️ Speech synthesis paused:",(ce=window.speechSynthesis)==null?void 0:ce.paused),window.speechSynthesis){const he=window.speechSynthesis.getVoices();console.log("🗣️ Available voices:",he.length),console.log("🗣️ Voice names:",he.map(Ne=>Ne.name)),he.length===0&&(window.speechSynthesis.onvoiceschanged=()=>{const Ne=window.speechSynthesis.getVoices();console.log("🗣️ Voices loaded:",Ne.length),console.log("🗣️ Voice names:",Ne.map(qe=>qe.name))})}},[]),u.useEffect(()=>{localStorage.setItem(Jf,JSON.stringify(_))},[_]),u.useEffect(()=>{localStorage.setItem(xv,M.toString())},[M]);const Ot=async()=>{if(console.log("📖 Playing chapter in chunks..."),!e||e.length===0){console.log("❌ No content to play");return}if(V){console.log("⚠️ Already playing chapter, ignoring request");return}Q(!0);try{if(D){window.speechSynthesis.cancel(),await new Promise(G=>setTimeout(G,200));for(let G=0;G<e.length;G++){const ce=e[G];console.log(`📖 Playing paragraph ${G+1}/${e.length}`),await new Promise((he,Ne)=>{window.speechSynthesis.cancel();const qe=new SpeechSynthesisUtterance(ce.text||"");qe.rate=.8,qe.pitch=1,qe.volume=1,qe.onstart=()=>{console.log(`✅ Paragraph ${G+1} speech started`)},qe.onend=()=>{console.log(`✅ Paragraph ${G+1} speech ended`),he()},qe.onerror=vt=>{console.error(`❌ Paragraph ${G+1} speech error:`,vt),Ne(vt)},setTimeout(()=>{window.speechSynthesis.speak(qe)},50)}),await new Promise(he=>setTimeout(he,200))}console.log("✅ All paragraphs completed"),a&&s&&s()}else{const G=e.map(ce=>ce.text||"").join(" ");console.log("📝 Full text length:",G.length),console.log("📝 First 100 chars:",G.substring(0,100)),K?(console.log("🆓 Using free AI voice"),await N(G)):(console.log("🤖 Using paid AI voice"),await w(G))}}catch(G){console.error("❌ Failed to play chapter:",G)}finally{Q(!1)}},ln=G=>{var he;const ce=(he=G.target.files)==null?void 0:he[0];if(Ge(null),ce){if(!ce.type.startsWith("audio/")){Ge("Please upload a valid audio file (.mp3, .wav, etc.)");return}if(ce.size>50*1024*1024){Ge("File too large. Please upload a file smaller than 50MB.");return}fe(ce),ye||Le(ce.name.replace(/\.[^/.]+$/,""))}},Qn=async()=>{if(!(!Re||!ye.trim()))try{const G=await k(Re,ye,"","neutral");Ge("Voice cloned successfully! 🎉"),fe(null),Le("")}catch{Ge("Failed to clone voice. Please try again.")}},lt=G=>{const ce=G.target;ce.closest("button")||ce.closest("input")||ce.closest("select")||ce.closest('[role="button"]')||ce.closest("[data-radix-collection-item]")||(G.preventDefault(),B(!0),q({x:G.clientX,y:G.clientY}),ae({x:G.clientX-_.x,y:G.clientY-_.y}),ee.current&&(ee.current.style.cursor="grabbing",ee.current.style.transform="scale(1.02)",ee.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},At=u.useCallback(G=>{oe&&(G.preventDefault(),de.current&&cancelAnimationFrame(de.current),de.current=requestAnimationFrame(()=>{const he=M?64:600,Ne=Math.max(10,Math.min(window.innerWidth-400-10,G.clientX-Y.x)),qe=Math.max(10,Math.min(window.innerHeight-he-10,G.clientY-Y.y));se(vt=>vt.x!==Ne||vt.y!==qe?{x:Ne,y:qe}:vt)}))},[oe,Y,M]),ge=u.useCallback(()=>{B(!1),de.current&&(cancelAnimationFrame(de.current),de.current=null),ee.current&&(ee.current.style.cursor="",ee.current.style.transform="",ee.current.style.boxShadow=""),localStorage.setItem(Jf,JSON.stringify(_))},[_]),O=()=>{const G=window.innerWidth-400-16,ce=window.innerHeight-(M?64:600)-16;se({x:Math.max(20,G),y:Math.max(96,ce)})};u.useEffect(()=>{if(oe){document.addEventListener("mousemove",At,{passive:!1}),document.addEventListener("mouseup",ge,{passive:!0});const G=he=>{if(he.touches.length===1){const Ne=he.touches[0];he.preventDefault();const qe={preventDefault:()=>he.preventDefault(),stopPropagation:()=>he.stopPropagation(),clientX:Ne.clientX,clientY:Ne.clientY};At(qe)}},ce=he=>{ge()};return document.addEventListener("touchmove",G,{passive:!1}),document.addEventListener("touchend",ce,{passive:!0}),()=>{document.removeEventListener("mousemove",At),document.removeEventListener("mouseup",ge),document.removeEventListener("touchmove",G),document.removeEventListener("touchend",ce),de.current&&(cancelAnimationFrame(de.current),de.current=null)}}},[oe,Y,At,ge]);const W=K?E:m,te=K?y:c,ne=D?!1:K?S:d,ie=D?T||V:p,ze=V||ie,X=()=>{console.log("⏹️ handleStopSpeech called"),console.log("🔊 useBrowserVoice:",D),console.log("🔊 currentIsPlaying:",ie),console.log("🔊 isPlayingChapter:",V),D?(console.log("🔊 Stopping browser speech synthesis"),$(),Q(!1)):(console.log("🤖 Stopping AI voice"),v())};return i?r.jsx("div",{ref:ee,className:"fixed z-50",style:{left:`${_.x}px`,top:`${_.y}px`,transform:"none",willChange:oe?"transform, box-shadow":"auto",pointerEvents:"all"},children:r.jsxs(Ae,{className:`w-96 transition-all duration-300 ${M?"h-16":"h-[600px]"} shadow-2xl border-2 border-primary/20 ${oe?"select-none cursor-grabbing":""}`,style:{willChange:oe?"transform":"auto",transition:oe?"none":"all 0.3s ease-out",transform:oe?"scale(1.02)":"scale(1)",zIndex:oe?60:50,boxShadow:oe?"0 25px 50px -12px rgba(0, 0, 0, 0.25)":"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[r.jsxs(Ue,{className:"pb-2 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 select-none transition-all duration-200",style:{userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:[r.jsx("div",{className:`absolute top-0 left-0 right-0 h-8 transition-colors ${oe?"cursor-grabbing hover:bg-gray-100/50 dark:hover:bg-gray-800/50":"cursor-grab hover:bg-gray-100/50 dark:hover:bg-gray-800/50"}`,onMouseDown:lt,onDoubleClick:O,title:"Drag to move • Double-click to reset position",children:ze&&r.jsx("div",{className:"absolute top-1 left-1 text-xs text-green-600 dark:text-green-400",children:"🔊 Playing"})}),r.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[r.jsxs(Ye,{className:"text-lg flex items-center gap-2",children:[r.jsx(xS,{className:"h-5 w-5 text-primary"}),"AI Voice Reader",r.jsx(Be,{className:`text-xs ${D?"bg-green-500 text-white":K?"bg-orange-500 text-white":"bg-blue-500 text-white"}`,children:D?"Browser":K?"Free AI":"Premium"}),r.jsxs("div",{className:"flex gap-0.5 ml-2 opacity-50",children:[r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[ne&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 dark:text-blue-400 mr-2",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),"Generating..."]}),(ie||!1)&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400 mr-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Playing"]}),r.jsx(F,{onClick:()=>U(!M),className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:M?r.jsx(qr,{className:"h-4 w-4"}):r.jsx(qa,{className:"h-4 w-4"})}),r.jsx(F,{onClick:l,className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:r.jsx(kn,{className:"h-4 w-4"})})]})]}),!M&&r.jsxs("div",{className:"flex space-x-2 mt-2 relative z-10",children:[r.jsx(F,{onClick:()=>P("voices"),className:`flex-1 px-3 py-1 text-sm ${z==="voices"?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Voices"}),r.jsx(F,{onClick:()=>P("clone"),className:`flex-1 px-3 py-1 text-sm ${z==="clone"?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Clone"}),r.jsx(F,{onClick:()=>P("settings"),className:`flex-1 px-3 py-1 text-sm ${z==="settings"?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Settings"})]})]}),!M&&r.jsxs(Me,{className:"p-0 flex flex-col h-[520px]",children:[z==="voices"&&r.jsx(Ps,{className:"flex-1 p-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(ML,{isPlaying:ie||!1}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(F,{size:"sm",onClick:ie?X:Ot,disabled:ne,className:"flex-1",children:[ie?r.jsx(vO,{className:"w-4 h-4 mr-2"}):r.jsx(fS,{className:"w-4 h-4 mr-2"}),ie?"Stop":V?"Reading...":"Play Chapter"]})}),r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg space-y-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Voice Engine:"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(F,{variant:D?"default":"outline",size:"sm",onClick:()=>{H(!0),C(!1)},className:"flex-1",children:"🔊 Browser"}),r.jsx(F,{variant:!D&&K?"default":"outline",size:"sm",onClick:()=>{H(!1),C(!0)},className:"flex-1",children:"🆓 Free AI"}),r.jsx(F,{variant:!D&&!K?"default":"outline",size:"sm",onClick:()=>{H(!1),C(!1)},className:"flex-1",children:"💳 Premium"})]}),D&&r.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 text-center",children:"✅ Ready to use - no setup required!"})]}),!D&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Voice:"}),r.jsxs(Or,{value:te,onValueChange:K?G=>g(G):g,children:[r.jsx(Pa,{children:r.jsx(Dr,{})}),r.jsx(Ia,{children:W.map(G=>r.jsx(Gt,{value:G.id,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:G.gender==="male"?"👨":G.gender==="female"?"👩":"🤖"}),r.jsx("span",{children:G.name})]})},G.id))})]})]}),D&&r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg space-y-2",children:[r.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-1",children:"🔊 Browser Voice Selected"}),r.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Using your system's built-in text-to-speech engine. This works offline and doesn't require any API keys or setup."}),ie&&r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-xs text-blue-600 dark:text-blue-400",children:[r.jsx("span",{children:"Progress"}),r.jsxs("span",{children:[Math.floor(I/R*100),"%"]})]}),r.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${I/R*100}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-blue-600 dark:text-blue-400",children:[r.jsxs("span",{children:[Math.floor(I/60),":",(I%60).toString().padStart(2,"0")]}),r.jsxs("span",{children:[Math.floor(R/60),":",(R%60).toString().padStart(2,"0")]})]})]})]}),!K&&!h&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(it,{type:"password",placeholder:"ElevenLabs API key...",value:h,onChange:G=>b(G.target.value),className:"text-sm"}),r.jsxs("div",{className:"text-xs text-gray-600",children:["Get your key at ",r.jsx("a",{href:"https://elevenlabs.io",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:"ElevenLabs"})]})]}),a&&r.jsx("div",{className:"text-xs text-gray-600 text-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:"Will auto-navigate to next chapter when finished"})]})}),z==="clone"&&r.jsx(Ps,{className:"flex-1 p-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center text-muted-foreground py-4",children:[r.jsx(Yx,{className:"h-12 w-12 mx-auto mb-4 text-primary/50"}),r.jsx("p",{className:"text-sm",children:"Upload your voice sample to create a custom AI voice."}),r.jsx("p",{className:"text-xs mt-2",children:"Works completely free with browser-based AI."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[r.jsx("input",{type:"file",accept:"audio/*",onChange:ln,className:"hidden",id:"voice-upload"}),r.jsxs("label",{htmlFor:"voice-upload",className:"cursor-pointer flex flex-col items-center gap-2 text-sm",children:[r.jsx(Yx,{className:"w-8 h-8 text-gray-400"}),Re?r.jsxs("div",{className:"text-center",children:[r.jsxs("span",{className:"text-green-600 font-medium",children:["✅ ",Re.name]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to change file"})]}):r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"font-medium",children:"Upload voice sample"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"MP3, WAV - 30+ seconds recommended"})]})]})]}),Re&&r.jsxs("div",{className:"space-y-3",children:[r.jsx(it,{value:ye,onChange:G=>Le(G.target.value),placeholder:"Voice name...",className:"text-sm"}),r.jsx(F,{onClick:Qn,disabled:!Re||!ye.trim()||j,className:"w-full",children:j?"Cloning Voice...":"Create Voice Clone"})]}),He&&r.jsx("div",{className:`p-3 rounded-lg text-sm ${He.includes("success")?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-400"}`,children:He})]})]})}),z==="settings"&&r.jsx(Ps,{className:"flex-1 p-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center text-muted-foreground py-4",children:[r.jsx(Ro,{className:"h-12 w-12 mx-auto mb-4 text-primary/50"}),r.jsx("p",{className:"text-sm",children:"Advanced voice settings and controls."}),r.jsx("p",{className:"text-xs mt-2",children:"Fine-tune your AI voice experience."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Voice Stability"}),r.jsx(nu,{value:[f.stability],onValueChange:([G])=>x({stability:G}),min:0,max:1,step:.1,className:"w-full"}),r.jsxs("div",{className:"text-xs text-center text-gray-500",children:[f.stability.toFixed(1)," (consistency)"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Voice Similarity"}),r.jsx(nu,{value:[f.similarity],onValueChange:([G])=>x({similarity:G}),min:0,max:1,step:.1,className:"w-full"}),r.jsxs("div",{className:"text-xs text-center text-gray-500",children:[f.similarity.toFixed(1)," (voice match)"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Speech Speed"}),r.jsx(nu,{value:[f.speed||1],onValueChange:([G])=>x({speed:G}),min:.5,max:1.5,step:.1,className:"w-full"}),r.jsxs("div",{className:"text-xs text-center text-gray-500",children:[(f.speed||1).toFixed(1),"x speed"]})]})]})]})})]})]})}):null}function OL({onSelection:e}){const t=u.useCallback(()=>{var f,h,m,g;const s=window.getSelection();if(!s||s.toString().trim().length===0)return;const a=s.toString().trim(),i=s.getRangeAt(0).commonAncestorContainer;let l=i.nodeType===Node.TEXT_NODE?i.parentElement:i,c=!1,d=null;for(;l;){if((f=l.hasAttribute)!=null&&f.call(l,"data-paragraph")){d=parseInt(l.getAttribute("data-paragraph")||"0"),c=!0;break}if((h=l.classList)!=null&&h.contains("chapter-title")||(m=l.classList)!=null&&m.contains("sidebar")||(g=l.classList)!=null&&g.contains("topbar")||l.tagName==="H1"||l.tagName==="H2"||l.tagName==="H3"||l.closest(".sidebar")||l.closest(".topbar")||l.closest("header")){s.removeAllRanges();return}l=l.parentElement}if(!c||d===null){s.removeAllRanges();return}s.removeAllRanges(),a&&e(a,d)},[e]),n=u.useCallback(()=>(document.addEventListener("mouseup",t),()=>{document.removeEventListener("mouseup",t)}),[t]);return{handleTextSelection:t,startSelection:n}}var Fd="Popover",[P2,Rz]=on(Fd,[$a]),rc=$a(),[DL,Xa]=P2(Fd),I2=e=>{const{__scopePopover:t,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:i=!1}=e,l=rc(t),c=u.useRef(null),[d,f]=u.useState(!1),[h,m]=za({prop:s,defaultProp:a??!1,onChange:o,caller:Fd});return r.jsx(Wp,{...l,children:r.jsx(DL,{scope:t,contentId:Bn(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:u.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:d,onCustomAnchorAdd:u.useCallback(()=>f(!0),[]),onCustomAnchorRemove:u.useCallback(()=>f(!1),[]),modal:i,children:n})})};I2.displayName=Fd;var U2="PopoverAnchor",LL=u.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=Xa(U2,n),o=rc(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=a;return u.useEffect(()=>(i(),()=>l()),[i,l]),r.jsx(Kl,{...o,...s,ref:t})});LL.displayName=U2;var B2="PopoverTrigger",$2=u.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=Xa(B2,n),o=rc(n),i=we(t,a.triggerRef),l=r.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Y2(a.open),...s,ref:i,onClick:re(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:r.jsx(Kl,{asChild:!0,...o,children:l})});$2.displayName=B2;var Dg="PopoverPortal",[zL,PL]=P2(Dg,{forceMount:void 0}),H2=e=>{const{__scopePopover:t,forceMount:n,children:s,container:a}=e,o=Xa(Dg,t);return r.jsx(zL,{scope:t,forceMount:n,children:r.jsx(_t,{present:n||o.open,children:r.jsx(Zl,{asChild:!0,container:a,children:s})})})};H2.displayName=Dg;var si="PopoverContent",q2=u.forwardRef((e,t)=>{const n=PL(si,e.__scopePopover),{forceMount:s=n.forceMount,...a}=e,o=Xa(si,e.__scopePopover);return r.jsx(_t,{present:s||o.open,children:o.modal?r.jsx(UL,{...a,ref:t}):r.jsx(BL,{...a,ref:t})})});q2.displayName=si;var IL=Oa("PopoverContent.RemoveScroll"),UL=u.forwardRef((e,t)=>{const n=Xa(si,e.__scopePopover),s=u.useRef(null),a=we(t,s),o=u.useRef(!1);return u.useEffect(()=>{const i=s.current;if(i)return Ad(i)},[]),r.jsx(nc,{as:IL,allowPinchZoom:!0,children:r.jsx(V2,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:re(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:re(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),BL=u.forwardRef((e,t)=>{const n=Xa(si,e.__scopePopover),s=u.useRef(!1),a=u.useRef(!1);return r.jsx(V2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=n.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),V2=u.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,...h}=e,m=Xa(si,n),g=rc(n);return Ed(),r.jsx(ec,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:r.jsx(hi,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:r.jsx(md,{"data-state":Y2(m.open),role:"dialog",id:m.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),F2="PopoverClose",$L=u.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=Xa(F2,n);return r.jsx(xe.button,{type:"button",...s,ref:t,onClick:re(e.onClick,()=>a.onOpenChange(!1))})});$L.displayName=F2;var HL="PopoverArrow",qL=u.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=rc(n);return r.jsx(pd,{...a,...s,ref:t})});qL.displayName=HL;function Y2(e){return e?"open":"closed"}var VL=I2,FL=$2,YL=H2,G2=q2;const GL=VL,QL=FL,Q2=u.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},a)=>r.jsx(YL,{children:r.jsx(G2,{ref:a,align:t,sideOffset:n,className:be("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...s})}));Q2.displayName=G2.displayName;const eh="aiTeacherAgentPanelPosition",th="aiTeacherAgentPanelMinimized";function XL({documentId:e,chapter:t,isOpen:n,onToggle:s}){const[a,o]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(!1),[f,h]=u.useState(()=>typeof window<"u"?localStorage.getItem(th)==="true":!1),[m,g]=u.useState(""),[b,x]=u.useState(!1),[w,v]=u.useState(!1),[p,y]=u.useState(0),[S,j]=u.useState(!1),[k,N]=u.useState({}),[E,A]=u.useState(null),[T,I]=u.useState(""),R=u.useRef(null),[$,K]=u.useState(()=>{if(typeof window<"u"){const te=localStorage.getItem(eh);if(te)try{const ne=JSON.parse(te);if(typeof ne.x=="number"&&typeof ne.y=="number")return ne}catch{}}const O=window.innerWidth-400-16,W=window.innerHeight-600-16;return{x:Math.max(20,O),y:Math.max(96,W)}}),[C,D]=u.useState(!1),[H,M]=u.useState({x:0,y:0}),[U,z]=u.useState({x:0,y:0}),P=u.useRef(null),V=u.useRef(null),Q=u.useRef(),{toast:_}=Ht(),{socket:se,isConnected:oe,sessionId:B,currentLanguage:J}=Id(),{translate:q,currentLanguage:Y}=bd(),ae=u.useCallback(()=>{R.current&&R.current.scrollIntoView({behavior:"smooth"})},[]);u.useEffect(()=>{var O;(O=R.current)==null||O.scrollIntoView({behavior:"smooth"})},[a]),u.useEffect(()=>{a.length>1&&B&&de()},[a,B]),u.useEffect(()=>{B&&e&&Re()&&console.log("💾 Loaded saved Teacher Agent conversation")},[B,e]),u.useEffect(()=>{if(Q.current===void 0){Q.current=t;return}if(Q.current!==t&&t!==void 0){(async()=>{let te=`Teaching context updated to Chapter ${t}.`;if(Y!=="en")try{te=await q({text:te,targetLanguage:Y,context:"ui"})}catch(ie){console.error("Failed to translate system message:",ie)}const ne={id:`msg-system-${Date.now()}`,role:"system",content:te,timestamp:new Date,agent:"Teacher Agent"};o(ie=>[...ie,ne])})();let W=`The Teacher Agent is now aware you are on chapter ${t}.`;Y!=="en"?q({text:W,targetLanguage:Y,context:"ui"}).then(te=>{_({title:"Teaching Context Updated",description:te,duration:3e3})}).catch(()=>{_({title:"Teaching Context Updated",description:W,duration:3e3})}):_({title:"Teaching Context Updated",description:W,duration:3e3}),Q.current=t}},[t,_,Y,q]);const ee=()=>`teacher_agent_${e||"general"}_${B}`,de=()=>{try{j(!0);const O={messages:a,documentId:e,chapter:t,lastUpdated:new Date().toISOString(),sessionId:B};localStorage.setItem(ee(),JSON.stringify(O)),setTimeout(()=>j(!1),500)}catch(O){console.error("Failed to save Teacher Agent conversation:",O),j(!1)}},Re=()=>{try{const O=localStorage.getItem(ee());if(O){const W=JSON.parse(O),te=new Date(W.lastUpdated);if((new Date().getTime()-te.getTime())/(1e3*60*60)<24&&W.sessionId===B)return o(W.messages.map(ze=>({...ze,timestamp:new Date(ze.timestamp)}))),!0}return!1}catch(O){return console.error("Failed to load saved Teacher Agent conversation:",O),!1}},fe=()=>{confirm("Are you sure you want to clear this teaching conversation? This action cannot be undone.")&&(o([]),localStorage.removeItem(ee()),_({title:"Teaching Conversation Cleared",description:"Chat history has been cleared.",duration:2e3}))},ye=()=>{const O={title:`Teacher Agent: ${e?`Document ${e}`:"General"} ${t?`- Chapter ${t}`:""}`,timestamp:new Date().toISOString(),messages:a.map(ie=>({role:ie.role,content:ie.content,timestamp:ie.timestamp.toISOString(),agent:ie.agent})),metadata:{documentId:e,chapter:t,sessionId:B,language:J}},W=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),te=URL.createObjectURL(W),ne=document.createElement("a");ne.href=te,ne.download=`teacher-agent-conversation-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),URL.revokeObjectURL(te),_({title:"Conversation Exported",description:"Teaching conversation has been exported successfully.",duration:2e3})};u.useEffect(()=>{if(!se)return;const O=async W=>{if(d(!1),v(!1),W.error)return;console.log(`🎓 Teacher Agent: Received response in language: ${W.language||"unknown"}`),console.log(`🎓 Teacher Agent: User language: ${Y}`);let te=W.message;if(Y!=="en")try{console.log(`🌐 Teacher Agent: Translating response from ${W.language||"unknown"} to ${Y}`),te=await q({text:W.message,targetLanguage:Y,context:"explanation"}),console.log("✅ Teacher Agent: Translation completed")}catch(ne){console.error("Failed to translate teacher response:",ne),te=W.message}o(ne=>[...ne,{id:`teacher-${Date.now()}`,role:"teacher",content:te,timestamp:new Date,agent:"Teacher Agent"}]),setTimeout(ae,100)};return se.on("teacherResponse",O),()=>{se.off("teacherResponse",O)}},[se,ae,Y,q]);const Le=async()=>{if(!i.trim()||!se||!B)return;const O={id:`user-${Date.now()}`,role:"user",content:i,timestamp:new Date};o(te=>[...te,O]),l(""),d(!0),v(!0),y(0);const W=setInterval(()=>{y(te=>te>=90?(clearInterval(W),90):te+10)},200);console.log(`🎓 Teacher Agent: Sending message in language: ${Y}`),se.emit("teacherMessage",{message:O.content,sessionId:B,userId:2,documentId:e,chapter:t,language:Y,conversationHistory:a.map(te=>({id:te.id,role:te.role,content:te.content,timestamp:te.timestamp.toISOString()}))})},He=O=>{g(O.content),x(!0)},Ge=()=>{x(!1),g("")},Ot=async(O,W,te)=>{if(k[O.id])return;const ne={messageId:O.id,feedback:W,reason:te,documentId:e,chapter:t,userId:2,agentId:O.agent||"Teacher Agent",messageContent:O.content};try{await Cs.sendFeedback(ne),N(ie=>({...ie,[O.id]:W})),A(null),I(""),_({title:"Feedback Submitted",description:"Thank you for your feedback! It helps improve the teaching experience.",duration:2e3})}catch(ie){console.error("Failed to submit feedback:",ie),_({title:"Feedback Error",description:"Failed to submit feedback. Please try again.",duration:2e3})}},ln=async(O,W)=>{W==="negative"?A(O):await Ot(O,W)},Qn=()=>{E&&Ot(E,"negative",T)},lt=O=>{O.target.closest("button")||(O.preventDefault(),O.stopPropagation(),D(!0),M({x:O.clientX,y:O.clientY}),z({x:O.clientX-$.x,y:O.clientY-$.y}),P.current&&(P.current.style.cursor="grabbing",P.current.style.transform="scale(1.02)",P.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},At=O=>{C&&(O.preventDefault(),O.stopPropagation(),V.current&&cancelAnimationFrame(V.current),V.current=requestAnimationFrame(()=>{const te=f?64:600,ne=Math.max(10,Math.min(window.innerWidth-400-10,O.clientX-U.x)),ie=Math.max(10,Math.min(window.innerHeight-te-10,O.clientY-U.y));K({x:ne,y:ie})}))},ge=()=>{D(!1),V.current&&(cancelAnimationFrame(V.current),V.current=null),P.current&&(P.current.style.cursor="",P.current.style.transform="",P.current.style.boxShadow="");const O=window.getSelection();O&&O.removeAllRanges(),localStorage.setItem(eh,JSON.stringify($))};return u.useEffect(()=>{if(C){document.addEventListener("mousemove",At,{passive:!1}),document.addEventListener("mouseup",ge,{passive:!0});const O=W=>{if(W.touches.length===1){const te=W.touches[0],ne={preventDefault:()=>W.preventDefault(),stopPropagation:()=>W.stopPropagation(),clientX:te.clientX,clientY:te.clientY};At(ne)}};return document.addEventListener("touchmove",O,{passive:!1}),document.addEventListener("touchend",ge,{passive:!0}),document.body.style.overflow="hidden",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",At),document.removeEventListener("mouseup",ge),document.removeEventListener("touchmove",O),document.removeEventListener("touchend",ge),document.body.style.overflow="",document.body.style.userSelect="",V.current&&(cancelAnimationFrame(V.current),V.current=null)}}},[C,U]),u.useEffect(()=>{localStorage.setItem(eh,JSON.stringify($))},[$]),u.useEffect(()=>{localStorage.setItem(th,f?"true":"false")},[f]),u.useEffect(()=>{n&&o([])},[n]),n?r.jsxs("div",{ref:P,className:"fixed z-50",style:{left:`${$.x}px`,top:`${$.y}px`,transform:"none"},children:[r.jsxs(Ae,{className:`w-96 transition-all duration-300 ${f?"h-16":"h-[600px]"} shadow-2xl border-2 border-orange-200/30 ${C?"select-none cursor-grabbing":""}`,style:{willChange:C?"transform":"auto",transition:C?"box-shadow 0.2s ease-out":"all 0.3s ease-out",zIndex:C?60:50},children:[r.jsx(Ue,{className:`pb-2 bg-gradient-to-r from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20 select-none transition-all duration-200 ${C?"cursor-grabbing bg-gradient-to-r from-orange-100 to-yellow-100 dark:from-orange-800/30 dark:to-yellow-800/30":"cursor-grab hover:from-orange-100 hover:to-yellow-100 dark:hover:from-orange-800/30 dark:hover:to-yellow-800/30"}`,onMouseDown:lt,onDragStart:O=>O.preventDefault(),style:{userSelect:"none",touchAction:"none"},title:"Drag to move",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Ye,{className:"text-lg flex items-center gap-2",children:[r.jsx(Ao,{className:"h-5 w-5 text-orange-600"}),"AI Teacher",r.jsx(Be,{className:`text-xs ${oe?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:oe?"Online":"Offline"}),r.jsxs("div",{className:"flex gap-0.5 ml-2 opacity-50",children:[r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[S&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400 mr-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Saving..."]}),r.jsx(F,{onClick:()=>{h(!f),localStorage.setItem(th,(!f).toString())},className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:f?r.jsx(qr,{className:"h-4 w-4"}):r.jsx(qa,{className:"h-4 w-4"})}),r.jsx(F,{onClick:s,className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:r.jsx(kn,{className:"h-4 w-4"})})]})]})}),!f&&r.jsxs(Me,{className:"p-0 flex flex-col h-[520px]",children:[r.jsx(Ps,{className:"flex-1 p-4",children:r.jsxs("div",{className:"space-y-4",children:[a.length===0?r.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[r.jsx(Ao,{className:"h-12 w-12 mx-auto mb-4 text-orange-500/50"}),r.jsx("p",{className:"text-sm",children:"Welcome to your AI Teacher!"}),r.jsx("p",{className:"text-xs mt-2",children:"Ask me anything for step-by-step explanations and guidance."})]}):a.map((O,W)=>r.jsx("div",{className:`flex ${O.role==="user"?"justify-end":"justify-start"} group ${O.role==="user"?"message-slide-right animate-in":"message-slide-left animate-in"} ${W<5?`message-stagger-${Math.min(W+1,5)}`:""}`,children:r.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 transition-all duration-300 message-bubble-pop gpu-accelerated ${O.role==="user"?"bg-orange-500 text-white hover:scale-[1.02] shadow-lg hover:shadow-xl transform hover:-translate-y-1":O.role==="system"?"bg-orange-100 dark:bg-orange-900 text-orange-900 dark:text-orange-100 hover:bg-orange-200 dark:hover:bg-orange-800 hover:scale-[1.01] insight-sparkle":"bg-muted hover:bg-muted/80 hover:scale-[1.01] shadow-md hover:shadow-lg transform hover:-translate-y-0.5"} ${O.role==="teacher"||O.role==="system"?"cursor-text":""}`,"data-message-id":O.id,"data-message-role":O.role,"data-agent":O.agent||"Teacher Agent",children:[O.agent&&r.jsxs("div",{className:"flex items-center justify-between gap-1 mb-1 text-xs opacity-70 message-header animate-in fade-in delay-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`relative agent-avatar ${O.role==="system"?"agent-thinking":"agent-active"} transition-all duration-300`,children:r.jsx(Ao,{className:"h-3 w-3"})}),r.jsx("span",{className:"font-medium",children:O.agent})]}),(O.role==="teacher"||O.role==="system")&&r.jsx(F,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-orange-500 hover:text-orange-700 opacity-0 group-hover:opacity-100 transition-all duration-300 hover:scale-110 btn-scale",onClick:()=>He(O),title:"Save as note",children:r.jsx(Vn,{className:"h-3 w-3 animate-in bounce-in delay-500"})})]}),r.jsx("p",{className:"text-sm select-text agent-message-content",children:O.content}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs opacity-70 mt-1 timestamp",children:O.timestamp.toLocaleTimeString()}),(O.role==="teacher"||O.role==="system")&&r.jsxs("div",{className:"flex items-center gap-1 mt-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[r.jsx(F,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 hover:text-green-500 disabled:opacity-100 ${k[O.id]==="positive"?"text-green-500":"text-muted-foreground"}`,onClick:()=>ln(O,"positive"),disabled:!!k[O.id],title:"Good explanation",children:r.jsx(ug,{className:"h-3 w-3"})}),r.jsx(F,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 hover:text-red-500 disabled:opacity-100 ${k[O.id]==="negative"?"text-red-500":"text-muted-foreground"}`,onClick:()=>ln(O,"negative"),disabled:!!k[O.id],title:"Needs improvement",children:r.jsx(cg,{className:"h-3 w-3"})})]})]})]})},O.id)),w&&r.jsx(Ud,{isTyping:w,agentType:"discussion",currentProgress:p,estimatedTime:3,customMessage:"Preparing your explanation..."}),r.jsx("div",{ref:R})]})}),r.jsx(ds,{}),r.jsxs("div",{className:"p-4 space-y-2",children:[a.length>0&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx(F,{onClick:fe,variant:"outline",size:"sm",className:"flex-1 px-3 py-2 text-sm border border-red-300 dark:border-red-600 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400",children:"Clear Chat"}),r.jsx(F,{onClick:ye,variant:"outline",size:"sm",className:"flex-1 px-3 py-2 text-sm border border-orange-300 dark:border-orange-600 bg-white dark:bg-gray-800 hover:bg-orange-50 dark:hover:bg-orange-900/20 text-orange-600 dark:text-orange-400",children:"Export"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(it,{placeholder:B?"Ask for step-by-step explanation...":"Connecting...",value:i,onChange:O=>l(O.target.value),onKeyPress:O=>O.key==="Enter"&&Le(),disabled:!oe||!B,className:"flex-1"}),r.jsx(F,{onClick:Le,disabled:!oe||!B||!i.trim(),className:"px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white disabled:opacity-50",children:r.jsx(jd,{className:"h-4 w-4"})})]})]})]})]}),r.jsx(Ld,{isOpen:b,onClose:Ge,selectedText:m,documentId:-3,chapter:t||1,documentTitle:"Teacher Agent",paragraph:0}),r.jsx(Qr,{open:!!E,onOpenChange:O=>!O&&A(null),children:r.jsxs(Va,{children:[r.jsxs(Fa,{children:[r.jsx(Ya,{children:"Provide additional feedback"}),r.jsx(bi,{children:"Your feedback helps improve the teaching experience. Please provide a reason."})]}),r.jsx(fs,{value:T,onChange:O=>I(O.target.value),placeholder:"e.g., This explanation was not clear enough for my level.",className:"my-4"}),r.jsxs(Dd,{children:[r.jsx(F,{variant:"outline",onClick:()=>{A(null),I("")},children:"Cancel"}),r.jsx(F,{onClick:Qn,children:"Submit Feedback"})]})]})})]}):null}function KL({note:e}){return r.jsxs(GL,{children:[r.jsx(QL,{asChild:!0,children:r.jsx("button",{className:"ml-1 align-middle text-amber-500 hover:text-amber-700 focus:outline-none",title:"Show note",children:r.jsx(Vn,{className:"w-4 h-4 inline"})})}),r.jsxs(Q2,{className:"max-w-xs text-sm",children:[r.jsx("div",{className:"font-semibold mb-1 text-amber-700",children:"Your Note"}),r.jsx("div",{className:"text-foreground whitespace-pre-line",children:e})]})]})}function ZL({document:e,chapter:t,annotations:n,onTextSelected:s,currentChapter:a,totalChapters:o,onNextChapter:i,onPrevChapter:l}){const[c,d]=u.useState(0),[f,h]=u.useState(0),[m,g]=u.useState(0),[b]=u.useState(Date.now()),[x,w]=u.useState(null),{toast:v}=Ht(),p=t.paragraphs||[];z2(p);const{startSelection:y}=OL({onSelection:(k,N)=>{if(k&&k.trim()){const E=window.document.createRange();s(k.trim(),E,"note")}}});u.useEffect(()=>{const k=N=>{if(!(N.target instanceof HTMLInputElement||N.target instanceof HTMLTextAreaElement))switch(N.key){case"ArrowLeft":N.preventDefault(),l();break;case"ArrowRight":N.preventDefault(),i();break;case"b":(N.ctrlKey||N.metaKey)&&N.preventDefault();break;case"n":(N.ctrlKey||N.metaKey)&&N.preventDefault();break}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[i,l]),u.useEffect(()=>{const k=setInterval(()=>{h(Math.round((Date.now()-b)/6e4))},3e4);return()=>clearInterval(k)},[b]),u.useEffect(()=>{const k={root:null,rootMargin:"0px",threshold:.8},N=new IntersectionObserver(A=>{A.forEach(T=>{if(T.isIntersecting){const I=T.target,R=parseInt(I.dataset.paragraph||"0");if(R>c){d(R);const K=(I.textContent||"").split(/\s+/).length;g(C=>C+K)}}})},k);return window.document.querySelectorAll("[data-paragraph]").forEach(A=>N.observe(A)),()=>N.disconnect()},[c]),u.useEffect(()=>y(),[y]);const S=k=>{w(x===k?null:k)},j=Ql({mutationFn:async k=>{if(!(await fetch(`/api/annotations/${k}`,{method:"DELETE"})).ok)throw new Error("Failed to delete note");return!0},onSuccess:()=>{xo.invalidateQueries(),v({title:"Note deleted",variant:"default"})},onError:()=>{v({title:"Failed to delete note",variant:"destructive"})}});return r.jsxs("main",{className:"flex-1 overflow-auto bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 reading-content",children:[r.jsx(e6,{onTextSelected:s,onHighlightRemoved:k=>{console.log("Highlight removed:",k)}}),r.jsxs("div",{className:"max-w-4xl mx-auto px-8 py-12",children:[r.jsxs("header",{className:"mb-16 text-center animate-in fade-in-0 slide-in-from-top-4 duration-800",children:[r.jsx("h1",{className:"text-4xl md:text-5xl font-light tracking-tight text-foreground mb-4",children:e.title}),r.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-muted-foreground",children:[r.jsxs("span",{children:["Chapter ",a]}),r.jsx(ds,{orientation:"vertical",className:"h-4"}),r.jsxs("span",{children:[p.length," sections"]}),r.jsx(ds,{orientation:"vertical",className:"h-4"}),r.jsxs("span",{children:["~",Math.round(m/200||p.length*2)," min read"]})]})]}),r.jsx("article",{className:"space-y-8",children:p.map((k,N)=>{const E=n.some(T=>T.paragraph===k.number||T.paragraph===null&&p.length===1),A=x===k.number;return r.jsxs("section",{className:`
                  group relative transition-all duration-500 ease-out cursor-pointer
                  ${k.number<=c?"opacity-100":"opacity-75"}
                  ${A?"scale-105 bg-muted/30 rounded-lg p-6 shadow-lg":"hover:bg-muted/10 rounded-lg p-4"}
                  animate-in slide-in-from-bottom-4 duration-700
                `,style:{animationDelay:`${N*100}ms`},"data-paragraph":k.number,onClick:()=>S(k.number),children:[r.jsx("div",{className:`
                  absolute left-0 top-1/2 -translate-y-1/2 -translate-x-12 opacity-0 group-hover:opacity-100 transition-all duration-300
                  w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium
                  ${E?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}
                `,children:E?r.jsx(Ar,{className:"w-3 h-3"}):k.number}),r.jsxs("div",{className:"relative",children:[r.jsx("p",{className:"text-lg md:text-xl leading-relaxed text-foreground font-light tracking-wide selection:bg-primary/20 document-paragraph","data-paragraph-text":k.number,children:(()=>{let T=k.text;const I=n.filter($=>($.paragraph===k.number||$.paragraph===null&&p.length===1)&&$.selectedText&&$.selectedText.trim().length>0);if(I.length>0&&(console.log(`🎨 Applying ${I.length} highlights to paragraph ${k.number}`),I.forEach($=>{console.log(`🎨 Highlighting: "${$.selectedText}"`)})),I.length===0)return T;I.sort(($,K)=>K.selectedText.length-$.selectedText.length);let R=[T];return I.forEach(($,K)=>{const C=[];let D=!1;R.forEach((H,M)=>{if(typeof H=="string"&&$.selectedText&&H.includes($.selectedText)&&!D){const U=$.selectedText.trim(),z=H.indexOf(U);if(z!==-1){const P=H.substring(0,z),V=H.substring(z+U.length);console.log(`🎯 Highlighting "${U.substring(0,50)}..." (${U.length} chars)`),console.log(`🎯 Found at position ${z}`),console.log(`🎯 Before: "${P.substring(Math.max(0,P.length-20))}"`),console.log(`🎯 After: "${V.substring(0,20)}..."`),P&&C.push(P),C.push(r.jsxs("span",{className:"inline-flex items-center annotation-highlight",children:[r.jsx("mark",{className:"bg-yellow-200 dark:bg-yellow-600 px-1 rounded highlight-text",children:U}),$.note&&r.jsx(KL,{note:$.note})]},`ann-${$.id}-${K}-${M}`)),V&&C.push(V),D=!0}else C.push(H)}else C.push(H)}),R=C}),R})()}),A&&r.jsxs("div",{className:"mt-4 flex items-center gap-2 animate-in slide-in-from-bottom-2 duration-300",children:[r.jsxs(F,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>s(k.text,new Range,"note"),children:[r.jsx(Vn,{className:"w-3 h-3 mr-1"}),"Add Note"]}),r.jsxs(F,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>s(k.text,new Range,"bookmark"),children:[r.jsx(Ar,{className:"w-3 h-3 mr-1"}),"Bookmark"]}),E&&r.jsx(Be,{variant:"secondary",className:"text-xs",children:"Has annotation"})]})]}),E&&r.jsx("div",{className:"mt-4 space-y-3",children:n.filter(T=>T.paragraph===k.number||T.paragraph===null&&p.length===1).map(T=>r.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-amber-700 dark:text-amber-200 mb-1 font-semibold",children:"Highlighted:"}),r.jsxs("div",{className:"italic text-amber-900 dark:text-amber-100 mb-2",children:['"',T.selectedText,'"']}),r.jsx("div",{className:"text-xs text-green-700 dark:text-green-200 mb-1 font-semibold",children:"Your Note:"}),r.jsx("div",{className:"text-green-900 dark:text-green-100",children:T.note})]}),r.jsx("button",{className:"ml-4 text-xs text-red-600 hover:underline",onClick:I=>{I.stopPropagation(),j.mutate(T.id)},disabled:j.isPending,title:"Delete note",children:"Delete"})]})},T.id))})]},k.number)})}),r.jsx("footer",{className:"mt-20 pt-12 border-t border-border/50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(F,{variant:"outline",onClick:l,disabled:a<=1,className:"group hover:scale-105 transition-all duration-200",children:[r.jsx(Ha,{className:"w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform"}),"Previous Chapter"]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-light text-muted-foreground",children:[a," / ",o]}),r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Use ← → arrow keys to navigate"})]}),r.jsxs(F,{variant:"outline",onClick:i,disabled:a>=o,className:"group hover:scale-105 transition-all duration-200",children:["Next Chapter",r.jsx(f_,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})})]})]})}function WL(){var At;const e=_w(),[,t]=$r(),[n,s]=u.useState(!1),[a,o]=u.useState(!1),[i,l]=u.useState(null),[c,d]=u.useState(1),[f,h]=u.useState(!1),[m,g]=u.useState(""),[b,x]=u.useState(null),[w,v]=u.useState(()=>typeof window<"u"?localStorage.getItem("aiChatOpen")==="true":!1),[p,y]=u.useState(()=>typeof window<"u"?localStorage.getItem("autoLearningOpen")==="true":!1),[S,j]=u.useState(()=>typeof window<"u"?localStorage.getItem("chapterNotesOpen")==="true":!1),[k,N]=u.useState(()=>typeof window<"u"?localStorage.getItem("discussionAgentOpen")==="true":!1),[E,A]=u.useState(()=>typeof window<"u"?localStorage.getItem("powerSummariesOpen")==="true":!1),[T,I]=u.useState(()=>typeof window<"u"?localStorage.getItem("quizAgentOpen")==="true":!1),[R,$]=u.useState(()=>typeof window<"u"?localStorage.getItem("voiceReaderOpen")==="true":!1),[K,C]=u.useState(()=>typeof window<"u"?localStorage.getItem("teacherAgentOpen")==="true":!1),[D,H]=u.useState(null);u.useRef(null);const{toast:M}=Ht(),U=e.documentId?parseInt(e.documentId):null,z=e.chapter?parseInt(e.chapter):1,{data:P}=Sn({queryKey:[`/api/documents/${U}`],queryFn:()=>rs(`/api/documents/${U}`),enabled:!!U}),{data:V,error:Q,isLoading:_}=Sn({queryKey:[`/api/documents/${U}/chapters/${z}`],queryFn:()=>rs(`/api/documents/${U}/chapters/${z}`),enabled:!!U}),{data:se=[],refetch:oe}=Sn({queryKey:[`/api/annotations/${U}/${z}`],queryFn:()=>rs(`/api/annotations/${U}/${z}`),enabled:!!U});u.useEffect(()=>{se.length>0&&console.log("📚 Loaded annotations:",se)},[se]),u.useCallback(ge=>{document.querySelectorAll(".highlight-text[data-annotation-id]").forEach(W=>{const te=W.nextSibling;if(te&&te.nodeType===Node.TEXT_NODE){const ne=W.textContent||"",ie=te.textContent||"";te.textContent=ne+ie}W.remove()}),ge.forEach(W=>{W.selectedText&&B(W.selectedText,W.id)})},[]);const B=u.useCallback((ge,O)=>{var ie,ze;const W=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null),te=[];let ne;for(;ne=W.nextNode();)te.push(ne);for(const X of te){const G=X.textContent||"",ce=G.indexOf(ge);if(ce!==-1){const he=document.createElement("span");he.className="highlight-text bg-yellow-200 dark:bg-yellow-800/40",he.setAttribute("data-highlight-id",O?`annotation-${O}`:`highlight-${Date.now()}`),O&&he.setAttribute("data-annotation-id",O),he.textContent=ge,he.title="Annotated text";const Ne=G.substring(0,ce),qe=G.substring(ce+ge.length);if(Ne){const vt=document.createTextNode(Ne);(ie=X.parentNode)==null||ie.insertBefore(vt,X)}(ze=X.parentNode)==null||ze.insertBefore(he,X),X.textContent=qe;break}}},[U,z,M]);u.useEffect(()=>{P&&l(P)},[P]),u.useEffect(()=>{V&&d(z)},[V,z]),u.useEffect(()=>{const ge=O=>{const W=O.target;if(W.classList.contains("highlight-text")&&(O.preventDefault(),O.stopPropagation(),confirm("Remove this highlight?"))){const te=W.getAttribute("data-annotation-id");te?fetch(`/api/annotations/${te}`,{method:"DELETE"}).then(ie=>{if(ie.ok)xo.invalidateQueries({queryKey:[`/api/annotations/${U}/${z}`]}),xo.invalidateQueries({queryKey:["/api/annotations"]}),M({title:"Highlight removed",description:"The highlight has been permanently removed."});else throw new Error("Failed to delete annotation")}).catch(ie=>{console.error("Failed to delete annotation:",ie),M({title:"Error",description:"Failed to remove highlight. Please try again.",variant:"destructive"})}):M({title:"Highlight removed",description:"The highlight has been removed."});const ne=W.nextSibling;if(ne&&ne.nodeType===Node.TEXT_NODE){const ie=W.textContent||"",ze=ne.textContent||"";ne.textContent=ie+ze}W.remove()}};return document.addEventListener("click",ge),()=>document.removeEventListener("click",ge)},[U,z,M]);const J=(ge,O=1)=>{t(`/reader/${ge.id}/${O}`)},q=(ge,O,W)=>{var ze,X;if(!i||!U||!c)return;const te=ge.replace(/\s+/g," ").trim();ge!==te&&(console.log("🧹 Text was cleaned:"),console.log("🧹 Original:",`"${ge}"`),console.log("🧹 Cleaned:",`"${te}"`),console.log("🧹 Length difference:",ge.length-te.length));let ne=null,ie=O.startContainer;if(ie.nodeType===Node.TEXT_NODE&&(ie=ie.parentElement),ie instanceof Element){const G=ie.closest("[data-paragraph]");if(G)ne=parseInt(G.getAttribute("data-paragraph")||"0"),console.log("📍 Found paragraph section with number:",ne);else{const ce=ie.closest("[data-paragraph-text]");ce?(ne=parseInt(ce.getAttribute("data-paragraph-text")||"0"),console.log("📍 Found paragraph text element with number:",ne)):(console.log("⚠️ Could not find paragraph section with data-paragraph attribute"),console.log("🔍 Current element:",ie),console.log("🔍 Element className:",ie.className),console.log("🔍 Element tagName:",ie.tagName))}}if(ne===null){const G=V==null?void 0:V.chapter;i&&((ze=G==null?void 0:G.paragraphs)==null?void 0:ze.length)===1&&(ne=G.paragraphs[0].number,console.log("📍 Using fallback paragraph number:",ne))}if(console.log("📝 Selected text:",ge),console.log("📝 Text length:",ge.length),console.log("📝 Cleaned text:",te),console.log("📝 Detected paragraph:",ne),O.startContainer&&O.endContainer&&(console.log("📍 Selection start:",O.startOffset),console.log("📍 Selection end:",O.endOffset),console.log("📍 Start container:",((X=O.startContainer.textContent)==null?void 0:X.substring(0,50))+"..."),console.log("📍 Selected range text:",O.toString())),W==="note")g(te),x(ne),h(!0);else if(W==="highlight")g(te),x(ne),h(!0);else if(W==="bookmark")try{const G=_N({title:`Bookmark from ${i.title} Chapter ${c}`,content:ge,documentId:(U==null?void 0:U.toString())||"",documentTitle:i.title,chapter:c,paragraph:ne||void 0,folder:"General",tags:["manual"],notes:`Bookmarked from ${i.title} Chapter ${c}`});M({title:"Bookmark created",description:"Your bookmark has been saved to your collection."})}catch(G){console.error("Failed to save bookmark:",G),M({title:"Error",description:"Failed to save bookmark. Please try again.",variant:"destructive"})}else console.log("Text selected without specific action:",ge)},Y=()=>{g(""),x(null),h(!1);const ge=window.getSelection();ge&&ge.removeAllRanges()},ae=()=>{s(ge=>{const O=!ge;return M({title:O?"Sidebar Closed":"Sidebar Opened",description:O?"Navigation panel has been hidden":"Navigation panel is now visible",duration:1e3}),O})},ee=()=>{o(!a),M({title:a?"Light Mode Enabled":"Dark Mode Enabled",description:a?"Switched to light theme":"Switched to dark theme",duration:1e3})},de=u.useCallback(()=>{const ge=typeof(i==null?void 0:i.content)=="string"?JSON.parse(i.content).totalChapters:(i==null?void 0:i.totalChapters)||1;U&&c<ge&&(document.querySelectorAll(".highlight-text[data-annotation-id]").forEach(W=>W.remove()),t(`/reader/${U}/${c+1}`),M({title:`Chapter ${c+1}`,description:"Moving to next chapter",duration:1e3}))},[c,i,U,t,M]),Re=u.useCallback(()=>{U&&c>1&&(document.querySelectorAll(".highlight-text[data-annotation-id]").forEach(O=>O.remove()),t(`/reader/${U}/${c-1}`),M({title:`Chapter ${c-1}`,description:"Moving to previous chapter",duration:1e3}))},[c,U,t,M]),fe=()=>{v(!w),M({title:w?"AI Chat Closed":"AI Chat Opened",description:w?"AI chat has been closed":"AI assistant is ready to help",duration:1500})},ye=()=>{y(!p),M({title:p?"Auto Learning Deactivated":"Auto Learning Activated",description:p?"Auto learning has been turned off":"AI is now learning from your reading",duration:1500})},Le=()=>{j(!S),M({title:S?"Chapter Notes Closed":"Chapter Notes Opened",description:S?"Chapter notes have been closed":"AI-generated chapter insights available",duration:1500})},He=()=>{const ge=!k;N(ge),ge&&H("discussion"),M({title:ge?"Discussion Agent Activated":"Discussion Agent Closed",description:ge?"Ready to discuss chapter content":"Discussion has been closed",duration:1500})},Ge=()=>{A(!E),M({title:E?"Power Summaries Closed":"Power Summaries Opened",description:E?"Power summaries have been closed":"AI-powered chapter summaries available",duration:1500})},Ot=()=>{I(!T),M({title:T?"Quiz Agent Closed":"Quiz Agent Opened",description:T?"Quiz agent has been closed":"Ready to create quizzes about this content",duration:1500})},ln=()=>{$(!R),M({title:R?"Voice Reader Closed":"Voice Reader Opened",description:R?"Voice reader has been closed":"AI voice reader is ready to narrate content",duration:1500})},Qn=()=>{const ge=!K;C(ge),localStorage.setItem("teacherAgentOpen",ge.toString())};if(u.useEffect(()=>{localStorage.setItem("aiChatOpen",w?"true":"false")},[w]),u.useEffect(()=>{localStorage.setItem("autoLearningOpen",p?"true":"false")},[p]),u.useEffect(()=>{localStorage.setItem("chapterNotesOpen",S?"true":"false")},[S]),u.useEffect(()=>{localStorage.setItem("discussionAgentOpen",k?"true":"false")},[k]),u.useEffect(()=>{localStorage.setItem("powerSummariesOpen",E?"true":"false")},[E]),u.useEffect(()=>{localStorage.setItem("quizAgentOpen",T?"true":"false")},[T]),u.useEffect(()=>{localStorage.setItem("voiceReaderOpen",R?"true":"false")},[R]),u.useEffect(()=>{if(!(!U||!c))try{const ge=JSON.parse(localStorage.getItem("readingPositions")||"{}");ge[U]={chapter:c},localStorage.setItem("readingPositions",JSON.stringify(ge))}catch{}},[U,c]),!U||!i)return r.jsx(Tm,{onSelectDocument:J});if(!V)return Q?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center animate-in scale-in duration-500",children:[r.jsx("h2",{className:"text-2xl font-semibold text-destructive mb-2",children:"Error Loading Document"}),r.jsx("p",{className:"text-muted-foreground",children:"Failed to load the document. Please try again."}),r.jsx(F,{onClick:()=>t("/"),className:"mt-4",children:"Back to Library"})]})}):_?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center animate-in fade-in duration-500",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-medium mb-2",children:"Loading Document"}),r.jsx("p",{className:"text-muted-foreground",children:"Preparing your reading experience..."})]})}):null;const lt=V.chapter;return console.log("📖 DocumentReader - currentChapterData:",lt),console.log("📖 DocumentReader - paragraphs:",lt==null?void 0:lt.paragraphs),console.log("📖 DocumentReader - paragraphs length:",(At=lt==null?void 0:lt.paragraphs)==null?void 0:At.length),r.jsx("div",{className:`min-h-screen theme-transition-root ${a?"dark":""}`,children:r.jsxs("div",{className:"bg-background text-foreground theme-transition-content",children:[r.jsx(vD,{book:i.title,chapter:c,darkMode:a,onToggleDarkMode:ee,onToggleAiChat:fe,onToggleAutoLearning:ye,onToggleChapterNotes:Le,onToggleDiscussionAgent:He,onTogglePowerSummaries:Ge,onToggleQuizAgent:Ot,onToggleTeacherAgent:Qn,aiChatOpen:w,autoLearningOpen:p,chapterNotesOpen:S,discussionAgentOpen:k,powerSummariesOpen:E,quizAgentOpen:T,teacherAgentOpen:K}),r.jsxs("div",{className:"flex relative",children:[r.jsx(OD,{isOpen:n,onToggle:ae,currentPage:"reader",documentId:i.id,currentChapter:c,totalChapters:typeof i.content=="string"?JSON.parse(i.content).totalChapters:i.totalChapters}),r.jsx("div",{className:`flex-1 transition-all duration-500 ease-out ${n?"lg:ml-72":"lg:ml-16"} ml-0`,children:r.jsx(ZL,{document:i,chapter:lt,annotations:se,onTextSelected:q,currentChapter:c,totalChapters:typeof i.content=="string"?JSON.parse(i.content).totalChapters:i.totalChapters,onNextChapter:de,onPrevChapter:Re})})]}),r.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col space-y-3 z-40",children:[r.jsx(F,{onClick:ln,size:"lg",className:`w-14 h-14 rounded-full shadow-xl transition-all duration-300 ${R?"bg-green-500 scale-110 shadow-green-500/30":"bg-secondary hover:scale-105"}`,title:"AI Voice Reader",children:r.jsx(xS,{className:"w-6 h-6"})}),r.jsx(F,{onClick:He,size:"lg",className:`w-14 h-14 rounded-full shadow-xl transition-all duration-300 ${k?"bg-blue-500 scale-110 shadow-blue-500/30":"bg-secondary hover:scale-105"}`,title:"AI Discussion Panel",children:r.jsx(Nn,{className:"w-6 h-6"})}),r.jsx(F,{onClick:fe,size:"lg",className:`w-14 h-14 rounded-full shadow-xl transition-all duration-300 ${w?"bg-primary scale-110 shadow-primary/30":"bg-secondary hover:scale-105"}`,title:"AI Chat Assistant",children:r.jsx(ka,{className:"w-6 h-6"})})]}),U&&r.jsxs(r.Fragment,{children:[r.jsx(g6,{documentId:U,chapter:c,isOpen:w,onToggle:fe}),r.jsx(E6,{documentId:U,chapter:c,isOpen:k,onToggle:He,currentBook:i.title}),r.jsx(j6,{documentId:U,documentTitle:i.title,isOpen:p,onToggle:ye}),r.jsx(C6,{documentId:U,chapter:c,isVisible:S,onToggle:Le}),r.jsx(k6,{documentId:U,currentChapter:c,currentChapterData:lt,isVisible:E,onToggle:Ge}),r.jsx(O6,{documentId:U,chapter:c,isOpen:T,onToggle:Ot}),r.jsx(_L,{content:(lt==null?void 0:lt.paragraphs)||[],documentId:U,currentChapter:c,onNavigateNext:de,canNavigateNext:c<(typeof(i==null?void 0:i.content)=="string"?JSON.parse(i.content).totalChapters:(i==null?void 0:i.totalChapters)||1),isOpen:R,onToggle:ln})]}),r.jsx(Ld,{isOpen:f,onClose:Y,selectedText:m,documentId:U||0,documentTitle:i.title,chapter:c,paragraph:b,onAnnotationSaved:ge=>{console.log("🎉 Annotation saved:",ge),console.log("📝 Selected text:",m),console.log("📄 Paragraph:",b),xo.setQueryData([`/api/annotations/${U}/${c}`],O=>{const W={...ge,id:ge.id||Date.now(),documentId:U,chapter:c,selectedText:m.replace(/\s+/g," ").trim(),note:ge.note,paragraph:b,createdAt:ge.createdAt||new Date().toISOString()};return console.log("✅ New annotation to cache:",W),O?[...O,W]:[W]}),xo.invalidateQueries({queryKey:[`/api/annotations/${U}/${c}`]})}}),U&&r.jsx(XL,{documentId:U,chapter:c,isOpen:K,onToggle:Qn})]})})}function JL(){var f,h,m,g,b,x,w,v,p,y,S,j,k,N,E,A,T,I,R,$,K,C,D;const[e,t]=u.useState(5e3),{data:n,isLoading:s,refetch:a}=Sn({queryKey:["/api/performance"],queryFn:()=>fetch("/api/performance").then(H=>H.json()),refetchInterval:e}),{data:o}=Sn({queryKey:["/api/performance/live"],queryFn:()=>fetch("/api/performance/live").then(H=>H.json()),refetchInterval:2e3});if(s)return r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading performance metrics..."})]})})});const i=n||{},l=o||{},c=(H,M)=>H<=M.good?"text-green-600":H<=M.warning?"text-yellow-600":"text-red-600",d=(H,M)=>H<=M.good?r.jsx(Nm,{className:"w-4 h-4 text-green-600"}):H<=M.warning?r.jsx(ko,{className:"w-4 h-4 text-yellow-600"}):r.jsx(ko,{className:"w-4 h-4 text-red-600"});return r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ha,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold",children:"Performance Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Real-time system and AI performance monitoring"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(F,{onClick:()=>a(),variant:"outline",children:"Refresh"}),r.jsx(F,{onClick:()=>t(H=>H===5e3?1e3:5e3),variant:"outline",children:e===1e3?"Slow Refresh":"Fast Refresh"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(Ae,{children:[r.jsxs(Ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ye,{className:"text-sm font-medium",children:"API Response Time"}),r.jsx(Sm,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Me,{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"text-2xl font-bold",children:[((f=i.api)==null?void 0:f.averageResponseTime)||0,"ms"]}),d(((h=i.api)==null?void 0:h.averageResponseTime)||0,{good:100,warning:500})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[((m=i.api)==null?void 0:m.totalRequests)||0," total requests"]})]})]}),r.jsxs(Ae,{children:[r.jsxs(Ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ye,{className:"text-sm font-medium",children:"Memory Usage"}),r.jsx(Q_,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Me,{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"text-2xl font-bold",children:((b=(g=i.system)==null?void 0:g.memory)==null?void 0:b.used)||"N/A"}),r.jsx(dg,{className:"h-4 w-4 text-green-600"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",((w=(x=i.system)==null?void 0:x.memory)==null?void 0:w.total)||"N/A"," total"]})]})]}),r.jsxs(Ae,{children:[r.jsxs(Ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ye,{className:"text-sm font-medium",children:"Database Queries"}),r.jsx(iS,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Me,{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"text-2xl font-bold",children:[((v=i.database)==null?void 0:v.averageQueryTime)||"N/A","ms"]}),d(((p=i.database)==null?void 0:p.averageQueryTime)||0,{good:50,warning:200})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[((y=i.database)==null?void 0:y.totalQueries)||0," total queries"]})]})]}),r.jsxs(Ae,{children:[r.jsxs(Ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ye,{className:"text-sm font-medium",children:"System Uptime"}),r.jsx(Jl,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Me,{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"text-2xl font-bold",children:((S=i.system)==null?void 0:S.uptime)||"N/A"}),r.jsx(Nm,{className:"h-4 w-4 text-green-600"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Node.js ",((j=i.system)==null?void 0:j.nodeVersion)||"N/A"]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Ae,{children:[r.jsxs(Ue,{children:[r.jsx(Ye,{children:"AI Service Status"}),r.jsx(In,{children:"Ollama and AI model performance"})]}),r.jsxs(Me,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Ollama Connection"}),r.jsx("span",{className:`text-sm ${((k=i.ollama)==null?void 0:k.status)==="optimized"?"text-green-600":"text-red-600"}`,children:((N=i.ollama)==null?void 0:N.status)||"Unknown"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Model"}),r.jsx("span",{className:"text-sm",children:((E=i.ollama)==null?void 0:E.model)||"N/A"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Cache Hit Rate"}),r.jsxs("span",{className:"text-sm",children:[((A=i.api)==null?void 0:A.cacheHitRate)||0,"%"]})]}),r.jsx(Vu,{value:((T=i.api)==null?void 0:T.cacheHitRate)||0,className:"w-full"})]})]}),r.jsxs(Ae,{children:[r.jsxs(Ue,{children:[r.jsx(Ye,{children:"Recent Slow Queries"}),r.jsx(In,{children:"API endpoints taking longer than 500ms"})]}),r.jsx(Me,{children:r.jsx("div",{className:"space-y-2",children:((R=(I=i.api)==null?void 0:I.slowQueries)==null?void 0:R.slice(0,5).map((H,M)=>r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"font-medium",children:H.endpoint}),r.jsxs("span",{className:c(H.duration,{good:500,warning:1e3}),children:[H.duration.toFixed(0),"ms"]})]},M)))||r.jsx("p",{className:"text-sm text-muted-foreground",children:"No slow queries detected"})})})]})]}),i.recommendations&&i.recommendations.length>0&&r.jsxs(Ae,{children:[r.jsxs(Ue,{children:[r.jsx(Ye,{children:"Performance Recommendations"}),r.jsx(In,{children:"Suggestions to improve system performance"})]}),r.jsx(Me,{children:r.jsx("div",{className:"space-y-2",children:i.recommendations.map((H,M)=>r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(ko,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),r.jsx("span",{className:"text-sm",children:H})]},M))})})]}),l&&r.jsxs(Ae,{children:[r.jsxs(Ue,{children:[r.jsx(Ye,{children:"Live Metrics"}),r.jsx(In,{children:"Real-time system metrics (updates every 2 seconds)"})]}),r.jsx(Me,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Requests/min:"})," ",(($=l.api)==null?void 0:$.requestsPerMinute)||0]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Current Response Time:"})," ",((C=(K=l.api)==null?void 0:K.currentResponseTime)==null?void 0:C.toFixed(0))||0,"ms"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Memory Used:"})," ",Math.round(((D=l.memory)==null?void 0:D.heapUsed)/1024/1024)||0,"MB"]})]})})]})]})})}const ez=wd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),X2=u.forwardRef(({className:e,variant:t,...n},s)=>r.jsx("div",{ref:s,role:"alert",className:be(ez({variant:t}),e),...n}));X2.displayName="Alert";const tz=u.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:be("mb-1 font-medium leading-none tracking-tight",e),...t}));tz.displayName="AlertTitle";const K2=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:be("text-sm [&_p]:leading-relaxed",e),...t}));K2.displayName="AlertDescription";function nz(){var v;const[e,t]=u.useState(null),{data:n,isLoading:s,error:a,refetch:o}=Sn({queryKey:["/api/intelligence/agents/status"],queryFn:()=>fetch("/api/intelligence/agents/status").then(p=>p.json()),refetchInterval:3e4}),{data:i,isLoading:l}=Sn({queryKey:["/api/intelligence/models/available"],queryFn:()=>fetch("/api/intelligence/models/available").then(p=>p.json())}),{data:c,isLoading:d}=Sn({queryKey:["/api/intelligence/agents/interactions"],queryFn:()=>fetch("/api/intelligence/agents/interactions").then(p=>p.json()),refetchInterval:6e4}),f=(n==null?void 0:n.agents)||[],h=((v=i==null?void 0:i.data)==null?void 0:v.availableModels)||[],m=(c==null?void 0:c.interactions)||[],g=p=>{switch(p){case"active":return"bg-green-500";case"busy":return"bg-yellow-500";case"inactive":return"bg-gray-500";default:return"bg-gray-500"}},b=p=>{switch(p){case"active":return"Active";case"busy":return"Busy";case"inactive":return"Inactive";default:return"Unknown"}},x=p=>new Date(p).toLocaleString(),w=p=>{const y=Math.floor(p/36e5),S=Math.floor(p%(1e3*60*60)/(1e3*60));return y>0?`${y}h ${S}m`:`${S}m`};return s?r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading agent dashboard..."})]})})}):r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ha,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold",children:"AI Agent Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage and monitor your AI agents"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(F,{onClick:()=>o(),variant:"outline",children:[r.jsx(ol,{className:"w-4 h-4 mr-2"}),"Refresh"]}),r.jsxs(F,{variant:"outline",children:[r.jsx(Ro,{className:"w-4 h-4 mr-2"}),"Settings"]})]})]}),a&&r.jsxs(X2,{variant:"destructive",children:[r.jsx(ko,{className:"h-4 w-4"}),r.jsx(K2,{children:"Failed to load agent data. Please check your connection and try again."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(Ae,{children:[r.jsxs(Ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ye,{className:"text-sm font-medium",children:"Active Agents"}),r.jsx(Nn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Me,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f.filter(p=>p.status==="active").length}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",f.length," total agents"]})]})]}),r.jsxs(Ae,{children:[r.jsxs(Ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ye,{className:"text-sm font-medium",children:"Tasks Completed"}),r.jsx(Sm,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Me,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f.reduce((p,y)=>p+y.tasksCompleted,0)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"across all agents"})]})]}),r.jsxs(Ae,{children:[r.jsxs(Ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ye,{className:"text-sm font-medium",children:"Avg Response Time"}),r.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Me,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[f.length>0?Math.round(f.reduce((p,y)=>p+y.averageResponseTime,0)/f.length):0,"ms"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"system average"})]})]}),r.jsxs(Ae,{children:[r.jsxs(Ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Ye,{className:"text-sm font-medium",children:"Available Models"}),r.jsx(xn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Me,{children:[r.jsx("div",{className:"text-2xl font-bold",children:h.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"AI models ready"})]})]})]}),r.jsxs(zj,{defaultValue:"agents",className:"space-y-6",children:[r.jsxs(Mg,{children:[r.jsx(vr,{value:"agents",children:"Agents"}),r.jsx(vr,{value:"models",children:"Models"}),r.jsx(vr,{value:"interactions",children:"Interactions"})]}),r.jsx(yr,{value:"agents",className:"space-y-6",children:f.length>0?r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:f.map((p,y)=>r.jsxs(Ae,{className:`cursor-pointer transition-all hover:shadow-lg ${e===p.name?"ring-2 ring-primary":""}`,children:[r.jsxs(Ue,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ye,{className:"text-lg",children:p.name}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${g(p.status)}`}),r.jsx(Be,{variant:p.status==="active"?"default":p.status==="busy"?"secondary":"outline",children:b(p.status)})]})]}),r.jsx(In,{children:p.description})]}),r.jsxs(Me,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Tasks:"})," ",p.tasksCompleted]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Avg Time:"})," ",p.averageResponseTime,"ms"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Uptime:"})," ",w(p.uptime)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Last Activity:"})," ",p.lastActivity]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Specialties:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:p.specialties.map((S,j)=>r.jsx(Be,{variant:"outline",className:"text-xs",children:S},j))})]})]})]},y))}):r.jsx(Ae,{children:r.jsxs(Me,{className:"p-8 text-center",children:[r.jsx(Nn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Agents Available"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"No AI agents are currently running or configured."}),r.jsxs(F,{children:[r.jsx(Ro,{className:"w-4 h-4 mr-2"}),"Configure Agents"]})]})})}),r.jsx(yr,{value:"models",className:"space-y-6",children:l?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 border-b-2 border-primary mr-2"}),r.jsx("span",{children:"Loading models..."})]}):h.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((p,y)=>r.jsxs(Ae,{className:"cursor-pointer transition-all hover:shadow-lg",children:[r.jsxs(Ue,{children:[r.jsx(Ye,{className:"text-lg",children:p.name}),r.jsx(In,{children:p.description})]}),r.jsxs(Me,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{children:"Status:"}),r.jsx(Be,{variant:p.status==="available"?"default":"secondary",children:p.status})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{children:"Parameters:"}),r.jsx("span",{children:p.parameters||"N/A"})]})]})]},y))}):r.jsx(Ae,{children:r.jsxs(Me,{className:"p-8 text-center",children:[r.jsx(xn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Models Available"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"No AI models are currently available or configured."}),r.jsxs(F,{children:[r.jsx(Ro,{className:"w-4 h-4 mr-2"}),"Configure Models"]})]})})}),r.jsx(yr,{value:"interactions",className:"space-y-6",children:d?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 border-b-2 border-primary mr-2"}),r.jsx("span",{children:"Loading interactions..."})]}):m.length>0?r.jsx("div",{className:"space-y-4",children:m.map(p=>r.jsxs(Ae,{children:[r.jsx(Ue,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Be,{variant:"outline",children:p.agentName}),r.jsx(Be,{variant:"secondary",children:p.type})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[r.jsx(Jl,{className:"w-4 h-4"}),r.jsx("span",{children:x(p.timestamp)}),p.success?r.jsx(Nm,{className:"w-4 h-4 text-green-500"}):r.jsx(ko,{className:"w-4 h-4 text-red-500"})]})]})}),r.jsxs(Me,{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Request:"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:p.message})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Response:"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:p.response})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Response Time: ",p.responseTime,"ms"]}),r.jsxs("span",{children:["Status: ",p.success?"Success":"Failed"]})]})]})]},p.id))}):r.jsx(Ae,{children:r.jsxs(Me,{className:"p-8 text-center",children:[r.jsx(Sm,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Interactions Yet"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"No agent interactions have been recorded yet. Start using your AI agents to see their activity here."}),r.jsxs(F,{variant:"outline",onClick:()=>window.location.reload(),children:[r.jsx(ol,{className:"w-4 h-4 mr-2"}),"Refresh Data"]})]})})})]})]})})}function sz(){const[e,t]=$r(),[n,s]=u.useState(""),[a,o]=u.useState("all"),[i,l]=u.useState([]),[c,d]=u.useState(!1);u.useEffect(()=>{n.trim()?f():l([])},[n,a]);const f=()=>{d(!0);const x=n.trim();if(!x){l([]),d(!1);return}const w=[];(a==="all"||a==="bookmark")&&AD(x).forEach(p=>{w.push({id:p.id,title:p.title,content:p.content,type:"bookmark",documentId:p.documentId,documentTitle:p.documentTitle,chapter:p.chapter,timestamp:p.timestamp,tags:p.tags,folder:p.folder})}),(a==="all"||a==="note")&&TD(x).forEach(p=>{w.push({id:p.id,title:p.title,content:p.content,type:"note",documentId:p.documentId,documentTitle:p.documentTitle,chapter:p.chapter,timestamp:p.timestamp,tags:p.tags,category:p.category})}),(a==="all"||a==="highlight")&&RD(x).forEach(p=>{w.push({id:p.id,title:`Highlight from ${p.documentTitle}`,content:p.text,type:"highlight",documentId:p.documentId,documentTitle:p.documentTitle,chapter:p.chapter,timestamp:p.timestamp,color:p.color})}),w.sort((v,p)=>p.timestamp-v.timestamp),l(w),d(!1)},h=x=>{x.documentId&&x.chapter&&t(`/reader/${x.documentId}/${x.chapter}`)},m=x=>{switch(x){case"document":return r.jsx($n,{className:"w-4 h-4"});case"note":return r.jsx(Vn,{className:"w-4 h-4"});case"highlight":return r.jsx(Pu,{className:"w-4 h-4"});case"bookmark":return r.jsx(Ar,{className:"w-4 h-4"});default:return r.jsx($n,{className:"w-4 h-4"})}},g=x=>{switch(x){case"note":return"bg-green-100 text-green-700";case"highlight":return"bg-yellow-100 text-yellow-700";case"bookmark":return"bg-purple-100 text-purple-700";default:return"bg-blue-100 text-blue-700"}},b=x=>x&&{"bg-yellow-200 dark:bg-yellow-800/40":"bg-yellow-200 dark:bg-yellow-800/40","bg-blue-200 dark:bg-blue-800/40":"bg-blue-200 dark:bg-blue-800/40","bg-green-200 dark:bg-green-800/40":"bg-green-200 dark:bg-green-800/40","bg-pink-200 dark:bg-pink-800/40":"bg-pink-200 dark:bg-pink-800/40","bg-purple-200 dark:bg-purple-800/40":"bg-purple-200 dark:bg-purple-800/40","bg-orange-200 dark:bg-orange-800/40":"bg-orange-200 dark:bg-orange-800/40"}[x]||"";return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ha,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Search"}),r.jsx("p",{className:"text-muted-foreground",children:"Search through your documents, notes, highlights, and bookmarks"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(it,{placeholder:"Search for content, notes, or highlights...",value:n,onChange:x=>s(x.target.value),className:"pl-10"})]})}),r.jsxs(Or,{value:a,onValueChange:x=>o(x),children:[r.jsx(Pa,{className:"w-40",children:r.jsx(Dr,{placeholder:"Type"})}),r.jsxs(Ia,{children:[r.jsx(Gt,{value:"all",children:"All Types"}),r.jsx(Gt,{value:"document",children:"Documents"}),r.jsx(Gt,{value:"note",children:"Notes"}),r.jsx(Gt,{value:"highlight",children:"Highlights"}),r.jsx(Gt,{value:"bookmark",children:"Bookmarks"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[c&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Searching..."})]}),!c&&n&&i.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Tr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No results found"}),r.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search terms or filters"})]}),!c&&i.map(x=>r.jsxs(Ae,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 group",onClick:()=>h(x),children:[r.jsx(Ue,{className:"pb-3",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m(x.type),r.jsx(Be,{variant:"secondary",className:g(x.type),children:x.type.charAt(0).toUpperCase()+x.type.slice(1)})]}),r.jsx(Ye,{className:"text-lg line-clamp-2 group-hover:text-primary transition-colors",children:x.title}),x.documentTitle&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[r.jsx($n,{className:"w-3 h-3"}),r.jsx("span",{children:x.documentTitle}),x.chapter&&r.jsxs("span",{children:["Chapter ",x.chapter]})]})]})})}),r.jsxs(Me,{className:"pt-0",children:[r.jsx("div",{className:`p-3 rounded-lg mb-3 ${x.color?b(x.color):"bg-muted/50"}`,children:r.jsx("p",{className:"text-sm line-clamp-3",children:x.content})}),r.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Wl,{className:"w-3 h-3"}),new Date(x.timestamp).toLocaleDateString(),x.category&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"•"}),r.jsx("span",{children:x.category})]}),x.folder&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"•"}),r.jsx("span",{children:x.folder})]})]})}),x.tags&&x.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:x.tags.map(w=>r.jsxs(Be,{variant:"outline",className:"text-xs",children:[r.jsx(lg,{className:"w-2 h-2 mr-1"}),w]},w))})]})]},x.id)),!c&&i.length>0&&r.jsx("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:r.jsxs("span",{children:[i.length," result",i.length!==1?"s":""," found"]})})]})]})}function az(){var K;const[e,t]=$r(),{toast:n}=Ht(),[s,a]=u.useState([]),[o,i]=u.useState(""),[l,c]=u.useState("all"),[d,f]=u.useState("all"),[h,m]=u.useState(!1),[g,b]=u.useState({}),[x,w]=u.useState(null),[v,p]=u.useState([]),[y,S]=u.useState([]);u.useEffect(()=>{j()},[]);const j=()=>{const C=Fn();a(C),p(["all",...MD()]),S(["all",...ON()])},k=s.filter(C=>{var U;const D=C.title.toLowerCase().includes(o.toLowerCase())||C.content.toLowerCase().includes(o.toLowerCase())||((U=C.notes)==null?void 0:U.toLowerCase().includes(o.toLowerCase())),H=l==="all"||C.folder===l,M=d==="all"||C.tags.includes(d);return D&&H&&M}),N=C=>{t(`/reader/${C.documentId}/${C.chapter}`)},E=C=>{ND(C)?(j(),n({title:"Bookmark deleted",description:"The bookmark has been removed from your collection."})):n({title:"Error",description:"Failed to delete bookmark.",variant:"destructive"})},A=C=>{w(C.id),b(C),m(!0)},T=()=>{if(!g.title||!g.content){n({title:"Missing information",description:"Please provide a title and content for the bookmark.",variant:"destructive"});return}x?SD(x,g)&&(j(),n({title:"Bookmark updated",description:"Your bookmark has been successfully updated."})):_N({title:g.title,content:g.content,documentId:g.documentId||"",documentTitle:g.documentTitle||"",chapter:g.chapter||1,paragraph:g.paragraph,folder:g.folder||"General",tags:g.tags||[],notes:g.notes})&&(j(),n({title:"Bookmark created",description:"Your new bookmark has been saved."})),b({}),w(null),m(!1)},I=()=>{b({}),w(null),m(!1)},R=C=>{var D;C&&!((D=g.tags)!=null&&D.includes(C))&&b({...g,tags:[...g.tags||[],C]})},$=C=>{var D;b({...g,tags:((D=g.tags)==null?void 0:D.filter(H=>H!==C))||[]})};return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ha,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Bookmarks"}),r.jsx("p",{className:"text-muted-foreground",children:"Your saved passages and important references"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(it,{placeholder:"Search bookmarks...",value:o,onChange:C=>i(C.target.value),className:"pl-10"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Or,{value:l,onValueChange:c,children:[r.jsx(Pa,{className:"w-40",children:r.jsx(Dr,{placeholder:"Folder"})}),r.jsx(Ia,{children:v.map(C=>r.jsx(Gt,{value:C,children:C==="all"?"All Folders":C},C))})]}),r.jsxs(Or,{value:d,onValueChange:f,children:[r.jsx(Pa,{className:"w-40",children:r.jsx(Dr,{placeholder:"Tag"})}),r.jsx(Ia,{children:y.map(C=>r.jsx(Gt,{value:C,children:C==="all"?"All Tags":C},C))})]}),r.jsxs(Qr,{open:h,onOpenChange:m,children:[r.jsx(ej,{asChild:!0,children:r.jsxs(F,{onClick:()=>{b({}),w(null)},children:[r.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Add Bookmark"]})}),r.jsxs(Va,{className:"max-w-2xl",children:[r.jsxs(Fa,{children:[r.jsx(Ya,{children:x?"Edit Bookmark":"Add New Bookmark"}),r.jsx(bi,{children:"Create a new bookmark to save important passages for later reference."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Pt,{htmlFor:"title",children:"Title *"}),r.jsx(it,{id:"title",placeholder:"Bookmark title...",value:g.title||"",onChange:C=>b({...g,title:C.target.value})})]}),r.jsxs("div",{children:[r.jsx(Pt,{htmlFor:"content",children:"Content *"}),r.jsx(fs,{id:"content",placeholder:"Selected text or your notes...",value:g.content||"",onChange:C=>b({...g,content:C.target.value}),rows:4})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Pt,{htmlFor:"documentTitle",children:"Document"}),r.jsx(it,{id:"documentTitle",placeholder:"Document title...",value:g.documentTitle||"",onChange:C=>b({...g,documentTitle:C.target.value})})]}),r.jsxs("div",{children:[r.jsx(Pt,{htmlFor:"chapter",children:"Chapter"}),r.jsx(it,{id:"chapter",type:"number",placeholder:"Chapter number...",value:g.chapter||"",onChange:C=>b({...g,chapter:parseInt(C.target.value)||1})})]})]}),r.jsxs("div",{children:[r.jsx(Pt,{htmlFor:"folder",children:"Folder"}),r.jsx(it,{id:"folder",placeholder:"Folder name...",value:g.folder||"",onChange:C=>b({...g,folder:C.target.value})})]}),r.jsxs("div",{children:[r.jsx(Pt,{htmlFor:"notes",children:"Notes"}),r.jsx(fs,{id:"notes",placeholder:"Additional notes...",value:g.notes||"",onChange:C=>b({...g,notes:C.target.value}),rows:2})]}),r.jsxs("div",{children:[r.jsx(Pt,{children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(K=g.tags)==null?void 0:K.map(C=>r.jsxs(Be,{variant:"secondary",className:"gap-1",children:[C,r.jsx("button",{onClick:()=>$(C),className:"ml-1 hover:text-destructive",children:r.jsx(kn,{className:"w-3 h-3"})})]},C))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(it,{placeholder:"Add tag...",onKeyPress:C=>{if(C.key==="Enter"){C.preventDefault();const D=C.target;R(D.value.trim()),D.value=""}}}),r.jsx(F,{type:"button",variant:"outline",onClick:()=>{const C=document.querySelector('input[placeholder="Add tag..."]');C&&(R(C.value.trim()),C.value="")},children:"Add"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(F,{variant:"outline",onClick:I,children:"Cancel"}),r.jsxs(F,{onClick:T,children:[x?"Update":"Save"," Bookmark"]})]})]})]})]})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:k.map(C=>r.jsxs(Ae,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 group",onClick:()=>N(C),children:[r.jsx(Ue,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(Ye,{className:"text-lg line-clamp-2 group-hover:text-primary transition-colors",children:C.title}),C.documentTitle&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[r.jsx($n,{className:"w-3 h-3"}),r.jsx("span",{children:C.documentTitle}),C.chapter&&r.jsxs("span",{children:["Chapter ",C.chapter]})]})]}),r.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx(F,{size:"sm",variant:"ghost",onClick:D=>{D.stopPropagation(),A(C)},children:r.jsx(mS,{className:"w-4 h-4"})}),r.jsx(F,{size:"sm",variant:"ghost",onClick:D=>{D.stopPropagation(),E(C.id)},children:r.jsx(Vr,{className:"w-4 h-4"})})]})]})}),r.jsxs(Me,{className:"pt-0",children:[r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-3",children:C.content}),C.notes&&r.jsx("div",{className:"mb-3 p-2 bg-muted/50 rounded text-xs",children:r.jsx("p",{className:"text-muted-foreground",children:C.notes})}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(uS,{className:"w-3 h-3"}),C.folder]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Wl,{className:"w-3 h-3"}),new Date(C.timestamp).toLocaleDateString()]})]}),C.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:C.tags.map(D=>r.jsxs(Be,{variant:"outline",className:"text-xs",children:[r.jsx(lg,{className:"w-2 h-2 mr-1"}),D]},D))})]})]},C.id))}),k.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Ar,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:o||l!=="all"||d!=="all"?"No bookmarks found":"No bookmarks yet"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:o||l!=="all"||d!=="all"?"Try adjusting your search or filters":"Start reading and bookmark important passages"}),r.jsx(F,{onClick:()=>m(!0),children:"Add Your First Bookmark"})]}),k.length>0&&r.jsx("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:r.jsxs("span",{children:[k.length," bookmark",k.length!==1?"s":""," found"]})})]})}function Z2({items:e,searchFields:t=[],filters:n={}}){const[s,a]=u.useState(""),[o,i]=u.useState(Object.keys(n).reduce((d,f)=>({...d,[f]:"all"}),{})),l=u.useMemo(()=>e.filter(d=>{const f=s.trim()===""||t.some(m=>String(d[m]).toLowerCase().includes(s.toLowerCase())),h=Object.entries(n).every(([m,g])=>{const b=o[m];return b==="all"||g.condition(d,b)});return f&&h}),[e,s,o,t,n]);return{searchQuery:s,setSearchQuery:a,filteredItems:l,filterValues:o,updateFilter:(d,f)=>{i(h=>({...h,[d]:f}))},totalItems:e.length,filteredCount:l.length}}function W2(){const{toast:e}=Ht();return{success:{created:t=>e({title:`${t} created`,description:`Your new ${t.toLowerCase()} has been saved successfully.`}),updated:t=>e({title:`${t} updated`,description:`Your ${t.toLowerCase()} has been successfully updated.`}),deleted:t=>e({title:`${t} deleted`,description:`The ${t.toLowerCase()} has been removed from your collection.`}),saved:t=>e({title:`${t} saved`,description:`Your ${t.toLowerCase()} has been saved successfully.`})},error:{general:t=>e({title:"Error",description:`Failed to ${t}. Please try again.`,variant:"destructive"}),validation:t=>e({title:"Missing information",description:t,variant:"destructive"}),network:()=>e({title:"Connection Error",description:"Please check your internet connection and try again.",variant:"destructive"}),unauthorized:()=>e({title:"Access Denied",description:"You don't have permission to perform this action.",variant:"destructive"})},info:{loading:t=>e({title:"Loading...",description:`${t} in progress...`}),noResults:t=>e({title:"No results found",description:`No ${t} match your search criteria.`})},custom:(t,n,s)=>e({title:t,description:n,variant:s})}}function rz(e,t,n={}){const{serialize:s=JSON.stringify,deserialize:a=JSON.parse}=n,[o,i]=u.useState(()=>{try{const l=localStorage.getItem(e);return l===null?t:a(l)}catch(l){return console.warn(`Error reading localStorage key "${e}":`,l),t}});return u.useEffect(()=>{try{localStorage.setItem(e,s(o))}catch(l){console.warn(`Error setting localStorage key "${e}":`,l)}},[e,o,s]),[o,i]}function oz(e,t=!1){return rz(e,t,{serialize:n=>n?"true":"false",deserialize:n=>n==="true"})}const iz={YELLOW:"bg-yellow-200 dark:bg-yellow-800/40",BLUE:"bg-blue-200 dark:bg-blue-800/40",GREEN:"bg-green-200 dark:bg-green-800/40",PINK:"bg-pink-200 dark:bg-pink-800/40",PURPLE:"bg-purple-200 dark:bg-purple-800/40",ORANGE:"bg-orange-200 dark:bg-orange-800/40"},lz={CATEGORY:{NOTE:"Personal Notes"}};function J2(e){return new Date(e).toLocaleDateString()}function vv(e,t){return Array.from(new Set(e))}function eC(e,t){const n=`/reader/${e}`;return t?`${n}/${t}`:n}function yv(e){return{"bg-yellow-200 dark:bg-yellow-800/40":"Yellow","bg-blue-200 dark:bg-blue-800/40":"Blue","bg-green-200 dark:bg-green-800/40":"Green","bg-pink-200 dark:bg-pink-800/40":"Pink","bg-purple-200 dark:bg-purple-800/40":"Purple","bg-orange-200 dark:bg-orange-800/40":"Orange"}[e]||"Gray"}function cz(){var K;const[e,t]=$r(),n=W2(),[s,a]=oz("notesDialogOpen",!1),[o,i]=u.useState([]),[l,c]=u.useState({}),[d,f]=u.useState(null),[h,m]=u.useState([]),[g,b]=u.useState([]),{searchQuery:x,setSearchQuery:w,filteredItems:v,filterValues:p,updateFilter:y,totalItems:S,filteredCount:j}=Z2({items:o,searchFields:["title","content"],filters:{category:{value:"all",condition:(C,D)=>D==="all"||C.category===D}}});u.useEffect(()=>{k()},[]);const k=()=>{const C=Fs();i(C),m(["all",..._D()]),b(["all",...ON()])},N=C=>{C.documentId&&C.chapter&&t(eC(C.documentId,C.chapter))},E=C=>{ED(C)?(k(),n.success.deleted("Note")):n.error.general("delete note")},A=C=>{f(C.id),c(C),a(!0)},T=()=>{if(!l.title||!l.content){n.error.validation("Please provide a title and content for the note.");return}d?CD(d,l)&&(k(),n.success.updated("Note")):jD({title:l.title,content:l.content,category:l.category||lz.CATEGORY.NOTE,tags:l.tags||[],documentId:l.documentId,documentTitle:l.documentTitle,chapter:l.chapter,paragraph:l.paragraph})&&(k(),n.success.created("Note")),c({}),f(null),a(!1)},I=()=>{c({}),f(null),a(!1)},R=C=>{var D;C&&!((D=l.tags)!=null&&D.includes(C))&&c({...l,tags:[...l.tags||[],C]})},$=C=>{var D;c({...l,tags:((D=l.tags)==null?void 0:D.filter(H=>H!==C))||[]})};return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ha,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Notes"}),r.jsxs("p",{className:"text-muted-foreground",children:["Your study notes and personal reflections (",j," of ",S,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(it,{placeholder:"Search notes...",value:x,onChange:C=>w(C.target.value),className:"pl-10"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Or,{value:p.category||"all",onValueChange:C=>y("category",C),children:[r.jsx(Pa,{className:"w-40",children:r.jsx(Dr,{placeholder:"Category"})}),r.jsx(Ia,{children:h.map(C=>r.jsx(Gt,{value:C,children:C==="all"?"All Categories":C},C))})]}),r.jsxs(Qr,{open:s,onOpenChange:a,children:[r.jsx(ej,{asChild:!0,children:r.jsxs(F,{onClick:()=>{f(null),c({})},children:[r.jsx(Aa,{className:"w-4 h-4 mr-2"}),"New Note"]})}),r.jsxs(Va,{className:"max-w-2xl",children:[r.jsxs(Fa,{children:[r.jsx(Ya,{children:d?"Edit Note":"Create New Note"}),r.jsx(bi,{children:d?"Modify your note details below.":"Add a new note to your collection."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Pt,{htmlFor:"title",children:"Title"}),r.jsx(it,{id:"title",placeholder:"Note title...",value:l.title||"",onChange:C=>c({...l,title:C.target.value})})]}),r.jsxs("div",{children:[r.jsx(Pt,{htmlFor:"content",children:"Content"}),r.jsx(fs,{id:"content",placeholder:"Write your note content here...",value:l.content||"",onChange:C=>c({...l,content:C.target.value}),rows:8})]}),r.jsxs("div",{children:[r.jsx(Pt,{htmlFor:"category",children:"Category"}),r.jsx(it,{id:"category",placeholder:"Category (optional)",value:l.category||"",onChange:C=>c({...l,category:C.target.value})})]}),r.jsxs("div",{children:[r.jsx(Pt,{children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(K=l.tags)==null?void 0:K.map((C,D)=>r.jsxs(Be,{variant:"secondary",className:"flex items-center gap-1",children:[C,r.jsx("button",{onClick:()=>$(C),className:"ml-1 hover:text-destructive",children:r.jsx(kn,{className:"w-3 h-3"})})]},D))}),r.jsx(it,{placeholder:"Add tag and press Enter",onKeyPress:C=>{if(C.key==="Enter"){C.preventDefault();const D=C.target;D.value.trim()&&(R(D.value.trim()),D.value="")}}})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[r.jsx(F,{variant:"outline",onClick:I,children:"Cancel"}),r.jsx(F,{onClick:T,children:d?"Update Note":"Save Note"})]})]})]})]})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:v.map(C=>r.jsxs(Ae,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 group",onClick:()=>N(C),children:[r.jsxs(Ue,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx(Ye,{className:"text-lg line-clamp-2",children:C.title}),r.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx(F,{size:"sm",variant:"ghost",onClick:D=>{D.stopPropagation(),A(C)},children:r.jsx(mS,{className:"w-4 h-4"})}),r.jsx(F,{size:"sm",variant:"ghost",onClick:D=>{D.stopPropagation(),E(C.id)},children:r.jsx(Vr,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:C.documentTitle&&r.jsxs(r.Fragment,{children:[r.jsx($n,{className:"w-3 h-3"}),r.jsx("span",{children:C.documentTitle}),C.chapter&&r.jsxs("span",{children:["Chapter ",C.chapter]})]})})]}),r.jsxs(Me,{className:"pt-0",children:[r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-4 mb-4",children:C.content}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-2",children:C.category&&r.jsxs(Be,{variant:"outline",className:"text-xs",children:[r.jsx(uS,{className:"w-3 h-3 mr-1"}),C.category]})}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[r.jsx(Wl,{className:"w-3 h-3"}),J2(C.timestamp)]})]}),C.tags&&C.tags.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(ds,{className:"my-3"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:C.tags.map((D,H)=>r.jsxs(Be,{variant:"secondary",className:"text-xs",children:[r.jsx(lg,{className:"w-2 h-2 mr-1"}),D]},H))})]})]})]},C.id))}),v.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Vn,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:x||p.category!=="all"?"No notes found":"No notes yet"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:x||p.category!=="all"?"Try adjusting your search or filters.":"Create your first note to get started."}),!x&&p.category==="all"&&r.jsxs(F,{onClick:()=>a(!0),children:[r.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Create First Note"]})]})]})}function uz(){const[e,t]=$r(),n=W2(),[s,a]=u.useState([]),o=vv(s.map(p=>p.documentTitle)).filter(Boolean),i=vv(s.map(p=>p.color)).filter(Boolean),{searchQuery:l,setSearchQuery:c,filteredItems:d,filterValues:f,updateFilter:h,totalItems:m,filteredCount:g}=Z2({items:s,searchFields:["text"],filters:{color:{value:"all",condition:(p,y)=>y==="all"||p.color===y},document:{value:"all",condition:(p,y)=>y==="all"||p.documentTitle===y}}});u.useEffect(()=>{b()},[]);const b=()=>{const p=Tl();a(p)},x=p=>{t(eC(p.documentId,p.chapter))},w=p=>{kD(p)?(b(),n.success.deleted("Highlight")):n.error.general("delete highlight")},v=p=>Object.values(iz).includes(p)?p:"bg-gray-200 dark:bg-gray-800/40";return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ha,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Highlights"}),r.jsxs("p",{className:"text-muted-foreground",children:["Your highlighted passages and important text selections (",g," of ",m,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Tr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(it,{placeholder:"Search highlights...",value:l,onChange:p=>c(p.target.value),className:"pl-10"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Or,{value:f.color||"all",onValueChange:p=>h("color",p),children:[r.jsx(Pa,{className:"w-40",children:r.jsx(Dr,{placeholder:"Color"})}),r.jsxs(Ia,{children:[r.jsx(Gt,{value:"all",children:"All Colors"}),i.map(p=>r.jsx(Gt,{value:p,children:yv(p)},p))]})]}),r.jsxs(Or,{value:f.document||"all",onValueChange:p=>h("document",p),children:[r.jsx(Pa,{className:"w-40",children:r.jsx(Dr,{placeholder:"Document"})}),r.jsxs(Ia,{children:[r.jsx(Gt,{value:"all",children:"All Documents"}),o.map(p=>r.jsx(Gt,{value:p,children:p},p))]})]})]})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(p=>r.jsxs(Ae,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 group",onClick:()=>x(p),children:[r.jsx(Ue,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[r.jsx($n,{className:"w-3 h-3"}),r.jsx("span",{children:p.documentTitle}),r.jsxs("span",{children:["Chapter ",p.chapter]})]})}),r.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(F,{size:"sm",variant:"ghost",onClick:y=>{y.stopPropagation(),w(p.id)},children:r.jsx(Vr,{className:"w-4 h-4"})})})]})}),r.jsxs(Me,{className:"pt-0",children:[r.jsx("div",{className:`p-3 rounded-lg mb-3 ${v(p.color)}`,children:r.jsx("p",{className:"text-sm line-clamp-4",children:p.text})}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Pu,{className:"w-3 h-3"}),r.jsx("span",{children:yv(p.color)})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Wl,{className:"w-3 h-3"}),J2(p.timestamp)]})]})]})]},p.id))}),d.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Pu,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:l||f.color!=="all"||f.document!=="all"?"No highlights found":"No highlights yet"}),r.jsx("p",{className:"text-muted-foreground",children:l||f.color!=="all"||f.document!=="all"?"Try adjusting your search or filters.":"Start highlighting important passages in your documents."})]})]})}function dz(){const{toast:e}=Ht(),[t,n]=u.useState(!1),[s,a]=u.useState(!1),[o,i]=u.useState(!1),[l,c]=u.useState({bookmarks:0,notes:0,highlights:0});u.useEffect(()=>{try{const m=Fn(),g=Fs(),b=Tl();c({bookmarks:m.length,notes:g.length,highlights:b.length})}catch(m){console.error("Failed to load data stats:",m),e({title:"Error loading data",description:"Failed to load data statistics. Please refresh the page.",variant:"destructive"})}},[e]);const d=async()=>{n(!0);try{if(typeof localStorage>"u")throw new Error("Local storage is not available");const m=Fn(),g=Fs(),b=Tl(),x=m.length+g.length+b.length;if(x===0){e({title:"No data to backup",description:"There is no data to create a backup from.",variant:"destructive"});return}const w={bookmarks:m,notes:g,highlights:b,metadata:{version:"1.0.0",timestamp:Date.now(),totalItems:x}},v=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),p=URL.createObjectURL(v),y=document.createElement("a");y.href=p,y.download=`bible-companion-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(p),e({title:"Backup created successfully",description:`Exported ${w.metadata.totalItems} items to backup file.`})}catch(m){console.error("Backup creation failed:",m),e({title:"Backup failed",description:"Failed to create backup. Please try again.",variant:"destructive"})}finally{n(!1)}},f=async()=>{const m=document.createElement("input");m.type="file",m.accept=".json",m.onchange=async g=>{var x;const b=(x=g.target.files)==null?void 0:x[0];if(!b){a(!1);return}a(!0);try{if(typeof localStorage>"u")throw new Error("Local storage is not available");const w=await b.text(),v=JSON.parse(w);if(!v.metadata||!v.bookmarks||!v.notes||!v.highlights)throw new Error("Invalid backup file format");localStorage.removeItem("bible-companion-bookmarks"),localStorage.removeItem("bible-companion-notes"),localStorage.removeItem("bible-companion-highlights"),localStorage.setItem("bible-companion-bookmarks",JSON.stringify(v.bookmarks)),localStorage.setItem("bible-companion-notes",JSON.stringify(v.notes)),localStorage.setItem("bible-companion-highlights",JSON.stringify(v.highlights)),c({bookmarks:v.bookmarks.length,notes:v.notes.length,highlights:v.highlights.length}),e({title:"Backup restored successfully",description:`Restored ${v.metadata.totalItems} items from backup.`}),setTimeout(()=>{window.location.reload()},1e3)}catch(w){console.error("Backup restoration failed:",w),e({title:"Restore failed",description:"Failed to restore backup. Please check the file format.",variant:"destructive"})}finally{a(!1),m.value=""}},m.click()},h=async()=>{if(confirm("Are you sure you want to reset all data? This action cannot be undone and will permanently delete all your bookmarks, notes, highlights, and other app data.")&&confirm("This will permanently delete ALL your data. Are you absolutely sure?")){i(!0);try{if(typeof localStorage>"u")throw new Error("Local storage is not available");Object.keys(localStorage).forEach(g=>{(g.startsWith("bible-companion-")||g.startsWith("document-companion-")||g==="hasVisited")&&localStorage.removeItem(g)}),e({title:"Data reset successfully",description:"All app data has been cleared. The page will reload."}),c({bookmarks:0,notes:0,highlights:0}),setTimeout(()=>{window.location.reload()},1e3)}catch(m){console.error("Data reset failed:",m),e({title:"Reset failed",description:"Failed to reset data. Please try again.",variant:"destructive"})}finally{i(!1)}}};return r.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ha,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Settings"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage your app data, backups, and preferences"})]}),r.jsxs("div",{className:"grid gap-6",children:[r.jsxs(Ae,{children:[r.jsxs(Ue,{children:[r.jsxs(Ye,{className:"flex items-center gap-2",children:[r.jsx(iS,{className:"h-5 w-5"}),"Data Overview"]}),r.jsx(In,{children:"Current data statistics and storage information"})]}),r.jsx(Me,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[r.jsx(Ar,{className:"h-5 w-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Bookmarks"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.bookmarks})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[r.jsx($n,{className:"h-5 w-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Notes"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.notes})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[r.jsx(pS,{className:"h-5 w-5 text-yellow-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Highlights"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:l.highlights})]})]})]})})]}),r.jsxs(Ae,{children:[r.jsxs(Ue,{children:[r.jsxs(Ye,{className:"flex items-center gap-2",children:[r.jsx(_O,{className:"h-5 w-5"}),"Backup & Restore"]}),r.jsx(In,{children:"Create backups of your data or restore from previous backups"})]}),r.jsxs(Me,{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs(F,{onClick:d,disabled:t||l.bookmarks+l.notes+l.highlights===0,className:"flex items-center gap-2",children:[t?r.jsx(ol,{className:"h-4 w-4 animate-spin"}):r.jsx(lS,{className:"h-4 w-4"}),t?"Creating Backup...":"Create Backup"]}),r.jsxs(F,{variant:"outline",onClick:f,disabled:s,className:"flex items-center gap-2",children:[s?r.jsx(ol,{className:"h-4 w-4 animate-spin"}):r.jsx(jm,{className:"h-4 w-4"}),s?"Restoring...":"Restore Backup"]})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("p",{children:"• Backups include all your bookmarks, notes, and highlights"}),r.jsx("p",{children:"• Backup files are saved as JSON and can be imported later"}),r.jsx("p",{children:"• Restoring will replace all current data with backup data"})]})]})]}),r.jsxs(Ae,{className:"border-red-200 dark:border-red-800",children:[r.jsxs(Ue,{children:[r.jsxs(Ye,{className:"flex items-center gap-2 text-red-600",children:[r.jsx(Gx,{className:"h-5 w-5"}),"Reset All Data"]}),r.jsx(In,{className:"text-red-600/80",children:"Permanently delete all app data. This action cannot be undone."})]}),r.jsxs(Me,{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Gx,{className:"h-5 w-5 text-red-600 mt-0.5"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-medium text-red-800 dark:text-red-200 mb-1",children:"Warning: This action is irreversible"}),r.jsx("p",{className:"text-red-700 dark:text-red-300",children:"This will permanently delete all your bookmarks, notes, highlights, and any other data stored in the app. Make sure you have a backup before proceeding."})]})]})}),r.jsxs(F,{variant:"destructive",onClick:h,disabled:o||l.bookmarks+l.notes+l.highlights===0,className:"flex items-center gap-2",children:[o?r.jsx(ol,{className:"h-4 w-4 animate-spin"}):r.jsx(Vr,{className:"h-4 w-4"}),o?"Resetting...":"Reset All Data"]})]})]}),r.jsxs(Ae,{children:[r.jsx(Ue,{children:r.jsxs(Ye,{className:"flex items-center gap-2",children:[r.jsx(Ro,{className:"h-5 w-5"}),"App Information"]})}),r.jsx(Me,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Version"}),r.jsx(Be,{variant:"secondary",children:"1.0.0"})]}),r.jsx(ds,{}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Storage"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Local Browser Storage"})]}),r.jsx(ds,{}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Data Location"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Your device only"})]})]})})]})]})]})}function fz(){return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50 dark:bg-slate-900",children:r.jsx(Ae,{className:"w-full max-w-md mx-4",children:r.jsxs(Me,{className:"pt-6",children:[r.jsxs("div",{className:"flex mb-4 gap-2",children:[r.jsx(ko,{className:"h-8 w-8 text-red-500"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"404 Page Not Found"})]}),r.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:"Did you forget to add the page to the router?"})]})})})}function hz(){const[,e]=$r(),{toast:t}=Ht();u.useEffect(()=>{localStorage.getItem("hasVisited")||(t({title:"Welcome to Bible Companion",description:"Start by uploading a document or exploring the library."}),localStorage.setItem("hasVisited","true"))},[t]);const n=(s,a=1)=>{e(`/reader/${s.id}/${a}`)};return r.jsxs(kA,{children:[r.jsx(Tn,{path:"/",component:()=>r.jsx(Tm,{onSelectDocument:n})}),r.jsx(Tn,{path:"/library",component:()=>r.jsx(Tm,{onSelectDocument:n})}),r.jsx(Tn,{path:"/reader/:documentId/:chapter",component:WL}),r.jsx(Tn,{path:"/search",component:sz}),r.jsx(Tn,{path:"/bookmarks",component:az}),r.jsx(Tn,{path:"/notes",component:cz}),r.jsx(Tn,{path:"/highlights",component:uz}),r.jsx(Tn,{path:"/performance",component:JL}),r.jsx(Tn,{path:"/agents",component:nz}),r.jsx(Tn,{path:"/settings",component:dz}),r.jsx(Tn,{component:fz})]})}function mz(){return r.jsx(QA,{client:xo,children:r.jsx(n_,{children:r.jsx(eM,{defaultTheme:"system",storageKey:"document-companion-theme",children:r.jsx(e_,{children:r.jsx(Z4,{children:r.jsxs("div",{className:"min-h-screen bg-background font-sans antialiased",children:[r.jsx(hz,{}),r.jsx(iT,{})]})})})})})})}Wk.createRoot(document.getElementById("root")).render(r.jsx(mz,{}));
