var Ig=e=>{throw TypeError(e)};var Xd=(e,t,n)=>t.has(e)||Ig("Cannot "+n);var D=(e,t,n)=>(Xd(e,t,"read from private field"),n?n.call(e):t.get(e)),we=(e,t,n)=>t.has(e)?Ig("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ie=(e,t,n,s)=>(Xd(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Ee=(e,t,n)=>(Xd(e,t,"access private method"),n);var lc=(e,t,n,s)=>({set _(a){ie(e,t,a,n)},get _(){return D(e,t,s)}});function aC(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function Ov(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dv={exports:{}},Zu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rC=Symbol.for("react.transitional.element"),oC=Symbol.for("react.fragment");function Lv(e,t,n){var s=null;if(n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),"key"in t){n={};for(var a in t)a!=="key"&&(n[a]=t[a])}else n=t;return t=n.ref,{$$typeof:rC,type:e,key:s,ref:t!==void 0?t:null,props:n}}Zu.Fragment=oC;Zu.jsx=Lv;Zu.jsxs=Lv;Dv.exports=Zu;var r=Dv.exports,zv={exports:{}},Wu={},Pv={exports:{}},Iv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,B){var O=R.length;R.push(B);e:for(;0<O;){var U=O-1>>>1,L=R[U];if(0<a(L,B))R[U]=B,R[O]=L,O=U;else break e}}function n(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var B=R[0],O=R.pop();if(O!==B){R[0]=O;e:for(var U=0,L=R.length,P=L>>>1;U<P;){var H=2*(U+1)-1,Q=R[H],_=H+1,se=R[_];if(0>a(Q,O))_<L&&0>a(se,Q)?(R[U]=se,R[_]=O,U=_):(R[U]=Q,R[H]=O,U=H);else if(_<L&&0>a(se,O))R[U]=se,R[_]=O,U=_;else break e}}return B}function a(R,B){var O=R.sortIndex-B.sortIndex;return O!==0?O:R.id-B.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],f=1,h=null,m=3,g=!1,b=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;function y(R){for(var B=n(d);B!==null;){if(B.callback===null)s(d);else if(B.startTime<=R)s(d),B.sortIndex=B.expirationTime,t(c,B);else break;B=n(d)}}function S(R){if(x=!1,y(R),!b)if(n(c)!==null)b=!0,X();else{var B=n(d);B!==null&&k(S,B.startTime-R)}}var j=!1,E=-1,N=5,C=-1;function A(){return!(e.unstable_now()-C<N)}function T(){if(j){var R=e.unstable_now();C=R;var B=!0;try{e:{b=!1,x&&(x=!1,v(E),E=-1),g=!0;var O=m;try{t:{for(y(R),h=n(c);h!==null&&!(h.expirationTime>R&&A());){var U=h.callback;if(typeof U=="function"){h.callback=null,m=h.priorityLevel;var L=U(h.expirationTime<=R);if(R=e.unstable_now(),typeof L=="function"){h.callback=L,y(R),B=!0;break t}h===n(c)&&s(c),y(R)}else s(c);h=n(c)}if(h!==null)B=!0;else{var P=n(d);P!==null&&k(S,P.startTime-R),B=!1}}break e}finally{h=null,m=O,g=!1}B=void 0}}finally{B?z():j=!1}}}var z;if(typeof p=="function")z=function(){p(T)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,$=M.port2;M.port1.onmessage=T,z=function(){$.postMessage(null)}}else z=function(){w(T,0)};function X(){j||(j=!0,z())}function k(R,B){E=w(function(){R(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){b||g||(b=!0,X())},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var O=m;m=B;try{return R()}finally{m=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var O=m;m=R;try{return B()}finally{m=O}},e.unstable_scheduleCallback=function(R,B,O){var U=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?U+O:U):O=U,R){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=O+L,R={id:f++,callback:B,priorityLevel:R,startTime:O,expirationTime:L,sortIndex:-1},O>U?(R.sortIndex=O,t(d,R),n(c)===null&&R===n(d)&&(x?(v(E),E=-1):x=!0,k(S,O-U))):(R.sortIndex=L,t(c,R),b||g||(b=!0,X())),R},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(R){var B=m;return function(){var O=m;m=B;try{return R.apply(this,arguments)}finally{m=O}}}})(Iv);Pv.exports=Iv;var iC=Pv.exports,Uv={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m=Symbol.for("react.transitional.element"),lC=Symbol.for("react.portal"),cC=Symbol.for("react.fragment"),uC=Symbol.for("react.strict_mode"),dC=Symbol.for("react.profiler"),fC=Symbol.for("react.consumer"),hC=Symbol.for("react.context"),mC=Symbol.for("react.forward_ref"),pC=Symbol.for("react.suspense"),gC=Symbol.for("react.memo"),$v=Symbol.for("react.lazy"),Ug=Symbol.iterator;function xC(e){return e===null||typeof e!="object"?null:(e=Ug&&e[Ug]||e["@@iterator"],typeof e=="function"?e:null)}var Bv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hv=Object.assign,qv={};function ii(e,t,n){this.props=e,this.context=t,this.refs=qv,this.updater=n||Bv}ii.prototype.isReactComponent={};ii.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ii.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fv(){}Fv.prototype=ii.prototype;function Bm(e,t,n){this.props=e,this.context=t,this.refs=qv,this.updater=n||Bv}var Hm=Bm.prototype=new Fv;Hm.constructor=Bm;Hv(Hm,ii.prototype);Hm.isPureReactComponent=!0;var $g=Array.isArray,nt={H:null,A:null,T:null,S:null},Vv=Object.prototype.hasOwnProperty;function qm(e,t,n,s,a,o){return n=o.ref,{$$typeof:$m,type:e,key:t,ref:n!==void 0?n:null,props:o}}function vC(e,t){return qm(e.type,t,void 0,void 0,void 0,e.props)}function Fm(e){return typeof e=="object"&&e!==null&&e.$$typeof===$m}function yC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Bg=/\/+/g;function Zd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yC(""+e.key):t.toString(36)}function Hg(){}function bC(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Hg,Hg):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function ro(e,t,n,s,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"bigint":case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case $m:case lC:i=!0;break;case $v:return i=e._init,ro(i(e._payload),t,n,s,a)}}if(i)return a=a(e),i=s===""?"."+Zd(e,0):s,$g(a)?(n="",i!=null&&(n=i.replace(Bg,"$&/")+"/"),ro(a,t,n,"",function(d){return d})):a!=null&&(Fm(a)&&(a=vC(a,n+(a.key==null||e&&e.key===a.key?"":(""+a.key).replace(Bg,"$&/")+"/")+i)),t.push(a)),1;i=0;var l=s===""?".":s+":";if($g(e))for(var c=0;c<e.length;c++)s=e[c],o=l+Zd(s,c),i+=ro(s,t,n,o,a);else if(c=xC(e),typeof c=="function")for(e=c.call(e),c=0;!(s=e.next()).done;)s=s.value,o=l+Zd(s,c++),i+=ro(s,t,n,o,a);else if(o==="object"){if(typeof e.then=="function")return ro(bC(e),t,n,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return i}function cc(e,t,n){if(e==null)return e;var s=[],a=0;return ro(e,s,"","",function(o){return t.call(n,o,a++)}),s}function wC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qg=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function SC(){}ke.Children={map:cc,forEach:function(e,t,n){cc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return cc(e,function(){t++}),t},toArray:function(e){return cc(e,function(t){return t})||[]},only:function(e){if(!Fm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=ii;ke.Fragment=cC;ke.Profiler=dC;ke.PureComponent=Bm;ke.StrictMode=uC;ke.Suspense=pC;ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=nt;ke.act=function(){throw Error("act(...) is not supported in production builds of React.")};ke.cache=function(e){return function(){return e.apply(null,arguments)}};ke.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var s=Hv({},e.props),a=e.key,o=void 0;if(t!=null)for(i in t.ref!==void 0&&(o=void 0),t.key!==void 0&&(a=""+t.key),t)!Vv.call(t,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&t.ref===void 0||(s[i]=t[i]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];s.children=l}return qm(e.type,a,void 0,void 0,o,s)};ke.createContext=function(e){return e={$$typeof:hC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:fC,_context:e},e};ke.createElement=function(e,t,n){var s,a={},o=null;if(t!=null)for(s in t.key!==void 0&&(o=""+t.key),t)Vv.call(t,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(a[s]=t[s]);var i=arguments.length-2;if(i===1)a.children=n;else if(1<i){for(var l=Array(i),c=0;c<i;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)a[s]===void 0&&(a[s]=i[s]);return qm(e,o,void 0,void 0,null,a)};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:mC,render:e}};ke.isValidElement=Fm;ke.lazy=function(e){return{$$typeof:$v,_payload:{_status:-1,_result:e},_init:wC}};ke.memo=function(e,t){return{$$typeof:gC,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=nt.T,n={};nt.T=n;try{var s=e(),a=nt.S;a!==null&&a(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(SC,qg)}catch(o){qg(o)}finally{nt.T=t}};ke.unstable_useCacheRefresh=function(){return nt.H.useCacheRefresh()};ke.use=function(e){return nt.H.use(e)};ke.useActionState=function(e,t,n){return nt.H.useActionState(e,t,n)};ke.useCallback=function(e,t){return nt.H.useCallback(e,t)};ke.useContext=function(e){return nt.H.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e,t){return nt.H.useDeferredValue(e,t)};ke.useEffect=function(e,t){return nt.H.useEffect(e,t)};ke.useId=function(){return nt.H.useId()};ke.useImperativeHandle=function(e,t,n){return nt.H.useImperativeHandle(e,t,n)};ke.useInsertionEffect=function(e,t){return nt.H.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return nt.H.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return nt.H.useMemo(e,t)};ke.useOptimistic=function(e,t){return nt.H.useOptimistic(e,t)};ke.useReducer=function(e,t,n){return nt.H.useReducer(e,t,n)};ke.useRef=function(e){return nt.H.useRef(e)};ke.useState=function(e){return nt.H.useState(e)};ke.useSyncExternalStore=function(e,t,n){return nt.H.useSyncExternalStore(e,t,n)};ke.useTransition=function(){return nt.H.useTransition()};ke.version="19.0.0";Uv.exports=ke;var u=Uv.exports;const Es=Ov(u),Vm=aC({__proto__:null,default:Es},[u]);var Yv={exports:{}},qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC=u;function Gv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Zs(){}var Bt={d:{f:Zs,r:function(){throw Error(Gv(522))},D:Zs,C:Zs,L:Zs,m:Zs,X:Zs,S:Zs,M:Zs},p:0,findDOMNode:null},jC=Symbol.for("react.portal");function CC(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jC,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}var Yi=NC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ju(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Bt;qt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Gv(299));return CC(e,t,null,n)};qt.flushSync=function(e){var t=Yi.T,n=Bt.p;try{if(Yi.T=null,Bt.p=2,e)return e()}finally{Yi.T=t,Bt.p=n,Bt.d.f()}};qt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Bt.d.C(e,t))};qt.prefetchDNS=function(e){typeof e=="string"&&Bt.d.D(e)};qt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,s=Ju(n,t.crossOrigin),a=typeof t.integrity=="string"?t.integrity:void 0,o=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Bt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:s,integrity:a,fetchPriority:o}):n==="script"&&Bt.d.X(e,{crossOrigin:s,integrity:a,fetchPriority:o,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};qt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Ju(t.as,t.crossOrigin);Bt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Bt.d.M(e)};qt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,s=Ju(n,t.crossOrigin);Bt.d.L(e,n,{crossOrigin:s,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};qt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Ju(t.as,t.crossOrigin);Bt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Bt.d.m(e)};qt.requestFormReset=function(e){Bt.d.r(e)};qt.unstable_batchedUpdates=function(e,t){return e(t)};qt.useFormState=function(e,t,n){return Yi.H.useFormState(e,t,n)};qt.useFormStatus=function(){return Yi.H.useHostTransitionStatus()};qt.version="19.0.0";function Qv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qv)}catch(e){console.error(e)}}Qv(),Yv.exports=qt;var li=Yv.exports;const EC=Ov(li);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vt=iC,Kv=u,kC=li;function J(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Xv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var AC=Symbol.for("react.element"),uc=Symbol.for("react.transitional.element"),Pi=Symbol.for("react.portal"),co=Symbol.for("react.fragment"),Zv=Symbol.for("react.strict_mode"),ah=Symbol.for("react.profiler"),TC=Symbol.for("react.provider"),Wv=Symbol.for("react.consumer"),Os=Symbol.for("react.context"),Ym=Symbol.for("react.forward_ref"),rh=Symbol.for("react.suspense"),oh=Symbol.for("react.suspense_list"),Gm=Symbol.for("react.memo"),sa=Symbol.for("react.lazy"),Jv=Symbol.for("react.offscreen"),RC=Symbol.for("react.memo_cache_sentinel"),Fg=Symbol.iterator;function Ei(e){return e===null||typeof e!="object"?null:(e=Fg&&e[Fg]||e["@@iterator"],typeof e=="function"?e:null)}var MC=Symbol.for("react.client.reference");function ih(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===MC?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case co:return"Fragment";case Pi:return"Portal";case ah:return"Profiler";case Zv:return"StrictMode";case rh:return"Suspense";case oh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Os:return(e.displayName||"Context")+".Provider";case Wv:return(e._context.displayName||"Context")+".Consumer";case Ym:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gm:return t=e.displayName||null,t!==null?t:ih(e.type)||"Memo";case sa:t=e._payload,e=e._init;try{return ih(e(t))}catch{}}return null}var Ce=Kv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Je=Object.assign,Wd,Vg;function Ii(e){if(Wd===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wd=t&&t[1]||"",Vg=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wd+e+Vg}var Jd=!1;function ef(e,t){if(!e||Jd)return"";Jd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(g){var m=g}Reflect.construct(e,[],h)}else{try{h.call()}catch(g){m=g}e.call(h.prototype)}}else{try{throw Error()}catch(g){m=g}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(g){if(g&&m&&typeof g.stack=="string")return[g.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=s.DetermineComponentFrameRoot(),i=o[0],l=o[1];if(i&&l){var c=i.split(`
`),d=l.split(`
`);for(a=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;a<d.length&&!d[a].includes("DetermineComponentFrameRoot");)a++;if(s===c.length||a===d.length)for(s=c.length-1,a=d.length-1;1<=s&&0<=a&&c[s]!==d[a];)a--;for(;1<=s&&0<=a;s--,a--)if(c[s]!==d[a]){if(s!==1||a!==1)do if(s--,a--,0>a||c[s]!==d[a]){var f=`
`+c[s].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=s&&0<=a);break}}}finally{Jd=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ii(n):""}function _C(e){switch(e.tag){case 26:case 27:case 5:return Ii(e.type);case 16:return Ii("Lazy");case 13:return Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return e=ef(e.type,!1),e;case 11:return e=ef(e.type.render,!1),e;case 1:return e=ef(e.type,!0),e;default:return""}}function Yg(e){try{var t="";do t+=_C(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ci(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ey(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gg(e){if(ci(e)!==e)throw Error(J(188))}function OC(e){var t=e.alternate;if(!t){if(t=ci(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Gg(a),e;if(o===s)return Gg(a),t;o=o.sibling}throw Error(J(188))}if(n.return!==s.return)n=a,s=o;else{for(var i=!1,l=a.child;l;){if(l===n){i=!0,n=a,s=o;break}if(l===s){i=!0,s=a,n=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===n){i=!0,n=o,s=a;break}if(l===s){i=!0,s=o,n=a;break}l=l.sibling}if(!i)throw Error(J(189))}}if(n.alternate!==s)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function ty(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=ty(e),t!==null)return t;e=e.sibling}return null}var Ui=Array.isArray,We=kC.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xr={pending:!1,data:null,method:null,action:null},lh=[],uo=-1;function ms(e){return{current:e}}function St(e){0>uo||(e.current=lh[uo],lh[uo]=null,uo--)}function et(e,t){uo++,lh[uo]=e.current,e.current=t}var as=ms(null),ul=ms(null),wa=ms(null),ou=ms(null);function iu(e,t){switch(et(wa,t),et(ul,e),et(as,null),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Q0(t):0;break;default:if(e=e===8?t.parentNode:t,t=e.tagName,e=e.namespaceURI)e=Q0(e),t=hw(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}St(as),et(as,t)}function Go(){St(as),St(ul),St(wa)}function ch(e){e.memoizedState!==null&&et(ou,e);var t=as.current,n=hw(t,e.type);t!==n&&(et(ul,e),et(as,n))}function lu(e){ul.current===e&&(St(as),St(ul)),ou.current===e&&(St(ou),wl._currentValue=xr)}var uh=Object.prototype.hasOwnProperty,Qm=vt.unstable_scheduleCallback,tf=vt.unstable_cancelCallback,DC=vt.unstable_shouldYield,LC=vt.unstable_requestPaint,rs=vt.unstable_now,zC=vt.unstable_getCurrentPriorityLevel,ny=vt.unstable_ImmediatePriority,sy=vt.unstable_UserBlockingPriority,cu=vt.unstable_NormalPriority,PC=vt.unstable_LowPriority,ay=vt.unstable_IdlePriority,IC=vt.log,UC=vt.unstable_setDisableYieldValue,Pl=null,an=null;function $C(e){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Pl,e,void 0,(e.current.flags&128)===128)}catch{}}function ya(e){if(typeof IC=="function"&&UC(e),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(Pl,e)}catch{}}var rn=Math.clz32?Math.clz32:qC,BC=Math.log,HC=Math.LN2;function qC(e){return e>>>=0,e===0?32:31-(BC(e)/HC|0)|0}var dc=128,fc=4194304;function sr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ed(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes,i=e.warmLanes;e=e.finishedLanes!==0;var l=n&134217727;return l!==0?(n=l&~a,n!==0?s=sr(n):(o&=l,o!==0?s=sr(o):e||(i=l&~i,i!==0&&(s=sr(i))))):(l=n&~a,l!==0?s=sr(l):o!==0?s=sr(o):e||(i=n&~i,i!==0&&(s=sr(i)))),s===0?0:t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===32&&(i&4194176)!==0)?t:s}function Il(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function FC(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ry(){var e=dc;return dc<<=1,!(dc&4194176)&&(dc=128),e}function oy(){var e=fc;return fc<<=1,!(fc&62914560)&&(fc=4194304),e}function nf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ul(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function VC(e,t,n,s,a,o){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,c=e.expirationTimes,d=e.hiddenUpdates;for(n=i&~n;0<n;){var f=31-rn(n),h=1<<f;l[f]=0,c[f]=-1;var m=d[f];if(m!==null)for(d[f]=null,f=0;f<m.length;f++){var g=m[f];g!==null&&(g.lane&=-536870913)}n&=~h}s!==0&&iy(e,s,0),o!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=o&~(i&~t))}function iy(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-rn(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|n&4194218}function ly(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-rn(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}function cy(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function uy(){var e=We.p;return e!==0?e:(e=window.event,e===void 0?32:Nw(e.type))}function YC(e,t){var n=We.p;try{return We.p=e,t()}finally{We.p=n}}var Ha=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Ha,Zt="__reactProps$"+Ha,ui="__reactContainer$"+Ha,dh="__reactEvents$"+Ha,GC="__reactListeners$"+Ha,QC="__reactHandles$"+Ha,Qg="__reactResources$"+Ha,dl="__reactMarker$"+Ha;function Km(e){delete e[Mt],delete e[Zt],delete e[dh],delete e[GC],delete e[QC]}function or(e){var t=e[Mt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ui]||n[Mt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=X0(e);e!==null;){if(n=e[Mt])return n;e=X0(e)}return t}e=n,n=e.parentNode}return null}function di(e){if(e=e[Mt]||e[ui]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function $i(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(J(33))}function So(e){var t=e[Qg];return t||(t=e[Qg]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function bt(e){e[dl]=!0}var dy=new Set,fy={};function Br(e,t){Qo(e,t),Qo(e+"Capture",t)}function Qo(e,t){for(fy[e]=t,e=0;e<t.length;e++)dy.add(t[e])}var Hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),KC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kg={},Xg={};function XC(e){return uh.call(Xg,e)?!0:uh.call(Kg,e)?!1:KC.test(e)?Xg[e]=!0:(Kg[e]=!0,!1)}function zc(e,t,n){if(XC(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function hc(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function bs(e,t,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+s)}}function xn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ZC(e){var t=hy(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function uu(e){e._valueTracker||(e._valueTracker=ZC(e))}function my(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=hy(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function du(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var WC=/[\n"\\]/g;function wn(e){return e.replace(WC,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function fh(e,t,n,s,a,o,i,l){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+xn(t)):e.value!==""+xn(t)&&(e.value=""+xn(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?hh(e,i,xn(t)):n!=null?hh(e,i,xn(n)):s!=null&&e.removeAttribute("value"),a==null&&o!=null&&(e.defaultChecked=!!o),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+xn(l):e.removeAttribute("name")}function py(e,t,n,s,a,o,i,l){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;n=n!=null?""+xn(n):"",t=t!=null?""+xn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}s=s??a,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i)}function hh(e,t,n){t==="number"&&du(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function No(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+xn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function gy(e,t,n){if(t!=null&&(t=""+xn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+xn(n):""}function xy(e,t,n,s){if(t==null){if(s!=null){if(n!=null)throw Error(J(92));if(Ui(s)){if(1<s.length)throw Error(J(93));s=s[0]}n=s}n==null&&(n=""),t=n}n=xn(t),e.defaultValue=n,s=e.textContent,s===n&&s!==""&&s!==null&&(e.value=s)}function Ko(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var JC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zg(e,t,n){var s=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,n):typeof n!="number"||n===0||JC.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function vy(e,t,n){if(t!=null&&typeof t!="object")throw Error(J(62));if(e=e.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var a in t)s=t[a],t.hasOwnProperty(a)&&n[a]!==s&&Zg(e,a,s)}else for(var o in t)t.hasOwnProperty(o)&&Zg(e,o,t[o])}function Xm(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pc(e){return tE.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var mh=null;function Zm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fo=null,jo=null;function Wg(e){var t=di(e);if(t&&(e=t.stateNode)){var n=e[Zt]||null;e:switch(e=t.stateNode,t.type){case"input":if(fh(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+wn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=s[Zt]||null;if(!a)throw Error(J(90));fh(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)s=n[t],s.form===e.form&&my(s)}break e;case"textarea":gy(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&No(e,!!n.multiple,t,!1)}}}var sf=!1;function yy(e,t,n){if(sf)return e(t,n);sf=!0;try{var s=e(t);return s}finally{if(sf=!1,(fo!==null||jo!==null)&&(ud(),fo&&(t=fo,e=jo,jo=fo=null,Wg(t),e)))for(t=0;t<e.length;t++)Wg(e[t])}}function fl(e,t){var n=e.stateNode;if(n===null)return null;var s=n[Zt]||null;if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var ph=!1;if(Hs)try{var ki={};Object.defineProperty(ki,"passive",{get:function(){ph=!0}}),window.addEventListener("test",ki,ki),window.removeEventListener("test",ki,ki)}catch{ph=!1}var ba=null,Wm=null,Ic=null;function by(){if(Ic)return Ic;var e,t=Wm,n=t.length,s,a="value"in ba?ba.value:ba.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===a[o-s];s++);return Ic=a.slice(e,1<s?1-s:void 0)}function Uc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mc(){return!0}function Jg(){return!1}function Wt(e){function t(n,s,a,o,i){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?mc:Jg,this.isPropagationStopped=Jg,this}return Je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mc)},persist:function(){},isPersistent:mc}),t}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=Wt(Hr),$l=Je({},Hr,{view:0,detail:0}),nE=Wt($l),af,rf,Ai,nd=Je({},$l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ai&&(Ai&&e.type==="mousemove"?(af=e.screenX-Ai.screenX,rf=e.screenY-Ai.screenY):rf=af=0,Ai=e),af)},movementY:function(e){return"movementY"in e?e.movementY:rf}}),e0=Wt(nd),sE=Je({},nd,{dataTransfer:0}),aE=Wt(sE),rE=Je({},$l,{relatedTarget:0}),of=Wt(rE),oE=Je({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),iE=Wt(oE),lE=Je({},Hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cE=Wt(lE),uE=Je({},Hr,{data:0}),t0=Wt(uE),dE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hE[e])?!!t[e]:!1}function Jm(){return mE}var pE=Je({},$l,{key:function(e){if(e.key){var t=dE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Uc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jm,charCode:function(e){return e.type==="keypress"?Uc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gE=Wt(pE),xE=Je({},nd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n0=Wt(xE),vE=Je({},$l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jm}),yE=Wt(vE),bE=Je({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wE=Wt(bE),SE=Je({},nd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),NE=Wt(SE),jE=Je({},Hr,{newState:0,oldState:0}),CE=Wt(jE),EE=[9,13,27,32],ep=Hs&&"CompositionEvent"in window,Gi=null;Hs&&"documentMode"in document&&(Gi=document.documentMode);var kE=Hs&&"TextEvent"in window&&!Gi,wy=Hs&&(!ep||Gi&&8<Gi&&11>=Gi),s0=" ",a0=!1;function Sy(e,t){switch(e){case"keyup":return EE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ny(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ho=!1;function AE(e,t){switch(e){case"compositionend":return Ny(t);case"keypress":return t.which!==32?null:(a0=!0,s0);case"textInput":return e=t.data,e===s0&&a0?null:e;default:return null}}function TE(e,t){if(ho)return e==="compositionend"||!ep&&Sy(e,t)?(e=by(),Ic=Wm=ba=null,ho=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wy&&t.locale!=="ko"?null:t.data;default:return null}}var RE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RE[e.type]:t==="textarea"}function jy(e,t,n,s){fo?jo?jo.push(s):jo=[s]:fo=s,t=ku(t,"onChange"),0<t.length&&(n=new td("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Qi=null,hl=null;function ME(e){uw(e,0)}function sd(e){var t=$i(e);if(my(t))return e}function o0(e,t){if(e==="change")return t}var Cy=!1;if(Hs){var lf;if(Hs){var cf="oninput"in document;if(!cf){var i0=document.createElement("div");i0.setAttribute("oninput","return;"),cf=typeof i0.oninput=="function"}lf=cf}else lf=!1;Cy=lf&&(!document.documentMode||9<document.documentMode)}function l0(){Qi&&(Qi.detachEvent("onpropertychange",Ey),hl=Qi=null)}function Ey(e){if(e.propertyName==="value"&&sd(hl)){var t=[];jy(t,hl,e,Zm(e)),yy(ME,t)}}function _E(e,t,n){e==="focusin"?(l0(),Qi=t,hl=n,Qi.attachEvent("onpropertychange",Ey)):e==="focusout"&&l0()}function OE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sd(hl)}function DE(e,t){if(e==="click")return sd(t)}function LE(e,t){if(e==="input"||e==="change")return sd(t)}function zE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var un=typeof Object.is=="function"?Object.is:zE;function ml(e,t){if(un(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!uh.call(t,a)||!un(e[a],t[a]))return!1}return!0}function c0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function u0(e,t){var n=c0(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=c0(n)}}function ky(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ky(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ay(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=du(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=du(e.document)}return t}function tp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function PE(e,t){var n=Ay(t);t=e.focusedElem;var s=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&ky(t.ownerDocument.documentElement,t)){if(s!==null&&tp(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var a=t.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!n.extend&&o>s&&(a=s,s=o,o=a),a=u0(t,o);var i=u0(t,s);a&&i&&(n.rangeCount!==1||n.anchorNode!==a.node||n.anchorOffset!==a.offset||n.focusNode!==i.node||n.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),n.removeAllRanges(),o>s?(n.addRange(e),n.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var IE=Hs&&"documentMode"in document&&11>=document.documentMode,mo=null,gh=null,Ki=null,xh=!1;function d0(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xh||mo==null||mo!==du(s)||(s=mo,"selectionStart"in s&&tp(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ki&&ml(Ki,s)||(Ki=s,s=ku(gh,"onSelect"),0<s.length&&(t=new td("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=mo)))}function tr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var po={animationend:tr("Animation","AnimationEnd"),animationiteration:tr("Animation","AnimationIteration"),animationstart:tr("Animation","AnimationStart"),transitionrun:tr("Transition","TransitionRun"),transitionstart:tr("Transition","TransitionStart"),transitioncancel:tr("Transition","TransitionCancel"),transitionend:tr("Transition","TransitionEnd")},uf={},Ty={};Hs&&(Ty=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function qr(e){if(uf[e])return uf[e];if(!po[e])return e;var t=po[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ty)return uf[e]=t[n];return e}var Ry=qr("animationend"),My=qr("animationiteration"),_y=qr("animationstart"),UE=qr("transitionrun"),$E=qr("transitionstart"),BE=qr("transitioncancel"),Oy=qr("transitionend"),Dy=new Map,f0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Kn(e,t){Dy.set(e,t),Br(t,[e])}var gn=[],go=0,np=0;function ad(){for(var e=go,t=np=go=0;t<e;){var n=gn[t];gn[t++]=null;var s=gn[t];gn[t++]=null;var a=gn[t];gn[t++]=null;var o=gn[t];if(gn[t++]=null,s!==null&&a!==null){var i=s.pending;i===null?a.next=a:(a.next=i.next,i.next=a),s.pending=a}o!==0&&Ly(n,a,o)}}function rd(e,t,n,s){gn[go++]=e,gn[go++]=t,gn[go++]=n,gn[go++]=s,np|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function sp(e,t,n,s){return rd(e,t,n,s),fu(e)}function _a(e,t){return rd(e,null,null,t),fu(e)}function Ly(e,t,n){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n);for(var a=!1,o=e.return;o!==null;)o.childLanes|=n,s=o.alternate,s!==null&&(s.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(a=!0)),e=o,o=o.return;a&&t!==null&&e.tag===3&&(o=e.stateNode,a=31-rn(n),o=o.hiddenUpdates,e=o[a],e===null?o[a]=[t]:e.push(t),t.lane=n|536870912)}function fu(e){if(50<il)throw il=0,Uh=null,Error(J(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var xo={},h0=new WeakMap;function Sn(e,t){if(typeof e=="object"&&e!==null){var n=h0.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Yg(t)},h0.set(e,t),t)}return{value:e,source:t,stack:Yg(t)}}var vo=[],yo=0,hu=null,mu=0,vn=[],yn=0,vr=null,Ds=1,Ls="";function ar(e,t){vo[yo++]=mu,vo[yo++]=hu,hu=e,mu=t}function zy(e,t,n){vn[yn++]=Ds,vn[yn++]=Ls,vn[yn++]=vr,vr=e;var s=Ds;e=Ls;var a=32-rn(s)-1;s&=~(1<<a),n+=1;var o=32-rn(t)+a;if(30<o){var i=a-a%5;o=(s&(1<<i)-1).toString(32),s>>=i,a-=i,Ds=1<<32-rn(t)+a|n<<a|s,Ls=o+e}else Ds=1<<o|n<<a|s,Ls=e}function ap(e){e.return!==null&&(ar(e,1),zy(e,1,0))}function rp(e){for(;e===hu;)hu=vo[--yo],vo[yo]=null,mu=vo[--yo],vo[yo]=null;for(;e===vr;)vr=vn[--yn],vn[yn]=null,Ls=vn[--yn],vn[yn]=null,Ds=vn[--yn],vn[yn]=null}var $t=null,jt=null,Be=!1,In=null,es=!1,vh=Error(J(519));function Er(e){var t=Error(J(418,""));throw pl(Sn(t,e)),vh}function m0(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[Mt]=e,t[Zt]=s,n){case"dialog":ze("cancel",t),ze("close",t);break;case"iframe":case"object":case"embed":ze("load",t);break;case"video":case"audio":for(n=0;n<vl.length;n++)ze(vl[n],t);break;case"source":ze("error",t);break;case"img":case"image":case"link":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"input":ze("invalid",t),py(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),uu(t);break;case"select":ze("invalid",t);break;case"textarea":ze("invalid",t),xy(t,s.value,s.defaultValue,s.children),uu(t)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||s.suppressHydrationWarning===!0||fw(t.textContent,n)?(s.popover!=null&&(ze("beforetoggle",t),ze("toggle",t)),s.onScroll!=null&&ze("scroll",t),s.onScrollEnd!=null&&ze("scrollend",t),s.onClick!=null&&(t.onclick=fd),t=!0):t=!1,t||Er(e)}function p0(e){for($t=e.return;$t;)switch($t.tag){case 3:case 27:es=!0;return;case 5:case 13:es=!1;return;default:$t=$t.return}}function Ti(e){if(e!==$t)return!1;if(!Be)return p0(e),Be=!0,!1;var t=!1,n;if((n=e.tag!==3&&e.tag!==27)&&((n=e.tag===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Yh(e.type,e.memoizedProps)),n=!n),n&&(t=!0),t&&jt&&Er(e),p0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){jt=Hn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}jt=null}}else jt=$t?Hn(e.stateNode.nextSibling):null;return!0}function Bl(){jt=$t=null,Be=!1}function pl(e){In===null?In=[e]:In.push(e)}var Xi=Error(J(460)),Py=Error(J(474)),yh={then:function(){}};function g0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function pc(){}function Iy(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(pc,pc),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===Xi?Error(J(483)):e;default:if(typeof t.status=="string")t.then(pc,pc);else{if(e=Ze,e!==null&&100<e.shellSuspendCounter)throw Error(J(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=s}},function(s){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===Xi?Error(J(483)):e}throw Zi=t,Xi}}var Zi=null;function x0(){if(Zi===null)throw Error(J(459));var e=Zi;return Zi=null,e}var Co=null,gl=0;function gc(e){var t=gl;return gl+=1,Co===null&&(Co=[]),Iy(Co,e,t)}function Ri(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function xc(e,t){throw t.$$typeof===AC?Error(J(525)):(e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function v0(e){var t=e._init;return t(e._payload)}function Uy(e){function t(v,p){if(e){var y=v.deletions;y===null?(v.deletions=[p],v.flags|=16):y.push(p)}}function n(v,p){if(!e)return null;for(;p!==null;)t(v,p),p=p.sibling;return null}function s(v){for(var p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function a(v,p){return v=ja(v,p),v.index=0,v.sibling=null,v}function o(v,p,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<p?(v.flags|=33554434,p):y):(v.flags|=33554434,p)):(v.flags|=1048576,p)}function i(v){return e&&v.alternate===null&&(v.flags|=33554434),v}function l(v,p,y,S){return p===null||p.tag!==6?(p=Sf(y,v.mode,S),p.return=v,p):(p=a(p,y),p.return=v,p)}function c(v,p,y,S){var j=y.type;return j===co?f(v,p,y.props.children,S,y.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===sa&&v0(j)===p.type)?(p=a(p,y.props),Ri(p,y),p.return=v,p):(p=Fc(y.type,y.key,y.props,null,v.mode,S),Ri(p,y),p.return=v,p)}function d(v,p,y,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Nf(y,v.mode,S),p.return=v,p):(p=a(p,y.children||[]),p.return=v,p)}function f(v,p,y,S,j){return p===null||p.tag!==7?(p=br(y,v.mode,S,j),p.return=v,p):(p=a(p,y),p.return=v,p)}function h(v,p,y){if(typeof p=="string"&&p!==""||typeof p=="number"||typeof p=="bigint")return p=Sf(""+p,v.mode,y),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case uc:return y=Fc(p.type,p.key,p.props,null,v.mode,y),Ri(y,p),y.return=v,y;case Pi:return p=Nf(p,v.mode,y),p.return=v,p;case sa:var S=p._init;return p=S(p._payload),h(v,p,y)}if(Ui(p)||Ei(p))return p=br(p,v.mode,y,null),p.return=v,p;if(typeof p.then=="function")return h(v,gc(p),y);if(p.$$typeof===Os)return h(v,vc(v,p),y);xc(v,p)}return null}function m(v,p,y,S){var j=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return j!==null?null:l(v,p,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case uc:return y.key===j?c(v,p,y,S):null;case Pi:return y.key===j?d(v,p,y,S):null;case sa:return j=y._init,y=j(y._payload),m(v,p,y,S)}if(Ui(y)||Ei(y))return j!==null?null:f(v,p,y,S,null);if(typeof y.then=="function")return m(v,p,gc(y),S);if(y.$$typeof===Os)return m(v,p,vc(v,y),S);xc(v,y)}return null}function g(v,p,y,S,j){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return v=v.get(y)||null,l(p,v,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case uc:return v=v.get(S.key===null?y:S.key)||null,c(p,v,S,j);case Pi:return v=v.get(S.key===null?y:S.key)||null,d(p,v,S,j);case sa:var E=S._init;return S=E(S._payload),g(v,p,y,S,j)}if(Ui(S)||Ei(S))return v=v.get(y)||null,f(p,v,S,j,null);if(typeof S.then=="function")return g(v,p,y,gc(S),j);if(S.$$typeof===Os)return g(v,p,y,vc(p,S),j);xc(p,S)}return null}function b(v,p,y,S){for(var j=null,E=null,N=p,C=p=0,A=null;N!==null&&C<y.length;C++){N.index>C?(A=N,N=null):A=N.sibling;var T=m(v,N,y[C],S);if(T===null){N===null&&(N=A);break}e&&N&&T.alternate===null&&t(v,N),p=o(T,p,C),E===null?j=T:E.sibling=T,E=T,N=A}if(C===y.length)return n(v,N),Be&&ar(v,C),j;if(N===null){for(;C<y.length;C++)N=h(v,y[C],S),N!==null&&(p=o(N,p,C),E===null?j=N:E.sibling=N,E=N);return Be&&ar(v,C),j}for(N=s(N);C<y.length;C++)A=g(N,v,C,y[C],S),A!==null&&(e&&A.alternate!==null&&N.delete(A.key===null?C:A.key),p=o(A,p,C),E===null?j=A:E.sibling=A,E=A);return e&&N.forEach(function(z){return t(v,z)}),Be&&ar(v,C),j}function x(v,p,y,S){if(y==null)throw Error(J(151));for(var j=null,E=null,N=p,C=p=0,A=null,T=y.next();N!==null&&!T.done;C++,T=y.next()){N.index>C?(A=N,N=null):A=N.sibling;var z=m(v,N,T.value,S);if(z===null){N===null&&(N=A);break}e&&N&&z.alternate===null&&t(v,N),p=o(z,p,C),E===null?j=z:E.sibling=z,E=z,N=A}if(T.done)return n(v,N),Be&&ar(v,C),j;if(N===null){for(;!T.done;C++,T=y.next())T=h(v,T.value,S),T!==null&&(p=o(T,p,C),E===null?j=T:E.sibling=T,E=T);return Be&&ar(v,C),j}for(N=s(N);!T.done;C++,T=y.next())T=g(N,v,C,T.value,S),T!==null&&(e&&T.alternate!==null&&N.delete(T.key===null?C:T.key),p=o(T,p,C),E===null?j=T:E.sibling=T,E=T);return e&&N.forEach(function(M){return t(v,M)}),Be&&ar(v,C),j}function w(v,p,y,S){if(typeof y=="object"&&y!==null&&y.type===co&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case uc:e:{for(var j=y.key;p!==null;){if(p.key===j){if(j=y.type,j===co){if(p.tag===7){n(v,p.sibling),S=a(p,y.props.children),S.return=v,v=S;break e}}else if(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===sa&&v0(j)===p.type){n(v,p.sibling),S=a(p,y.props),Ri(S,y),S.return=v,v=S;break e}n(v,p);break}else t(v,p);p=p.sibling}y.type===co?(S=br(y.props.children,v.mode,S,y.key),S.return=v,v=S):(S=Fc(y.type,y.key,y.props,null,v.mode,S),Ri(S,y),S.return=v,v=S)}return i(v);case Pi:e:{for(j=y.key;p!==null;){if(p.key===j)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(v,p.sibling),S=a(p,y.children||[]),S.return=v,v=S;break e}else{n(v,p);break}else t(v,p);p=p.sibling}S=Nf(y,v.mode,S),S.return=v,v=S}return i(v);case sa:return j=y._init,y=j(y._payload),w(v,p,y,S)}if(Ui(y))return b(v,p,y,S);if(Ei(y)){if(j=Ei(y),typeof j!="function")throw Error(J(150));return y=j.call(y),x(v,p,y,S)}if(typeof y.then=="function")return w(v,p,gc(y),S);if(y.$$typeof===Os)return w(v,p,vc(v,y),S);xc(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,p!==null&&p.tag===6?(n(v,p.sibling),S=a(p,y),S.return=v,v=S):(n(v,p),S=Sf(y,v.mode,S),S.return=v,v=S),i(v)):n(v,p)}return function(v,p,y,S){try{gl=0;var j=w(v,p,y,S);return Co=null,j}catch(N){if(N===Xi)throw N;var E=Nn(29,N,null,v.mode);return E.lanes=S,E.return=v,E}finally{}}}var kr=Uy(!0),$y=Uy(!1),Xo=ms(null),pu=ms(0);function y0(e,t){e=Vs,et(pu,e),et(Xo,t),Vs=e|t.baseLanes}function bh(){et(pu,Vs),et(Xo,Xo.current)}function op(){Vs=pu.current,St(Xo),St(pu)}var kn=ms(null),os=null;function ra(e){var t=e.alternate;et(xt,xt.current&1),et(kn,e),os===null&&(t===null||Xo.current!==null||t.memoizedState!==null)&&(os=e)}function By(e){if(e.tag===22){if(et(xt,xt.current),et(kn,e),os===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(os=e)}}else oa()}function oa(){et(xt,xt.current),et(kn,kn.current)}function zs(e){St(kn),os===e&&(os=null),St(xt)}var xt=ms(0);function gu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var HE=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},qE=vt.unstable_scheduleCallback,FE=vt.unstable_NormalPriority,pt={$$typeof:Os,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ip(){return{controller:new HE,data:new Map,refCount:0}}function Hl(e){e.refCount--,e.refCount===0&&qE(FE,function(){e.controller.abort()})}var Wi=null,wh=0,Zo=0,Eo=null;function VE(e,t){if(Wi===null){var n=Wi=[];wh=0,Zo=Rp(),Eo={status:"pending",value:void 0,then:function(s){n.push(s)}}}return wh++,t.then(b0,b0),t}function b0(){if(--wh===0&&Wi!==null){Eo!==null&&(Eo.status="fulfilled");var e=Wi;Wi=null,Zo=0,Eo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function YE(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var a=0;a<n.length;a++)(0,n[a])(t)},function(a){for(s.status="rejected",s.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),s}var w0=Ce.S;Ce.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&VE(e,t),w0!==null&&w0(e,t)};var yr=ms(null);function lp(){var e=yr.current;return e!==null?e:Ze.pooledCache}function $c(e,t){t===null?et(yr,yr.current):et(yr,t.pool)}function Hy(){var e=lp();return e===null?null:{parent:pt._currentValue,pool:e}}var Oa=0,Te=null,Ge=null,ut=null,xu=!1,ko=!1,Ar=!1,vu=0,xl=0,Ao=null,GE=0;function lt(){throw Error(J(321))}function cp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!un(e[n],t[n]))return!1;return!0}function up(e,t,n,s,a,o){return Oa=o,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ce.H=e===null||e.memoizedState===null?Fr:qa,Ar=!1,o=n(s,a),Ar=!1,ko&&(o=Fy(t,n,s,a)),qy(e),o}function qy(e){Ce.H=us;var t=Ge!==null&&Ge.next!==null;if(Oa=0,ut=Ge=Te=null,xu=!1,xl=0,Ao=null,t)throw Error(J(300));e===null||wt||(e=e.dependencies,e!==null&&wu(e)&&(wt=!0))}function Fy(e,t,n,s){Te=e;var a=0;do{if(ko&&(Ao=null),xl=0,ko=!1,25<=a)throw Error(J(301));if(a+=1,ut=Ge=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}Ce.H=Vr,o=t(n,s)}while(ko);return o}function QE(){var e=Ce.H,t=e.useState()[0];return t=typeof t.then=="function"?ql(t):t,e=e.useState()[0],(Ge!==null?Ge.memoizedState:null)!==e&&(Te.flags|=1024),t}function dp(){var e=vu!==0;return vu=0,e}function fp(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function hp(e){if(xu){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}xu=!1}Oa=0,ut=Ge=Te=null,ko=!1,xl=vu=0,Ao=null}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Te.memoizedState=ut=e:ut=ut.next=e,ut}function ht(){if(Ge===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=ut===null?Te.memoizedState:ut.next;if(t!==null)ut=t,Ge=e;else{if(e===null)throw Te.alternate===null?Error(J(467)):Error(J(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},ut===null?Te.memoizedState=ut=e:ut=ut.next=e}return ut}var od;od=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ql(e){var t=xl;return xl+=1,Ao===null&&(Ao=[]),e=Iy(Ao,e,t),t=Te,(ut===null?t.memoizedState:ut.next)===null&&(t=t.alternate,Ce.H=t===null||t.memoizedState===null?Fr:qa),e}function id(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ql(e);if(e.$$typeof===Os)return _t(e)}throw Error(J(438,String(e)))}function mp(e){var t=null,n=Te.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var s=Te.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=od(),Te.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=RC;return t.index++,n}function qs(e,t){return typeof t=="function"?t(e):t}function Bc(e){var t=ht();return pp(t,Ge,e)}function pp(e,t,n){var s=e.queue;if(s===null)throw Error(J(311));s.lastRenderedReducer=n;var a=e.baseQueue,o=s.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}t.baseQueue=a=o,s.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var l=i=null,c=null,d=t,f=!1;do{var h=d.lane&-536870913;if(h!==d.lane?(Ue&h)===h:(Oa&h)===h){var m=d.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Zo&&(f=!0);else if((Oa&m)===m){d=d.next,m===Zo&&(f=!0);continue}else h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=h,i=o):c=c.next=h,Te.lanes|=m,La|=m;h=d.action,Ar&&n(o,h),o=d.hasEagerState?d.eagerState:n(o,h)}else m={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(l=c=m,i=o):c=c.next=m,Te.lanes|=h,La|=h;d=d.next}while(d!==null&&d!==t);if(c===null?i=o:c.next=l,!un(o,e.memoizedState)&&(wt=!0,f&&(n=Eo,n!==null)))throw n;e.memoizedState=o,e.baseState=i,e.baseQueue=c,s.lastRenderedState=o}return a===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function df(e){var t=ht(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);un(o,t.memoizedState)||(wt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,s]}function Vy(e,t,n){var s=Te,a=ht(),o=Be;if(o){if(n===void 0)throw Error(J(407));n=n()}else n=t();var i=!un((Ge||a).memoizedState,n);if(i&&(a.memoizedState=n,wt=!0),a=a.queue,gp(Qy.bind(null,s,a,e),[e]),a.getSnapshot!==t||i||ut!==null&&ut.memoizedState.tag&1){if(s.flags|=2048,Wo(9,Gy.bind(null,s,a,n,t),{destroy:void 0},null),Ze===null)throw Error(J(349));o||Oa&60||Yy(s,t,n)}return n}function Yy(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Te.updateQueue,t===null?(t=od(),Te.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Gy(e,t,n,s){t.value=n,t.getSnapshot=s,Ky(t)&&Xy(e)}function Qy(e,t,n){return n(function(){Ky(t)&&Xy(e)})}function Ky(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!un(e,n)}catch{return!0}}function Xy(e){var t=_a(e,2);t!==null&&Ht(t,e,2)}function Sh(e){var t=Qt();if(typeof e=="function"){var n=e;if(e=n(),Ar){ya(!0);try{n()}finally{ya(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:e},t}function Zy(e,t,n,s){return e.baseState=n,pp(e,Ge,typeof s=="function"?s:qs)}function KE(e,t,n,s,a){if(cd(e))throw Error(J(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){o.listeners.push(i)}};Ce.T!==null?n(!0):o.isTransition=!1,s(o),n=t.pending,n===null?(o.next=t.pending=o,Wy(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Wy(e,t){var n=t.action,s=t.payload,a=e.state;if(t.isTransition){var o=Ce.T,i={};Ce.T=i;try{var l=n(a,s),c=Ce.S;c!==null&&c(i,l),S0(e,t,l)}catch(d){Nh(e,t,d)}finally{Ce.T=o}}else try{o=n(a,s),S0(e,t,o)}catch(d){Nh(e,t,d)}}function S0(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){N0(e,t,s)},function(s){return Nh(e,t,s)}):N0(e,t,n)}function N0(e,t,n){t.status="fulfilled",t.value=n,Jy(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Wy(e,n)))}function Nh(e,t,n){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=n,Jy(t),t=t.next;while(t!==s)}e.action=null}function Jy(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function eb(e,t){return t}function tb(e,t){if(Be){var n=Ze.formState;if(n!==null){e:{var s=Te;if(Be){if(jt){t:{for(var a=jt,o=es;a.nodeType!==8;){if(!o){a=null;break t}if(a=Hn(a.nextSibling),a===null){a=null;break t}}o=a.data,a=o==="F!"||o==="F"?a:null}if(a){jt=Hn(a.nextSibling),s=a.data==="F!";break e}}Er(s)}s=!1}s&&(t=n[0])}}return n=Qt(),n.memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eb,lastRenderedState:t},n.queue=s,n=vb.bind(null,Te,s),s.dispatch=n,s=Sh(!1),o=bp.bind(null,Te,!1,s.queue),s=Qt(),a={state:t,dispatch:null,action:e,pending:null},s.queue=a,n=KE.bind(null,Te,a,o,n),a.dispatch=n,s.memoizedState=e,[t,n,!1]}function nb(e){var t=ht();return sb(t,Ge,e)}function sb(e,t,n){t=pp(e,t,eb)[0],e=Bc(qs)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?ql(t):t;var s=ht(),a=s.queue,o=a.dispatch;return n!==s.memoizedState&&(Te.flags|=2048,Wo(9,XE.bind(null,a,n),{destroy:void 0},null)),[t,o,e]}function XE(e,t){e.action=t}function ab(e){var t=ht(),n=Ge;if(n!==null)return sb(t,n,e);ht(),t=t.memoizedState,n=ht();var s=n.queue.dispatch;return n.memoizedState=e,[t,s,!1]}function Wo(e,t,n,s){return e={tag:e,create:t,inst:n,deps:s,next:null},t=Te.updateQueue,t===null&&(t=od(),Te.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function rb(){return ht().memoizedState}function Hc(e,t,n,s){var a=Qt();Te.flags|=e,a.memoizedState=Wo(1|t,n,{destroy:void 0},s===void 0?null:s)}function ld(e,t,n,s){var a=ht();s=s===void 0?null:s;var o=a.memoizedState.inst;Ge!==null&&s!==null&&cp(s,Ge.memoizedState.deps)?a.memoizedState=Wo(t,n,o,s):(Te.flags|=e,a.memoizedState=Wo(1|t,n,o,s))}function j0(e,t){Hc(8390656,8,e,t)}function gp(e,t){ld(2048,8,e,t)}function ob(e,t){return ld(4,2,e,t)}function ib(e,t){return ld(4,4,e,t)}function lb(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cb(e,t,n){n=n!=null?n.concat([e]):null,ld(4,4,lb.bind(null,t,e),n)}function xp(){}function ub(e,t){var n=ht();t=t===void 0?null:t;var s=n.memoizedState;return t!==null&&cp(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function db(e,t){var n=ht();t=t===void 0?null:t;var s=n.memoizedState;if(t!==null&&cp(t,s[1]))return s[0];if(s=e(),Ar){ya(!0);try{e()}finally{ya(!1)}}return n.memoizedState=[s,t],s}function vp(e,t,n){return n===void 0||Oa&1073741824?e.memoizedState=t:(e.memoizedState=n,e=Jb(),Te.lanes|=e,La|=e,n)}function fb(e,t,n,s){return un(n,t)?n:Xo.current!==null?(e=vp(e,n,s),un(e,t)||(wt=!0),e):Oa&42?(e=Jb(),Te.lanes|=e,La|=e,t):(wt=!0,e.memoizedState=n)}function hb(e,t,n,s,a){var o=We.p;We.p=o!==0&&8>o?o:8;var i=Ce.T,l={};Ce.T=l,bp(e,!1,t,n);try{var c=a(),d=Ce.S;if(d!==null&&d(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=YE(c,s);Ji(e,t,f,on(e))}else Ji(e,t,s,on(e))}catch(h){Ji(e,t,{then:function(){},status:"rejected",reason:h},on())}finally{We.p=o,Ce.T=i}}function ZE(){}function jh(e,t,n,s){if(e.tag!==5)throw Error(J(476));var a=mb(e).queue;hb(e,a,t,xr,n===null?ZE:function(){return pb(e),n(s)})}function mb(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:xr,baseState:xr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:xr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function pb(e){var t=mb(e).next.queue;Ji(e,t,{},on())}function yp(){return _t(wl)}function gb(){return ht().memoizedState}function xb(){return ht().memoizedState}function WE(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=on();e=Sa(n);var s=Na(t,e,n);s!==null&&(Ht(s,t,n),tl(s,t,n)),t={cache:ip()},e.payload=t;return}t=t.return}}function JE(e,t,n){var s=on();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},cd(e)?yb(t,n):(n=sp(e,t,n,s),n!==null&&(Ht(n,e,s),bb(n,t,s)))}function vb(e,t,n){var s=on();Ji(e,t,n,s)}function Ji(e,t,n,s){var a={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(cd(e))yb(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,l=o(i,n);if(a.hasEagerState=!0,a.eagerState=l,un(l,i))return rd(e,t,a,0),Ze===null&&ad(),!1}catch{}finally{}if(n=sp(e,t,a,s),n!==null)return Ht(n,e,s),bb(n,t,s),!0}return!1}function bp(e,t,n,s){if(s={lane:2,revertLane:Rp(),action:s,hasEagerState:!1,eagerState:null,next:null},cd(e)){if(t)throw Error(J(479))}else t=sp(e,n,s,2),t!==null&&Ht(t,e,2)}function cd(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function yb(e,t){ko=xu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bb(e,t,n){if(n&4194176){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,ly(e,n)}}var us={readContext:_t,use:id,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt};us.useCacheRefresh=lt;us.useMemoCache=lt;us.useHostTransitionStatus=lt;us.useFormState=lt;us.useActionState=lt;us.useOptimistic=lt;var Fr={readContext:_t,use:id,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:j0,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Hc(4194308,4,lb.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hc(4194308,4,e,t)},useInsertionEffect:function(e,t){Hc(4,2,e,t)},useMemo:function(e,t){var n=Qt();t=t===void 0?null:t;var s=e();if(Ar){ya(!0);try{e()}finally{ya(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=Qt();if(n!==void 0){var a=n(t);if(Ar){ya(!0);try{n(t)}finally{ya(!1)}}}else a=t;return s.memoizedState=s.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},s.queue=e,e=e.dispatch=JE.bind(null,Te,e),[s.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:function(e){e=Sh(e);var t=e.queue,n=vb.bind(null,Te,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:xp,useDeferredValue:function(e,t){var n=Qt();return vp(n,e,t)},useTransition:function(){var e=Sh(!1);return e=hb.bind(null,Te,e.queue,!0,!1),Qt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=Te,a=Qt();if(Be){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),Ze===null)throw Error(J(349));Ue&60||Yy(s,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,j0(Qy.bind(null,s,o,e),[e]),s.flags|=2048,Wo(9,Gy.bind(null,s,o,n,t),{destroy:void 0},null),n},useId:function(){var e=Qt(),t=Ze.identifierPrefix;if(Be){var n=Ls,s=Ds;n=(s&~(1<<32-rn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=vu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=GE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return Qt().memoizedState=WE.bind(null,Te)}};Fr.useMemoCache=mp;Fr.useHostTransitionStatus=yp;Fr.useFormState=tb;Fr.useActionState=tb;Fr.useOptimistic=function(e){var t=Qt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=bp.bind(null,Te,!0,n),n.dispatch=t,[e,t]};var qa={readContext:_t,use:id,useCallback:ub,useContext:_t,useEffect:gp,useImperativeHandle:cb,useInsertionEffect:ob,useLayoutEffect:ib,useMemo:db,useReducer:Bc,useRef:rb,useState:function(){return Bc(qs)},useDebugValue:xp,useDeferredValue:function(e,t){var n=ht();return fb(n,Ge.memoizedState,e,t)},useTransition:function(){var e=Bc(qs)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:ql(e),t]},useSyncExternalStore:Vy,useId:gb};qa.useCacheRefresh=xb;qa.useMemoCache=mp;qa.useHostTransitionStatus=yp;qa.useFormState=nb;qa.useActionState=nb;qa.useOptimistic=function(e,t){var n=ht();return Zy(n,Ge,e,t)};var Vr={readContext:_t,use:id,useCallback:ub,useContext:_t,useEffect:gp,useImperativeHandle:cb,useInsertionEffect:ob,useLayoutEffect:ib,useMemo:db,useReducer:df,useRef:rb,useState:function(){return df(qs)},useDebugValue:xp,useDeferredValue:function(e,t){var n=ht();return Ge===null?vp(n,e,t):fb(n,Ge.memoizedState,e,t)},useTransition:function(){var e=df(qs)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:ql(e),t]},useSyncExternalStore:Vy,useId:gb};Vr.useCacheRefresh=xb;Vr.useMemoCache=mp;Vr.useHostTransitionStatus=yp;Vr.useFormState=ab;Vr.useActionState=ab;Vr.useOptimistic=function(e,t){var n=ht();return Ge!==null?Zy(n,Ge,e,t):(n.baseState=e,[e,n.queue.dispatch])};function ff(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ch={isMounted:function(e){return(e=e._reactInternals)?ci(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=on(),a=Sa(s);a.payload=t,n!=null&&(a.callback=n),t=Na(e,a,s),t!==null&&(Ht(t,e,s),tl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=on(),a=Sa(s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Na(e,a,s),t!==null&&(Ht(t,e,s),tl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=on(),s=Sa(n);s.tag=2,t!=null&&(s.callback=t),t=Na(e,s,n),t!==null&&(Ht(t,e,n),tl(t,e,n))}};function C0(e,t,n,s,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):t.prototype&&t.prototype.isPureReactComponent?!ml(n,s)||!ml(a,o):!0}function E0(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Ch.enqueueReplaceState(t,t.state,null)}function Tr(e,t){var n=t;if("ref"in t){n={};for(var s in t)s!=="ref"&&(n[s]=t[s])}if(e=e.defaultProps){n===t&&(n=Je({},n));for(var a in e)n[a]===void 0&&(n[a]=e[a])}return n}var yu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function wb(e){yu(e)}function Sb(e){console.error(e)}function Nb(e){yu(e)}function bu(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function k0(e,t,n){try{var s=e.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Eh(e,t,n){return n=Sa(n),n.tag=3,n.payload={element:null},n.callback=function(){bu(e,t)},n}function jb(e){return e=Sa(e),e.tag=3,e}function Cb(e,t,n,s){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var o=s.value;e.payload=function(){return a(o)},e.callback=function(){k0(t,n,s)}}var i=n.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){k0(t,n,s),typeof a!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var l=s.stack;this.componentDidCatch(s.value,{componentStack:l!==null?l:""})})}function ek(e,t,n,s,a){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=n.alternate,t!==null&&Fl(t,n,a,!0),n=kn.current,n!==null){switch(n.tag){case 13:return os===null?Bh():n.alternate===null&&it===0&&(it=3),n.flags&=-257,n.flags|=65536,n.lanes=a,s===yh?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([s]):t.add(s),Cf(e,s,a)),!1;case 22:return n.flags|=65536,s===yh?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([s]):n.add(s)),Cf(e,s,a)),!1}throw Error(J(435,n.tag))}return Cf(e,s,a),Bh(),!1}if(Be)return t=kn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,s!==vh&&(e=Error(J(422),{cause:s}),pl(Sn(e,n)))):(s!==vh&&(t=Error(J(423),{cause:s}),pl(Sn(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,s=Sn(s,n),a=Eh(e.stateNode,s,a),vf(e,a),it!==4&&(it=2)),!1;var o=Error(J(520),{cause:s});if(o=Sn(o,n),rl===null?rl=[o]:rl.push(o),it!==4&&(it=2),t===null)return!0;s=Sn(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=Eh(n.stateNode,s,e),vf(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Ca===null||!Ca.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=jb(a),Cb(a,e,n,s),vf(n,a),!1}n=n.return}while(n!==null);return!1}var Eb=Error(J(461)),wt=!1;function Nt(e,t,n,s){t.child=e===null?$y(t,null,n,s):kr(t,e.child,n,s)}function A0(e,t,n,s,a){n=n.render;var o=t.ref;if("ref"in s){var i={};for(var l in s)l!=="ref"&&(i[l]=s[l])}else i=s;return Rr(t),s=up(e,t,n,i,o,a),l=dp(),e!==null&&!wt?(fp(e,t,a),Fs(e,t,a)):(Be&&l&&ap(t),t.flags|=1,Nt(e,t,s,a),t.child)}function T0(e,t,n,s,a){if(e===null){var o=n.type;return typeof o=="function"&&!Cp(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,kb(e,t,o,s,a)):(e=Fc(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!wp(e,a)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:ml,n(i,s)&&e.ref===t.ref)return Fs(e,t,a)}return t.flags|=1,e=ja(o,s),e.ref=t.ref,e.return=t,t.child=e}function kb(e,t,n,s,a){if(e!==null){var o=e.memoizedProps;if(ml(o,s)&&e.ref===t.ref)if(wt=!1,t.pendingProps=s=o,wp(e,a))e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,Fs(e,t,a)}return kh(e,t,n,s,a)}function Ab(e,t,n){var s=t.pendingProps,a=s.children,o=(t.stateNode._pendingVisibility&2)!==0,i=e!==null?e.memoizedState:null;if(el(e,t),s.mode==="hidden"||o){if(t.flags&128){if(s=i!==null?i.baseLanes|n:n,e!==null){for(a=t.child=e.child,o=0;a!==null;)o=o|a.lanes|a.childLanes,a=a.sibling;t.childLanes=o&~s}else t.childLanes=0,t.child=null;return R0(e,t,s,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&$c(t,i!==null?i.cachePool:null),i!==null?y0(t,i):bh(),By(t);else return t.lanes=t.childLanes=536870912,R0(e,t,i!==null?i.baseLanes|n:n,n)}else i!==null?($c(t,i.cachePool),y0(t,i),oa(),t.memoizedState=null):(e!==null&&$c(t,null),bh(),oa());return Nt(e,t,a,n),t.child}function R0(e,t,n,s){var a=lp();return a=a===null?null:{parent:pt._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&$c(t,null),bh(),By(t),e!==null&&Fl(e,t,s,!0),null}function el(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(J(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function kh(e,t,n,s,a){return Rr(t),n=up(e,t,n,s,void 0,a),s=dp(),e!==null&&!wt?(fp(e,t,a),Fs(e,t,a)):(Be&&s&&ap(t),t.flags|=1,Nt(e,t,n,a),t.child)}function M0(e,t,n,s,a,o){return Rr(t),t.updateQueue=null,n=Fy(t,s,n,a),qy(e),s=dp(),e!==null&&!wt?(fp(e,t,o),Fs(e,t,o)):(Be&&s&&ap(t),t.flags|=1,Nt(e,t,n,o),t.child)}function _0(e,t,n,s,a){if(Rr(t),t.stateNode===null){var o=xo,i=n.contextType;typeof i=="object"&&i!==null&&(o=_t(i)),o=new n(s,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ch,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=s,o.state=t.memoizedState,o.refs={},Sp(t),i=n.contextType,o.context=typeof i=="object"&&i!==null?_t(i):xo,o.state=t.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(ff(t,n,i,s),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(i=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),i!==o.state&&Ch.enqueueReplaceState(o,o.state,null),sl(t,s,o,a),nl(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){o=t.stateNode;var l=t.memoizedProps,c=Tr(n,l);o.props=c;var d=o.context,f=n.contextType;i=xo,typeof f=="object"&&f!==null&&(i=_t(f));var h=n.getDerivedStateFromProps;f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l||d!==i)&&E0(t,o,s,i),aa=!1;var m=t.memoizedState;o.state=m,sl(t,s,o,a),nl(),d=t.memoizedState,l||m!==d||aa?(typeof h=="function"&&(ff(t,n,h,s),d=t.memoizedState),(c=aa||C0(t,n,c,s,m,d,i))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),o.props=s,o.state=d,o.context=i,s=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,Oh(e,t),i=t.memoizedProps,f=Tr(n,i),o.props=f,h=t.pendingProps,m=o.context,d=n.contextType,c=xo,typeof d=="object"&&d!==null&&(c=_t(d)),l=n.getDerivedStateFromProps,(d=typeof l=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==h||m!==c)&&E0(t,o,s,c),aa=!1,m=t.memoizedState,o.state=m,sl(t,s,o,a),nl();var g=t.memoizedState;i!==h||m!==g||aa||e!==null&&e.dependencies!==null&&wu(e.dependencies)?(typeof l=="function"&&(ff(t,n,l,s),g=t.memoizedState),(f=aa||C0(t,n,f,s,m,g,c)||e!==null&&e.dependencies!==null&&wu(e.dependencies))?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),o.props=s,o.state=g,o.context=c,s=f):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return o=s,el(e,t),s=(t.flags&128)!==0,o||s?(o=t.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&s?(t.child=kr(t,e.child,null,a),t.child=kr(t,null,n,a)):Nt(e,t,n,a),t.memoizedState=o.state,e=t.child):e=Fs(e,t,a),e}function O0(e,t,n,s){return Bl(),t.flags|=256,Nt(e,t,n,s),t.child}var hf={dehydrated:null,treeContext:null,retryLane:0};function mf(e){return{baseLanes:e,cachePool:Hy()}}function pf(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=jn),e}function Tb(e,t,n){var s=t.pendingProps,a=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(xt.current&2)!==0),i&&(a=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(Be){if(a?ra(t):oa(),Be){var l=jt,c;if(c=l){e:{for(c=l,l=es;c.nodeType!==8;){if(!l){l=null;break e}if(c=Hn(c.nextSibling),c===null){l=null;break e}}l=c}l!==null?(t.memoizedState={dehydrated:l,treeContext:vr!==null?{id:Ds,overflow:Ls}:null,retryLane:536870912},c=Nn(18,null,null,0),c.stateNode=l,c.return=t,t.child=c,$t=t,jt=null,c=!0):c=!1}c||Er(t)}if(l=t.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return l.data==="$!"?t.lanes=16:t.lanes=536870912,null;zs(t)}return l=s.children,s=s.fallback,a?(oa(),a=t.mode,l=Th({mode:"hidden",children:l},a),s=br(s,a,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,a=t.child,a.memoizedState=mf(n),a.childLanes=pf(e,i,n),t.memoizedState=hf,s):(ra(t),Ah(t,l))}if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null)){if(o)t.flags&256?(ra(t),t.flags&=-257,t=gf(e,t,n)):t.memoizedState!==null?(oa(),t.child=e.child,t.flags|=128,t=null):(oa(),a=s.fallback,l=t.mode,s=Th({mode:"visible",children:s.children},l),a=br(a,l,n,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,kr(t,e.child,null,n),s=t.child,s.memoizedState=mf(n),s.childLanes=pf(e,i,n),t.memoizedState=hf,t=a);else if(ra(t),l.data==="$!"){if(i=l.nextSibling&&l.nextSibling.dataset,i)var d=i.dgst;i=d,s=Error(J(419)),s.stack="",s.digest=i,pl({value:s,source:null,stack:null}),t=gf(e,t,n)}else if(wt||Fl(e,t,n,!1),i=(n&e.childLanes)!==0,wt||i){if(i=Ze,i!==null){if(s=n&-n,s&42)s=1;else switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=64;break;case 268435456:s=134217728;break;default:s=0}if(s=s&(i.suspendedLanes|n)?0:s,s!==0&&s!==c.retryLane)throw c.retryLane=s,_a(e,s),Ht(i,e,s),Eb}l.data==="$?"||Bh(),t=gf(e,t,n)}else l.data==="$?"?(t.flags|=128,t.child=e.child,t=pk.bind(null,e),l._reactRetry=t,t=null):(e=c.treeContext,jt=Hn(l.nextSibling),$t=t,Be=!0,In=null,es=!1,e!==null&&(vn[yn++]=Ds,vn[yn++]=Ls,vn[yn++]=vr,Ds=e.id,Ls=e.overflow,vr=t),t=Ah(t,s.children),t.flags|=4096);return t}return a?(oa(),a=s.fallback,l=t.mode,c=e.child,d=c.sibling,s=ja(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&31457280,d!==null?a=ja(d,a):(a=br(a,l,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=e.child.memoizedState,l===null?l=mf(n):(c=l.cachePool,c!==null?(d=pt._currentValue,c=c.parent!==d?{parent:d,pool:d}:c):c=Hy(),l={baseLanes:l.baseLanes|n,cachePool:c}),a.memoizedState=l,a.childLanes=pf(e,i,n),t.memoizedState=hf,s):(ra(t),n=e.child,e=n.sibling,n=ja(n,{mode:"visible",children:s.children}),n.return=t,n.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Ah(e,t){return t=Th({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Th(e,t){return Zb(e,t,0,null)}function gf(e,t,n){return kr(t,e.child,null,n),e=Ah(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function D0(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Mh(e.return,t,n)}function xf(e,t,n,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=a)}function Rb(e,t,n){var s=t.pendingProps,a=s.revealOrder,o=s.tail;if(Nt(e,t,s.children,n),s=xt.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&D0(e,n,t);else if(e.tag===19)D0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(et(xt,s),a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&gu(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),xf(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&gu(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}xf(t,!0,n,null,o);break;case"together":xf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),La|=t.lanes,!(n&t.childLanes))if(e!==null){if(Fl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=ja(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ja(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function wp(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&wu(e)))}function tk(e,t,n){switch(t.tag){case 3:iu(t,t.stateNode.containerInfo),ia(t,pt,e.memoizedState.cache),Bl();break;case 27:case 5:ch(t);break;case 4:iu(t,t.stateNode.containerInfo);break;case 10:ia(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(ra(t),t.flags|=128,null):n&t.child.childLanes?Tb(e,t,n):(ra(t),e=Fs(e,t,n),e!==null?e.sibling:null);ra(t);break;case 19:var a=(e.flags&128)!==0;if(s=(n&t.childLanes)!==0,s||(Fl(e,t,n,!1),s=(n&t.childLanes)!==0),a){if(s)return Rb(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),et(xt,xt.current),s)break;return null;case 22:case 23:return t.lanes=0,Ab(e,t,n);case 24:ia(t,pt,e.memoizedState.cache)}return Fs(e,t,n)}function Mb(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)wt=!0;else{if(!wp(e,n)&&!(t.flags&128))return wt=!1,tk(e,t,n);wt=!!(e.flags&131072)}else wt=!1,Be&&t.flags&1048576&&zy(t,mu,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,a=s._init;if(s=a(s._payload),t.type=s,typeof s=="function")Cp(s)?(e=Tr(s,e),t.tag=1,t=_0(null,t,s,e,n)):(t.tag=0,t=kh(null,t,s,e,n));else{if(s!=null){if(a=s.$$typeof,a===Ym){t.tag=11,t=A0(null,t,s,e,n);break e}else if(a===Gm){t.tag=14,t=T0(null,t,s,e,n);break e}}throw t=ih(s)||s,Error(J(306,t,""))}}return t;case 0:return kh(e,t,t.type,t.pendingProps,n);case 1:return s=t.type,a=Tr(s,t.pendingProps),_0(e,t,s,a,n);case 3:e:{if(iu(t,t.stateNode.containerInfo),e===null)throw Error(J(387));var o=t.pendingProps;a=t.memoizedState,s=a.element,Oh(e,t),sl(t,o,null,n);var i=t.memoizedState;if(o=i.cache,ia(t,pt,o),o!==a.cache&&_h(t,[pt],n,!0),nl(),o=i.element,a.isDehydrated)if(a={element:o,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=O0(e,t,o,n);break e}else if(o!==s){s=Sn(Error(J(424)),t),pl(s),t=O0(e,t,o,n);break e}else for(jt=Hn(t.stateNode.containerInfo.firstChild),$t=t,Be=!0,In=null,es=!0,n=$y(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bl(),o===s){t=Fs(e,t,n);break e}Nt(e,t,o,n)}t=t.child}return t;case 26:return el(e,t),e===null?(n=W0(t.type,null,t.pendingProps,null))?t.memoizedState=n:Be||(n=t.type,e=t.pendingProps,s=Au(wa.current).createElement(n),s[Mt]=t,s[Zt]=e,Et(s,n,e),bt(s),t.stateNode=s):t.memoizedState=W0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ch(t),e===null&&Be&&(s=t.stateNode=pw(t.type,t.pendingProps,wa.current),$t=t,es=!0,jt=Hn(s.firstChild)),s=t.pendingProps.children,e!==null||Be?Nt(e,t,s,n):t.child=kr(t,null,s,n),el(e,t),t.child;case 5:return e===null&&Be&&((a=s=jt)&&(s=Mk(s,t.type,t.pendingProps,es),s!==null?(t.stateNode=s,$t=t,jt=Hn(s.firstChild),es=!1,a=!0):a=!1),a||Er(t)),ch(t),a=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Yh(a,o)?s=null:i!==null&&Yh(a,i)&&(t.flags|=32),t.memoizedState!==null&&(a=up(e,t,QE,null,null,n),wl._currentValue=a),el(e,t),Nt(e,t,s,n),t.child;case 6:return e===null&&Be&&((e=n=jt)&&(n=_k(n,t.pendingProps,es),n!==null?(t.stateNode=n,$t=t,jt=null,e=!0):e=!1),e||Er(t)),null;case 13:return Tb(e,t,n);case 4:return iu(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=kr(t,null,s,n):Nt(e,t,s,n),t.child;case 11:return A0(e,t,t.type,t.pendingProps,n);case 7:return Nt(e,t,t.pendingProps,n),t.child;case 8:return Nt(e,t,t.pendingProps.children,n),t.child;case 12:return Nt(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,ia(t,t.type,s.value),Nt(e,t,s.children,n),t.child;case 9:return a=t.type._context,s=t.pendingProps.children,Rr(t),a=_t(a),s=s(a),t.flags|=1,Nt(e,t,s,n),t.child;case 14:return T0(e,t,t.type,t.pendingProps,n);case 15:return kb(e,t,t.type,t.pendingProps,n);case 19:return Rb(e,t,n);case 22:return Ab(e,t,n);case 24:return Rr(t),s=_t(pt),e===null?(a=lp(),a===null&&(a=Ze,o=ip(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:s,cache:a},Sp(t),ia(t,pt,a)):(e.lanes&n&&(Oh(e,t),sl(t,null,null,n),nl()),a=e.memoizedState,o=t.memoizedState,a.parent!==s?(a={parent:s,cache:s},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),ia(t,pt,s)):(s=o.cache,ia(t,pt,s),s!==a.cache&&_h(t,[pt],n,!0))),Nt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(J(156,t.tag))}var Rh=ms(null),Yr=null,Ps=null;function ia(e,t,n){et(Rh,t._currentValue),t._currentValue=n}function Is(e){e._currentValue=Rh.current,St(Rh)}function Mh(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function _h(e,t,n,s){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var i=a.child;o=o.firstContext;e:for(;o!==null;){var l=o;o=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Mh(o.return,n,e),s||(i=null);break e}o=l.next}}else if(a.tag===18){if(i=a.return,i===null)throw Error(J(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Mh(i,n,e),i=null}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===e){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}}function Fl(e,t,n,s){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var i=a.alternate;if(i===null)throw Error(J(387));if(i=i.memoizedProps,i!==null){var l=a.type;un(a.pendingProps.value,i.value)||(e!==null?e.push(l):e=[l])}}else if(a===ou.current){if(i=a.alternate,i===null)throw Error(J(387));i.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(wl):e=[wl])}a=a.return}e!==null&&_h(t,e,n,s),t.flags|=262144}function wu(e){for(e=e.firstContext;e!==null;){if(!un(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Rr(e){Yr=e,Ps=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _t(e){return _b(Yr,e)}function vc(e,t){return Yr===null&&Rr(e),_b(e,t)}function _b(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ps===null){if(e===null)throw Error(J(308));Ps=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ps=Ps.next=t;return n}var aa=!1;function Sp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Sa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Na(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,st&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,t=fu(e),Ly(e,null,n),t}return rd(e,s,t,n),fu(e)}function tl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,ly(e,n)}}function vf(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?a=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,callbacks:s.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Dh=!1;function nl(){if(Dh){var e=Eo;if(e!==null)throw e}}function sl(e,t,n,s){Dh=!1;var a=e.updateQueue;aa=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==i&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(o!==null){var h=a.baseState;i=0,f=d=c=null,l=o;do{var m=l.lane&-536870913,g=m!==l.lane;if(g?(Ue&m)===m:(s&m)===m){m!==0&&m===Zo&&(Dh=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var b=e,x=l;m=t;var w=n;switch(x.tag){case 1:if(b=x.payload,typeof b=="function"){h=b.call(w,h,m);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,m=typeof b=="function"?b.call(w,h,m):b,m==null)break e;h=Je({},h,m);break e;case 2:aa=!0}}m=l.callback,m!==null&&(e.flags|=64,g&&(e.flags|=8192),g=a.callbacks,g===null?a.callbacks=[m]:g.push(m))}else g={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=g,c=h):f=f.next=g,i|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;g=l,l=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);f===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=f,o===null&&(a.shared.lanes=0),La|=i,e.lanes=i,e.memoizedState=h}}function Ob(e,t){if(typeof e!="function")throw Error(J(191,e));e.call(t)}function Db(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ob(n[e],t)}function Vl(e,t){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var a=s.next;n=a;do{if((n.tag&e)===e){s=void 0;var o=n.create,i=n.inst;s=o(),i.destroy=s}n=n.next}while(n!==a)}}catch(l){Ke(t,t.return,l)}}function Da(e,t,n){try{var s=t.updateQueue,a=s!==null?s.lastEffect:null;if(a!==null){var o=a.next;s=o;do{if((s.tag&e)===e){var i=s.inst,l=i.destroy;if(l!==void 0){i.destroy=void 0,a=t;var c=n;try{l()}catch(d){Ke(a,c,d)}}}s=s.next}while(s!==o)}}catch(d){Ke(t,t.return,d)}}function Lb(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Db(t,n)}catch(s){Ke(e,e.return,s)}}}function zb(e,t,n){n.props=Tr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){Ke(e,t,s)}}function ir(e,t){try{var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 26:case 27:case 5:var a=s;break;default:a=s}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(o){Ke(e,t,o)}}function sn(e,t){var n=e.ref,s=e.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(a){Ke(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){Ke(e,t,a)}else n.current=null}function Pb(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(a){Ke(e,e.return,a)}}function L0(e,t,n){try{var s=e.stateNode;Ek(s,e.type,n,t),s[Zt]=t}catch(a){Ke(e,e.return,a)}}function Ib(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function yf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ib(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lh(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=fd));else if(s!==4&&s!==27&&(e=e.child,e!==null))for(Lh(e,t,n),e=e.sibling;e!==null;)Lh(e,t,n),e=e.sibling}function Su(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&s!==27&&(e=e.child,e!==null))for(Su(e,t,n),e=e.sibling;e!==null;)Su(e,t,n),e=e.sibling}var Rs=!1,ot=!1,bf=!1,z0=typeof WeakSet=="function"?WeakSet:Set,yt=null,P0=!1;function nk(e,t){if(e=e.containerInfo,Fh=_u,e=Ay(e),tp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,d=0,f=0,h=e,m=null;t:for(;;){for(var g;h!==n||a!==0&&h.nodeType!==3||(l=i+a),h!==o||s!==0&&h.nodeType!==3||(c=i+s),h.nodeType===3&&(i+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===e)break t;if(m===n&&++d===a&&(l=i),m===o&&++f===s&&(c=i),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vh={focusedElem:e,selectionRange:n},_u=!1,yt=t;yt!==null;)if(t=yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,yt=e;else for(;yt!==null;){switch(t=yt,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,s=n.stateNode;try{var b=Tr(n.type,a,n.elementType===n.type);e=s.getSnapshotBeforeUpdate(b,o),s.__reactInternalSnapshotBeforeUpdate=e}catch(x){Ke(n,n.return,x)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Gh(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Gh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(J(163))}if(e=t.sibling,e!==null){e.return=t.return,yt=e;break}yt=t.return}return b=P0,P0=!1,b}function Ub(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Ss(e,n),s&4&&Vl(5,n);break;case 1:if(Ss(e,n),s&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(l){Ke(n,n.return,l)}else{var a=Tr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){Ke(n,n.return,l)}}s&64&&Lb(n),s&512&&ir(n,n.return);break;case 3:if(Ss(e,n),s&64&&(s=n.updateQueue,s!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Db(s,e)}catch(l){Ke(n,n.return,l)}}break;case 26:Ss(e,n),s&512&&ir(n,n.return);break;case 27:case 5:Ss(e,n),t===null&&s&4&&Pb(n),s&512&&ir(n,n.return);break;case 12:Ss(e,n);break;case 13:Ss(e,n),s&4&&Hb(e,n);break;case 22:if(a=n.memoizedState!==null||Rs,!a){t=t!==null&&t.memoizedState!==null||ot;var o=Rs,i=ot;Rs=a,(ot=t)&&!i?ea(e,n,(n.subtreeFlags&8772)!==0):Ss(e,n),Rs=o,ot=i}s&512&&(n.memoizedProps.mode==="manual"?ir(n,n.return):sn(n,n.return));break;default:Ss(e,n)}}function $b(e){var t=e.alternate;t!==null&&(e.alternate=null,$b(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Km(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ct=null,Jt=!1;function ws(e,t,n){for(n=n.child;n!==null;)Bb(e,t,n),n=n.sibling}function Bb(e,t,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Pl,n)}catch{}switch(n.tag){case 26:ot||sn(n,t),ws(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ot||sn(n,t);var s=ct,a=Jt;for(ct=n.stateNode,ws(e,t,n),n=n.stateNode,t=n.attributes;t.length;)n.removeAttributeNode(t[0]);Km(n),ct=s,Jt=a;break;case 5:ot||sn(n,t);case 6:a=ct;var o=Jt;if(ct=null,ws(e,t,n),ct=a,Jt=o,ct!==null)if(Jt)try{e=ct,s=n.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)}catch(i){Ke(n,t,i)}else try{ct.removeChild(n.stateNode)}catch(i){Ke(n,t,i)}break;case 18:ct!==null&&(Jt?(t=ct,n=n.stateNode,t.nodeType===8?_f(t.parentNode,n):t.nodeType===1&&_f(t,n),jl(t)):_f(ct,n.stateNode));break;case 4:s=ct,a=Jt,ct=n.stateNode.containerInfo,Jt=!0,ws(e,t,n),ct=s,Jt=a;break;case 0:case 11:case 14:case 15:ot||Da(2,n,t),ot||Da(4,n,t),ws(e,t,n);break;case 1:ot||(sn(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"&&zb(n,t,s)),ws(e,t,n);break;case 21:ws(e,t,n);break;case 22:ot||sn(n,t),ot=(s=ot)||n.memoizedState!==null,ws(e,t,n),ot=s;break;default:ws(e,t,n)}}function Hb(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{jl(e)}catch(n){Ke(t,t.return,n)}}function sk(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new z0),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new z0),t;default:throw Error(J(435,e.tag))}}function wf(e,t){var n=sk(e);t.forEach(function(s){var a=gk.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}function hn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s],o=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 27:case 5:ct=l.stateNode,Jt=!1;break e;case 3:ct=l.stateNode.containerInfo,Jt=!0;break e;case 4:ct=l.stateNode.containerInfo,Jt=!0;break e}l=l.return}if(ct===null)throw Error(J(160));Bb(o,i,a),ct=null,Jt=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)qb(t,e),t=t.sibling}var zn=null;function qb(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hn(t,e),mn(e),s&4&&(Da(3,e,e.return),Vl(3,e),Da(5,e,e.return));break;case 1:hn(t,e),mn(e),s&512&&(ot||n===null||sn(n,n.return)),s&64&&Rs&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var a=zn;if(hn(t,e),mn(e),s&512&&(ot||n===null||sn(n,n.return)),s&4){var o=n!==null?n.memoizedState:null;if(s=e.memoizedState,n===null)if(s===null)if(e.stateNode===null){e:{s=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(s){case"title":o=a.getElementsByTagName("title")[0],(!o||o[dl]||o[Mt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=a.createElement(s),a.head.insertBefore(o,a.querySelector("head > title"))),Et(o,s,n),o[Mt]=e,bt(o),s=o;break e;case"link":var i=ex("link","href",a).get(s+(n.href||""));if(i){for(var l=0;l<i.length;l++)if(o=i[l],o.getAttribute("href")===(n.href==null?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){i.splice(l,1);break t}}o=a.createElement(s),Et(o,s,n),a.head.appendChild(o);break;case"meta":if(i=ex("meta","content",a).get(s+(n.content||""))){for(l=0;l<i.length;l++)if(o=i[l],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){i.splice(l,1);break t}}o=a.createElement(s),Et(o,s,n),a.head.appendChild(o);break;default:throw Error(J(468,s))}o[Mt]=e,bt(o),s=o}e.stateNode=s}else tx(a,e.type,e.stateNode);else e.stateNode=J0(a,s,e.memoizedProps);else o!==s?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,s===null?tx(a,e.type,e.stateNode):J0(a,s,e.memoizedProps)):s===null&&e.stateNode!==null&&L0(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(s&4&&e.alternate===null){a=e.stateNode,o=e.memoizedProps;try{for(var c=a.firstChild;c;){var d=c.nextSibling,f=c.nodeName;c[dl]||f==="HEAD"||f==="BODY"||f==="SCRIPT"||f==="STYLE"||f==="LINK"&&c.rel.toLowerCase()==="stylesheet"||a.removeChild(c),c=d}for(var h=e.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Et(a,h,o),a[Mt]=e,a[Zt]=o}catch(b){Ke(e,e.return,b)}}case 5:if(hn(t,e),mn(e),s&512&&(ot||n===null||sn(n,n.return)),e.flags&32){a=e.stateNode;try{Ko(a,"")}catch(b){Ke(e,e.return,b)}}s&4&&e.stateNode!=null&&(a=e.memoizedProps,L0(e,a,n!==null?n.memoizedProps:a)),s&1024&&(bf=!0);break;case 6:if(hn(t,e),mn(e),s&4){if(e.stateNode===null)throw Error(J(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(b){Ke(e,e.return,b)}}break;case 3:if(Yc=null,a=zn,zn=Tu(t.containerInfo),hn(t,e),zn=a,mn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{jl(t.containerInfo)}catch(b){Ke(e,e.return,b)}bf&&(bf=!1,Fb(e));break;case 4:s=zn,zn=Tu(e.stateNode.containerInfo),hn(t,e),mn(e),zn=s;break;case 12:hn(t,e),mn(e);break;case 13:hn(t,e),mn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ap=rs()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,wf(e,s)));break;case 22:if(s&512&&(ot||n===null||sn(n,n.return)),c=e.memoizedState!==null,d=n!==null&&n.memoizedState!==null,f=Rs,h=ot,Rs=f||c,ot=h||d,hn(t,e),ot=h,Rs=f,mn(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,s&8192&&(t._visibility=c?t._visibility&-2:t._visibility|1,c&&(t=Rs||ot,n===null||d||t||oo(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(n=null,t=e;;){if(t.tag===5||t.tag===26||t.tag===27){if(n===null){d=n=t;try{if(a=d.stateNode,c)o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{i=d.stateNode,l=d.memoizedProps.style;var g=l!=null&&l.hasOwnProperty("display")?l.display:null;i.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(b){Ke(d,d.return,b)}}}else if(t.tag===6){if(n===null){d=t;try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(b){Ke(d,d.return,b)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,wf(e,n))));break;case 19:hn(t,e),mn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,wf(e,s)));break;case 21:break;default:hn(t,e),mn(e)}}function mn(e){var t=e.flags;if(t&2){try{if(e.tag!==27){e:{for(var n=e.return;n!==null;){if(Ib(n)){var s=n;break e}n=n.return}throw Error(J(160))}switch(s.tag){case 27:var a=s.stateNode,o=yf(e);Su(e,o,a);break;case 5:var i=s.stateNode;s.flags&32&&(Ko(i,""),s.flags&=-33);var l=yf(e);Su(e,l,i);break;case 3:case 4:var c=s.stateNode.containerInfo,d=yf(e);Lh(e,d,c);break;default:throw Error(J(161))}}}catch(f){Ke(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fb(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Fb(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ss(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ub(e,t.alternate,t),t=t.sibling}function oo(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Da(4,t,t.return),oo(t);break;case 1:sn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&zb(t,t.return,n),oo(t);break;case 26:case 27:case 5:sn(t,t.return),oo(t);break;case 22:sn(t,t.return),t.memoizedState===null&&oo(t);break;default:oo(t)}e=e.sibling}}function ea(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,a=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:ea(a,o,n),Vl(4,o);break;case 1:if(ea(a,o,n),s=o,a=s.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(d){Ke(s,s.return,d)}if(s=o,a=s.updateQueue,a!==null){var l=s.stateNode;try{var c=a.shared.hiddenCallbacks;if(c!==null)for(a.shared.hiddenCallbacks=null,a=0;a<c.length;a++)Ob(c[a],l)}catch(d){Ke(s,s.return,d)}}n&&i&64&&Lb(o),ir(o,o.return);break;case 26:case 27:case 5:ea(a,o,n),n&&s===null&&i&4&&Pb(o),ir(o,o.return);break;case 12:ea(a,o,n);break;case 13:ea(a,o,n),n&&i&4&&Hb(a,o);break;case 22:o.memoizedState===null&&ea(a,o,n),ir(o,o.return);break;default:ea(a,o,n)}t=t.sibling}}function Np(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Hl(n))}function jp(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Hl(e))}function Ws(e,t,n,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vb(e,t,n,s),t=t.sibling}function Vb(e,t,n,s){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Ws(e,t,n,s),a&2048&&Vl(9,t);break;case 3:Ws(e,t,n,s),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Hl(e)));break;case 12:if(a&2048){Ws(e,t,n,s),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,l=o.onPostCommit;typeof l=="function"&&l(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){Ke(t,t.return,c)}}else Ws(e,t,n,s);break;case 23:break;case 22:o=t.stateNode,t.memoizedState!==null?o._visibility&4?Ws(e,t,n,s):al(e,t):o._visibility&4?Ws(e,t,n,s):(o._visibility|=4,io(e,t,n,s,(t.subtreeFlags&10256)!==0)),a&2048&&Np(t.alternate,t);break;case 24:Ws(e,t,n,s),a&2048&&jp(t.alternate,t);break;default:Ws(e,t,n,s)}}function io(e,t,n,s,a){for(a=a&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=e,i=t,l=n,c=s,d=i.flags;switch(i.tag){case 0:case 11:case 15:io(o,i,l,c,a),Vl(8,i);break;case 23:break;case 22:var f=i.stateNode;i.memoizedState!==null?f._visibility&4?io(o,i,l,c,a):al(o,i):(f._visibility|=4,io(o,i,l,c,a)),a&&d&2048&&Np(i.alternate,i);break;case 24:io(o,i,l,c,a),a&&d&2048&&jp(i.alternate,i);break;default:io(o,i,l,c,a)}t=t.sibling}}function al(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,s=t,a=s.flags;switch(s.tag){case 22:al(n,s),a&2048&&Np(s.alternate,s);break;case 24:al(n,s),a&2048&&jp(s.alternate,s);break;default:al(n,s)}t=t.sibling}}var Bi=8192;function Jr(e){if(e.subtreeFlags&Bi)for(e=e.child;e!==null;)Yb(e),e=e.sibling}function Yb(e){switch(e.tag){case 26:Jr(e),e.flags&Bi&&e.memoizedState!==null&&Vk(zn,e.memoizedState,e.memoizedProps);break;case 5:Jr(e);break;case 3:case 4:var t=zn;zn=Tu(e.stateNode.containerInfo),Jr(e),zn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Bi,Bi=16777216,Jr(e),Bi=t):Jr(e));break;default:Jr(e)}}function Gb(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Mi(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];yt=s,Kb(s,e)}Gb(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Qb(e),e=e.sibling}function Qb(e){switch(e.tag){case 0:case 11:case 15:Mi(e),e.flags&2048&&Da(9,e,e.return);break;case 3:Mi(e);break;case 12:Mi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,qc(e)):Mi(e);break;default:Mi(e)}}function qc(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];yt=s,Kb(s,e)}Gb(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Da(8,t,t.return),qc(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,qc(t));break;default:qc(t)}e=e.sibling}}function Kb(e,t){for(;yt!==null;){var n=yt;switch(n.tag){case 0:case 11:case 15:Da(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Hl(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,yt=s;else e:for(n=e;yt!==null;){s=yt;var a=s.sibling,o=s.return;if($b(s),s===n){yt=null;break e}if(a!==null){a.return=o,yt=a;break e}yt=o}}}function ak(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(e,t,n,s){return new ak(e,t,n,s)}function Cp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ja(e,t){var n=e.alternate;return n===null?(n=Nn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Xb(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Fc(e,t,n,s,a,o){var i=0;if(s=e,typeof e=="function")Cp(e)&&(i=1);else if(typeof e=="string")i=qk(e,n,as.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case co:return br(n.children,a,o,t);case Zv:i=8,a|=24;break;case ah:return e=Nn(12,n,t,a|2),e.elementType=ah,e.lanes=o,e;case rh:return e=Nn(13,n,t,a),e.elementType=rh,e.lanes=o,e;case oh:return e=Nn(19,n,t,a),e.elementType=oh,e.lanes=o,e;case Jv:return Zb(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case TC:case Os:i=10;break e;case Wv:i=9;break e;case Ym:i=11;break e;case Gm:i=14;break e;case sa:i=16,s=null;break e}i=29,n=Error(J(130,e===null?"null":typeof e,"")),s=null}return t=Nn(i,n,t,a),t.elementType=e,t.type=s,t.lanes=o,t}function br(e,t,n,s){return e=Nn(7,e,s,t),e.lanes=n,e}function Zb(e,t,n,s){e=Nn(22,e,s,t),e.elementType=Jv,e.lanes=n;var a={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var o=a._current;if(o===null)throw Error(J(456));if(!(a._pendingVisibility&2)){var i=_a(o,2);i!==null&&(a._pendingVisibility|=2,Ht(i,o,2))}},attach:function(){var o=a._current;if(o===null)throw Error(J(456));if(a._pendingVisibility&2){var i=_a(o,2);i!==null&&(a._pendingVisibility&=-3,Ht(i,o,2))}}};return e.stateNode=a,e}function Sf(e,t,n){return e=Nn(6,e,null,t),e.lanes=n,e}function Nf(e,t,n){return t=Nn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ns(e){e.flags|=4}function I0(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!vw(t)){if(t=kn.current,t!==null&&((Ue&4194176)===Ue?os!==null:(Ue&62914560)!==Ue&&!(Ue&536870912)||t!==os))throw Zi=yh,Py;e.flags|=8192}}function yc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?oy():536870912,e.lanes|=t,Jo|=t)}function _i(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&31457280,s|=a.flags&31457280,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function rk(e,t,n){var s=t.pendingProps;switch(rp(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return tt(t),null;case 3:return n=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Is(pt),Go(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ti(t)?Ns(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,In!==null&&($h(In),In=null))),tt(t),null;case 26:return n=t.memoizedState,e===null?(Ns(t),n!==null?(tt(t),I0(t,n)):(tt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ns(t),tt(t),I0(t,n)):(tt(t),t.flags&=-16777217):(e.memoizedProps!==s&&Ns(t),tt(t),t.flags&=-16777217),null;case 27:lu(t),n=wa.current;var a=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ns(t);else{if(!s){if(t.stateNode===null)throw Error(J(166));return tt(t),null}e=as.current,Ti(t)?m0(t):(e=pw(a,s,n),t.stateNode=e,Ns(t))}return tt(t),null;case 5:if(lu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ns(t);else{if(!s){if(t.stateNode===null)throw Error(J(166));return tt(t),null}if(e=as.current,Ti(t))m0(t);else{switch(a=Au(wa.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?a.createElement(n,{is:s.is}):a.createElement(n)}}e[Mt]=t,e[Zt]=s;e:for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(Et(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ns(t)}}return tt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Ns(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(J(166));if(e=wa.current,Ti(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,a=$t,a!==null)switch(a.tag){case 27:case 5:s=a.memoizedProps}e[Mt]=t,e=!!(e.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||fw(e.nodeValue,n)),e||Er(t)}else e=Au(e).createTextNode(s),e[Mt]=t,t.stateNode=e}return tt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Ti(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(J(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(J(317));a[Mt]=t}else Bl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),a=!1}else In!==null&&($h(In),In=null),a=!0;if(!a)return t.flags&256?(zs(t),t):(zs(t),null)}if(zs(t),t.flags&128)return t.lanes=n,t;if(n=s!==null,e=e!==null&&e.memoizedState!==null,n){s=t.child,a=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(a=s.alternate.memoizedState.cachePool.pool);var o=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),yc(t,t.updateQueue),tt(t),null;case 4:return Go(),e===null&&Mp(t.stateNode.containerInfo),tt(t),null;case 10:return Is(t.type),tt(t),null;case 19:if(St(xt),a=t.memoizedState,a===null)return tt(t),null;if(s=(t.flags&128)!==0,o=a.rendering,o===null)if(s)_i(a,!1);else{if(it!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=gu(e),o!==null){for(t.flags|=128,_i(a,!1),e=o.updateQueue,t.updateQueue=e,yc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Xb(n,e),n=n.sibling;return et(xt,xt.current&1|2),t.child}e=e.sibling}a.tail!==null&&rs()>Nu&&(t.flags|=128,s=!0,_i(a,!1),t.lanes=4194304)}else{if(!s)if(e=gu(o),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,yc(t,e),_i(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Be)return tt(t),null}else 2*rs()-a.renderingStartTime>Nu&&n!==536870912&&(t.flags|=128,s=!0,_i(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(e=a.last,e!==null?e.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=rs(),t.sibling=null,e=xt.current,et(xt,s?e&1|2:e&1),t):(tt(t),null);case 22:case 23:return zs(t),op(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?n&536870912&&!(t.flags&128)&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),n=t.updateQueue,n!==null&&yc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),e!==null&&St(yr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Is(pt),tt(t),null;case 25:return null}throw Error(J(156,t.tag))}function ok(e,t){switch(rp(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Is(pt),Go(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return lu(t),null;case 13:if(zs(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Bl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return St(xt),null;case 4:return Go(),null;case 10:return Is(t.type),null;case 22:case 23:return zs(t),op(),e!==null&&St(yr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Is(pt),null;case 25:return null;default:return null}}function Wb(e,t){switch(rp(t),t.tag){case 3:Is(pt),Go();break;case 26:case 27:case 5:lu(t);break;case 4:Go();break;case 13:zs(t);break;case 19:St(xt);break;case 10:Is(t.type);break;case 22:case 23:zs(t),op(),e!==null&&St(yr);break;case 24:Is(pt)}}var ik={getCacheForType:function(e){var t=_t(pt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},lk=typeof WeakMap=="function"?WeakMap:Map,st=0,Ze=null,_e=null,Ue=0,Xe=0,en=null,Ms=!1,fi=!1,Ep=!1,Vs=0,it=0,La=0,wr=0,kp=0,jn=0,Jo=0,rl=null,ts=null,zh=!1,Ap=0,Nu=1/0,ju=null,Ca=null,bc=!1,rr=null,ol=0,Ph=0,Ih=null,il=0,Uh=null;function on(){if(st&2&&Ue!==0)return Ue&-Ue;if(Ce.T!==null){var e=Zo;return e!==0?e:Rp()}return uy()}function Jb(){jn===0&&(jn=!(Ue&536870912)||Be?ry():536870912);var e=kn.current;return e!==null&&(e.flags|=32),jn}function Ht(e,t,n){(e===Ze&&Xe===2||e.cancelPendingCommit!==null)&&(ei(e,0),_s(e,Ue,jn,!1)),Ul(e,n),(!(st&2)||e!==Ze)&&(e===Ze&&(!(st&2)&&(wr|=n),it===4&&_s(e,Ue,jn,!1)),ps(e))}function ew(e,t,n){if(st&6)throw Error(J(327));var s=!n&&(t&60)===0&&(t&e.expiredLanes)===0||Il(e,t),a=s?dk(e,t):jf(e,t,!0),o=s;do{if(a===0){fi&&!s&&_s(e,t,0,!1);break}else if(a===6)_s(e,t,0,!Ms);else{if(n=e.current.alternate,o&&!ck(n)){a=jf(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var l=e;a=rl;var c=l.current.memoizedState.isDehydrated;if(c&&(ei(l,i).flags|=256),i=jf(l,i,!1),i!==2){if(Ep&&!c){l.errorRecoveryDisabledLanes|=o,wr|=o,a=4;break e}o=ts,ts=a,o!==null&&$h(o)}a=i}if(o=!1,a!==2)continue}}if(a===1){ei(e,0),_s(e,t,0,!0);break}e:{switch(s=e,a){case 0:case 1:throw Error(J(345));case 4:if((t&4194176)===t){_s(s,t,jn,!Ms);break e}break;case 2:ts=null;break;case 3:case 5:break;default:throw Error(J(329))}if(s.finishedWork=n,s.finishedLanes=t,(t&62914560)===t&&(o=Ap+300-rs(),10<o)){if(_s(s,t,jn,!Ms),ed(s,0)!==0)break e;s.timeoutHandle=mw(U0.bind(null,s,n,ts,ju,zh,t,jn,wr,Jo,Ms,2,-0,0),o);break e}U0(s,n,ts,ju,zh,t,jn,wr,Jo,Ms,0,-0,0)}}break}while(!0);ps(e)}function $h(e){ts===null?ts=e:ts.push.apply(ts,e)}function U0(e,t,n,s,a,o,i,l,c,d,f,h,m){var g=t.subtreeFlags;if((g&8192||(g&16785408)===16785408)&&(bl={stylesheets:null,count:0,unsuspend:Fk},Yb(t),t=Yk(),t!==null)){e.cancelPendingCommit=t(B0.bind(null,e,n,s,a,i,l,c,1,h,m)),_s(e,o,i,!d);return}B0(e,n,s,a,i,l,c,f,h,m)}function ck(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var a=n[s],o=a.getSnapshot;a=a.value;try{if(!un(o(),a))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _s(e,t,n,s){t&=~kp,t&=~wr,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var a=t;0<a;){var o=31-rn(a),i=1<<o;s[o]=-1,a&=~i}n!==0&&iy(e,n,t)}function ud(){return st&6?!0:(Yl(0),!1)}function Tp(){if(_e!==null){if(Xe===0)var e=_e.return;else e=_e,Ps=Yr=null,hp(e),Co=null,gl=0,e=_e;for(;e!==null;)Wb(e.alternate,e),e=e.return;_e=null}}function ei(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Ak(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Tp(),Ze=e,_e=n=ja(e.current,null),Ue=t,Xe=0,en=null,Ms=!1,fi=Il(e,t),Ep=!1,Jo=jn=kp=wr=La=it=0,ts=rl=null,zh=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var a=31-rn(s),o=1<<a;t|=e[a],s&=~o}return Vs=t,ad(),n}function tw(e,t){Te=null,Ce.H=us,t===Xi?(t=x0(),Xe=3):t===Py?(t=x0(),Xe=4):Xe=t===Eb?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,en=t,_e===null&&(it=1,bu(e,Sn(t,e.current)))}function nw(){var e=Ce.H;return Ce.H=us,e===null?us:e}function sw(){var e=Ce.A;return Ce.A=ik,e}function Bh(){it=4,Ms||(Ue&4194176)!==Ue&&kn.current!==null||(fi=!0),!(La&134217727)&&!(wr&134217727)||Ze===null||_s(Ze,Ue,jn,!1)}function jf(e,t,n){var s=st;st|=2;var a=nw(),o=sw();(Ze!==e||Ue!==t)&&(ju=null,ei(e,t)),t=!1;var i=it;e:do try{if(Xe!==0&&_e!==null){var l=_e,c=en;switch(Xe){case 8:Tp(),i=6;break e;case 3:case 2:case 6:kn.current===null&&(t=!0);var d=Xe;if(Xe=0,en=null,bo(e,l,c,d),n&&fi){i=0;break e}break;default:d=Xe,Xe=0,en=null,bo(e,l,c,d)}}uk(),i=it;break}catch(f){tw(e,f)}while(!0);return t&&e.shellSuspendCounter++,Ps=Yr=null,st=s,Ce.H=a,Ce.A=o,_e===null&&(Ze=null,Ue=0,ad()),i}function uk(){for(;_e!==null;)aw(_e)}function dk(e,t){var n=st;st|=2;var s=nw(),a=sw();Ze!==e||Ue!==t?(ju=null,Nu=rs()+500,ei(e,t)):fi=Il(e,t);e:do try{if(Xe!==0&&_e!==null){t=_e;var o=en;t:switch(Xe){case 1:Xe=0,en=null,bo(e,t,o,1);break;case 2:if(g0(o)){Xe=0,en=null,$0(t);break}t=function(){Xe===2&&Ze===e&&(Xe=7),ps(e)},o.then(t,t);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:g0(o)?(Xe=0,en=null,$0(t)):(Xe=0,en=null,bo(e,t,o,7));break;case 5:var i=null;switch(_e.tag){case 26:i=_e.memoizedState;case 5:case 27:var l=_e;if(!i||vw(i)){Xe=0,en=null;var c=l.sibling;if(c!==null)_e=c;else{var d=l.return;d!==null?(_e=d,dd(d)):_e=null}break t}}Xe=0,en=null,bo(e,t,o,5);break;case 6:Xe=0,en=null,bo(e,t,o,6);break;case 8:Tp(),it=6;break e;default:throw Error(J(462))}}fk();break}catch(f){tw(e,f)}while(!0);return Ps=Yr=null,Ce.H=s,Ce.A=a,st=n,_e!==null?0:(Ze=null,Ue=0,ad(),it)}function fk(){for(;_e!==null&&!DC();)aw(_e)}function aw(e){var t=Mb(e.alternate,e,Vs);e.memoizedProps=e.pendingProps,t===null?dd(e):_e=t}function $0(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=M0(n,t,t.pendingProps,t.type,void 0,Ue);break;case 11:t=M0(n,t,t.pendingProps,t.type.render,t.ref,Ue);break;case 5:hp(t);default:Wb(n,t),t=_e=Xb(t,Vs),t=Mb(n,t,Vs)}e.memoizedProps=e.pendingProps,t===null?dd(e):_e=t}function bo(e,t,n,s){Ps=Yr=null,hp(t),Co=null,gl=0;var a=t.return;try{if(ek(e,a,t,n,Ue)){it=1,bu(e,Sn(n,e.current)),_e=null;return}}catch(o){if(a!==null)throw _e=a,o;it=1,bu(e,Sn(n,e.current)),_e=null;return}t.flags&32768?(Be||s===1?e=!0:fi||Ue&536870912?e=!1:(Ms=e=!0,(s===2||s===3||s===6)&&(s=kn.current,s!==null&&s.tag===13&&(s.flags|=16384))),rw(t,e)):dd(t)}function dd(e){var t=e;do{if(t.flags&32768){rw(t,Ms);return}e=t.return;var n=rk(t.alternate,t,Vs);if(n!==null){_e=n;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);it===0&&(it=5)}function rw(e,t){do{var n=ok(e.alternate,e);if(n!==null){n.flags&=32767,_e=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){_e=e;return}_e=e=n}while(e!==null);it=6,_e=null}function B0(e,t,n,s,a,o,i,l,c,d){var f=Ce.T,h=We.p;try{We.p=2,Ce.T=null,hk(e,t,n,s,h,a,o,i,l,c,d)}finally{Ce.T=f,We.p=h}}function hk(e,t,n,s,a,o,i,l){do To();while(rr!==null);if(st&6)throw Error(J(327));var c=e.finishedWork;if(s=e.finishedLanes,c===null)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var d=c.lanes|c.childLanes;if(d|=np,VC(e,s,d,o,i,l),e===Ze&&(_e=Ze=null,Ue=0),!(c.subtreeFlags&10256)&&!(c.flags&10256)||bc||(bc=!0,Ph=d,Ih=n,xk(cu,function(){return To(),null})),n=(c.flags&15990)!==0,c.subtreeFlags&15990||n?(n=Ce.T,Ce.T=null,o=We.p,We.p=2,i=st,st|=4,nk(e,c),qb(c,e),PE(Vh,e.containerInfo),_u=!!Fh,Vh=Fh=null,e.current=c,Ub(e,c.alternate,c),LC(),st=i,We.p=o,Ce.T=n):e.current=c,bc?(bc=!1,rr=e,ol=s):ow(e,d),d=e.pendingLanes,d===0&&(Ca=null),$C(c.stateNode),ps(e),t!==null)for(a=e.onRecoverableError,c=0;c<t.length;c++)d=t[c],a(d.value,{componentStack:d.stack});return ol&3&&To(),d=e.pendingLanes,s&4194218&&d&42?e===Uh?il++:(il=0,Uh=e):il=0,Yl(0),null}function ow(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Hl(t)))}function To(){if(rr!==null){var e=rr,t=Ph;Ph=0;var n=cy(ol),s=Ce.T,a=We.p;try{if(We.p=32>n?32:n,Ce.T=null,rr===null)var o=!1;else{n=Ih,Ih=null;var i=rr,l=ol;if(rr=null,ol=0,st&6)throw Error(J(331));var c=st;if(st|=4,Qb(i.current),Vb(i,i.current,l,n),st=c,Yl(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Pl,i)}catch{}o=!0}return o}finally{We.p=a,Ce.T=s,ow(e,t)}}return!1}function H0(e,t,n){t=Sn(n,t),t=Eh(e.stateNode,t,2),e=Na(e,t,2),e!==null&&(Ul(e,2),ps(e))}function Ke(e,t,n){if(e.tag===3)H0(e,e,n);else for(;t!==null;){if(t.tag===3){H0(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ca===null||!Ca.has(s))){e=Sn(n,e),n=jb(2),s=Na(t,n,2),s!==null&&(Cb(n,s,t,e),Ul(s,2),ps(s));break}}t=t.return}}function Cf(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new lk;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(Ep=!0,a.add(n),e=mk.bind(null,e,t,n),t.then(e,e))}function mk(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ze===e&&(Ue&n)===n&&(it===4||it===3&&(Ue&62914560)===Ue&&300>rs()-Ap?!(st&2)&&ei(e,0):kp|=n,Jo===Ue&&(Jo=0)),ps(e)}function iw(e,t){t===0&&(t=oy()),e=_a(e,t),e!==null&&(Ul(e,t),ps(e))}function pk(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),iw(e,n)}function gk(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(J(314))}s!==null&&s.delete(t),iw(e,n)}function xk(e,t){return Qm(e,t)}var Cu=null,lo=null,Hh=!1,Eu=!1,Ef=!1,Sr=0;function ps(e){e!==lo&&e.next===null&&(lo===null?Cu=lo=e:lo=lo.next=e),Eu=!0,Hh||(Hh=!0,yk(vk))}function Yl(e,t){if(!Ef&&Eu){Ef=!0;do for(var n=!1,s=Cu;s!==null;){if(e!==0){var a=s.pendingLanes;if(a===0)var o=0;else{var i=s.suspendedLanes,l=s.pingedLanes;o=(1<<31-rn(42|e)+1)-1,o&=a&~(i&~l),o=o&201326677?o&201326677|1:o?o|2:0}o!==0&&(n=!0,q0(s,o))}else o=Ue,o=ed(s,s===Ze?o:0),!(o&3)||Il(s,o)||(n=!0,q0(s,o));s=s.next}while(n);Ef=!1}}function vk(){Eu=Hh=!1;var e=0;Sr!==0&&(kk()&&(e=Sr),Sr=0);for(var t=rs(),n=null,s=Cu;s!==null;){var a=s.next,o=lw(s,t);o===0?(s.next=null,n===null?Cu=a:n.next=a,a===null&&(lo=n)):(n=s,(e!==0||o&3)&&(Eu=!0)),s=a}Yl(e)}function lw(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var i=31-rn(o),l=1<<i,c=a[i];c===-1?(!(l&n)||l&s)&&(a[i]=FC(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}if(t=Ze,n=Ue,n=ed(e,e===t?n:0),s=e.callbackNode,n===0||e===t&&Xe===2||e.cancelPendingCommit!==null)return s!==null&&s!==null&&tf(s),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Il(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(s!==null&&tf(s),cy(n)){case 2:case 8:n=sy;break;case 32:n=cu;break;case 268435456:n=ay;break;default:n=cu}return s=cw.bind(null,e),n=Qm(n,s),e.callbackPriority=t,e.callbackNode=n,t}return s!==null&&s!==null&&tf(s),e.callbackPriority=2,e.callbackNode=null,2}function cw(e,t){var n=e.callbackNode;if(To()&&e.callbackNode!==n)return null;var s=Ue;return s=ed(e,e===Ze?s:0),s===0?null:(ew(e,s,t),lw(e,rs()),e.callbackNode!=null&&e.callbackNode===n?cw.bind(null,e):null)}function q0(e,t){if(To())return null;ew(e,t,!0)}function yk(e){Tk(function(){st&6?Qm(ny,e):e()})}function Rp(){return Sr===0&&(Sr=ry()),Sr}function F0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Pc(""+e)}function V0(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function bk(e,t,n,s,a){if(t==="submit"&&n&&n.stateNode===a){var o=F0((a[Zt]||null).action),i=s.submitter;i&&(t=(t=i[Zt]||null)?F0(t.formAction):i.getAttribute("formAction"),t!==null&&(o=t,i=null));var l=new td("action","action",null,s,a);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Sr!==0){var c=i?V0(a,i):new FormData(a);jh(n,{pending:!0,data:c,method:a.method,action:o},null,c)}}else typeof o=="function"&&(l.preventDefault(),c=i?V0(a,i):new FormData(a),jh(n,{pending:!0,data:c,method:a.method,action:o},o,c))},currentTarget:a}]})}}for(var kf=0;kf<f0.length;kf++){var Af=f0[kf],wk=Af.toLowerCase(),Sk=Af[0].toUpperCase()+Af.slice(1);Kn(wk,"on"+Sk)}Kn(Ry,"onAnimationEnd");Kn(My,"onAnimationIteration");Kn(_y,"onAnimationStart");Kn("dblclick","onDoubleClick");Kn("focusin","onFocus");Kn("focusout","onBlur");Kn(UE,"onTransitionRun");Kn($E,"onTransitionStart");Kn(BE,"onTransitionCancel");Kn(Oy,"onTransitionEnd");Qo("onMouseEnter",["mouseout","mouseover"]);Qo("onMouseLeave",["mouseout","mouseover"]);Qo("onPointerEnter",["pointerout","pointerover"]);Qo("onPointerLeave",["pointerout","pointerover"]);Br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Br("onBeforeInput",["compositionend","keypress","textInput","paste"]);Br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vl));function uw(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;o=l,a.currentTarget=d;try{o(a)}catch(f){yu(f)}a.currentTarget=null,o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;o=l,a.currentTarget=d;try{o(a)}catch(f){yu(f)}a.currentTarget=null,o=c}}}}function ze(e,t){var n=t[dh];n===void 0&&(n=t[dh]=new Set);var s=e+"__bubble";n.has(s)||(dw(t,e,2,!1),n.add(s))}function Tf(e,t,n){var s=0;t&&(s|=4),dw(n,e,s,t)}var wc="_reactListening"+Math.random().toString(36).slice(2);function Mp(e){if(!e[wc]){e[wc]=!0,dy.forEach(function(n){n!=="selectionchange"&&(Nk.has(n)||Tf(n,!1,e),Tf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wc]||(t[wc]=!0,Tf("selectionchange",!1,t))}}function dw(e,t,n,s){switch(Nw(t)){case 2:var a=Kk;break;case 8:a=Xk;break;default:a=Lp}n=a.bind(null,t,n,e),a=void 0,!ph||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Rf(e,t,n,s,a){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;l!==null;){if(i=or(l),i===null)return;if(c=i.tag,c===5||c===6||c===26||c===27){s=o=i;continue e}l=l.parentNode}}s=s.return}yy(function(){var d=o,f=Zm(n),h=[];e:{var m=Dy.get(e);if(m!==void 0){var g=td,b=e;switch(e){case"keypress":if(Uc(n)===0)break e;case"keydown":case"keyup":g=gE;break;case"focusin":b="focus",g=of;break;case"focusout":b="blur",g=of;break;case"beforeblur":case"afterblur":g=of;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=e0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=aE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=yE;break;case Ry:case My:case _y:g=iE;break;case Oy:g=wE;break;case"scroll":case"scrollend":g=nE;break;case"wheel":g=NE;break;case"copy":case"cut":case"paste":g=cE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=n0;break;case"toggle":case"beforetoggle":g=CE}var x=(t&4)!==0,w=!x&&(e==="scroll"||e==="scrollend"),v=x?m!==null?m+"Capture":null:m;x=[];for(var p=d,y;p!==null;){var S=p;if(y=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||y===null||v===null||(S=fl(p,v),S!=null&&x.push(yl(p,S,y))),w)break;p=p.return}0<x.length&&(m=new g(m,b,null,n,f),h.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==mh&&(b=n.relatedTarget||n.fromElement)&&(or(b)||b[ui]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(b=n.relatedTarget||n.toElement,g=d,b=b?or(b):null,b!==null&&(w=ci(b),x=b.tag,b!==w||x!==5&&x!==27&&x!==6)&&(b=null)):(g=null,b=d),g!==b)){if(x=e0,S="onMouseLeave",v="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(x=n0,S="onPointerLeave",v="onPointerEnter",p="pointer"),w=g==null?m:$i(g),y=b==null?m:$i(b),m=new x(S,p+"leave",g,n,f),m.target=w,m.relatedTarget=y,S=null,or(f)===d&&(x=new x(v,p+"enter",b,n,f),x.target=y,x.relatedTarget=w,S=x),w=S,g&&b)t:{for(x=g,v=b,p=0,y=x;y;y=eo(y))p++;for(y=0,S=v;S;S=eo(S))y++;for(;0<p-y;)x=eo(x),p--;for(;0<y-p;)v=eo(v),y--;for(;p--;){if(x===v||v!==null&&x===v.alternate)break t;x=eo(x),v=eo(v)}x=null}else x=null;g!==null&&Y0(h,m,g,x,!1),b!==null&&w!==null&&Y0(h,w,b,x,!0)}}e:{if(m=d?$i(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var j=o0;else if(r0(m))if(Cy)j=LE;else{j=OE;var E=_E}else g=m.nodeName,!g||g.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?d&&Xm(d.elementType)&&(j=o0):j=DE;if(j&&(j=j(e,d))){jy(h,j,n,f);break e}E&&E(e,m,d),e==="focusout"&&d&&m.type==="number"&&d.memoizedProps.value!=null&&hh(m,"number",m.value)}switch(E=d?$i(d):window,e){case"focusin":(r0(E)||E.contentEditable==="true")&&(mo=E,gh=d,Ki=null);break;case"focusout":Ki=gh=mo=null;break;case"mousedown":xh=!0;break;case"contextmenu":case"mouseup":case"dragend":xh=!1,d0(h,n,f);break;case"selectionchange":if(IE)break;case"keydown":case"keyup":d0(h,n,f)}var N;if(ep)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ho?Sy(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(wy&&n.locale!=="ko"&&(ho||C!=="onCompositionStart"?C==="onCompositionEnd"&&ho&&(N=by()):(ba=f,Wm="value"in ba?ba.value:ba.textContent,ho=!0)),E=ku(d,C),0<E.length&&(C=new t0(C,e,null,n,f),h.push({event:C,listeners:E}),N?C.data=N:(N=Ny(n),N!==null&&(C.data=N)))),(N=kE?AE(e,n):TE(e,n))&&(C=ku(d,"onBeforeInput"),0<C.length&&(E=new t0("onBeforeInput","beforeinput",null,n,f),h.push({event:E,listeners:C}),E.data=N)),bk(h,e,d,n,f)}uw(h,t)})}function yl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ku(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,o=a.stateNode;a=a.tag,a!==5&&a!==26&&a!==27||o===null||(a=fl(e,n),a!=null&&s.unshift(yl(e,a,o)),a=fl(e,t),a!=null&&s.push(yl(e,a,o))),e=e.return}return s}function eo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Y0(e,t,n,s,a){for(var o=t._reactName,i=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(l=l.tag,c!==null&&c===s)break;l!==5&&l!==26&&l!==27||d===null||(c=d,a?(d=fl(n,o),d!=null&&i.unshift(yl(n,d,c))):a||(d=fl(n,o),d!=null&&i.push(yl(n,d,c)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var jk=/\r\n?/g,Ck=/\u0000|\uFFFD/g;function G0(e){return(typeof e=="string"?e:""+e).replace(jk,`
`).replace(Ck,"")}function fw(e,t){return t=G0(t),G0(e)===t}function fd(){}function Ye(e,t,n,s,a,o){switch(n){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Ko(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Ko(e,""+s);break;case"className":hc(e,"class",s);break;case"tabIndex":hc(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":hc(e,n,s);break;case"style":vy(e,s,o);break;case"data":if(t!=="object"){hc(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=Pc(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&Ye(e,t,"name",a.name,a,null),Ye(e,t,"formEncType",a.formEncType,a,null),Ye(e,t,"formMethod",a.formMethod,a,null),Ye(e,t,"formTarget",a.formTarget,a,null)):(Ye(e,t,"encType",a.encType,a,null),Ye(e,t,"method",a.method,a,null),Ye(e,t,"target",a.target,a,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=Pc(""+s),e.setAttribute(n,s);break;case"onClick":s!=null&&(e.onclick=fd);break;case"onScroll":s!=null&&ze("scroll",e);break;case"onScrollEnd":s!=null&&ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(J(61));if(n=s.__html,n!=null){if(a.children!=null)throw Error(J(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}n=Pc(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":s===!0?e.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":ze("beforetoggle",e),ze("toggle",e),zc(e,"popover",s);break;case"xlinkActuate":bs(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":bs(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":bs(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":bs(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":bs(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":bs(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":bs(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":bs(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":bs(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":zc(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=eE.get(n)||n,zc(e,n,s))}}function qh(e,t,n,s,a,o){switch(n){case"style":vy(e,s,o);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(J(61));if(n=s.__html,n!=null){if(a.children!=null)throw Error(J(60));e.innerHTML=n}}break;case"children":typeof s=="string"?Ko(e,s):(typeof s=="number"||typeof s=="bigint")&&Ko(e,""+s);break;case"onScroll":s!=null&&ze("scroll",e);break;case"onScrollEnd":s!=null&&ze("scrollend",e);break;case"onClick":s!=null&&(e.onclick=fd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fy.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),o=e[Zt]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,a),typeof s=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,a);break e}n in e?e[n]=s:s===!0?e.setAttribute(n,""):zc(e,n,s)}}}function Et(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",e),ze("load",e);var s=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var i=n[o];if(i!=null)switch(o){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(J(137,t));default:Ye(e,t,o,i,n,null)}}a&&Ye(e,t,"srcSet",n.srcSet,n,null),s&&Ye(e,t,"src",n.src,n,null);return;case"input":ze("invalid",e);var l=o=i=a=null,c=null,d=null;for(s in n)if(n.hasOwnProperty(s)){var f=n[s];if(f!=null)switch(s){case"name":a=f;break;case"type":i=f;break;case"checked":c=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(J(137,t));break;default:Ye(e,t,s,f,n,null)}}py(e,o,l,c,d,i,a,!1),uu(e);return;case"select":ze("invalid",e),s=i=o=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":o=l;break;case"defaultValue":i=l;break;case"multiple":s=l;default:Ye(e,t,a,l,n,null)}t=o,n=i,e.multiple=!!s,t!=null?No(e,!!s,t,!1):n!=null&&No(e,!!s,n,!0);return;case"textarea":ze("invalid",e),o=a=s=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":a=l;break;case"children":o=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(J(91));break;default:Ye(e,t,i,l,n,null)}xy(e,s,a,o),uu(e);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ye(e,t,c,s,n,null)}return;case"dialog":ze("cancel",e),ze("close",e);break;case"iframe":case"object":ze("load",e);break;case"video":case"audio":for(s=0;s<vl.length;s++)ze(vl[s],e);break;case"image":ze("error",e),ze("load",e);break;case"details":ze("toggle",e);break;case"embed":case"source":case"link":ze("error",e),ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(s=n[d],s!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(J(137,t));default:Ye(e,t,d,s,n,null)}return;default:if(Xm(t)){for(f in n)n.hasOwnProperty(f)&&(s=n[f],s!==void 0&&qh(e,t,f,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(s=n[l],s!=null&&Ye(e,t,l,s,n,null))}function Ek(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,o=null,i=null,l=null,c=null,d=null,f=null;for(g in n){var h=n[g];if(n.hasOwnProperty(g)&&h!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(g)||Ye(e,t,g,null,s,h)}}for(var m in s){var g=s[m];if(h=n[m],s.hasOwnProperty(m)&&(g!=null||h!=null))switch(m){case"type":o=g;break;case"name":a=g;break;case"checked":d=g;break;case"defaultChecked":f=g;break;case"value":i=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(J(137,t));break;default:g!==h&&Ye(e,t,m,g,s,h)}}fh(e,i,l,c,d,f,o,a);return;case"select":g=i=l=m=null;for(o in n)if(c=n[o],n.hasOwnProperty(o)&&c!=null)switch(o){case"value":break;case"multiple":g=c;default:s.hasOwnProperty(o)||Ye(e,t,o,null,s,c)}for(a in s)if(o=s[a],c=n[a],s.hasOwnProperty(a)&&(o!=null||c!=null))switch(a){case"value":m=o;break;case"defaultValue":l=o;break;case"multiple":i=o;default:o!==c&&Ye(e,t,a,o,s,c)}t=l,n=i,s=g,m!=null?No(e,!!n,m,!1):!!s!=!!n&&(t!=null?No(e,!!n,t,!0):No(e,!!n,n?[]:"",!1));return;case"textarea":g=m=null;for(l in n)if(a=n[l],n.hasOwnProperty(l)&&a!=null&&!s.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ye(e,t,l,null,s,a)}for(i in s)if(a=s[i],o=n[i],s.hasOwnProperty(i)&&(a!=null||o!=null))switch(i){case"value":m=a;break;case"defaultValue":g=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(J(91));break;default:a!==o&&Ye(e,t,i,a,s,o)}gy(e,m,g);return;case"option":for(var b in n)if(m=n[b],n.hasOwnProperty(b)&&m!=null&&!s.hasOwnProperty(b))switch(b){case"selected":e.selected=!1;break;default:Ye(e,t,b,null,s,m)}for(c in s)if(m=s[c],g=n[c],s.hasOwnProperty(c)&&m!==g&&(m!=null||g!=null))switch(c){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ye(e,t,c,m,s,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!=null&&!s.hasOwnProperty(x)&&Ye(e,t,x,null,s,m);for(d in s)if(m=s[d],g=n[d],s.hasOwnProperty(d)&&m!==g&&(m!=null||g!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(J(137,t));break;default:Ye(e,t,d,m,s,g)}return;default:if(Xm(t)){for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!==void 0&&!s.hasOwnProperty(w)&&qh(e,t,w,void 0,s,m);for(f in s)m=s[f],g=n[f],!s.hasOwnProperty(f)||m===g||m===void 0&&g===void 0||qh(e,t,f,m,s,g);return}}for(var v in n)m=n[v],n.hasOwnProperty(v)&&m!=null&&!s.hasOwnProperty(v)&&Ye(e,t,v,null,s,m);for(h in s)m=s[h],g=n[h],!s.hasOwnProperty(h)||m===g||m==null&&g==null||Ye(e,t,h,m,s,g)}var Fh=null,Vh=null;function Au(e){return e.nodeType===9?e:e.ownerDocument}function Q0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hw(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Yh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mf=null;function kk(){var e=window.event;return e&&e.type==="popstate"?e===Mf?!1:(Mf=e,!0):(Mf=null,!1)}var mw=typeof setTimeout=="function"?setTimeout:void 0,Ak=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,Tk=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(e){return K0.resolve(null).then(e).catch(Rk)}:mw;function Rk(e){setTimeout(function(){throw e})}function _f(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),jl(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);jl(t)}function Gh(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Gh(n),Km(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Mk(e,t,n,s){for(;e.nodeType===1;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[dl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==a.rel||e.getAttribute("href")!==(a.href==null?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=Hn(e.nextSibling),e===null)break}return null}function _k(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Hn(e.nextSibling),e===null))return null;return e}function Hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}function X0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function pw(e,t,n){switch(t=Au(n),e){case"html":if(e=t.documentElement,!e)throw Error(J(452));return e;case"head":if(e=t.head,!e)throw Error(J(453));return e;case"body":if(e=t.body,!e)throw Error(J(454));return e;default:throw Error(J(451))}}var An=new Map,Z0=new Set;function Tu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var Xs=We.d;We.d={f:Ok,r:Dk,D:Lk,C:zk,L:Pk,m:Ik,X:$k,S:Uk,M:Bk};function Ok(){var e=Xs.f(),t=ud();return e||t}function Dk(e){var t=di(e);t!==null&&t.tag===5&&t.type==="form"?pb(t):Xs.r(e)}var hi=typeof document>"u"?null:document;function gw(e,t,n){var s=hi;if(s&&typeof t=="string"&&t){var a=wn(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),Z0.has(a)||(Z0.add(a),e={rel:e,crossOrigin:n,href:t},s.querySelector(a)===null&&(t=s.createElement("link"),Et(t,"link",e),bt(t),s.head.appendChild(t)))}}function Lk(e){Xs.D(e),gw("dns-prefetch",e,null)}function zk(e,t){Xs.C(e,t),gw("preconnect",e,t)}function Pk(e,t,n){Xs.L(e,t,n);var s=hi;if(s&&e&&t){var a='link[rel="preload"][as="'+wn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+wn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+wn(n.imageSizes)+'"]')):a+='[href="'+wn(e)+'"]';var o=a;switch(t){case"style":o=ti(e);break;case"script":o=mi(e)}An.has(o)||(e=Je({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),An.set(o,e),s.querySelector(a)!==null||t==="style"&&s.querySelector(Gl(o))||t==="script"&&s.querySelector(Ql(o))||(t=s.createElement("link"),Et(t,"link",e),bt(t),s.head.appendChild(t)))}}function Ik(e,t){Xs.m(e,t);var n=hi;if(n&&e){var s=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+wn(s)+'"][href="'+wn(e)+'"]',o=a;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=mi(e)}if(!An.has(o)&&(e=Je({rel:"modulepreload",href:e},t),An.set(o,e),n.querySelector(a)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ql(o)))return}s=n.createElement("link"),Et(s,"link",e),bt(s),n.head.appendChild(s)}}}function Uk(e,t,n){Xs.S(e,t,n);var s=hi;if(s&&e){var a=So(s).hoistableStyles,o=ti(e);t=t||"default";var i=a.get(o);if(!i){var l={loading:0,preload:null};if(i=s.querySelector(Gl(o)))l.loading=5;else{e=Je({rel:"stylesheet",href:e,"data-precedence":t},n),(n=An.get(o))&&_p(e,n);var c=i=s.createElement("link");bt(c),Et(c,"link",e),c._p=new Promise(function(d,f){c.onload=d,c.onerror=f}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Vc(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:l},a.set(o,i)}}}function $k(e,t){Xs.X(e,t);var n=hi;if(n&&e){var s=So(n).hoistableScripts,a=mi(e),o=s.get(a);o||(o=n.querySelector(Ql(a)),o||(e=Je({src:e,async:!0},t),(t=An.get(a))&&Op(e,t),o=n.createElement("script"),bt(o),Et(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(a,o))}}function Bk(e,t){Xs.M(e,t);var n=hi;if(n&&e){var s=So(n).hoistableScripts,a=mi(e),o=s.get(a);o||(o=n.querySelector(Ql(a)),o||(e=Je({src:e,async:!0,type:"module"},t),(t=An.get(a))&&Op(e,t),o=n.createElement("script"),bt(o),Et(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},s.set(a,o))}}function W0(e,t,n,s){var a=(a=wa.current)?Tu(a):null;if(!a)throw Error(J(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ti(n.href),n=So(a).hoistableStyles,s=n.get(t),s||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ti(n.href);var o=So(a).hoistableStyles,i=o.get(e);if(i||(a=a.ownerDocument||a,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,i),(o=a.querySelector(Gl(e)))&&!o._p&&(i.instance=o,i.state.loading=5),An.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},An.set(e,n),o||Hk(a,e,n,i.state))),t&&s===null)throw Error(J(528,""));return i}if(t&&s!==null)throw Error(J(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=mi(n),n=So(a).hoistableScripts,s=n.get(t),s||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(J(444,e))}}function ti(e){return'href="'+wn(e)+'"'}function Gl(e){return'link[rel="stylesheet"]['+e+"]"}function xw(e){return Je({},e,{"data-precedence":e.precedence,precedence:null})}function Hk(e,t,n,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Et(t,"link",n),bt(t),e.head.appendChild(t))}function mi(e){return'[src="'+wn(e)+'"]'}function Ql(e){return"script[async]"+e}function J0(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+wn(n.href)+'"]');if(s)return t.instance=s,bt(s),s;var a=Je({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),bt(s),Et(s,"style",a),Vc(s,n.precedence,e),t.instance=s;case"stylesheet":a=ti(n.href);var o=e.querySelector(Gl(a));if(o)return t.state.loading|=4,t.instance=o,bt(o),o;s=xw(n),(a=An.get(a))&&_p(s,a),o=(e.ownerDocument||e).createElement("link"),bt(o);var i=o;return i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Et(o,"link",s),t.state.loading|=4,Vc(o,n.precedence,e),t.instance=o;case"script":return o=mi(n.src),(a=e.querySelector(Ql(o)))?(t.instance=a,bt(a),a):(s=n,(a=An.get(o))&&(s=Je({},n),Op(s,a)),e=e.ownerDocument||e,a=e.createElement("script"),bt(a),Et(a,"link",s),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(J(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,Vc(s,n.precedence,e));return t.instance}function Vc(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=s.length?s[s.length-1]:null,o=a,i=0;i<s.length;i++){var l=s[i];if(l.dataset.precedence===t)o=l;else if(o!==a)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function _p(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Op(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Yc=null;function ex(e,t,n){if(Yc===null){var s=new Map,a=Yc=new Map;a.set(n,s)}else a=Yc,s=a.get(n),s||(s=new Map,a.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var o=n[a];if(!(o[dl]||o[Mt]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var i=o.getAttribute(t)||"";i=e+i;var l=s.get(i);l?l.push(o):s.set(i,[o])}}return s}function tx(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function qk(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function vw(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var bl=null;function Fk(){}function Vk(e,t,n){if(bl===null)throw Error(J(475));var s=bl;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var a=ti(n.href),o=e.querySelector(Gl(a));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=Ru.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=o,bt(o);return}o=e.ownerDocument||e,n=xw(n),(a=An.get(a))&&_p(n,a),o=o.createElement("link"),bt(o);var i=o;i._p=new Promise(function(l,c){i.onload=l,i.onerror=c}),Et(o,"link",n),t.instance=o}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(s.count++,t=Ru.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function Yk(){if(bl===null)throw Error(J(475));var e=bl;return e.stylesheets&&e.count===0&&Qh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Qh(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Ru(){if(this.count--,this.count===0){if(this.stylesheets)Qh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Mu=null;function Qh(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Mu=new Map,t.forEach(Gk,e),Mu=null,Ru.call(e))}function Gk(e,t){if(!(t.state.loading&4)){var n=Mu.get(e);if(n)var s=n.get(null);else{n=new Map,Mu.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<a.length;o++){var i=a[o];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(n.set(i.dataset.precedence,i),s=i)}s&&n.set(null,s)}a=t.instance,i=a.getAttribute("data-precedence"),o=n.get(i)||s,o===s&&n.set(null,a),n.set(i,a),this.count++,s=Ru.bind(this),a.addEventListener("load",s),a.addEventListener("error",s),o?o.parentNode.insertBefore(a,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var wl={$$typeof:Os,Provider:null,Consumer:null,_currentValue:xr,_currentValue2:xr,_threadCount:0};function Qk(e,t,n,s,a,o,i,l){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nf(0),this.hiddenUpdates=nf(null),this.identifierPrefix=s,this.onUncaughtError=a,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function yw(e,t,n,s,a,o,i,l,c,d,f,h){return e=new Qk(e,t,n,i,l,c,d,h),t=1,o===!0&&(t|=24),o=Nn(3,null,null,t),e.current=o,o.stateNode=e,t=ip(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:s,isDehydrated:n,cache:t},Sp(o),e}function bw(e){return e?(e=xo,e):xo}function ww(e,t,n,s,a,o){a=bw(a),s.context===null?s.context=a:s.pendingContext=a,s=Sa(t),s.payload={element:n},o=o===void 0?null:o,o!==null&&(s.callback=o),n=Na(e,s,t),n!==null&&(Ht(n,e,t),tl(n,e,t))}function nx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Dp(e,t){nx(e,t),(e=e.alternate)&&nx(e,t)}function Sw(e){if(e.tag===13){var t=_a(e,67108864);t!==null&&Ht(t,e,67108864),Dp(e,67108864)}}var _u=!0;function Kk(e,t,n,s){var a=Ce.T;Ce.T=null;var o=We.p;try{We.p=2,Lp(e,t,n,s)}finally{We.p=o,Ce.T=a}}function Xk(e,t,n,s){var a=Ce.T;Ce.T=null;var o=We.p;try{We.p=8,Lp(e,t,n,s)}finally{We.p=o,Ce.T=a}}function Lp(e,t,n,s){if(_u){var a=Kh(s);if(a===null)Rf(e,t,s,Ou,n),sx(e,s);else if(Wk(a,e,t,n,s))s.stopPropagation();else if(sx(e,s),t&4&&-1<Zk.indexOf(e)){for(;a!==null;){var o=di(a);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var i=sr(o.pendingLanes);if(i!==0){var l=o;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var c=1<<31-rn(i);l.entanglements[1]|=c,i&=~c}ps(o),!(st&6)&&(Nu=rs()+500,Yl(0))}}break;case 13:l=_a(o,2),l!==null&&Ht(l,o,2),ud(),Dp(o,2)}if(o=Kh(s),o===null&&Rf(e,t,s,Ou,n),o===a)break;a=o}a!==null&&s.stopPropagation()}else Rf(e,t,s,null,n)}}function Kh(e){return e=Zm(e),zp(e)}var Ou=null;function zp(e){if(Ou=null,e=or(e),e!==null){var t=ci(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=ey(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ou=e,null}function Nw(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zC()){case ny:return 2;case sy:return 8;case cu:case PC:return 32;case ay:return 268435456;default:return 32}default:return 32}}var Xh=!1,Ea=null,ka=null,Aa=null,Sl=new Map,Nl=new Map,la=[],Zk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sx(e,t){switch(e){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":ka=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":Sl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(t.pointerId)}}function Oi(e,t,n,s,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},t!==null&&(t=di(t),t!==null&&Sw(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Wk(e,t,n,s,a){switch(t){case"focusin":return Ea=Oi(Ea,e,t,n,s,a),!0;case"dragenter":return ka=Oi(ka,e,t,n,s,a),!0;case"mouseover":return Aa=Oi(Aa,e,t,n,s,a),!0;case"pointerover":var o=a.pointerId;return Sl.set(o,Oi(Sl.get(o)||null,e,t,n,s,a)),!0;case"gotpointercapture":return o=a.pointerId,Nl.set(o,Oi(Nl.get(o)||null,e,t,n,s,a)),!0}return!1}function jw(e){var t=or(e.target);if(t!==null){var n=ci(t);if(n!==null){if(t=n.tag,t===13){if(t=ey(n),t!==null){e.blockedOn=t,YC(e.priority,function(){if(n.tag===13){var s=on(),a=_a(n,s);a!==null&&Ht(a,n,s),Dp(n,s)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kh(e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);mh=s,n.target.dispatchEvent(s),mh=null}else return t=di(n),t!==null&&Sw(t),e.blockedOn=n,!1;t.shift()}return!0}function ax(e,t,n){Gc(e)&&n.delete(t)}function Jk(){Xh=!1,Ea!==null&&Gc(Ea)&&(Ea=null),ka!==null&&Gc(ka)&&(ka=null),Aa!==null&&Gc(Aa)&&(Aa=null),Sl.forEach(ax),Nl.forEach(ax)}function Sc(e,t){e.blockedOn===t&&(e.blockedOn=null,Xh||(Xh=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,Jk)))}var Nc=null;function rx(e){Nc!==e&&(Nc=e,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,function(){Nc===e&&(Nc=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],a=e[t+2];if(typeof s!="function"){if(zp(s||n)===null)continue;break}var o=di(n);o!==null&&(e.splice(t,3),t-=3,jh(o,{pending:!0,data:a,method:n.method,action:s},s,a))}}))}function jl(e){function t(c){return Sc(c,e)}Ea!==null&&Sc(Ea,e),ka!==null&&Sc(ka,e),Aa!==null&&Sc(Aa,e),Sl.forEach(t),Nl.forEach(t);for(var n=0;n<la.length;n++){var s=la[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<la.length&&(n=la[0],n.blockedOn===null);)jw(n),n.blockedOn===null&&la.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var a=n[s],o=n[s+1],i=a[Zt]||null;if(typeof o=="function")i||rx(n);else if(i){var l=null;if(o&&o.hasAttribute("formAction")){if(a=o,i=o[Zt]||null)l=i.formAction;else if(zp(a)!==null)continue}else l=i.action;typeof l=="function"?n[s+1]=l:(n.splice(s,3),s-=3),rx(n)}}}function Pp(e){this._internalRoot=e}hd.prototype.render=Pp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));var n=t.current,s=on();ww(n,s,e,t,null,null)};hd.prototype.unmount=Pp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e.tag===0&&To(),ww(e.current,2,null,e,null,null),ud(),t[ui]=null}};function hd(e){this._internalRoot=e}hd.prototype.unstable_scheduleHydration=function(e){if(e){var t=uy();e={blockedOn:null,target:e,priority:t};for(var n=0;n<la.length&&t!==0&&t<la[n].priority;n++);la.splice(n,0,e),n===0&&jw(e)}};var ox=Kv.version;if(ox!=="19.0.0")throw Error(J(527,ox,"19.0.0"));We.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=OC(t),e=e!==null?ty(e):null,e=e===null?null:e.stateNode,e};var eA={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:Ce,findFiberByHostInstance:or,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{Pl=jc.inject(eA),an=jc}catch{}}Wu.createRoot=function(e,t){if(!Xv(e))throw Error(J(299));var n=!1,s="",a=wb,o=Sb,i=Nb,l=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks)),t=yw(e,1,!1,null,null,n,s,a,o,i,l,null),e[ui]=t.current,Mp(e.nodeType===8?e.parentNode:e),new Pp(t)};Wu.hydrateRoot=function(e,t,n){if(!Xv(e))throw Error(J(299));var s=!1,a="",o=wb,i=Sb,l=Nb,c=null,d=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(i=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(c=n.unstable_transitionCallbacks),n.formState!==void 0&&(d=n.formState)),t=yw(e,1,!0,t,n??null,s,a,o,i,l,c,d),t.context=bw(null),n=t.current,s=on(),a=Sa(s),a.callback=null,Na(n,a,s),t.current.lanes=s,Ul(t,s),ps(t),e[ui]=t.current,Mp(e),new hd(t)};Wu.version="19.0.0";function Cw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cw)}catch(e){console.error(e)}}Cw(),zv.exports=Wu;var tA=zv.exports;function nA(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,s,a,o,i=[],l="",c=e.split("/");for(c[0]||c.shift();a=c.shift();)n=a[0],n==="*"?(i.push(n),l+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(s=a.indexOf("?",1),o=a.indexOf(".",1),i.push(a.substring(1,~s?s:~o?o:a.length)),l+=~s&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(l+=(~s?"?":"")+"\\"+a.substring(o))):l+="/"+a;return{keys:i,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var Ew={exports:{}},kw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ni=u;function sA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var aA=typeof Object.is=="function"?Object.is:sA,rA=ni.useState,oA=ni.useEffect,iA=ni.useLayoutEffect,lA=ni.useDebugValue;function cA(e,t){var n=t(),s=rA({inst:{value:n,getSnapshot:t}}),a=s[0].inst,o=s[1];return iA(function(){a.value=n,a.getSnapshot=t,Of(a)&&o({inst:a})},[e,n,t]),oA(function(){return Of(a)&&o({inst:a}),e(function(){Of(a)&&o({inst:a})})},[e]),lA(n),n}function Of(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!aA(e,n)}catch{return!0}}function uA(e,t){return t()}var dA=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?uA:cA;kw.useSyncExternalStore=ni.useSyncExternalStore!==void 0?ni.useSyncExternalStore:dA;Ew.exports=kw;var fA=Ew.exports;const hA=Vm.useInsertionEffect,mA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pA=mA?u.useLayoutEffect:u.useEffect,gA=hA||pA,Aw=e=>{const t=u.useRef([e,(...n)=>t[0](...n)]).current;return gA(()=>{t[0]=e}),t[1]},xA="popstate",Ip="pushState",Up="replaceState",vA="hashchange",ix=[xA,Ip,Up,vA],yA=e=>{for(const t of ix)addEventListener(t,e);return()=>{for(const t of ix)removeEventListener(t,e)}},Tw=(e,t)=>fA.useSyncExternalStore(yA,e,t),bA=()=>location.search,wA=({ssrSearch:e=""}={})=>Tw(bA,()=>e),lx=()=>location.pathname,SA=({ssrPath:e}={})=>Tw(lx,e?()=>e:lx),NA=(e,{replace:t=!1,state:n=null}={})=>history[t?Up:Ip](n,"",e),jA=(e={})=>[SA(e),NA],cx=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[cx]>"u"){for(const e of[Ip,Up]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,cx,{value:!0})}const CA=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",Rw=(e="")=>e==="/"?"":e,EA=(e,t)=>e[0]==="~"?e.slice(1):Rw(t)+e,kA=(e="",t)=>CA(ux(Rw(e)),ux(t)),ux=e=>{try{return decodeURI(e)}catch{return e}},Mw={hook:jA,searchHook:wA,parser:nA,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},_w=u.createContext(Mw),Kl=()=>u.useContext(_w),Ow={},Dw=u.createContext(Ow),Lw=()=>u.useContext(Dw),md=e=>{const[t,n]=e.hook(e);return[kA(e.base,t),Aw((s,a)=>n(EA(s,e.base),a))]},Gr=()=>md(Kl()),zw=(e,t,n,s)=>{const{pattern:a,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),i=a.exec(n)||[],[l,...c]=i;return l!==void 0?[!0,(()=>{const d=o!==!1?Object.fromEntries(o.map((h,m)=>[h,c[m]])):i.groups;let f={...c};return d&&Object.assign(f,d),f})(),...s?[l]:[]]:[!1,null]},AA=({children:e,...t})=>{var f,h;const n=Kl(),s=t.hook?Mw:n;let a=s;const[o,i]=((f=t.ssrPath)==null?void 0:f.split("?"))??[];i&&(t.ssrSearch=i,t.ssrPath=o),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let l=u.useRef({}),c=l.current,d=c;for(let m in s){const g=m==="base"?s[m]+(t[m]||""):t[m]||s[m];c===d&&g!==d[m]&&(l.current=d={...d}),d[m]=g,(g!==s[m]||g!==a[m])&&(a=d)}return u.createElement(_w.Provider,{value:a,children:e})},dx=({children:e,component:t},n)=>t?u.createElement(t,{params:n}):typeof e=="function"?e(n):e,TA=e=>{let t=u.useRef(Ow);const n=t.current;return t.current=Object.keys(e).length!==Object.keys(n).length||Object.entries(e).some(([s,a])=>a!==n[s])?e:n},_n=({path:e,nest:t,match:n,...s})=>{const a=Kl(),[o]=md(a),[i,l,c]=n??zw(a.parser,e,o,t),d=TA({...Lw(),...l});if(!i)return null;const f=c?u.createElement(AA,{base:c},dx(s,d)):dx(s,d);return u.createElement(Dw.Provider,{value:d,children:f})};u.forwardRef((e,t)=>{const n=Kl(),[s,a]=md(n),{to:o="",href:i=o,onClick:l,asChild:c,children:d,className:f,replace:h,state:m,...g}=e,b=Aw(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(l==null||l(w),w.defaultPrevented||(w.preventDefault(),a(i,e)))}),x=n.hrefs(i[0]==="~"?i.slice(1):n.base+i,n);return c&&u.isValidElement(d)?u.cloneElement(d,{onClick:b,href:x}):u.createElement("a",{...g,onClick:b,href:x,className:f!=null&&f.call?f(s===i):f,children:d,ref:t})});const Pw=e=>Array.isArray(e)?e.flatMap(t=>Pw(t&&t.type===u.Fragment?t.props.children:t)):[e],RA=({children:e,location:t})=>{const n=Kl(),[s]=md(n);for(const a of Pw(e)){let o=0;if(u.isValidElement(a)&&(o=zw(n.parser,a.props.path,t||s,a.props.nest))[0])return u.cloneElement(a,{match:o})}return null};var pi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Mr=typeof window>"u"||"Deno"in globalThis;function It(){}function MA(e,t){return typeof e=="function"?e(t):e}function Zh(e){return typeof e=="number"&&e>=0&&e!==1/0}function Iw(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ta(e,t){return typeof e=="function"?e(t):e}function Un(e,t){return typeof e=="function"?e(t):e}function fx(e,t){const{type:n="all",exact:s,fetchStatus:a,predicate:o,queryKey:i,stale:l}=e;if(i){if(s){if(t.queryHash!==$p(i,t.options))return!1}else if(!Cl(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||o&&!o(t))}function hx(e,t){const{exact:n,status:s,predicate:a,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(_r(t.options.mutationKey)!==_r(o))return!1}else if(!Cl(t.options.mutationKey,o))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function $p(e,t){return((t==null?void 0:t.queryKeyHashFn)||_r)(e)}function _r(e){return JSON.stringify(e,(t,n)=>Wh(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function Cl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Cl(e[n],t[n])):!1}function Uw(e,t){if(e===t)return e;const n=mx(e)&&mx(t);if(n||Wh(e)&&Wh(t)){const s=n?e:Object.keys(e),a=s.length,o=n?t:Object.keys(t),i=o.length,l=n?[]:{},c=new Set(s);let d=0;for(let f=0;f<i;f++){const h=n?f:o[f];(!n&&c.has(h)||n)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,d++):(l[h]=Uw(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&d++)}return a===i&&d===a?e:l}return t}function Du(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function mx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Wh(e){if(!px(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!px(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function px(e){return Object.prototype.toString.call(e)==="[object Object]"}function _A(e){return new Promise(t=>{setTimeout(t,e)})}function Jh(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Uw(e,t):t}function OA(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function DA(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var Bp=Symbol();function $w(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Bp?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Bw(e,t){return typeof e=="function"?e(...t):!!e}var lr,ca,Lo,Nv,LA=(Nv=class extends pi{constructor(){super();we(this,lr);we(this,ca);we(this,Lo);ie(this,Lo,t=>{if(!Mr&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){D(this,ca)||this.setEventListener(D(this,Lo))}onUnsubscribe(){var t;this.hasListeners()||((t=D(this,ca))==null||t.call(this),ie(this,ca,void 0))}setEventListener(t){var n;ie(this,Lo,t),(n=D(this,ca))==null||n.call(this),ie(this,ca,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){D(this,lr)!==t&&(ie(this,lr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof D(this,lr)=="boolean"?D(this,lr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},lr=new WeakMap,ca=new WeakMap,Lo=new WeakMap,Nv),Hp=new LA,zo,ua,Po,jv,zA=(jv=class extends pi{constructor(){super();we(this,zo,!0);we(this,ua);we(this,Po);ie(this,Po,t=>{if(!Mr&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){D(this,ua)||this.setEventListener(D(this,Po))}onUnsubscribe(){var t;this.hasListeners()||((t=D(this,ua))==null||t.call(this),ie(this,ua,void 0))}setEventListener(t){var n;ie(this,Po,t),(n=D(this,ua))==null||n.call(this),ie(this,ua,t(this.setOnline.bind(this)))}setOnline(t){D(this,zo)!==t&&(ie(this,zo,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return D(this,zo)}},zo=new WeakMap,ua=new WeakMap,Po=new WeakMap,jv),Lu=new zA;function em(){let e,t;const n=new Promise((a,o)=>{e=a,t=o});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},n.reject=a=>{s({status:"rejected",reason:a}),t(a)},n}function PA(e){return Math.min(1e3*2**e,3e4)}function Hw(e){return(e??"online")==="online"?Lu.isOnline():!0}var qw=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Df(e){return e instanceof qw}function Fw(e){let t=!1,n=0,s=!1,a;const o=em(),i=x=>{var w;s||(m(new qw(x)),(w=e.abort)==null||w.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>Hp.isFocused()&&(e.networkMode==="always"||Lu.isOnline())&&e.canRun(),f=()=>Hw(e.networkMode)&&e.canRun(),h=x=>{var w;s||(s=!0,(w=e.onSuccess)==null||w.call(e,x),a==null||a(),o.resolve(x))},m=x=>{var w;s||(s=!0,(w=e.onError)==null||w.call(e,x),a==null||a(),o.reject(x))},g=()=>new Promise(x=>{var w;a=v=>{(s||d())&&x(v)},(w=e.onPause)==null||w.call(e)}).then(()=>{var x;a=void 0,s||(x=e.onContinue)==null||x.call(e)}),b=()=>{if(s)return;let x;const w=n===0?e.initialPromise:void 0;try{x=w??e.fn()}catch(v){x=Promise.reject(v)}Promise.resolve(x).then(h).catch(v=>{var E;if(s)return;const p=e.retry??(Mr?0:3),y=e.retryDelay??PA,S=typeof y=="function"?y(n,v):y,j=p===!0||typeof p=="number"&&n<p||typeof p=="function"&&p(n,v);if(t||!j){m(v);return}n++,(E=e.onFail)==null||E.call(e,n,v),_A(S).then(()=>d()?void 0:g()).then(()=>{t?m(v):b()})})};return{promise:o,cancel:i,continue:()=>(a==null||a(),o),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?b():g().then(b),o)}}var IA=e=>setTimeout(e,0);function UA(){let e=[],t=0,n=l=>{l()},s=l=>{l()},a=IA;const o=l=>{t?e.push(l):a(()=>{n(l)})},i=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var gt=UA(),cr,Cv,Vw=(Cv=class{constructor(){we(this,cr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Zh(this.gcTime)&&ie(this,cr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Mr?1/0:5*60*1e3))}clearGcTimeout(){D(this,cr)&&(clearTimeout(D(this,cr)),ie(this,cr,void 0))}},cr=new WeakMap,Cv),Io,ur,pn,dr,Rt,Ol,fr,Dn,Cs,Ev,$A=(Ev=class extends Vw{constructor(t){super();we(this,Dn);we(this,Io);we(this,ur);we(this,pn);we(this,dr);we(this,Rt);we(this,Ol);we(this,fr);ie(this,fr,!1),ie(this,Ol,t.defaultOptions),this.setOptions(t.options),this.observers=[],ie(this,dr,t.client),ie(this,pn,D(this,dr).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ie(this,Io,BA(this.options)),this.state=t.state??D(this,Io),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=D(this,Rt))==null?void 0:t.promise}setOptions(t){this.options={...D(this,Ol),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,pn).remove(this)}setData(t,n){const s=Jh(this.state.data,t,this.options);return Ee(this,Dn,Cs).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){Ee(this,Dn,Cs).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,a;const n=(s=D(this,Rt))==null?void 0:s.promise;return(a=D(this,Rt))==null||a.cancel(t),n?n.then(It).catch(It):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,Io))}isActive(){return this.observers.some(t=>Un(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Bp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ta(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Iw(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=D(this,Rt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=D(this,Rt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),D(this,pn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(D(this,Rt)&&(D(this,fr)?D(this,Rt).cancel({revert:!0}):D(this,Rt).cancelRetry()),this.scheduleGc()),D(this,pn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ee(this,Dn,Cs).call(this,{type:"invalidate"})}fetch(t,n){var d,f,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(D(this,Rt))return D(this,Rt).continueRetry(),D(this,Rt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(ie(this,fr,!0),s.signal)})},o=()=>{const m=$w(this.options,n),b=(()=>{const x={client:D(this,dr),queryKey:this.queryKey,meta:this.meta};return a(x),x})();return ie(this,fr,!1),this.options.persister?this.options.persister(m,b,this):m(b)},l=(()=>{const m={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:D(this,dr),state:this.state,fetchFn:o};return a(m),m})();(d=this.options.behavior)==null||d.onFetch(l,this),ie(this,ur,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Ee(this,Dn,Cs).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=m=>{var g,b,x,w;Df(m)&&m.silent||Ee(this,Dn,Cs).call(this,{type:"error",error:m}),Df(m)||((b=(g=D(this,pn).config).onError)==null||b.call(g,m,this),(w=(x=D(this,pn).config).onSettled)==null||w.call(x,this.state.data,m,this)),this.scheduleGc()};return ie(this,Rt,Fw({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var g,b,x,w;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(v){c(v);return}(b=(g=D(this,pn).config).onSuccess)==null||b.call(g,m,this),(w=(x=D(this,pn).config).onSettled)==null||w.call(x,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,g)=>{Ee(this,Dn,Cs).call(this,{type:"failed",failureCount:m,error:g})},onPause:()=>{Ee(this,Dn,Cs).call(this,{type:"pause"})},onContinue:()=>{Ee(this,Dn,Cs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),D(this,Rt).start()}},Io=new WeakMap,ur=new WeakMap,pn=new WeakMap,dr=new WeakMap,Rt=new WeakMap,Ol=new WeakMap,fr=new WeakMap,Dn=new WeakSet,Cs=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Yw(s.data,this.options),fetchMeta:t.meta??null};case"success":return ie(this,ur,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return Df(a)&&a.revert&&D(this,ur)?{...D(this,ur),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),gt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),D(this,pn).notify({query:this,type:"updated",action:t})})},Ev);function Yw(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Hw(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function BA(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Zn,kv,HA=(kv=class extends pi{constructor(t={}){super();we(this,Zn);this.config=t,ie(this,Zn,new Map)}build(t,n,s){const a=n.queryKey,o=n.queryHash??$p(a,n);let i=this.get(o);return i||(i=new $A({client:t,queryKey:a,queryHash:o,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(i)),i}add(t){D(this,Zn).has(t.queryHash)||(D(this,Zn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=D(this,Zn).get(t.queryHash);n&&(t.destroy(),n===t&&D(this,Zn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){gt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return D(this,Zn).get(t)}getAll(){return[...D(this,Zn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>fx(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>fx(t,s)):n}notify(t){gt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){gt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){gt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Zn=new WeakMap,kv),Wn,zt,hr,Jn,ta,Av,qA=(Av=class extends Vw{constructor(t){super();we(this,Jn);we(this,Wn);we(this,zt);we(this,hr);this.mutationId=t.mutationId,ie(this,zt,t.mutationCache),ie(this,Wn,[]),this.state=t.state||Gw(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){D(this,Wn).includes(t)||(D(this,Wn).push(t),this.clearGcTimeout(),D(this,zt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ie(this,Wn,D(this,Wn).filter(n=>n!==t)),this.scheduleGc(),D(this,zt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){D(this,Wn).length||(this.state.status==="pending"?this.scheduleGc():D(this,zt).remove(this))}continue(){var t;return((t=D(this,hr))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,i,l,c,d,f,h,m,g,b,x,w,v,p,y,S,j,E,N,C;const n=()=>{Ee(this,Jn,ta).call(this,{type:"continue"})};ie(this,hr,Fw({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(A,T)=>{Ee(this,Jn,ta).call(this,{type:"failed",failureCount:A,error:T})},onPause:()=>{Ee(this,Jn,ta).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,zt).canRun(this)}));const s=this.state.status==="pending",a=!D(this,hr).canStart();try{if(s)n();else{Ee(this,Jn,ta).call(this,{type:"pending",variables:t,isPaused:a}),await((i=(o=D(this,zt).config).onMutate)==null?void 0:i.call(o,t,this));const T=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));T!==this.state.context&&Ee(this,Jn,ta).call(this,{type:"pending",context:T,variables:t,isPaused:a})}const A=await D(this,hr).start();return await((f=(d=D(this,zt).config).onSuccess)==null?void 0:f.call(d,A,t,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,A,t,this.state.context)),await((b=(g=D(this,zt).config).onSettled)==null?void 0:b.call(g,A,null,this.state.variables,this.state.context,this)),await((w=(x=this.options).onSettled)==null?void 0:w.call(x,A,null,t,this.state.context)),Ee(this,Jn,ta).call(this,{type:"success",data:A}),A}catch(A){try{throw await((p=(v=D(this,zt).config).onError)==null?void 0:p.call(v,A,t,this.state.context,this)),await((S=(y=this.options).onError)==null?void 0:S.call(y,A,t,this.state.context)),await((E=(j=D(this,zt).config).onSettled)==null?void 0:E.call(j,void 0,A,this.state.variables,this.state.context,this)),await((C=(N=this.options).onSettled)==null?void 0:C.call(N,void 0,A,t,this.state.context)),A}finally{Ee(this,Jn,ta).call(this,{type:"error",error:A})}}finally{D(this,zt).runNext(this)}}},Wn=new WeakMap,zt=new WeakMap,hr=new WeakMap,Jn=new WeakSet,ta=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),gt.batch(()=>{D(this,Wn).forEach(s=>{s.onMutationUpdate(t)}),D(this,zt).notify({mutation:this,type:"updated",action:t})})},Av);function Gw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var As,Ln,Dl,Tv,FA=(Tv=class extends pi{constructor(t={}){super();we(this,As);we(this,Ln);we(this,Dl);this.config=t,ie(this,As,new Set),ie(this,Ln,new Map),ie(this,Dl,0)}build(t,n,s){const a=new qA({mutationCache:this,mutationId:++lc(this,Dl)._,options:t.defaultMutationOptions(n),state:s});return this.add(a),a}add(t){D(this,As).add(t);const n=Cc(t);if(typeof n=="string"){const s=D(this,Ln).get(n);s?s.push(t):D(this,Ln).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(D(this,As).delete(t)){const n=Cc(t);if(typeof n=="string"){const s=D(this,Ln).get(n);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&D(this,Ln).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Cc(t);if(typeof n=="string"){const s=D(this,Ln).get(n),a=s==null?void 0:s.find(o=>o.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const n=Cc(t);if(typeof n=="string"){const a=(s=D(this,Ln).get(n))==null?void 0:s.find(o=>o!==t&&o.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){gt.batch(()=>{D(this,As).forEach(t=>{this.notify({type:"removed",mutation:t})}),D(this,As).clear(),D(this,Ln).clear()})}getAll(){return Array.from(D(this,As))}find(t){const n={exact:!0,...t};return this.getAll().find(s=>hx(n,s))}findAll(t={}){return this.getAll().filter(n=>hx(t,n))}notify(t){gt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return gt.batch(()=>Promise.all(t.map(n=>n.continue().catch(It))))}},As=new WeakMap,Ln=new WeakMap,Dl=new WeakMap,Tv);function Cc(e){var t;return(t=e.options.scope)==null?void 0:t.id}function gx(e){return{onFetch:(t,n)=>{var f,h,m,g,b;const s=t.options,a=(m=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,o=((g=t.state.data)==null?void 0:g.pages)||[],i=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const w=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},v=$w(t.options,t.fetchOptions),p=async(y,S,j)=>{if(x)return Promise.reject();if(S==null&&y.pages.length)return Promise.resolve(y);const N=(()=>{const z={client:t.client,queryKey:t.queryKey,pageParam:S,direction:j?"backward":"forward",meta:t.options.meta};return w(z),z})(),C=await v(N),{maxPages:A}=t.options,T=j?DA:OA;return{pages:T(y.pages,C,A),pageParams:T(y.pageParams,S,A)}};if(a&&o.length){const y=a==="backward",S=y?VA:xx,j={pages:o,pageParams:i},E=S(s,j);l=await p(j,E,y)}else{const y=e??o.length;do{const S=c===0?i[0]??s.initialPageParam:xx(s,l);if(c>0&&S==null)break;l=await p(l,S),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>{var x,w;return(w=(x=t.options).persister)==null?void 0:w.call(x,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function xx(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function VA(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var rt,da,fa,Uo,$o,ha,Bo,Ho,Rv,YA=(Rv=class{constructor(e={}){we(this,rt);we(this,da);we(this,fa);we(this,Uo);we(this,$o);we(this,ha);we(this,Bo);we(this,Ho);ie(this,rt,e.queryCache||new HA),ie(this,da,e.mutationCache||new FA),ie(this,fa,e.defaultOptions||{}),ie(this,Uo,new Map),ie(this,$o,new Map),ie(this,ha,0)}mount(){lc(this,ha)._++,D(this,ha)===1&&(ie(this,Bo,Hp.subscribe(async e=>{e&&(await this.resumePausedMutations(),D(this,rt).onFocus())})),ie(this,Ho,Lu.subscribe(async e=>{e&&(await this.resumePausedMutations(),D(this,rt).onOnline())})))}unmount(){var e,t;lc(this,ha)._--,D(this,ha)===0&&((e=D(this,Bo))==null||e.call(this),ie(this,Bo,void 0),(t=D(this,Ho))==null||t.call(this),ie(this,Ho,void 0))}isFetching(e){return D(this,rt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return D(this,da).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=D(this,rt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=D(this,rt).build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Ta(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return D(this,rt).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),a=D(this,rt).get(s.queryHash),o=a==null?void 0:a.state.data,i=MA(t,o);if(i!==void 0)return D(this,rt).build(this,s).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return gt.batch(()=>D(this,rt).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=D(this,rt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=D(this,rt);gt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=D(this,rt);return gt.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=gt.batch(()=>D(this,rt).findAll(e).map(a=>a.cancel(n)));return Promise.all(s).then(It).catch(It)}invalidateQueries(e,t={}){return gt.batch(()=>(D(this,rt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=gt.batch(()=>D(this,rt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,n);return n.throwOnError||(o=o.catch(It)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(It)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=D(this,rt).build(this,t);return n.isStaleByTime(Ta(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(It).catch(It)}fetchInfiniteQuery(e){return e.behavior=gx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(It).catch(It)}ensureInfiniteQueryData(e){return e.behavior=gx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Lu.isOnline()?D(this,da).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,rt)}getMutationCache(){return D(this,da)}getDefaultOptions(){return D(this,fa)}setDefaultOptions(e){ie(this,fa,e)}setQueryDefaults(e,t){D(this,Uo).set(_r(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...D(this,Uo).values()],n={};return t.forEach(s=>{Cl(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){D(this,$o).set(_r(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...D(this,$o).values()],n={};return t.forEach(s=>{Cl(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...D(this,fa).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=$p(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Bp&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...D(this,fa).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){D(this,rt).clear(),D(this,da).clear()}},rt=new WeakMap,da=new WeakMap,fa=new WeakMap,Uo=new WeakMap,$o=new WeakMap,ha=new WeakMap,Bo=new WeakMap,Ho=new WeakMap,Rv),Yt,Le,Ll,Pt,mr,qo,ma,pa,zl,Fo,Vo,pr,gr,ga,Yo,Ve,Hi,tm,nm,sm,am,rm,om,im,Qw,Mv,GA=(Mv=class extends pi{constructor(t,n){super();we(this,Ve);we(this,Yt);we(this,Le);we(this,Ll);we(this,Pt);we(this,mr);we(this,qo);we(this,ma);we(this,pa);we(this,zl);we(this,Fo);we(this,Vo);we(this,pr);we(this,gr);we(this,ga);we(this,Yo,new Set);this.options=n,ie(this,Yt,t),ie(this,pa,null),ie(this,ma,em()),this.options.experimental_prefetchInRender||D(this,ma).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,Le).addObserver(this),vx(D(this,Le),this.options)?Ee(this,Ve,Hi).call(this):this.updateResult(),Ee(this,Ve,am).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return lm(D(this,Le),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return lm(D(this,Le),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ee(this,Ve,rm).call(this),Ee(this,Ve,om).call(this),D(this,Le).removeObserver(this)}setOptions(t){const n=this.options,s=D(this,Le);if(this.options=D(this,Yt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Un(this.options.enabled,D(this,Le))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ee(this,Ve,im).call(this),D(this,Le).setOptions(this.options),n._defaulted&&!Du(this.options,n)&&D(this,Yt).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,Le),observer:this});const a=this.hasListeners();a&&yx(D(this,Le),s,this.options,n)&&Ee(this,Ve,Hi).call(this),this.updateResult(),a&&(D(this,Le)!==s||Un(this.options.enabled,D(this,Le))!==Un(n.enabled,D(this,Le))||Ta(this.options.staleTime,D(this,Le))!==Ta(n.staleTime,D(this,Le)))&&Ee(this,Ve,tm).call(this);const o=Ee(this,Ve,nm).call(this);a&&(D(this,Le)!==s||Un(this.options.enabled,D(this,Le))!==Un(n.enabled,D(this,Le))||o!==D(this,ga))&&Ee(this,Ve,sm).call(this,o)}getOptimisticResult(t){const n=D(this,Yt).getQueryCache().build(D(this,Yt),t),s=this.createResult(n,t);return KA(this,s)&&(ie(this,Pt,s),ie(this,qo,this.options),ie(this,mr,D(this,Le).state)),s}getCurrentResult(){return D(this,Pt)}trackResult(t,n){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),n==null||n(a),Reflect.get(s,a))})}trackProp(t){D(this,Yo).add(t)}getCurrentQuery(){return D(this,Le)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=D(this,Yt).defaultQueryOptions(t),s=D(this,Yt).getQueryCache().build(D(this,Yt),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return Ee(this,Ve,Hi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,Pt)))}createResult(t,n){var A;const s=D(this,Le),a=this.options,o=D(this,Pt),i=D(this,mr),l=D(this,qo),d=t!==s?t.state:D(this,Ll),{state:f}=t;let h={...f},m=!1,g;if(n._optimisticResults){const T=this.hasListeners(),z=!T&&vx(t,n),M=T&&yx(t,s,n,a);(z||M)&&(h={...h,...Yw(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:b,errorUpdatedAt:x,status:w}=h;g=h.data;let v=!1;if(n.placeholderData!==void 0&&g===void 0&&w==="pending"){let T;o!=null&&o.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(T=o.data,v=!0):T=typeof n.placeholderData=="function"?n.placeholderData((A=D(this,Vo))==null?void 0:A.state.data,D(this,Vo)):n.placeholderData,T!==void 0&&(w="success",g=Jh(o==null?void 0:o.data,T,n),m=!0)}if(n.select&&g!==void 0&&!v)if(o&&g===(i==null?void 0:i.data)&&n.select===D(this,zl))g=D(this,Fo);else try{ie(this,zl,n.select),g=n.select(g),g=Jh(o==null?void 0:o.data,g,n),ie(this,Fo,g),ie(this,pa,null)}catch(T){ie(this,pa,T)}D(this,pa)&&(b=D(this,pa),g=D(this,Fo),x=Date.now(),w="error");const p=h.fetchStatus==="fetching",y=w==="pending",S=w==="error",j=y&&p,E=g!==void 0,C={status:w,fetchStatus:h.fetchStatus,isPending:y,isSuccess:w==="success",isError:S,isInitialLoading:j,isLoading:j,data:g,dataUpdatedAt:h.dataUpdatedAt,error:b,errorUpdatedAt:x,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:p,isRefetching:p&&!y,isLoadingError:S&&!E,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:S&&E,isStale:qp(t,n),refetch:this.refetch,promise:D(this,ma)};if(this.options.experimental_prefetchInRender){const T=$=>{C.status==="error"?$.reject(C.error):C.data!==void 0&&$.resolve(C.data)},z=()=>{const $=ie(this,ma,C.promise=em());T($)},M=D(this,ma);switch(M.status){case"pending":t.queryHash===s.queryHash&&T(M);break;case"fulfilled":(C.status==="error"||C.data!==M.value)&&z();break;case"rejected":(C.status!=="error"||C.error!==M.reason)&&z();break}}return C}updateResult(){const t=D(this,Pt),n=this.createResult(D(this,Le),this.options);if(ie(this,mr,D(this,Le).state),ie(this,qo,this.options),D(this,mr).data!==void 0&&ie(this,Vo,D(this,Le)),Du(n,t))return;ie(this,Pt,n);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!D(this,Yo).size)return!0;const i=new Set(o??D(this,Yo));return this.options.throwOnError&&i.add("error"),Object.keys(D(this,Pt)).some(l=>{const c=l;return D(this,Pt)[c]!==t[c]&&i.has(c)})};Ee(this,Ve,Qw).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ee(this,Ve,am).call(this)}},Yt=new WeakMap,Le=new WeakMap,Ll=new WeakMap,Pt=new WeakMap,mr=new WeakMap,qo=new WeakMap,ma=new WeakMap,pa=new WeakMap,zl=new WeakMap,Fo=new WeakMap,Vo=new WeakMap,pr=new WeakMap,gr=new WeakMap,ga=new WeakMap,Yo=new WeakMap,Ve=new WeakSet,Hi=function(t){Ee(this,Ve,im).call(this);let n=D(this,Le).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(It)),n},tm=function(){Ee(this,Ve,rm).call(this);const t=Ta(this.options.staleTime,D(this,Le));if(Mr||D(this,Pt).isStale||!Zh(t))return;const s=Iw(D(this,Pt).dataUpdatedAt,t)+1;ie(this,pr,setTimeout(()=>{D(this,Pt).isStale||this.updateResult()},s))},nm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,Le)):this.options.refetchInterval)??!1},sm=function(t){Ee(this,Ve,om).call(this),ie(this,ga,t),!(Mr||Un(this.options.enabled,D(this,Le))===!1||!Zh(D(this,ga))||D(this,ga)===0)&&ie(this,gr,setInterval(()=>{(this.options.refetchIntervalInBackground||Hp.isFocused())&&Ee(this,Ve,Hi).call(this)},D(this,ga)))},am=function(){Ee(this,Ve,tm).call(this),Ee(this,Ve,sm).call(this,Ee(this,Ve,nm).call(this))},rm=function(){D(this,pr)&&(clearTimeout(D(this,pr)),ie(this,pr,void 0))},om=function(){D(this,gr)&&(clearInterval(D(this,gr)),ie(this,gr,void 0))},im=function(){const t=D(this,Yt).getQueryCache().build(D(this,Yt),this.options);if(t===D(this,Le))return;const n=D(this,Le);ie(this,Le,t),ie(this,Ll,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Qw=function(t){gt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(D(this,Pt))}),D(this,Yt).getQueryCache().notify({query:D(this,Le),type:"observerResultsUpdated"})})},Mv);function QA(e,t){return Un(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function vx(e,t){return QA(e,t)||e.state.data!==void 0&&lm(e,t,t.refetchOnMount)}function lm(e,t,n){if(Un(t.enabled,e)!==!1&&Ta(t.staleTime,e)!=="static"){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&qp(e,t)}return!1}function yx(e,t,n,s){return(e!==t||Un(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&qp(e,n)}function qp(e,t){return Un(t.enabled,e)!==!1&&e.isStaleByTime(Ta(t.staleTime,e))}function KA(e,t){return!Du(e.getCurrentResult(),t)}var xa,va,Gt,Ts,Bs,Qc,cm,_v,XA=(_v=class extends pi{constructor(n,s){super();we(this,Bs);we(this,xa);we(this,va);we(this,Gt);we(this,Ts);ie(this,xa,n),this.setOptions(s),this.bindMethods(),Ee(this,Bs,Qc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const s=this.options;this.options=D(this,xa).defaultMutationOptions(n),Du(this.options,s)||D(this,xa).getMutationCache().notify({type:"observerOptionsUpdated",mutation:D(this,Gt),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&_r(s.mutationKey)!==_r(this.options.mutationKey)?this.reset():((a=D(this,Gt))==null?void 0:a.state.status)==="pending"&&D(this,Gt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=D(this,Gt))==null||n.removeObserver(this)}onMutationUpdate(n){Ee(this,Bs,Qc).call(this),Ee(this,Bs,cm).call(this,n)}getCurrentResult(){return D(this,va)}reset(){var n;(n=D(this,Gt))==null||n.removeObserver(this),ie(this,Gt,void 0),Ee(this,Bs,Qc).call(this),Ee(this,Bs,cm).call(this)}mutate(n,s){var a;return ie(this,Ts,s),(a=D(this,Gt))==null||a.removeObserver(this),ie(this,Gt,D(this,xa).getMutationCache().build(D(this,xa),this.options)),D(this,Gt).addObserver(this),D(this,Gt).execute(n)}},xa=new WeakMap,va=new WeakMap,Gt=new WeakMap,Ts=new WeakMap,Bs=new WeakSet,Qc=function(){var s;const n=((s=D(this,Gt))==null?void 0:s.state)??Gw();ie(this,va,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},cm=function(n){gt.batch(()=>{var s,a,o,i,l,c,d,f;if(D(this,Ts)&&this.hasListeners()){const h=D(this,va).variables,m=D(this,va).context;(n==null?void 0:n.type)==="success"?((a=(s=D(this,Ts)).onSuccess)==null||a.call(s,n.data,h,m),(i=(o=D(this,Ts)).onSettled)==null||i.call(o,n.data,null,h,m)):(n==null?void 0:n.type)==="error"&&((c=(l=D(this,Ts)).onError)==null||c.call(l,n.error,h,m),(f=(d=D(this,Ts)).onSettled)==null||f.call(d,void 0,n.error,h,m))}this.listeners.forEach(h=>{h(D(this,va))})})},_v),Kw=u.createContext(void 0),Fa=e=>{const t=u.useContext(Kw);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ZA=({client:e,children:t})=>(u.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(Kw.Provider,{value:e,children:t})),Xw=u.createContext(!1),WA=()=>u.useContext(Xw);Xw.Provider;function JA(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var eT=u.createContext(JA()),tT=()=>u.useContext(eT),nT=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},sT=e=>{u.useEffect(()=>{e.clearReset()},[e])},aT=({result:e,errorResetBoundary:t,throwOnError:n,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||Bw(n,[e.error,s])),rT=e=>{if(e.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...s)=>t(n(...s)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},oT=(e,t)=>e.isLoading&&e.isFetching&&!t,iT=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,bx=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function lT(e,t,n){var h,m,g,b,x;const s=WA(),a=tT(),o=Fa(),i=o.defaultQueryOptions(e);(m=(h=o.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,i),i._optimisticResults=s?"isRestoring":"optimistic",rT(i),nT(i,a),sT(a);const l=!o.getQueryCache().get(i.queryHash),[c]=u.useState(()=>new t(o,i)),d=c.getOptimisticResult(i),f=!s&&e.subscribed!==!1;if(u.useSyncExternalStore(u.useCallback(w=>{const v=f?c.subscribe(gt.batchCalls(w)):It;return c.updateResult(),v},[c,f]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),u.useEffect(()=>{c.setOptions(i)},[i,c]),iT(i,d))throw bx(i,c,a);if(aT({result:d,errorResetBoundary:a,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;if((b=(g=o.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||b.call(g,i,d),i.experimental_prefetchInRender&&!Mr&&oT(d,s)){const w=l?bx(i,c,a):(x=o.getQueryCache().get(i.queryHash))==null?void 0:x.promise;w==null||w.catch(It).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function Cn(e,t){return lT(e,GA)}function Xl(e,t){const n=Fa(),[s]=u.useState(()=>new XA(n,e));u.useEffect(()=>{s.setOptions(e)},[s,e]);const a=u.useSyncExternalStore(u.useCallback(i=>s.subscribe(gt.batchCalls(i)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=u.useCallback((i,l)=>{s.mutate(i,l).catch(It)},[s]);if(a.error&&Bw(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}async function Zw(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function is(e,t){const{method:n="GET",body:s}=t||{},a={};let o;s instanceof FormData?o=s:s&&(a["Content-Type"]="application/json",o=JSON.stringify(s));const i=await fetch(e,{method:n,headers:a,body:o,credentials:"include"});return await Zw(i),await i.json()}const cT=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});return await Zw(n),await n.json()},wo=new YA({defaultOptions:{queries:{queryFn:cT({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});function uT(){return null}function ae(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function wx(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function pd(...e){return t=>{let n=!1;const s=e.map(a=>{const o=wx(a,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():wx(e[a],null)}}}}function je(...e){return u.useCallback(pd(...e),e)}function dT(e,t){const n=u.createContext(t),s=o=>{const{children:i,...l}=o,c=u.useMemo(()=>l,Object.values(l));return r.jsx(n.Provider,{value:c,children:i})};s.displayName=e+"Provider";function a(o){const i=u.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function fn(e,t=[]){let n=[];function s(o,i){const l=u.createContext(i),c=n.length;n=[...n,i];const d=h=>{var v;const{scope:m,children:g,...b}=h,x=((v=m==null?void 0:m[e])==null?void 0:v[c])||l,w=u.useMemo(()=>b,Object.values(b));return r.jsx(x.Provider,{value:w,children:g})};d.displayName=o+"Provider";function f(h,m){var x;const g=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,b=u.useContext(g);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,f]}const a=()=>{const o=n.map(i=>u.createContext(i));return function(l){const c=(l==null?void 0:l[e])||o;return u.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,fT(a,...t)]}function fT(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function za(e){const t=mT(e),n=u.forwardRef((s,a)=>{const{children:o,...i}=s,l=u.Children.toArray(o),c=l.find(gT);if(c){const d=c.props.children,f=l.map(h=>h===c?u.Children.count(d)>1?u.Children.only(null):u.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...i,ref:a,children:u.isValidElement(d)?u.cloneElement(d,void 0,f):null})}return r.jsx(t,{...i,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}var hT=za("Slot");function mT(e){const t=u.forwardRef((n,s)=>{const{children:a,...o}=n;if(u.isValidElement(a)){const i=vT(a),l=xT(o,a.props);return a.type!==u.Fragment&&(l.ref=s?pd(s,i):i),u.cloneElement(a,l)}return u.Children.count(a)>1?u.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ww=Symbol("radix.slottable");function pT(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Ww,t}function gT(e){return u.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ww}function xT(e,t){const n={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?n[s]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(n[s]=a):s==="style"?n[s]={...a,...o}:s==="className"&&(n[s]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function vT(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var yT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=yT.reduce((e,t)=>{const n=za(`Primitive.${t}`),s=u.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:o})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function Jw(e,t){e&&li.flushSync(()=>e.dispatchEvent(t))}function Ct(e){const t=u.useRef(e);return u.useEffect(()=>{t.current=e}),u.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function bT(e,t=globalThis==null?void 0:globalThis.document){const n=Ct(e);u.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var wT="DismissableLayer",um="dismissableLayer.update",ST="dismissableLayer.pointerDownOutside",NT="dismissableLayer.focusOutside",Sx,e1=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gi=u.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,d=u.useContext(e1),[f,h]=u.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=u.useState({}),b=je(t,N=>h(N)),x=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=x.indexOf(w),p=f?x.indexOf(f):-1,y=d.layersWithOutsidePointerEventsDisabled.size>0,S=p>=v,j=ET(N=>{const C=N.target,A=[...d.branches].some(T=>T.contains(C));!S||A||(a==null||a(N),i==null||i(N),N.defaultPrevented||l==null||l())},m),E=kT(N=>{const C=N.target;[...d.branches].some(T=>T.contains(C))||(o==null||o(N),i==null||i(N),N.defaultPrevented||l==null||l())},m);return bT(N=>{p===d.layers.size-1&&(s==null||s(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},m),u.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Sx=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),Nx(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Sx)}},[f,m,n,d]),u.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Nx())},[f,d]),u.useEffect(()=>{const N=()=>g({});return document.addEventListener(um,N),()=>document.removeEventListener(um,N)},[]),r.jsx(xe.div,{...c,ref:b,style:{pointerEvents:y?S?"auto":"none":void 0,...e.style},onFocusCapture:ae(e.onFocusCapture,E.onFocusCapture),onBlurCapture:ae(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ae(e.onPointerDownCapture,j.onPointerDownCapture)})});gi.displayName=wT;var jT="DismissableLayerBranch",CT=u.forwardRef((e,t)=>{const n=u.useContext(e1),s=u.useRef(null),a=je(t,s);return u.useEffect(()=>{const o=s.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),r.jsx(xe.div,{...e,ref:a})});CT.displayName=jT;function ET(e,t=globalThis==null?void 0:globalThis.document){const n=Ct(e),s=u.useRef(!1),a=u.useRef(()=>{});return u.useEffect(()=>{const o=l=>{if(l.target&&!s.current){let c=function(){t1(ST,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function kT(e,t=globalThis==null?void 0:globalThis.document){const n=Ct(e),s=u.useRef(!1);return u.useEffect(()=>{const a=o=>{o.target&&!s.current&&t1(NT,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Nx(){const e=new CustomEvent(um);document.dispatchEvent(e)}function t1(e,t,n,{discrete:s}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?Jw(a,o):a.dispatchEvent(o)}var kt=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},AT=Vm[" useId ".trim().toString()]||(()=>{}),TT=0;function qn(e){const[t,n]=u.useState(AT());return kt(()=>{n(s=>s??String(TT++))},[e]),t?`radix-${t}`:""}const RT=["top","right","bottom","left"],Pa=Math.min,tn=Math.max,zu=Math.round,Ec=Math.floor,ls=e=>({x:e,y:e}),MT={left:"right",right:"left",bottom:"top",top:"bottom"},_T={start:"end",end:"start"};function dm(e,t,n){return tn(e,Pa(t,n))}function Ys(e,t){return typeof e=="function"?e(t):e}function Gs(e){return e.split("-")[0]}function xi(e){return e.split("-")[1]}function Fp(e){return e==="x"?"y":"x"}function Vp(e){return e==="y"?"height":"width"}const OT=new Set(["top","bottom"]);function ss(e){return OT.has(Gs(e))?"y":"x"}function Yp(e){return Fp(ss(e))}function DT(e,t,n){n===void 0&&(n=!1);const s=xi(e),a=Yp(e),o=Vp(a);let i=a==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=Pu(i)),[i,Pu(i)]}function LT(e){const t=Pu(e);return[fm(e),t,fm(t)]}function fm(e){return e.replace(/start|end/g,t=>_T[t])}const jx=["left","right"],Cx=["right","left"],zT=["top","bottom"],PT=["bottom","top"];function IT(e,t,n){switch(e){case"top":case"bottom":return n?t?Cx:jx:t?jx:Cx;case"left":case"right":return t?zT:PT;default:return[]}}function UT(e,t,n,s){const a=xi(e);let o=IT(Gs(e),n==="start",s);return a&&(o=o.map(i=>i+"-"+a),t&&(o=o.concat(o.map(fm)))),o}function Pu(e){return e.replace(/left|right|bottom|top/g,t=>MT[t])}function $T(e){return{top:0,right:0,bottom:0,left:0,...e}}function n1(e){return typeof e!="number"?$T(e):{top:e,right:e,bottom:e,left:e}}function Iu(e){const{x:t,y:n,width:s,height:a}=e;return{width:s,height:a,top:n,left:t,right:t+s,bottom:n+a,x:t,y:n}}function Ex(e,t,n){let{reference:s,floating:a}=e;const o=ss(t),i=Yp(t),l=Vp(i),c=Gs(t),d=o==="y",f=s.x+s.width/2-a.width/2,h=s.y+s.height/2-a.height/2,m=s[l]/2-a[l]/2;let g;switch(c){case"top":g={x:f,y:s.y-a.height};break;case"bottom":g={x:f,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:h};break;case"left":g={x:s.x-a.width,y:h};break;default:g={x:s.x,y:s.y}}switch(xi(t)){case"start":g[i]-=m*(n&&d?-1:1);break;case"end":g[i]+=m*(n&&d?-1:1);break}return g}const BT=async(e,t,n)=>{const{placement:s="bottom",strategy:a="absolute",middleware:o=[],platform:i}=n,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:h}=Ex(d,s,c),m=s,g={},b=0;for(let x=0;x<l.length;x++){const{name:w,fn:v}=l[x],{x:p,y,data:S,reset:j}=await v({x:f,y:h,initialPlacement:s,placement:m,strategy:a,middlewareData:g,rects:d,platform:i,elements:{reference:e,floating:t}});f=p??f,h=y??h,g={...g,[w]:{...g[w],...S}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(d=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:f,y:h}=Ex(d,m,c)),x=-1)}return{x:f,y:h,placement:m,strategy:a,middlewareData:g}};async function El(e,t){var n;t===void 0&&(t={});const{x:s,y:a,platform:o,rects:i,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Ys(t,e),b=n1(g),w=l[m?h==="floating"?"reference":"floating":h],v=Iu(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(w)))==null||n?w:w.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:c})),p=h==="floating"?{x:s,y:a,width:i.floating.width,height:i.floating.height}:i.reference,y=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),S=await(o.isElement==null?void 0:o.isElement(y))?await(o.getScale==null?void 0:o.getScale(y))||{x:1,y:1}:{x:1,y:1},j=Iu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:p,offsetParent:y,strategy:c}):p);return{top:(v.top-j.top+b.top)/S.y,bottom:(j.bottom-v.bottom+b.bottom)/S.y,left:(v.left-j.left+b.left)/S.x,right:(j.right-v.right+b.right)/S.x}}const HT=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:a,rects:o,platform:i,elements:l,middlewareData:c}=t,{element:d,padding:f=0}=Ys(e,t)||{};if(d==null)return{};const h=n1(f),m={x:n,y:s},g=Yp(a),b=Vp(g),x=await i.getDimensions(d),w=g==="y",v=w?"top":"left",p=w?"bottom":"right",y=w?"clientHeight":"clientWidth",S=o.reference[b]+o.reference[g]-m[g]-o.floating[b],j=m[g]-o.reference[g],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let N=E?E[y]:0;(!N||!await(i.isElement==null?void 0:i.isElement(E)))&&(N=l.floating[y]||o.floating[b]);const C=S/2-j/2,A=N/2-x[b]/2-1,T=Pa(h[v],A),z=Pa(h[p],A),M=T,$=N-x[b]-z,X=N/2-x[b]/2+C,k=dm(M,X,$),R=!c.arrow&&xi(a)!=null&&X!==k&&o.reference[b]/2-(X<M?T:z)-x[b]/2<0,B=R?X<M?X-M:X-$:0;return{[g]:m[g]+B,data:{[g]:k,centerOffset:X-k-B,...R&&{alignmentOffset:B}},reset:R}}}),qT=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:a,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...w}=Ys(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=Gs(a),p=ss(l),y=Gs(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(d.floating)),j=m||(y||!x?[Pu(l)]:LT(l)),E=b!=="none";!m&&E&&j.push(...UT(l,x,b,S));const N=[l,...j],C=await El(t,w),A=[];let T=((s=o.flip)==null?void 0:s.overflows)||[];if(f&&A.push(C[v]),h){const X=DT(a,i,S);A.push(C[X[0]],C[X[1]])}if(T=[...T,{placement:a,overflows:A}],!A.every(X=>X<=0)){var z,M;const X=(((z=o.flip)==null?void 0:z.index)||0)+1,k=N[X];if(k&&(!(h==="alignment"?p!==ss(k):!1)||T.every(O=>O.overflows[0]>0&&ss(O.placement)===p)))return{data:{index:X,overflows:T},reset:{placement:k}};let R=(M=T.filter(B=>B.overflows[0]<=0).sort((B,O)=>B.overflows[1]-O.overflows[1])[0])==null?void 0:M.placement;if(!R)switch(g){case"bestFit":{var $;const B=($=T.filter(O=>{if(E){const U=ss(O.placement);return U===p||U==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(U=>U>0).reduce((U,L)=>U+L,0)]).sort((O,U)=>O[1]-U[1])[0])==null?void 0:$[0];B&&(R=B);break}case"initialPlacement":R=l;break}if(a!==R)return{reset:{placement:R}}}return{}}}};function kx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ax(e){return RT.some(t=>e[t]>=0)}const FT=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...a}=Ys(e,t);switch(s){case"referenceHidden":{const o=await El(t,{...a,elementContext:"reference"}),i=kx(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Ax(i)}}}case"escaped":{const o=await El(t,{...a,altBoundary:!0}),i=kx(o,n.floating);return{data:{escapedOffsets:i,escaped:Ax(i)}}}default:return{}}}}},s1=new Set(["left","top"]);async function VT(e,t){const{placement:n,platform:s,elements:a}=e,o=await(s.isRTL==null?void 0:s.isRTL(a.floating)),i=Gs(n),l=xi(n),c=ss(n)==="y",d=s1.has(i)?-1:1,f=o&&c?-1:1,h=Ys(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof b=="number"&&(g=l==="end"?b*-1:b),c?{x:g*f,y:m*d}:{x:m*d,y:g*f}}const YT=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:a,y:o,placement:i,middlewareData:l}=t,c=await VT(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:i}}}}},GT=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:a}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x:v,y:p}=w;return{x:v,y:p}}},...c}=Ys(e,t),d={x:n,y:s},f=await El(t,c),h=ss(Gs(a)),m=Fp(h);let g=d[m],b=d[h];if(o){const w=m==="y"?"top":"left",v=m==="y"?"bottom":"right",p=g+f[w],y=g-f[v];g=dm(p,g,y)}if(i){const w=h==="y"?"top":"left",v=h==="y"?"bottom":"right",p=b+f[w],y=b-f[v];b=dm(p,b,y)}const x=l.fn({...t,[m]:g,[h]:b});return{...x,data:{x:x.x-n,y:x.y-s,enabled:{[m]:o,[h]:i}}}}}},QT=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:a,rects:o,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Ys(e,t),f={x:n,y:s},h=ss(a),m=Fp(h);let g=f[m],b=f[h];const x=Ys(l,t),w=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const y=m==="y"?"height":"width",S=o.reference[m]-o.floating[y]+w.mainAxis,j=o.reference[m]+o.reference[y]-w.mainAxis;g<S?g=S:g>j&&(g=j)}if(d){var v,p;const y=m==="y"?"width":"height",S=s1.has(Gs(a)),j=o.reference[h]-o.floating[y]+(S&&((v=i.offset)==null?void 0:v[h])||0)+(S?0:w.crossAxis),E=o.reference[h]+o.reference[y]+(S?0:((p=i.offset)==null?void 0:p[h])||0)-(S?w.crossAxis:0);b<j?b=j:b>E&&(b=E)}return{[m]:g,[h]:b}}}},KT=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:a,rects:o,platform:i,elements:l}=t,{apply:c=()=>{},...d}=Ys(e,t),f=await El(t,d),h=Gs(a),m=xi(a),g=ss(a)==="y",{width:b,height:x}=o.floating;let w,v;h==="top"||h==="bottom"?(w=h,v=m===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(v=h,w=m==="end"?"top":"bottom");const p=x-f.top-f.bottom,y=b-f.left-f.right,S=Pa(x-f[w],p),j=Pa(b-f[v],y),E=!t.middlewareData.shift;let N=S,C=j;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=y),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(N=p),E&&!m){const T=tn(f.left,0),z=tn(f.right,0),M=tn(f.top,0),$=tn(f.bottom,0);g?C=b-2*(T!==0||z!==0?T+z:tn(f.left,f.right)):N=x-2*(M!==0||$!==0?M+$:tn(f.top,f.bottom))}await c({...t,availableWidth:C,availableHeight:N});const A=await i.getDimensions(l.floating);return b!==A.width||x!==A.height?{reset:{rects:!0}}:{}}}};function gd(){return typeof window<"u"}function vi(e){return a1(e)?(e.nodeName||"").toLowerCase():"#document"}function ln(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gs(e){var t;return(t=(a1(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function a1(e){return gd()?e instanceof Node||e instanceof ln(e).Node:!1}function Vn(e){return gd()?e instanceof Element||e instanceof ln(e).Element:!1}function ds(e){return gd()?e instanceof HTMLElement||e instanceof ln(e).HTMLElement:!1}function Tx(e){return!gd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ln(e).ShadowRoot}const XT=new Set(["inline","contents"]);function Zl(e){const{overflow:t,overflowX:n,overflowY:s,display:a}=Yn(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!XT.has(a)}const ZT=new Set(["table","td","th"]);function WT(e){return ZT.has(vi(e))}const JT=[":popover-open",":modal"];function xd(e){return JT.some(t=>{try{return e.matches(t)}catch{return!1}})}const eR=["transform","translate","scale","rotate","perspective"],tR=["transform","translate","scale","rotate","perspective","filter"],nR=["paint","layout","strict","content"];function Gp(e){const t=Qp(),n=Vn(e)?Yn(e):e;return eR.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||tR.some(s=>(n.willChange||"").includes(s))||nR.some(s=>(n.contain||"").includes(s))}function sR(e){let t=Ia(e);for(;ds(t)&&!si(t);){if(Gp(t))return t;if(xd(t))return null;t=Ia(t)}return null}function Qp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const aR=new Set(["html","body","#document"]);function si(e){return aR.has(vi(e))}function Yn(e){return ln(e).getComputedStyle(e)}function vd(e){return Vn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ia(e){if(vi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Tx(e)&&e.host||gs(e);return Tx(t)?t.host:t}function r1(e){const t=Ia(e);return si(t)?e.ownerDocument?e.ownerDocument.body:e.body:ds(t)&&Zl(t)?t:r1(t)}function kl(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=r1(e),o=a===((s=e.ownerDocument)==null?void 0:s.body),i=ln(a);if(o){const l=hm(i);return t.concat(i,i.visualViewport||[],Zl(a)?a:[],l&&n?kl(l):[])}return t.concat(a,kl(a,[],n))}function hm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function o1(e){const t=Yn(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=ds(e),o=a?e.offsetWidth:n,i=a?e.offsetHeight:s,l=zu(n)!==o||zu(s)!==i;return l&&(n=o,s=i),{width:n,height:s,$:l}}function Kp(e){return Vn(e)?e:e.contextElement}function Ro(e){const t=Kp(e);if(!ds(t))return ls(1);const n=t.getBoundingClientRect(),{width:s,height:a,$:o}=o1(t);let i=(o?zu(n.width):n.width)/s,l=(o?zu(n.height):n.height)/a;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const rR=ls(0);function i1(e){const t=ln(e);return!Qp()||!t.visualViewport?rR:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function oR(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ln(e)?!1:t}function Or(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),o=Kp(e);let i=ls(1);t&&(s?Vn(s)&&(i=Ro(s)):i=Ro(e));const l=oR(o,n,s)?i1(o):ls(0);let c=(a.left+l.x)/i.x,d=(a.top+l.y)/i.y,f=a.width/i.x,h=a.height/i.y;if(o){const m=ln(o),g=s&&Vn(s)?ln(s):s;let b=m,x=hm(b);for(;x&&s&&g!==b;){const w=Ro(x),v=x.getBoundingClientRect(),p=Yn(x),y=v.left+(x.clientLeft+parseFloat(p.paddingLeft))*w.x,S=v.top+(x.clientTop+parseFloat(p.paddingTop))*w.y;c*=w.x,d*=w.y,f*=w.x,h*=w.y,c+=y,d+=S,b=ln(x),x=hm(b)}}return Iu({width:f,height:h,x:c,y:d})}function Xp(e,t){const n=vd(e).scrollLeft;return t?t.left+n:Or(gs(e)).left+n}function l1(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(n?0:Xp(e,s)),o=s.top+t.scrollTop;return{x:a,y:o}}function iR(e){let{elements:t,rect:n,offsetParent:s,strategy:a}=e;const o=a==="fixed",i=gs(s),l=t?xd(t.floating):!1;if(s===i||l&&o)return n;let c={scrollLeft:0,scrollTop:0},d=ls(1);const f=ls(0),h=ds(s);if((h||!h&&!o)&&((vi(s)!=="body"||Zl(i))&&(c=vd(s)),ds(s))){const g=Or(s);d=Ro(s),f.x=g.x+s.clientLeft,f.y=g.y+s.clientTop}const m=i&&!h&&!o?l1(i,c,!0):ls(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+f.x+m.x,y:n.y*d.y-c.scrollTop*d.y+f.y+m.y}}function lR(e){return Array.from(e.getClientRects())}function cR(e){const t=gs(e),n=vd(e),s=e.ownerDocument.body,a=tn(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),o=tn(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let i=-n.scrollLeft+Xp(e);const l=-n.scrollTop;return Yn(s).direction==="rtl"&&(i+=tn(t.clientWidth,s.clientWidth)-a),{width:a,height:o,x:i,y:l}}function uR(e,t){const n=ln(e),s=gs(e),a=n.visualViewport;let o=s.clientWidth,i=s.clientHeight,l=0,c=0;if(a){o=a.width,i=a.height;const d=Qp();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:o,height:i,x:l,y:c}}const dR=new Set(["absolute","fixed"]);function fR(e,t){const n=Or(e,!0,t==="fixed"),s=n.top+e.clientTop,a=n.left+e.clientLeft,o=ds(e)?Ro(e):ls(1),i=e.clientWidth*o.x,l=e.clientHeight*o.y,c=a*o.x,d=s*o.y;return{width:i,height:l,x:c,y:d}}function Rx(e,t,n){let s;if(t==="viewport")s=uR(e,n);else if(t==="document")s=cR(gs(e));else if(Vn(t))s=fR(t,n);else{const a=i1(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Iu(s)}function c1(e,t){const n=Ia(e);return n===t||!Vn(n)||si(n)?!1:Yn(n).position==="fixed"||c1(n,t)}function hR(e,t){const n=t.get(e);if(n)return n;let s=kl(e,[],!1).filter(l=>Vn(l)&&vi(l)!=="body"),a=null;const o=Yn(e).position==="fixed";let i=o?Ia(e):e;for(;Vn(i)&&!si(i);){const l=Yn(i),c=Gp(i);!c&&l.position==="fixed"&&(a=null),(o?!c&&!a:!c&&l.position==="static"&&!!a&&dR.has(a.position)||Zl(i)&&!c&&c1(e,i))?s=s.filter(f=>f!==i):a=l,i=Ia(i)}return t.set(e,s),s}function mR(e){let{element:t,boundary:n,rootBoundary:s,strategy:a}=e;const i=[...n==="clippingAncestors"?xd(t)?[]:hR(t,this._c):[].concat(n),s],l=i[0],c=i.reduce((d,f)=>{const h=Rx(t,f,a);return d.top=tn(h.top,d.top),d.right=Pa(h.right,d.right),d.bottom=Pa(h.bottom,d.bottom),d.left=tn(h.left,d.left),d},Rx(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function pR(e){const{width:t,height:n}=o1(e);return{width:t,height:n}}function gR(e,t,n){const s=ds(t),a=gs(t),o=n==="fixed",i=Or(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=ls(0);function d(){c.x=Xp(a)}if(s||!s&&!o)if((vi(t)!=="body"||Zl(a))&&(l=vd(t)),s){const g=Or(t,!0,o,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else a&&d();o&&!s&&a&&d();const f=a&&!s&&!o?l1(a,l):ls(0),h=i.left+l.scrollLeft-c.x-f.x,m=i.top+l.scrollTop-c.y-f.y;return{x:h,y:m,width:i.width,height:i.height}}function Lf(e){return Yn(e).position==="static"}function Mx(e,t){if(!ds(e)||Yn(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return gs(e)===n&&(n=n.ownerDocument.body),n}function u1(e,t){const n=ln(e);if(xd(e))return n;if(!ds(e)){let a=Ia(e);for(;a&&!si(a);){if(Vn(a)&&!Lf(a))return a;a=Ia(a)}return n}let s=Mx(e,t);for(;s&&WT(s)&&Lf(s);)s=Mx(s,t);return s&&si(s)&&Lf(s)&&!Gp(s)?n:s||sR(e)||n}const xR=async function(e){const t=this.getOffsetParent||u1,n=this.getDimensions,s=await n(e.floating);return{reference:gR(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function vR(e){return Yn(e).direction==="rtl"}const yR={convertOffsetParentRelativeRectToViewportRelativeRect:iR,getDocumentElement:gs,getClippingRect:mR,getOffsetParent:u1,getElementRects:xR,getClientRects:lR,getDimensions:pR,getScale:Ro,isElement:Vn,isRTL:vR};function d1(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function bR(e,t){let n=null,s;const a=gs(e);function o(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const d=e.getBoundingClientRect(),{left:f,top:h,width:m,height:g}=d;if(l||t(),!m||!g)return;const b=Ec(h),x=Ec(a.clientWidth-(f+m)),w=Ec(a.clientHeight-(h+g)),v=Ec(f),y={rootMargin:-b+"px "+-x+"px "+-w+"px "+-v+"px",threshold:tn(0,Pa(1,c))||1};let S=!0;function j(E){const N=E[0].intersectionRatio;if(N!==c){if(!S)return i();N?i(!1,N):s=setTimeout(()=>{i(!1,1e-7)},1e3)}N===1&&!d1(d,e.getBoundingClientRect())&&i(),S=!1}try{n=new IntersectionObserver(j,{...y,root:a.ownerDocument})}catch{n=new IntersectionObserver(j,y)}n.observe(e)}return i(!0),o}function wR(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=Kp(e),f=a||o?[...d?kl(d):[],...kl(t)]:[];f.forEach(v=>{a&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const h=d&&l?bR(d,n):null;let m=-1,g=null;i&&(g=new ResizeObserver(v=>{let[p]=v;p&&p.target===d&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var y;(y=g)==null||y.observe(t)})),n()}),d&&!c&&g.observe(d),g.observe(t));let b,x=c?Or(e):null;c&&w();function w(){const v=Or(e);x&&!d1(x,v)&&n(),x=v,b=requestAnimationFrame(w)}return n(),()=>{var v;f.forEach(p=>{a&&p.removeEventListener("scroll",n),o&&p.removeEventListener("resize",n)}),h==null||h(),(v=g)==null||v.disconnect(),g=null,c&&cancelAnimationFrame(b)}}const SR=YT,NR=GT,jR=qT,CR=KT,ER=FT,_x=HT,kR=QT,AR=(e,t,n)=>{const s=new Map,a={platform:yR,...n},o={...a.platform,_c:s};return BT(e,t,{...a,platform:o})};var TR=typeof document<"u",RR=function(){},Kc=TR?u.useLayoutEffect:RR;function Uu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Uu(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=n;s--!==0;){const o=a[s];if(!(o==="_owner"&&e.$$typeof)&&!Uu(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function f1(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ox(e,t){const n=f1(e);return Math.round(t*n)/n}function zf(e){const t=u.useRef(e);return Kc(()=>{t.current=e}),t}function MR(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:a,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[f,h]=u.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=u.useState(s);Uu(m,s)||g(s);const[b,x]=u.useState(null),[w,v]=u.useState(null),p=u.useCallback(O=>{O!==E.current&&(E.current=O,x(O))},[]),y=u.useCallback(O=>{O!==N.current&&(N.current=O,v(O))},[]),S=o||b,j=i||w,E=u.useRef(null),N=u.useRef(null),C=u.useRef(f),A=c!=null,T=zf(c),z=zf(a),M=zf(d),$=u.useCallback(()=>{if(!E.current||!N.current)return;const O={placement:t,strategy:n,middleware:m};z.current&&(O.platform=z.current),AR(E.current,N.current,O).then(U=>{const L={...U,isPositioned:M.current!==!1};X.current&&!Uu(C.current,L)&&(C.current=L,li.flushSync(()=>{h(L)}))})},[m,t,n,z,M]);Kc(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,h(O=>({...O,isPositioned:!1})))},[d]);const X=u.useRef(!1);Kc(()=>(X.current=!0,()=>{X.current=!1}),[]),Kc(()=>{if(S&&(E.current=S),j&&(N.current=j),S&&j){if(T.current)return T.current(S,j,$);$()}},[S,j,$,T,A]);const k=u.useMemo(()=>({reference:E,floating:N,setReference:p,setFloating:y}),[p,y]),R=u.useMemo(()=>({reference:S,floating:j}),[S,j]),B=u.useMemo(()=>{const O={position:n,left:0,top:0};if(!R.floating)return O;const U=Ox(R.floating,f.x),L=Ox(R.floating,f.y);return l?{...O,transform:"translate("+U+"px, "+L+"px)",...f1(R.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:L}},[n,l,R.floating,f.x,f.y]);return u.useMemo(()=>({...f,update:$,refs:k,elements:R,floatingStyles:B}),[f,$,k,R,B])}const _R=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:a}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?_x({element:s.current,padding:a}).fn(n):{}:s?_x({element:s,padding:a}).fn(n):{}}}},OR=(e,t)=>({...SR(e),options:[e,t]}),DR=(e,t)=>({...NR(e),options:[e,t]}),LR=(e,t)=>({...kR(e),options:[e,t]}),zR=(e,t)=>({...jR(e),options:[e,t]}),PR=(e,t)=>({...CR(e),options:[e,t]}),IR=(e,t)=>({...ER(e),options:[e,t]}),UR=(e,t)=>({..._R(e),options:[e,t]});var $R="Arrow",h1=u.forwardRef((e,t)=>{const{children:n,width:s=10,height:a=5,...o}=e;return r.jsx(xe.svg,{...o,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});h1.displayName=$R;var BR=h1;function m1(e){const[t,n]=u.useState(void 0);return kt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var Zp="Popper",[p1,Va]=fn(Zp),[HR,g1]=p1(Zp),x1=e=>{const{__scopePopper:t,children:n}=e,[s,a]=u.useState(null);return r.jsx(HR,{scope:t,anchor:s,onAnchorChange:a,children:n})};x1.displayName=Zp;var v1="PopperAnchor",y1=u.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...a}=e,o=g1(v1,n),i=u.useRef(null),l=je(t,i);return u.useEffect(()=>{o.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:r.jsx(xe.div,{...a,ref:l})});y1.displayName=v1;var Wp="PopperContent",[qR,FR]=p1(Wp),b1=u.forwardRef((e,t)=>{var I,W,G,F,ne,ee;const{__scopePopper:n,side:s="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:b,...x}=e,w=g1(Wp,n),[v,p]=u.useState(null),y=je(t,le=>p(le)),[S,j]=u.useState(null),E=m1(S),N=(E==null?void 0:E.width)??0,C=(E==null?void 0:E.height)??0,A=s+(o!=="center"?"-"+o:""),T=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},z=Array.isArray(d)?d:[d],M=z.length>0,$={padding:T,boundary:z.filter(YR),altBoundary:M},{refs:X,floatingStyles:k,placement:R,isPositioned:B,middlewareData:O}=MR({strategy:"fixed",placement:A,whileElementsMounted:(...le)=>wR(...le,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[OR({mainAxis:a+C,alignmentAxis:i}),c&&DR({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?LR():void 0,...$}),c&&zR({...$}),PR({...$,apply:({elements:le,rects:Re,availableWidth:ce,availableHeight:Se})=>{const{width:De,height:qe}=Re.reference,$e=le.floating.style;$e.setProperty("--radix-popper-available-width",`${ce}px`),$e.setProperty("--radix-popper-available-height",`${Se}px`),$e.setProperty("--radix-popper-anchor-width",`${De}px`),$e.setProperty("--radix-popper-anchor-height",`${qe}px`)}}),S&&UR({element:S,padding:l}),GR({arrowWidth:N,arrowHeight:C}),m&&IR({strategy:"referenceHidden",...$})]}),[U,L]=N1(R),P=Ct(b);kt(()=>{B&&(P==null||P())},[B,P]);const H=(I=O.arrow)==null?void 0:I.x,Q=(W=O.arrow)==null?void 0:W.y,_=((G=O.arrow)==null?void 0:G.centerOffset)!==0,[se,te]=u.useState();return kt(()=>{v&&te(window.getComputedStyle(v).zIndex)},[v]),r.jsx("div",{ref:X.setFloating,"data-radix-popper-content-wrapper":"",style:{...k,transform:B?k.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(F=O.transformOrigin)==null?void 0:F.x,(ne=O.transformOrigin)==null?void 0:ne.y].join(" "),...((ee=O.hide)==null?void 0:ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(qR,{scope:n,placedSide:U,onArrowChange:j,arrowX:H,arrowY:Q,shouldHideArrow:_,children:r.jsx(xe.div,{"data-side":U,"data-align":L,...x,ref:y,style:{...x.style,animation:B?void 0:"none"}})})})});b1.displayName=Wp;var w1="PopperArrow",VR={top:"bottom",right:"left",bottom:"top",left:"right"},S1=u.forwardRef(function(t,n){const{__scopePopper:s,...a}=t,o=FR(w1,s),i=VR[o.placedSide];return r.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:r.jsx(BR,{...a,ref:n,style:{...a.style,display:"block"}})})});S1.displayName=w1;function YR(e){return e!==null}var GR=e=>({name:"transformOrigin",options:e,fn(t){var w,v,p;const{placement:n,rects:s,middlewareData:a}=t,i=((w=a.arrow)==null?void 0:w.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[d,f]=N1(n),h={start:"0%",center:"50%",end:"100%"}[f],m=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,g=(((p=a.arrow)==null?void 0:p.y)??0)+c/2;let b="",x="";return d==="bottom"?(b=i?h:`${m}px`,x=`${-c}px`):d==="top"?(b=i?h:`${m}px`,x=`${s.floating.height+c}px`):d==="right"?(b=`${-c}px`,x=i?h:`${g}px`):d==="left"&&(b=`${s.floating.width+c}px`,x=i?h:`${g}px`),{data:{x:b,y:x}}}});function N1(e){const[t,n="center"]=e.split("-");return[t,n]}var Jp=x1,Wl=y1,yd=b1,bd=S1,QR="Portal",Jl=u.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[a,o]=u.useState(!1);kt(()=>o(!0),[]);const i=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?EC.createPortal(r.jsx(xe.div,{...s,ref:t}),i):null});Jl.displayName=QR;function KR(e,t){return u.useReducer((n,s)=>t[n][s]??n,e)}var Ot=e=>{const{present:t,children:n}=e,s=XR(t),a=typeof n=="function"?n({present:s.isPresent}):u.Children.only(n),o=je(s.ref,ZR(a));return typeof n=="function"||s.isPresent?u.cloneElement(a,{ref:o}):null};Ot.displayName="Presence";function XR(e){const[t,n]=u.useState(),s=u.useRef(null),a=u.useRef(e),o=u.useRef("none"),i=e?"mounted":"unmounted",[l,c]=KR(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=kc(s.current);o.current=l==="mounted"?d:"none"},[l]),kt(()=>{const d=s.current,f=a.current;if(f!==e){const m=o.current,g=kc(d);e?c("MOUNT"):g==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),kt(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,h=g=>{const x=kc(s.current).includes(g.animationName);if(g.target===t&&x&&(c("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=g=>{g.target===t&&(o.current=kc(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{s.current=d?getComputedStyle(d):null,n(d)},[])}}function kc(e){return(e==null?void 0:e.animationName)||"none"}function ZR(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var WR=Vm[" useInsertionEffect ".trim().toString()]||kt;function Ua({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[a,o,i]=JR({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const f=u.useRef(e!==void 0);u.useEffect(()=>{const h=f.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,s])}const d=u.useCallback(f=>{var h;if(l){const m=e4(f)?f(e):f;m!==e&&((h=i.current)==null||h.call(i,m))}else o(f)},[l,e,o,i]);return[c,d]}function JR({defaultProp:e,onChange:t}){const[n,s]=u.useState(e),a=u.useRef(n),o=u.useRef(t);return WR(()=>{o.current=t},[t]),u.useEffect(()=>{var i;a.current!==n&&((i=o.current)==null||i.call(o,n),a.current=n)},[n,a]),[n,s,o]}function e4(e){return typeof e=="function"}var j1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),t4="VisuallyHidden",C1=u.forwardRef((e,t)=>r.jsx(xe.span,{...e,ref:t,style:{...j1,...e.style}}));C1.displayName=t4;var n4=C1,[wd,wz]=fn("Tooltip",[Va]),eg=Va(),E1="TooltipProvider",s4=700,Dx="tooltip.open",[a4,k1]=wd(E1),A1=e=>{const{__scopeTooltip:t,delayDuration:n=s4,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:o}=e,i=u.useRef(!0),l=u.useRef(!1),c=u.useRef(0);return u.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(a4,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:u.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:u.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:u.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:o})};A1.displayName=E1;var T1="Tooltip",[Sz,Sd]=wd(T1),mm="TooltipTrigger",r4=u.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=Sd(mm,n),o=k1(mm,n),i=eg(n),l=u.useRef(null),c=je(t,l,a.onTriggerChange),d=u.useRef(!1),f=u.useRef(!1),h=u.useCallback(()=>d.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(Wl,{asChild:!0,...i,children:r.jsx(xe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:ae(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:ae(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:ae(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ae(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:ae(e.onBlur,a.onClose),onClick:ae(e.onClick,a.onClose)})})});r4.displayName=mm;var o4="TooltipPortal",[Nz,i4]=wd(o4,{forceMount:void 0}),ai="TooltipContent",R1=u.forwardRef((e,t)=>{const n=i4(ai,e.__scopeTooltip),{forceMount:s=n.forceMount,side:a="top",...o}=e,i=Sd(ai,e.__scopeTooltip);return r.jsx(Ot,{present:s||i.open,children:i.disableHoverableContent?r.jsx(M1,{side:a,...o,ref:t}):r.jsx(l4,{side:a,...o,ref:t})})}),l4=u.forwardRef((e,t)=>{const n=Sd(ai,e.__scopeTooltip),s=k1(ai,e.__scopeTooltip),a=u.useRef(null),o=je(t,a),[i,l]=u.useState(null),{trigger:c,onClose:d}=n,f=a.current,{onPointerInTransitChange:h}=s,m=u.useCallback(()=>{l(null),h(!1)},[h]),g=u.useCallback((b,x)=>{const w=b.currentTarget,v={x:b.clientX,y:b.clientY},p=h4(v,w.getBoundingClientRect()),y=m4(v,p),S=p4(x.getBoundingClientRect()),j=x4([...y,...S]);l(j),h(!0)},[h]);return u.useEffect(()=>()=>m(),[m]),u.useEffect(()=>{if(c&&f){const b=w=>g(w,f),x=w=>g(w,c);return c.addEventListener("pointerleave",b),f.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",b),f.removeEventListener("pointerleave",x)}}},[c,f,g,m]),u.useEffect(()=>{if(i){const b=x=>{const w=x.target,v={x:x.clientX,y:x.clientY},p=(c==null?void 0:c.contains(w))||(f==null?void 0:f.contains(w)),y=!g4(v,i);p?m():y&&(m(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,f,i,d,m]),r.jsx(M1,{...e,ref:o})}),[c4,u4]=wd(T1,{isInside:!1}),d4=pT("TooltipContent"),M1=u.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=e,c=Sd(ai,n),d=eg(n),{onClose:f}=c;return u.useEffect(()=>(document.addEventListener(Dx,f),()=>document.removeEventListener(Dx,f)),[f]),u.useEffect(()=>{if(c.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),r.jsx(gi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:r.jsxs(yd,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(d4,{children:s}),r.jsx(c4,{scope:n,isInside:!0,children:r.jsx(n4,{id:c.contentId,role:"tooltip",children:a||s})})]})})});R1.displayName=ai;var _1="TooltipArrow",f4=u.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=eg(n);return u4(_1,n).isInside?null:r.jsx(bd,{...a,...s,ref:t})});f4.displayName=_1;function h4(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,s,a,o)){case o:return"left";case a:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function m4(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function p4(e){const{top:t,right:n,bottom:s,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:s},{x:a,y:s}]}function g4(e,t){const{x:n,y:s}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,f=l.y,h=c.x,m=c.y;f>s!=m>s&&n<(h-d)*(s-f)/(m-f)+d&&(a=!a)}return a}function x4(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),v4(t)}function v4(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var y4=A1,O1=R1;function D1(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=D1(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function L1(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=D1(e))&&(s&&(s+=" "),s+=t);return s}const tg="-",b4=e=>{const t=S4(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(tg);return l[0]===""&&l.length!==1&&l.shift(),z1(l,t)||w4(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},z1=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),a=s?z1(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(tg);return(i=t.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},Lx=/^\[(.+)\]$/,w4=e=>{if(Lx.test(e)){const t=Lx.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},S4=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const a in n)pm(n[a],s,a,t);return s},pm=(e,t,n,s)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:zx(t,a);o.classGroupId=n;return}if(typeof a=="function"){if(N4(a)){pm(a(s),t,n,s);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([o,i])=>{pm(i,zx(t,o),n,s)})})},zx=(e,t)=>{let n=e;return t.split(tg).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},N4=e=>e.isThemeGetter,j4=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const a=(o,i)=>{n.set(o,i),t++,t>e&&(t=0,s=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=s.get(o))!==void 0)return a(o,i),i},set(o,i){n.has(o)?n.set(o,i):a(o,i)}}},gm="!",xm=":",C4=xm.length,E4=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=a=>{const o=[];let i=0,l=0,c=0,d;for(let b=0;b<a.length;b++){let x=a[b];if(i===0&&l===0){if(x===xm){o.push(a.slice(c,b)),c=b+C4;continue}if(x==="/"){d=b;continue}}x==="["?i++:x==="]"?i--:x==="("?l++:x===")"&&l--}const f=o.length===0?a:a.substring(c),h=k4(f),m=h!==f,g=d&&d>c?d-c:void 0;return{modifiers:o,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+xm,o=s;s=i=>i.startsWith(a)?o(i.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(n){const a=s;s=o=>n({className:o,parseClassName:a})}return s},k4=e=>e.endsWith(gm)?e.substring(0,e.length-1):e.startsWith(gm)?e.substring(1):e,A4=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const a=[];let o=[];return s.forEach(i=>{i[0]==="["||t[i]?(a.push(...o.sort(),i),o=[]):o.push(i)}),a.push(...o.sort()),a}},T4=e=>({cache:j4(e.cacheSize),parseClassName:E4(e),sortModifiers:A4(e),...b4(e)}),R4=/\s+/,M4=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:o}=t,i=[],l=e.trim().split(R4);let c="";for(let d=l.length-1;d>=0;d-=1){const f=l[d],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:b,maybePostfixModifierPosition:x}=n(f);if(h){c=f+(c.length>0?" "+c:c);continue}let w=!!x,v=s(w?b.substring(0,x):b);if(!v){if(!w){c=f+(c.length>0?" "+c:c);continue}if(v=s(b),!v){c=f+(c.length>0?" "+c:c);continue}w=!1}const p=o(m).join(":"),y=g?p+gm:p,S=y+v;if(i.includes(S))continue;i.push(S);const j=a(v,w);for(let E=0;E<j.length;++E){const N=j[E];i.push(y+N)}c=f+(c.length>0?" "+c:c)}return c};function _4(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=P1(t))&&(s&&(s+=" "),s+=n);return s}const P1=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=P1(e[s]))&&(n&&(n+=" "),n+=t);return n};function O4(e,...t){let n,s,a,o=i;function i(c){const d=t.reduce((f,h)=>h(f),e());return n=T4(d),s=n.cache.get,a=n.cache.set,o=l,l(c)}function l(c){const d=s(c);if(d)return d;const f=M4(c,n);return a(c,f),f}return function(){return o(_4.apply(null,arguments))}}const mt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},I1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,U1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,D4=/^\d+\/\d+$/,L4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,z4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,P4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,I4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,U4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,to=e=>D4.test(e),Ae=e=>!!e&&!Number.isNaN(Number(e)),Js=e=>!!e&&Number.isInteger(Number(e)),Pf=e=>e.endsWith("%")&&Ae(e.slice(0,-1)),js=e=>L4.test(e),$4=()=>!0,B4=e=>z4.test(e)&&!P4.test(e),$1=()=>!1,H4=e=>I4.test(e),q4=e=>U4.test(e),F4=e=>!fe(e)&&!he(e),V4=e=>yi(e,q1,$1),fe=e=>I1.test(e),nr=e=>yi(e,F1,B4),If=e=>yi(e,X4,Ae),Px=e=>yi(e,B1,$1),Y4=e=>yi(e,H1,q4),Ac=e=>yi(e,V1,H4),he=e=>U1.test(e),Di=e=>bi(e,F1),G4=e=>bi(e,Z4),Ix=e=>bi(e,B1),Q4=e=>bi(e,q1),K4=e=>bi(e,H1),Tc=e=>bi(e,V1,!0),yi=(e,t,n)=>{const s=I1.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},bi=(e,t,n=!1)=>{const s=U1.exec(e);return s?s[1]?t(s[1]):n:!1},B1=e=>e==="position"||e==="percentage",H1=e=>e==="image"||e==="url",q1=e=>e==="length"||e==="size"||e==="bg-size",F1=e=>e==="length",X4=e=>e==="number",Z4=e=>e==="family-name",V1=e=>e==="shadow",W4=()=>{const e=mt("color"),t=mt("font"),n=mt("text"),s=mt("font-weight"),a=mt("tracking"),o=mt("leading"),i=mt("breakpoint"),l=mt("container"),c=mt("spacing"),d=mt("radius"),f=mt("shadow"),h=mt("inset-shadow"),m=mt("text-shadow"),g=mt("drop-shadow"),b=mt("blur"),x=mt("perspective"),w=mt("aspect"),v=mt("ease"),p=mt("animate"),y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...S(),he,fe],E=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],C=()=>[he,fe,c],A=()=>[to,"full","auto",...C()],T=()=>[Js,"none","subgrid",he,fe],z=()=>["auto",{span:["full",Js,he,fe]},Js,he,fe],M=()=>[Js,"auto",he,fe],$=()=>["auto","min","max","fr",he,fe],X=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],k=()=>["start","end","center","stretch","center-safe","end-safe"],R=()=>["auto",...C()],B=()=>[to,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],O=()=>[e,he,fe],U=()=>[...S(),Ix,Px,{position:[he,fe]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],P=()=>["auto","cover","contain",Q4,V4,{size:[he,fe]}],H=()=>[Pf,Di,nr],Q=()=>["","none","full",d,he,fe],_=()=>["",Ae,Di,nr],se=()=>["solid","dashed","dotted","double"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>[Ae,Pf,Ix,Px],W=()=>["","none",b,he,fe],G=()=>["none",Ae,he,fe],F=()=>["none",Ae,he,fe],ne=()=>[Ae,he,fe],ee=()=>[to,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[js],breakpoint:[js],color:[$4],container:[js],"drop-shadow":[js],ease:["in","out","in-out"],font:[F4],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[js],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[js],shadow:[js],spacing:["px",Ae],text:[js],"text-shadow":[js],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",to,fe,he,w]}],container:["container"],columns:[{columns:[Ae,fe,he,l]}],"break-after":[{"break-after":y()}],"break-before":[{"break-before":y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[Js,"auto",he,fe]}],basis:[{basis:[to,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ae,to,"auto","initial","none",fe]}],grow:[{grow:["",Ae,he,fe]}],shrink:[{shrink:["",Ae,he,fe]}],order:[{order:[Js,"first","last","none",he,fe]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:z()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:z()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...X(),"normal"]}],"justify-items":[{"justify-items":[...k(),"normal"]}],"justify-self":[{"justify-self":["auto",...k()]}],"align-content":[{content:["normal",...X()]}],"align-items":[{items:[...k(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...k(),{baseline:["","last"]}]}],"place-content":[{"place-content":X()}],"place-items":[{"place-items":[...k(),"baseline"]}],"place-self":[{"place-self":["auto",...k()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:R()}],mx:[{mx:R()}],my:[{my:R()}],ms:[{ms:R()}],me:[{me:R()}],mt:[{mt:R()}],mr:[{mr:R()}],mb:[{mb:R()}],ml:[{ml:R()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[l,"screen",...B()]}],"min-w":[{"min-w":[l,"screen","none",...B()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",n,Di,nr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,he,If]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Pf,fe]}],"font-family":[{font:[G4,fe,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,he,fe]}],"line-clamp":[{"line-clamp":[Ae,"none",he,If]}],leading:[{leading:[o,...C()]}],"list-image":[{"list-image":["none",he,fe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",he,fe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ae,"from-font","auto",he,nr]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[Ae,"auto",he,fe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",he,fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",he,fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:U()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Js,he,fe],radial:["",he,fe],conic:[Js,he,fe]},K4,Y4]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:H()}],"gradient-via-pos":[{via:H()}],"gradient-to-pos":[{to:H()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:Q()}],"rounded-s":[{"rounded-s":Q()}],"rounded-e":[{"rounded-e":Q()}],"rounded-t":[{"rounded-t":Q()}],"rounded-r":[{"rounded-r":Q()}],"rounded-b":[{"rounded-b":Q()}],"rounded-l":[{"rounded-l":Q()}],"rounded-ss":[{"rounded-ss":Q()}],"rounded-se":[{"rounded-se":Q()}],"rounded-ee":[{"rounded-ee":Q()}],"rounded-es":[{"rounded-es":Q()}],"rounded-tl":[{"rounded-tl":Q()}],"rounded-tr":[{"rounded-tr":Q()}],"rounded-br":[{"rounded-br":Q()}],"rounded-bl":[{"rounded-bl":Q()}],"border-w":[{border:_()}],"border-w-x":[{"border-x":_()}],"border-w-y":[{"border-y":_()}],"border-w-s":[{"border-s":_()}],"border-w-e":[{"border-e":_()}],"border-w-t":[{"border-t":_()}],"border-w-r":[{"border-r":_()}],"border-w-b":[{"border-b":_()}],"border-w-l":[{"border-l":_()}],"divide-x":[{"divide-x":_()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":_()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...se(),"hidden","none"]}],"divide-style":[{divide:[...se(),"hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[...se(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ae,he,fe]}],"outline-w":[{outline:["",Ae,Di,nr]}],"outline-color":[{outline:O()}],shadow:[{shadow:["","none",f,Tc,Ac]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",h,Tc,Ac]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[Ae,nr]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":_()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":["none",m,Tc,Ac]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[Ae,he,fe]}],"mix-blend":[{"mix-blend":[...te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":te()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ae]}],"mask-image-linear-from-pos":[{"mask-linear-from":I()}],"mask-image-linear-to-pos":[{"mask-linear-to":I()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":I()}],"mask-image-t-to-pos":[{"mask-t-to":I()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":I()}],"mask-image-r-to-pos":[{"mask-r-to":I()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":I()}],"mask-image-b-to-pos":[{"mask-b-to":I()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":I()}],"mask-image-l-to-pos":[{"mask-l-to":I()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":I()}],"mask-image-x-to-pos":[{"mask-x-to":I()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":I()}],"mask-image-y-to-pos":[{"mask-y-to":I()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[he,fe]}],"mask-image-radial-from-pos":[{"mask-radial-from":I()}],"mask-image-radial-to-pos":[{"mask-radial-to":I()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[Ae]}],"mask-image-conic-from-pos":[{"mask-conic-from":I()}],"mask-image-conic-to-pos":[{"mask-conic-to":I()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:U()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",he,fe]}],filter:[{filter:["","none",he,fe]}],blur:[{blur:W()}],brightness:[{brightness:[Ae,he,fe]}],contrast:[{contrast:[Ae,he,fe]}],"drop-shadow":[{"drop-shadow":["","none",g,Tc,Ac]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:["",Ae,he,fe]}],"hue-rotate":[{"hue-rotate":[Ae,he,fe]}],invert:[{invert:["",Ae,he,fe]}],saturate:[{saturate:[Ae,he,fe]}],sepia:[{sepia:["",Ae,he,fe]}],"backdrop-filter":[{"backdrop-filter":["","none",he,fe]}],"backdrop-blur":[{"backdrop-blur":W()}],"backdrop-brightness":[{"backdrop-brightness":[Ae,he,fe]}],"backdrop-contrast":[{"backdrop-contrast":[Ae,he,fe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ae,he,fe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ae,he,fe]}],"backdrop-invert":[{"backdrop-invert":["",Ae,he,fe]}],"backdrop-opacity":[{"backdrop-opacity":[Ae,he,fe]}],"backdrop-saturate":[{"backdrop-saturate":[Ae,he,fe]}],"backdrop-sepia":[{"backdrop-sepia":["",Ae,he,fe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",he,fe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ae,"initial",he,fe]}],ease:[{ease:["linear","initial",v,he,fe]}],delay:[{delay:[Ae,he,fe]}],animate:[{animate:["none",p,he,fe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,he,fe]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:G()}],"rotate-x":[{"rotate-x":G()}],"rotate-y":[{"rotate-y":G()}],"rotate-z":[{"rotate-z":G()}],scale:[{scale:F()}],"scale-x":[{"scale-x":F()}],"scale-y":[{"scale-y":F()}],"scale-z":[{"scale-z":F()}],"scale-3d":["scale-3d"],skew:[{skew:ne()}],"skew-x":[{"skew-x":ne()}],"skew-y":[{"skew-y":ne()}],transform:[{transform:[he,fe,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ee()}],"translate-x":[{"translate-x":ee()}],"translate-y":[{"translate-y":ee()}],"translate-z":[{"translate-z":ee()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",he,fe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",he,fe]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[Ae,Di,nr,If]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},J4=O4(W4);function Ne(...e){return J4(L1(e))}const eM=y4,tM=u.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(O1,{ref:s,sideOffset:t,className:Ne("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));tM.displayName=O1.displayName;const nM={theme:"system",setTheme:()=>null},Y1=u.createContext(nM);function sM({children:e,defaultTheme:t="system",storageKey:n="bible-companion-theme",...s}){const[a,o]=u.useState(()=>(localStorage==null?void 0:localStorage.getItem(n))||t);u.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),a==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(a)},[a]);const i={theme:a,setTheme:l=>{localStorage==null||localStorage.setItem(n,l),o(l)}};return r.jsx(Y1.Provider,{...s,value:i,children:e})}const aM=()=>{const e=u.useContext(Y1);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},fs=Object.create(null);fs.open="0";fs.close="1";fs.ping="2";fs.pong="3";fs.message="4";fs.upgrade="5";fs.noop="6";const Xc=Object.create(null);Object.keys(fs).forEach(e=>{Xc[fs[e]]=e});const vm={type:"error",data:"parser error"},G1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Q1=typeof ArrayBuffer=="function",K1=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,ng=({type:e,data:t},n,s)=>G1&&t instanceof Blob?n?s(t):Ux(t,s):Q1&&(t instanceof ArrayBuffer||K1(t))?n?s(t):Ux(new Blob([t]),s):s(fs[e]+(t||"")),Ux=(e,t)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];t("b"+(s||""))},n.readAsDataURL(e)};function $x(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Uf;function rM(e,t){if(G1&&e.data instanceof Blob)return e.data.arrayBuffer().then($x).then(t);if(Q1&&(e.data instanceof ArrayBuffer||K1(e.data)))return t($x(e.data));ng(e,!1,n=>{Uf||(Uf=new TextEncoder),t(Uf.encode(n))})}const Bx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qi=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Bx.length;e++)qi[Bx.charCodeAt(e)]=e;const oM=e=>{let t=e.length*.75,n=e.length,s,a=0,o,i,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),f=new Uint8Array(d);for(s=0;s<n;s+=4)o=qi[e.charCodeAt(s)],i=qi[e.charCodeAt(s+1)],l=qi[e.charCodeAt(s+2)],c=qi[e.charCodeAt(s+3)],f[a++]=o<<2|i>>4,f[a++]=(i&15)<<4|l>>2,f[a++]=(l&3)<<6|c&63;return d},iM=typeof ArrayBuffer=="function",sg=(e,t)=>{if(typeof e!="string")return{type:"message",data:X1(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:lM(e.substring(1),t)}:Xc[n]?e.length>1?{type:Xc[n],data:e.substring(1)}:{type:Xc[n]}:vm},lM=(e,t)=>{if(iM){const n=oM(e);return X1(n,t)}else return{base64:!0,data:e}},X1=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Z1="",cM=(e,t)=>{const n=e.length,s=new Array(n);let a=0;e.forEach((o,i)=>{ng(o,!1,l=>{s[i]=l,++a===n&&t(s.join(Z1))})})},uM=(e,t)=>{const n=e.split(Z1),s=[];for(let a=0;a<n.length;a++){const o=sg(n[a],t);if(s.push(o),o.type==="error")break}return s};function dM(){return new TransformStream({transform(e,t){rM(e,n=>{const s=n.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const o=new DataView(a.buffer);o.setUint8(0,126),o.setUint16(1,s)}else{a=new Uint8Array(9);const o=new DataView(a.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(n)})}})}let $f;function Rc(e){return e.reduce((t,n)=>t+n.length,0)}function Mc(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let a=0;a<t;a++)n[a]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function fM(e,t){$f||($f=new TextDecoder);const n=[];let s=0,a=-1,o=!1;return new TransformStream({transform(i,l){for(n.push(i);;){if(s===0){if(Rc(n)<1)break;const c=Mc(n,1);o=(c[0]&128)===128,a=c[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(Rc(n)<2)break;const c=Mc(n,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(Rc(n)<8)break;const c=Mc(n,8),d=new DataView(c.buffer,c.byteOffset,c.length),f=d.getUint32(0);if(f>Math.pow(2,21)-1){l.enqueue(vm);break}a=f*Math.pow(2,32)+d.getUint32(4),s=3}else{if(Rc(n)<a)break;const c=Mc(n,a);l.enqueue(sg(o?c:$f.decode(c),t)),s=0}if(a===0||a>e){l.enqueue(vm);break}}}})}const W1=4;function ft(e){if(e)return hM(e)}function hM(e){for(var t in ft.prototype)e[t]=ft.prototype[t];return e}ft.prototype.on=ft.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ft.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};ft.prototype.off=ft.prototype.removeListener=ft.prototype.removeAllListeners=ft.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,a=0;a<n.length;a++)if(s=n[a],s===t||s.fn===t){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+e],this};ft.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,a=n.length;s<a;++s)n[s].apply(this,t)}return this};ft.prototype.emitReserved=ft.prototype.emit;ft.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ft.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Nd=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),bn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),mM="arraybuffer";function J1(e,...t){return t.reduce((n,s)=>(e.hasOwnProperty(s)&&(n[s]=e[s]),n),{})}const pM=bn.setTimeout,gM=bn.clearTimeout;function jd(e,t){t.useNativeTimers?(e.setTimeoutFn=pM.bind(bn),e.clearTimeoutFn=gM.bind(bn)):(e.setTimeoutFn=bn.setTimeout.bind(bn),e.clearTimeoutFn=bn.clearTimeout.bind(bn))}const xM=1.33;function vM(e){return typeof e=="string"?yM(e):Math.ceil((e.byteLength||e.size)*xM)}function yM(e){let t=0,n=0;for(let s=0,a=e.length;s<a;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}function eS(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function bM(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function wM(e){let t={},n=e.split("&");for(let s=0,a=n.length;s<a;s++){let o=n[s].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class SM extends Error{constructor(t,n,s){super(t),this.description=n,this.context=s,this.type="TransportError"}}class ag extends ft{constructor(t){super(),this.writable=!1,jd(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,s){return super.emitReserved("error",new SM(t,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=sg(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=bM(t);return n.length?"?"+n:""}}class NM extends ag{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};uM(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,cM(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=eS()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let tS=!1;try{tS=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const jM=tS;function CM(){}class EM extends NM{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,n){const s=this.request({method:"POST",data:t});s.on("success",n),s.on("error",(a,o)=>{this.onError("xhr post error",a,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=t}}class cs extends ft{constructor(t,n,s){super(),this.createRequest=t,jd(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const n=J1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=cs.requestsCount++,cs.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=CM,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete cs.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}cs.requestsCount=0;cs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Hx);else if(typeof addEventListener=="function"){const e="onpagehide"in bn?"pagehide":"unload";addEventListener(e,Hx,!1)}}function Hx(){for(let e in cs.requests)cs.requests.hasOwnProperty(e)&&cs.requests[e].abort()}const kM=function(){const e=nS({xdomain:!1});return e&&e.responseType!==null}();class AM extends EM{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=kM&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new cs(nS,this.uri(),t)}}function nS(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||jM))return new XMLHttpRequest}catch{}if(!t)try{return new bn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const sS=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class TM extends ag{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,s=sS?{}:J1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],a=n===t.length-1;ng(s,this.supportsBinary,o=>{try{this.doWrite(s,o)}catch{}a&&Nd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=eS()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Bf=bn.WebSocket||bn.MozWebSocket;class RM extends TM{createSocket(t,n,s){return sS?new Bf(t,n,s):n?new Bf(t,n):new Bf(t)}doWrite(t,n){this.ws.send(n)}}class MM extends ag{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=fM(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(n).getReader(),a=dM();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const o=()=>{s.read().then(({done:l,value:c})=>{l||(this.onPacket(c),o())}).catch(l=>{})};o();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],a=n===t.length-1;this._writer.write(s).then(()=>{a&&Nd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const _M={websocket:RM,webtransport:MM,polling:AM},OM=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,DM=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ym(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");n!=-1&&s!=-1&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let a=OM.exec(e||""),o={},i=14;for(;i--;)o[DM[i]]=a[i]||"";return n!=-1&&s!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=LM(o,o.path),o.queryKey=zM(o,o.query),o}function LM(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function zM(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,o){a&&(n[a]=o)}),n}const bm=typeof addEventListener=="function"&&typeof removeEventListener=="function",Zc=[];bm&&addEventListener("offline",()=>{Zc.forEach(e=>e())},!1);class Ra extends ft{constructor(t,n){if(super(),this.binaryType=mM,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const s=ym(t);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=ym(n.host).host);jd(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=wM(this.opts.query)),bm&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Zc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=W1,n.transport=t,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Ra.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Ra.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const a=this.writeBuffer[s].data;if(a&&(n+=vM(a)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Nd(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,s){return this._sendPacket("message",t,n,s),this}send(t,n,s){return this._sendPacket("message",t,n,s),this}_sendPacket(t,n,s,a){if(typeof n=="function"&&(a=n,n=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const o={type:t,data:n,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(Ra.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),bm&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Zc.indexOf(this._offlineEventListener);s!==-1&&Zc.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Ra.protocol=W1;class PM extends Ra{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),s=!1;Ra.priorWebsocketSuccess=!1;const a=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ra.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(f(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=n.name,this.emitReserved("upgradeError",m)}}))};function o(){s||(s=!0,f(),n.close(),n=null)}const i=h=>{const m=new Error("probe error: "+h);m.transport=n.name,o(),this.emitReserved("upgradeError",m)};function l(){i("transport closed")}function c(){i("socket closed")}function d(h){n&&h.name!==n.name&&o()}const f=()=>{n.removeListener("open",a),n.removeListener("error",i),n.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};n.once("open",a),n.once("error",i),n.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&n.push(t[s]);return n}}let IM=class extends PM{constructor(t,n={}){const s=typeof t=="object"?t:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>_M[a]).filter(a=>!!a)),super(t,s)}};function UM(e,t="",n){let s=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),s=ym(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+t,s.href=s.protocol+"://"+o+(n&&n.port===s.port?"":":"+s.port),s}const $M=typeof ArrayBuffer=="function",BM=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,aS=Object.prototype.toString,HM=typeof Blob=="function"||typeof Blob<"u"&&aS.call(Blob)==="[object BlobConstructor]",qM=typeof File=="function"||typeof File<"u"&&aS.call(File)==="[object FileConstructor]";function rg(e){return $M&&(e instanceof ArrayBuffer||BM(e))||HM&&e instanceof Blob||qM&&e instanceof File}function Wc(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(Wc(e[n]))return!0;return!1}if(rg(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Wc(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Wc(e[n]))return!0;return!1}function FM(e){const t=[],n=e.data,s=e;return s.data=wm(n,t),s.attachments=t.length,{packet:s,buffers:t}}function wm(e,t){if(!e)return e;if(rg(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=wm(e[s],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=wm(e[s],t));return n}return e}function VM(e,t){return e.data=Sm(e.data,t),delete e.attachments,e}function Sm(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Sm(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Sm(e[n],t));return e}const YM=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],GM=5;var Pe;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Pe||(Pe={}));class QM{constructor(t){this.replacer=t}encode(t){return(t.type===Pe.EVENT||t.type===Pe.ACK)&&Wc(t)?this.encodeAsBinary({type:t.type===Pe.EVENT?Pe.BINARY_EVENT:Pe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===Pe.BINARY_EVENT||t.type===Pe.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=FM(t),s=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(s),a}}function qx(e){return Object.prototype.toString.call(e)==="[object Object]"}class og extends ft{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const s=n.type===Pe.BINARY_EVENT;s||n.type===Pe.BINARY_ACK?(n.type=s?Pe.EVENT:Pe.ACK,this.reconstructor=new KM(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(rg(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const s={type:Number(t.charAt(0))};if(Pe[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===Pe.BINARY_EVENT||s.type===Pe.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const i=t.substring(o,n);if(i!=Number(i)||t.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(i)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););s.nsp=t.substring(o,n)}else s.nsp="/";const a=t.charAt(n+1);if(a!==""&&Number(a)==a){const o=n+1;for(;++n;){const i=t.charAt(n);if(i==null||Number(i)!=i){--n;break}if(n===t.length)break}s.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(og.isPayloadValid(s.type,o))s.data=o;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case Pe.CONNECT:return qx(n);case Pe.DISCONNECT:return n===void 0;case Pe.CONNECT_ERROR:return typeof n=="string"||qx(n);case Pe.EVENT:case Pe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&YM.indexOf(n[0])===-1);case Pe.ACK:case Pe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class KM{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=VM(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const XM=Object.freeze(Object.defineProperty({__proto__:null,Decoder:og,Encoder:QM,get PacketType(){return Pe},protocol:GM},Symbol.toStringTag,{value:"Module"}));function Pn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const ZM=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class rS extends ft{constructor(t,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Pn(t,"open",this.onopen.bind(this)),Pn(t,"packet",this.onpacket.bind(this)),Pn(t,"error",this.onerror.bind(this)),Pn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var s,a,o;if(ZM.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:Pe.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const f=this.ids++,h=n.pop();this._registerAckCallback(f,h),i.id=f}const l=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,n){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[t]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},a),i=(...l)=>{this.io.clearTimeoutFn(o),n.apply(this,l)};i.withError=!0,this.acks[t]=i}emitWithAck(t,...n){return new Promise((s,a)=>{const o=(i,l)=>i?a(i):s(l);o.withError=!0,n.push(o),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...o)=>s!==this._queue[0]?void 0:(a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...o)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Pe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Pe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Pe.EVENT:case Pe.BINARY_EVENT:this.onevent(t);break;case Pe.ACK:case Pe.BINARY_ACK:this.onack(t);break;case Pe.DISCONNECT:this.ondisconnect();break;case Pe.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let s=!1;return function(...a){s||(s=!0,n.packet({type:Pe.ACK,id:t,data:a}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Pe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,t.data)}}}function wi(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}wi.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};wi.prototype.reset=function(){this.attempts=0};wi.prototype.setMin=function(e){this.ms=e};wi.prototype.setMax=function(e){this.max=e};wi.prototype.setJitter=function(e){this.jitter=e};class Nm extends ft{constructor(t,n){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,jd(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new wi({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const a=n.parser||XM;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new IM(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=Pn(n,"open",function(){s.onopen(),t&&t()}),o=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},i=Pn(n,"error",o);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),o(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Pn(t,"ping",this.onping.bind(this)),Pn(t,"data",this.ondata.bind(this)),Pn(t,"error",this.onerror.bind(this)),Pn(t,"close",this.onclose.bind(this)),Pn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Nd(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new rS(this,t,n),this.nsps[t]=s),s}_destroy(t){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let s=0;s<n.length;s++)this.engine.write(n[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Li={};function Jc(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=UM(e,t.path||"/socket.io"),s=n.source,a=n.id,o=n.path,i=Li[a]&&o in Li[a].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||i;let c;return l?c=new Nm(s,t):(Li[a]||(Li[a]=new Nm(s,t)),c=Li[a]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(Jc,{Manager:Nm,Socket:rS,io:Jc,connect:Jc});const WM=1,JM=1e6;let Hf=0;function e_(){return Hf=(Hf+1)%Number.MAX_SAFE_INTEGER,Hf.toString()}const qf=new Map,Fx=e=>{if(qf.has(e))return;const t=setTimeout(()=>{qf.delete(e),ll({type:"REMOVE_TOAST",toastId:e})},JM);qf.set(e,t)},t_=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,WM)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Fx(n):e.toasts.forEach(s=>{Fx(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},eu=[];let tu={toasts:[]};function ll(e){tu=t_(tu,e),eu.forEach(t=>{t(tu)})}function n_({...e}){const t=e_(),n=a=>ll({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>ll({type:"DISMISS_TOAST",toastId:t});return ll({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:n}}function Ft(){const[e,t]=u.useState(tu);return u.useEffect(()=>(eu.push(t),()=>{const n=eu.indexOf(t);n>-1&&eu.splice(n,1)}),[e]),{...e,toast:n_,dismiss:n=>ll({type:"DISMISS_TOAST",toastId:n})}}const oS=u.createContext(null);function s_({children:e}){const[t,n]=u.useState(null),[s,a]=u.useState(!1),[o,i]=u.useState([]),[l,c]=u.useState(null),[d,f]=u.useState([]),[h,m]=u.useState(null),[g,b]=u.useState(!1),x=u.useRef(0),w=5,{toast:v}=Ft(),p=u.useRef(!1);u.useEffect(()=>{if(p.current)return;p.current=!0;const A=()=>{if(t&&t.connected)return console.log("Socket already connected, skipping initialization"),t;const T=Jc("http://localhost:3001",{transports:["websocket","polling"],autoConnect:!0,reconnection:!0,reconnectionAttempts:w,reconnectionDelay:1e3,forceNew:!1});return T.on("connect",()=>{if(console.log("Connected to AI Agent system"),a(!0),x.current=0,T.emit("requestAgentStatus"),h)console.log("Session already exists:",h);else{const z=setTimeout(()=>{console.warn("Session creation timeout - proceeding without session")},5e3);T.emit("createSession",{userId:2},M=>{clearTimeout(z),M!=null&&M.sessionId&&!h?(m(M.sessionId),console.log("Chat session created:",M.sessionId)):M!=null&&M.error?console.error("Session creation failed:",M.error):console.warn("Session creation - unexpected response:",M)})}}),T.on("disconnect",()=>{console.log("Disconnected from AI Agent system"),a(!1)}),T.on("connect_error",z=>{console.error("Connection error:",z),console.error("Error details:",{message:z.message,stack:z.stack,name:z.name}),a(!1),x.current++,x.current>=w&&console.error("Max reconnection attempts reached")}),T.on("agentStatus",z=>{c(z),i(z.agents||[])}),T.on("systemStatus",z=>{c(z),i(z.agents||[])}),T.on("insightsGenerated",z=>{f(M=>[...z.insights,...M].slice(0,20))}),T.on("analysisCompleted",z=>{console.log("Analysis completed:",z)}),T.on("taskCompleted",z=>{console.log("Task completed:",z)}),T.on("taskFailed",z=>{console.error("Task failed:",z)}),T.on("agentLog",z=>{console.log(`[${z.agent}] ${z.message}`)}),T};if(!t||!t.connected){const T=A();T&&T!==t&&n(T)}return()=>{t&&t.connected&&(console.log("Cleaning up global agent socket connection"),t.disconnect())}},[]),u.useEffect(()=>{if(h){const A=localStorage.getItem("lastGlobalSessionId");if(A&&A!==h){console.log(" Global server restart detected"),b(!0);const T=[];for(let z=0;z<localStorage.length;z++){const M=localStorage.key(z);M&&(M.includes("ai_chat_")||M.includes("discussion_"))&&T.push(M)}T.forEach(z=>localStorage.removeItem(z)),v({title:"Server Restarted",description:"AI conversations have been reset due to server restart. Learning data is preserved.",duration:5e3}),setTimeout(()=>b(!1),5e3)}localStorage.setItem("lastGlobalSessionId",h)}},[h,v]);const C={socket:t,isConnected:s,agentStatuses:o,systemStatus:l,insights:d,sessionId:h,serverRestartDetected:g,sendMessage:async(A,T)=>{if(!t||!s)throw new Error("Not connected to agent system");if(!h)throw new Error("Chat session not initialized");return new Promise((z,M)=>{const $=setTimeout(()=>{M(new Error("Message timeout"))},18e4),X={...T,sessionId:h,userId:(T==null?void 0:T.userId)||2};t.emit("chatMessage",{message:A,context:X},k=>{clearTimeout($),k!=null&&k.error?M(new Error(k.error)):z()})})},requestAnalysis:async(A,T,z)=>{if(!t||!s)throw new Error("Not connected to agent system");return new Promise((M,$)=>{const X=setTimeout(()=>{$(new Error("Analysis request timeout"))},5e3);t.emit("requestAnalysis",{documentId:A,chapter:T,agentType:z||"text-analysis"},k=>{clearTimeout(X),k!=null&&k.error?$(new Error(k.error)):M()})})},refreshStatus:()=>{t&&s&&t.emit("requestAgentStatus")},getConnectionStatus:()=>({isConnected:s,reconnectAttempts:x.current,maxReconnectAttempts:w,canReconnect:x.current<w}),reconnect:()=>{t&&x.current<w&&t.connect()}};return r.jsx(oS.Provider,{value:C,children:e})}function a_(){const e=u.useContext(oS);if(!e)throw new Error("useAgentSocket must be used within an AgentSocketProvider");return e}const zi=[{code:"en",name:"English",nativeName:"English",rtl:!1,flag:"",gemmaSupported:!0},{code:"es",name:"Spanish",nativeName:"Espaol",rtl:!1,flag:"",gemmaSupported:!0},{code:"fr",name:"French",nativeName:"Franais",rtl:!1,flag:"",gemmaSupported:!0},{code:"de",name:"German",nativeName:"Deutsch",rtl:!1,flag:"",gemmaSupported:!0},{code:"ja",name:"Japanese",nativeName:"",rtl:!1,flag:"",gemmaSupported:!0},{code:"ko",name:"Korean",nativeName:"",rtl:!1,flag:"",gemmaSupported:!0}],iS=u.createContext(void 0);function r_({children:e}){const[t,n]=u.useState(()=>{var x;const g=localStorage.getItem("bible-companion-language");if(g&&zi.find(w=>w.code===g))return g;const b=navigator.language.split("-")[0];return((x=zi.find(w=>w.code===b))==null?void 0:x.code)||"en"}),[s,a]=u.useState(!1),o=g=>{n(g),localStorage.setItem("bible-companion-language",g),document.documentElement.lang=g;const b=zi.find(x=>x.code===g);b!=null&&b.rtl?document.documentElement.dir="rtl":document.documentElement.dir="ltr"},i=async g=>{if(g.targetLanguage===t&&!g.sourceLanguage)return g.text;a(!0);try{const b=await fetch("/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:g.text,targetLanguage:g.targetLanguage,sourceLanguage:g.sourceLanguage||t,context:g.context||"general"})});if(!b.ok)throw new Error("Translation failed");return(await b.json()).translatedText}catch(b){return console.error("Translation error:",b),g.text}finally{a(!1)}},l=async g=>{a(!0);try{const b=await fetch("/api/translate-batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:g})});if(!b.ok)throw new Error("Batch translation failed");return(await b.json()).translations}catch(b){return console.error("Batch translation error:",b),g.map(x=>x.text)}finally{a(!1)}},c=async g=>{try{const b=await fetch("/api/detect-language",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:g})});if(!b.ok)throw new Error("Language detection failed");return(await b.json()).language||"en"}catch(b){return console.error("Language detection error:",b),"en"}},d=async(g,b)=>i({text:g,targetLanguage:b,context:"biblical"}),f=async(g,b)=>{const x=await Promise.all(g.questions.map(async w=>{var v;return{...w,question:await i({text:w.question,targetLanguage:b,context:"quiz"}),options:await l(((v=w.options)==null?void 0:v.map(p=>({text:p,targetLanguage:b,context:"quiz"})))||[]),explanation:await i({text:w.explanation,targetLanguage:b,context:"explanation"})}}));return{...g,title:await i({text:g.title,targetLanguage:b,context:"quiz"}),description:await i({text:g.description,targetLanguage:b,context:"quiz"}),questions:x}},h=g=>zi.find(b=>b.code===g);u.useEffect(()=>{document.documentElement.lang=t},[t]);const m={currentLanguage:t,setLanguage:o,translate:i,translateBatch:l,isTranslating:s,supportedLanguages:zi,getLanguageConfig:h,detectLanguage:c,translateDocumentContent:d,translateQuizContent:f};return r.jsx(iS.Provider,{value:m,children:e})}const ig=()=>{const e=u.useContext(iS);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},Vx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Yx=L1,Cd=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return Yx(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:o}=t,i=Object.keys(a).map(d=>{const f=n==null?void 0:n[d],h=o==null?void 0:o[d];if(f===null)return null;const m=Vx(f)||Vx(h);return a[d][m]}),l=n&&Object.entries(n).reduce((d,f)=>{let[h,m]=f;return m===void 0||(d[h]=m),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,f)=>{let{class:h,className:m,...g}=f;return Object.entries(g).every(b=>{let[x,w]=b;return Array.isArray(w)?w.includes({...o,...l}[x]):{...o,...l}[x]===w})?[...d,h,m]:d},[]);return Yx(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)},o_=Cd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),V=u.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...a},o)=>{const i=s?hT:"button";return r.jsx(i,{className:Ne(o_({variant:t,size:n,className:e})),ref:o,...a})});V.displayName="Button";/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l_=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),Gx=e=>{const t=l_(e);return t.charAt(0).toUpperCase()+t.slice(1)},lS=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),c_=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var u_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:i,...l},c)=>u.createElement("svg",{ref:c,...u_,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:lS("lucide",a),...!o&&!c_(l)&&{"aria-hidden":"true"},...l},[...i.map(([d,f])=>u.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=(e,t)=>{const n=u.forwardRef(({className:s,...a},o)=>u.createElement(d_,{ref:o,iconNode:t,className:lS(`lucide-${i_(Gx(e))}`,`lucide-${e}`,s),...a}));return n.displayName=Gx(e),n};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],jm=re("activity",f_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ya=re("arrow-left",h_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],p_=re("arrow-right",m_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],x_=re("book-marked",g_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],$n=re("book-open",v_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]],b_=re("bookmark-plus",y_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Dr=re("bookmark",w_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],cn=re("bot",S_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],nn=re("brain",N_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ec=re("calendar",j_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],E_=re("chart-column",C_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ed=re("check",k_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],kd=re("chevron-down",A_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Qx=re("chevron-left",T_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],lg=re("chevron-right",R_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],cS=re("chevron-up",M_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Mo=re("circle-alert",__);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Cm=re("circle-check-big",O_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],uS=re("circle-help",D_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],z_=re("circle",L_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],tc=re("clock",P_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],U_=re("copy",I_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],dS=re("database",$_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],$u=re("download",B_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],q_=re("ellipsis-vertical",H_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fS=re("eye",F_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Fn=re("file-text",V_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],cg=re("file",Y_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],hS=re("folder-open",G_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],K_=re("globe",Q_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],_o=re("graduation-cap",X_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],W_=re("hard-drive",Z_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],eO=re("hash",J_);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],Bu=re("highlighter",tO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],sO=re("house",nO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],rO=re("layout-grid",aO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],mS=re("library",oO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],lO=re("lightbulb",iO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],uO=re("list",cO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Al=re("loader-circle",dO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Qr=re("maximize-2",fO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],nu=re("message-circle",hO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Us=re("message-square",mO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],Kx=re("mic",pO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Ga=re("minimize-2",gO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],vO=re("moon",xO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],bO=re("palette",yO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],SO=re("pause",wO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],jO=re("pen-line",NO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],pS=re("play",CO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ma=re("plus",EO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],AO=re("quote",kO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],cl=re("refresh-cw",TO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Lr=re("search",RO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ad=re("send",MO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Oo=re("settings",_O);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],DO=re("share-2",OO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],zO=re("shield",LO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],gS=re("sparkles",PO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xS=re("square-pen",IO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],vS=re("star",UO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],hs=re("sticky-note",$O);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],HO=re("sun",BO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ug=re("tag",qO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],VO=re("target",FO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],yS=re("thumbs-down",YO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],bS=re("thumbs-up",GO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Qa=re("trash-2",QO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],dg=re("trending-up",KO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Xx=re("triangle-alert",XO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Em=re("upload",ZO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wS=re("user",WO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],eD=re("users",JO);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],SS=re("volume-2",tD);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dn=re("x",nD);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Xt=re("zap",sD);function Td(e){const t=e+"CollectionProvider",[n,s]=fn(t),[a,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=x=>{const{scope:w,children:v}=x,p=Es.useRef(null),y=Es.useRef(new Map).current;return r.jsx(a,{scope:w,itemMap:y,collectionRef:p,children:v})};i.displayName=t;const l=e+"CollectionSlot",c=za(l),d=Es.forwardRef((x,w)=>{const{scope:v,children:p}=x,y=o(l,v),S=je(w,y.collectionRef);return r.jsx(c,{ref:S,children:p})});d.displayName=l;const f=e+"CollectionItemSlot",h="data-radix-collection-item",m=za(f),g=Es.forwardRef((x,w)=>{const{scope:v,children:p,...y}=x,S=Es.useRef(null),j=je(w,S),E=o(f,v);return Es.useEffect(()=>(E.itemMap.set(S,{ref:S,...y}),()=>void E.itemMap.delete(S))),r.jsx(m,{[h]:"",ref:j,children:p})});g.displayName=f;function b(x){const w=o(e+"CollectionConsumer",x);return Es.useCallback(()=>{const p=w.collectionRef.current;if(!p)return[];const y=Array.from(p.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((E,N)=>y.indexOf(E.ref.current)-y.indexOf(N.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:i,Slot:d,ItemSlot:g},b,s]}var aD=u.createContext(void 0);function Si(e){const t=u.useContext(aD);return e||t||"ltr"}var Ff=0;function Rd(){u.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Zx()),document.body.insertAdjacentElement("beforeend",e[1]??Zx()),Ff++,()=>{Ff===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ff--}},[])}function Zx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Vf="focusScope.autoFocusOnMount",Yf="focusScope.autoFocusOnUnmount",Wx={bubbles:!1,cancelable:!0},rD="FocusScope",nc=u.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[l,c]=u.useState(null),d=Ct(a),f=Ct(o),h=u.useRef(null),m=je(t,x=>c(x)),g=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(s){let x=function(y){if(g.paused||!l)return;const S=y.target;l.contains(S)?h.current=S:na(h.current,{select:!0})},w=function(y){if(g.paused||!l)return;const S=y.relatedTarget;S!==null&&(l.contains(S)||na(h.current,{select:!0}))},v=function(y){if(document.activeElement===document.body)for(const j of y)j.removedNodes.length>0&&na(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",w);const p=new MutationObserver(v);return l&&p.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",w),p.disconnect()}}},[s,l,g.paused]),u.useEffect(()=>{if(l){ev.add(g);const x=document.activeElement;if(!l.contains(x)){const v=new CustomEvent(Vf,Wx);l.addEventListener(Vf,d),l.dispatchEvent(v),v.defaultPrevented||(oD(dD(NS(l)),{select:!0}),document.activeElement===x&&na(l))}return()=>{l.removeEventListener(Vf,d),setTimeout(()=>{const v=new CustomEvent(Yf,Wx);l.addEventListener(Yf,f),l.dispatchEvent(v),v.defaultPrevented||na(x??document.body,{select:!0}),l.removeEventListener(Yf,f),ev.remove(g)},0)}}},[l,d,f,g]);const b=u.useCallback(x=>{if(!n&&!s||g.paused)return;const w=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,v=document.activeElement;if(w&&v){const p=x.currentTarget,[y,S]=iD(p);y&&S?!x.shiftKey&&v===S?(x.preventDefault(),n&&na(y,{select:!0})):x.shiftKey&&v===y&&(x.preventDefault(),n&&na(S,{select:!0})):v===p&&x.preventDefault()}},[n,s,g.paused]);return r.jsx(xe.div,{tabIndex:-1,...i,ref:m,onKeyDown:b})});nc.displayName=rD;function oD(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(na(s,{select:t}),document.activeElement!==n)return}function iD(e){const t=NS(e),n=Jx(t,e),s=Jx(t.reverse(),e);return[n,s]}function NS(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Jx(e,t){for(const n of e)if(!lD(n,{upTo:t}))return n}function lD(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function cD(e){return e instanceof HTMLInputElement&&"select"in e}function na(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&cD(e)&&t&&e.select()}}var ev=uD();function uD(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=tv(e,t),e.unshift(t)},remove(t){var n;e=tv(e,t),(n=e[0])==null||n.resume()}}}function tv(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function dD(e){return e.filter(t=>t.tagName!=="A")}var Gf="rovingFocusGroup.onEntryFocus",fD={bubbles:!1,cancelable:!0},sc="RovingFocusGroup",[km,jS,hD]=Td(sc),[mD,Md]=fn(sc,[hD]),[pD,gD]=mD(sc),CS=u.forwardRef((e,t)=>r.jsx(km.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(km.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(xD,{...e,ref:t})})}));CS.displayName=sc;var xD=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...h}=e,m=u.useRef(null),g=je(t,m),b=Si(o),[x,w]=Ua({prop:i,defaultProp:l??null,onChange:c,caller:sc}),[v,p]=u.useState(!1),y=Ct(d),S=jS(n),j=u.useRef(!1),[E,N]=u.useState(0);return u.useEffect(()=>{const C=m.current;if(C)return C.addEventListener(Gf,y),()=>C.removeEventListener(Gf,y)},[y]),r.jsx(pD,{scope:n,orientation:s,dir:b,loop:a,currentTabStopId:x,onItemFocus:u.useCallback(C=>w(C),[w]),onItemShiftTab:u.useCallback(()=>p(!0),[]),onFocusableItemAdd:u.useCallback(()=>N(C=>C+1),[]),onFocusableItemRemove:u.useCallback(()=>N(C=>C-1),[]),children:r.jsx(xe.div,{tabIndex:v||E===0?-1:0,"data-orientation":s,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:ae(e.onMouseDown,()=>{j.current=!0}),onFocus:ae(e.onFocus,C=>{const A=!j.current;if(C.target===C.currentTarget&&A&&!v){const T=new CustomEvent(Gf,fD);if(C.currentTarget.dispatchEvent(T),!T.defaultPrevented){const z=S().filter(R=>R.focusable),M=z.find(R=>R.active),$=z.find(R=>R.id===x),k=[M,$,...z].filter(Boolean).map(R=>R.ref.current);AS(k,f)}}j.current=!1}),onBlur:ae(e.onBlur,()=>p(!1))})})}),ES="RovingFocusGroupItem",kS=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:o,children:i,...l}=e,c=qn(),d=o||c,f=gD(ES,n),h=f.currentTabStopId===d,m=jS(n),{onFocusableItemAdd:g,onFocusableItemRemove:b,currentTabStopId:x}=f;return u.useEffect(()=>{if(s)return g(),()=>b()},[s,g,b]),r.jsx(km.ItemSlot,{scope:n,id:d,focusable:s,active:a,children:r.jsx(xe.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:ae(e.onMouseDown,w=>{s?f.onItemFocus(d):w.preventDefault()}),onFocus:ae(e.onFocus,()=>f.onItemFocus(d)),onKeyDown:ae(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){f.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=bD(w,f.orientation,f.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let y=m().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")y.reverse();else if(v==="prev"||v==="next"){v==="prev"&&y.reverse();const S=y.indexOf(w.currentTarget);y=f.loop?wD(y,S+1):y.slice(S+1)}setTimeout(()=>AS(y))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:x!=null}):i})})});kS.displayName=ES;var vD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function yD(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function bD(e,t,n){const s=yD(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return vD[s]}function AS(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function wD(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var TS=CS,RS=kS,SD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},no=new WeakMap,_c=new WeakMap,Oc={},Qf=0,MS=function(e){return e&&(e.host||MS(e.parentNode))},ND=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=MS(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},jD=function(e,t,n,s){var a=ND(t,Array.isArray(e)?e:[e]);Oc[n]||(Oc[n]=new WeakMap);var o=Oc[n],i=[],l=new Set,c=new Set(a),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};a.forEach(d);var f=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))f(m);else try{var g=m.getAttribute(s),b=g!==null&&g!=="false",x=(no.get(m)||0)+1,w=(o.get(m)||0)+1;no.set(m,x),o.set(m,w),i.push(m),x===1&&b&&_c.set(m,!0),w===1&&m.setAttribute(n,"true"),b||m.setAttribute(s,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return f(t),l.clear(),Qf++,function(){i.forEach(function(h){var m=no.get(h)-1,g=o.get(h)-1;no.set(h,m),o.set(h,g),m||(_c.has(h)||h.removeAttribute(s),_c.delete(h)),g||h.removeAttribute(n)}),Qf--,Qf||(no=new WeakMap,no=new WeakMap,_c=new WeakMap,Oc={})}},_d=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=SD(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),jD(s,a,n,"aria-hidden")):function(){return null}},ns=function(){return ns=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ns.apply(this,arguments)};function _S(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function CD(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}var su="right-scroll-bar-position",au="width-before-scroll-bar",ED="with-scroll-bars-hidden",kD="--removed-body-scroll-bar-size";function Kf(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function AD(e,t){var n=u.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=t,n.facade}var TD=typeof window<"u"?u.useLayoutEffect:u.useEffect,nv=new WeakMap;function RD(e,t){var n=AD(null,function(s){return e.forEach(function(a){return Kf(a,s)})});return TD(function(){var s=nv.get(n);if(s){var a=new Set(s),o=new Set(e),i=n.current;a.forEach(function(l){o.has(l)||Kf(l,null)}),o.forEach(function(l){a.has(l)||Kf(l,i)})}nv.set(n,e)},[e]),n}function MD(e){return e}function _D(e,t){t===void 0&&(t=MD);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var i=t(o,s);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(s=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){s=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(o),i=n}var c=function(){var f=i;i=[],f.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(f){i.push(f),d()},filter:function(f){return i=i.filter(f),n}}}};return a}function OD(e){e===void 0&&(e={});var t=_D(null);return t.options=ns({async:!0,ssr:!1},e),t}var OS=function(e){var t=e.sideCar,n=_S(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return u.createElement(s,ns({},n))};OS.isSideCarExport=!0;function DD(e,t){return e.useMedium(t),OS}var DS=OD(),Xf=function(){},Od=u.forwardRef(function(e,t){var n=u.useRef(null),s=u.useState({onScrollCapture:Xf,onWheelCapture:Xf,onTouchMoveCapture:Xf}),a=s[0],o=s[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,g=e.noRelative,b=e.noIsolation,x=e.inert,w=e.allowPinchZoom,v=e.as,p=v===void 0?"div":v,y=e.gapMode,S=_S(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,E=RD([n,t]),N=ns(ns({},S),a);return u.createElement(u.Fragment,null,f&&u.createElement(j,{sideCar:DS,removeScrollBar:d,shards:h,noRelative:g,noIsolation:b,inert:x,setCallbacks:o,allowPinchZoom:!!w,lockRef:n,gapMode:y}),i?u.cloneElement(u.Children.only(l),ns(ns({},N),{ref:E})):u.createElement(p,ns({},N,{className:c,ref:E}),l))});Od.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Od.classNames={fullWidth:au,zeroRight:su};var LD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=LD();return t&&e.setAttribute("nonce",t),e}function PD(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ID(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var UD=function(){var e=0,t=null;return{add:function(n){e==0&&(t=zD())&&(PD(t,n),ID(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},$D=function(){var e=UD();return function(t,n){u.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},LS=function(){var e=$D(),t=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return t},BD={left:0,top:0,right:0,gap:0},Zf=function(e){return parseInt(e||"",10)||0},HD=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Zf(n),Zf(s),Zf(a)]},qD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return BD;var t=HD(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},FD=LS(),Do="data-scroll-locked",VD=function(e,t,n,s){var a=e.left,o=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(ED,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Do,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(su,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(au,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(su," .").concat(su,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(au," .").concat(au,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Do,`] {
    `).concat(kD,": ").concat(l,`px;
  }
`)},sv=function(){var e=parseInt(document.body.getAttribute(Do)||"0",10);return isFinite(e)?e:0},YD=function(){u.useEffect(function(){return document.body.setAttribute(Do,(sv()+1).toString()),function(){var e=sv()-1;e<=0?document.body.removeAttribute(Do):document.body.setAttribute(Do,e.toString())}},[])},GD=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;YD();var o=u.useMemo(function(){return qD(a)},[a]);return u.createElement(FD,{styles:VD(o,!t,a,n?"":"!important")})},Am=!1;if(typeof window<"u")try{var Dc=Object.defineProperty({},"passive",{get:function(){return Am=!0,!0}});window.addEventListener("test",Dc,Dc),window.removeEventListener("test",Dc,Dc)}catch{Am=!1}var so=Am?{passive:!1}:!1,QD=function(e){return e.tagName==="TEXTAREA"},zS=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!QD(e)&&n[t]==="visible")},KD=function(e){return zS(e,"overflowY")},XD=function(e){return zS(e,"overflowX")},av=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=PS(e,s);if(a){var o=IS(e,s),i=o[1],l=o[2];if(i>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},ZD=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},WD=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},PS=function(e,t){return e==="v"?KD(t):XD(t)},IS=function(e,t){return e==="v"?ZD(t):WD(t)},JD=function(e,t){return e==="h"&&t==="rtl"?-1:1},e5=function(e,t,n,s,a){var o=JD(e,window.getComputedStyle(t).direction),i=o*s,l=n.target,c=t.contains(l),d=!1,f=i>0,h=0,m=0;do{if(!l)break;var g=IS(e,l),b=g[0],x=g[1],w=g[2],v=x-w-o*b;(b||v)&&PS(e,l)&&(h+=v,m+=b);var p=l.parentNode;l=p&&p.nodeType===Node.DOCUMENT_FRAGMENT_NODE?p.host:p}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&Math.abs(h)<1||!f&&Math.abs(m)<1)&&(d=!0),d},Lc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rv=function(e){return[e.deltaX,e.deltaY]},ov=function(e){return e&&"current"in e?e.current:e},t5=function(e,t){return e[0]===t[0]&&e[1]===t[1]},n5=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},s5=0,ao=[];function a5(e){var t=u.useRef([]),n=u.useRef([0,0]),s=u.useRef(),a=u.useState(s5++)[0],o=u.useState(LS)[0],i=u.useRef(e);u.useEffect(function(){i.current=e},[e]),u.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var x=CD([e.lockRef.current],(e.shards||[]).map(ov),!0).filter(Boolean);return x.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=u.useCallback(function(x,w){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!i.current.allowPinchZoom;var v=Lc(x),p=n.current,y="deltaX"in x?x.deltaX:p[0]-v[0],S="deltaY"in x?x.deltaY:p[1]-v[1],j,E=x.target,N=Math.abs(y)>Math.abs(S)?"h":"v";if("touches"in x&&N==="h"&&E.type==="range")return!1;var C=av(N,E);if(!C)return!0;if(C?j=N:(j=N==="v"?"h":"v",C=av(N,E)),!C)return!1;if(!s.current&&"changedTouches"in x&&(y||S)&&(s.current=j),!j)return!0;var A=s.current||j;return e5(A,w,x,A==="h"?y:S)},[]),c=u.useCallback(function(x){var w=x;if(!(!ao.length||ao[ao.length-1]!==o)){var v="deltaY"in w?rv(w):Lc(w),p=t.current.filter(function(j){return j.name===w.type&&(j.target===w.target||w.target===j.shadowParent)&&t5(j.delta,v)})[0];if(p&&p.should){w.cancelable&&w.preventDefault();return}if(!p){var y=(i.current.shards||[]).map(ov).filter(Boolean).filter(function(j){return j.contains(w.target)}),S=y.length>0?l(w,y[0]):!i.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),d=u.useCallback(function(x,w,v,p){var y={name:x,delta:w,target:v,should:p,shadowParent:r5(v)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(S){return S!==y})},1)},[]),f=u.useCallback(function(x){n.current=Lc(x),s.current=void 0},[]),h=u.useCallback(function(x){d(x.type,rv(x),x.target,l(x,e.lockRef.current))},[]),m=u.useCallback(function(x){d(x.type,Lc(x),x.target,l(x,e.lockRef.current))},[]);u.useEffect(function(){return ao.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,so),document.addEventListener("touchmove",c,so),document.addEventListener("touchstart",f,so),function(){ao=ao.filter(function(x){return x!==o}),document.removeEventListener("wheel",c,so),document.removeEventListener("touchmove",c,so),document.removeEventListener("touchstart",f,so)}},[]);var g=e.removeScrollBar,b=e.inert;return u.createElement(u.Fragment,null,b?u.createElement(o,{styles:n5(a)}):null,g?u.createElement(GD,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function r5(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const o5=DD(DS,a5);var ac=u.forwardRef(function(e,t){return u.createElement(Od,ns({},e,{ref:t,sideCar:o5}))});ac.classNames=Od.classNames;var Tm=["Enter"," "],i5=["ArrowDown","PageUp","Home"],US=["ArrowUp","PageDown","End"],l5=[...i5,...US],c5={ltr:[...Tm,"ArrowRight"],rtl:[...Tm,"ArrowLeft"]},u5={ltr:["ArrowLeft"],rtl:["ArrowRight"]},rc="Menu",[Tl,d5,f5]=Td(rc),[Kr,$S]=fn(rc,[f5,Va,Md]),Dd=Va(),BS=Md(),[h5,Xr]=Kr(rc),[m5,oc]=Kr(rc),HS=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:a,onOpenChange:o,modal:i=!0}=e,l=Dd(t),[c,d]=u.useState(null),f=u.useRef(!1),h=Ct(o),m=Si(a);return u.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),r.jsx(Jp,{...l,children:r.jsx(h5,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:r.jsx(m5,{scope:t,onClose:u.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:m,modal:i,children:s})})})};HS.displayName=rc;var p5="MenuAnchor",fg=u.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=Dd(n);return r.jsx(Wl,{...a,...s,ref:t})});fg.displayName=p5;var hg="MenuPortal",[g5,qS]=Kr(hg,{forceMount:void 0}),FS=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:a}=e,o=Xr(hg,t);return r.jsx(g5,{scope:t,forceMount:n,children:r.jsx(Ot,{present:n||o.open,children:r.jsx(Jl,{asChild:!0,container:a,children:s})})})};FS.displayName=hg;var En="MenuContent",[x5,mg]=Kr(En),VS=u.forwardRef((e,t)=>{const n=qS(En,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,o=Xr(En,e.__scopeMenu),i=oc(En,e.__scopeMenu);return r.jsx(Tl.Provider,{scope:e.__scopeMenu,children:r.jsx(Ot,{present:s||o.open,children:r.jsx(Tl.Slot,{scope:e.__scopeMenu,children:i.modal?r.jsx(v5,{...a,ref:t}):r.jsx(y5,{...a,ref:t})})})})}),v5=u.forwardRef((e,t)=>{const n=Xr(En,e.__scopeMenu),s=u.useRef(null),a=je(t,s);return u.useEffect(()=>{const o=s.current;if(o)return _d(o)},[]),r.jsx(pg,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ae(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),y5=u.forwardRef((e,t)=>{const n=Xr(En,e.__scopeMenu);return r.jsx(pg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),b5=za("MenuContent.ScrollLock"),pg=u.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:b,...x}=e,w=Xr(En,n),v=oc(En,n),p=Dd(n),y=BS(n),S=d5(n),[j,E]=u.useState(null),N=u.useRef(null),C=je(t,N,w.onContentChange),A=u.useRef(0),T=u.useRef(""),z=u.useRef(0),M=u.useRef(null),$=u.useRef("right"),X=u.useRef(0),k=b?ac:u.Fragment,R=b?{as:b5,allowPinchZoom:!0}:void 0,B=U=>{var I,W;const L=T.current+U,P=S().filter(G=>!G.disabled),H=document.activeElement,Q=(I=P.find(G=>G.ref.current===H))==null?void 0:I.textValue,_=P.map(G=>G.textValue),se=_5(_,L,Q),te=(W=P.find(G=>G.textValue===se))==null?void 0:W.ref.current;(function G(F){T.current=F,window.clearTimeout(A.current),F!==""&&(A.current=window.setTimeout(()=>G(""),1e3))})(L),te&&setTimeout(()=>te.focus())};u.useEffect(()=>()=>window.clearTimeout(A.current),[]),Rd();const O=u.useCallback(U=>{var P,H;return $.current===((P=M.current)==null?void 0:P.side)&&D5(U,(H=M.current)==null?void 0:H.area)},[]);return r.jsx(x5,{scope:n,searchRef:T,onItemEnter:u.useCallback(U=>{O(U)&&U.preventDefault()},[O]),onItemLeave:u.useCallback(U=>{var L;O(U)||((L=N.current)==null||L.focus(),E(null))},[O]),onTriggerLeave:u.useCallback(U=>{O(U)&&U.preventDefault()},[O]),pointerGraceTimerRef:z,onPointerGraceIntentChange:u.useCallback(U=>{M.current=U},[]),children:r.jsx(k,{...R,children:r.jsx(nc,{asChild:!0,trapped:a,onMountAutoFocus:ae(o,U=>{var L;U.preventDefault(),(L=N.current)==null||L.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:r.jsx(gi,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:r.jsx(TS,{asChild:!0,...y,dir:v.dir,orientation:"vertical",loop:s,currentTabStopId:j,onCurrentTabStopIdChange:E,onEntryFocus:ae(c,U=>{v.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(yd,{role:"menu","aria-orientation":"vertical","data-state":iN(w.open),"data-radix-menu-content":"",dir:v.dir,...p,...x,ref:C,style:{outline:"none",...x.style},onKeyDown:ae(x.onKeyDown,U=>{const P=U.target.closest("[data-radix-menu-content]")===U.currentTarget,H=U.ctrlKey||U.altKey||U.metaKey,Q=U.key.length===1;P&&(U.key==="Tab"&&U.preventDefault(),!H&&Q&&B(U.key));const _=N.current;if(U.target!==_||!l5.includes(U.key))return;U.preventDefault();const te=S().filter(I=>!I.disabled).map(I=>I.ref.current);US.includes(U.key)&&te.reverse(),R5(te)}),onBlur:ae(e.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(A.current),T.current="")}),onPointerMove:ae(e.onPointerMove,Rl(U=>{const L=U.target,P=X.current!==U.clientX;if(U.currentTarget.contains(L)&&P){const H=U.clientX>X.current?"right":"left";$.current=H,X.current=U.clientX}}))})})})})})})});VS.displayName=En;var w5="MenuGroup",gg=u.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(xe.div,{role:"group",...s,ref:t})});gg.displayName=w5;var S5="MenuLabel",YS=u.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(xe.div,{...s,ref:t})});YS.displayName=S5;var Hu="MenuItem",iv="menu.itemSelect",Ld=u.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...a}=e,o=u.useRef(null),i=oc(Hu,e.__scopeMenu),l=mg(Hu,e.__scopeMenu),c=je(t,o),d=u.useRef(!1),f=()=>{const h=o.current;if(!n&&h){const m=new CustomEvent(iv,{bubbles:!0,cancelable:!0});h.addEventListener(iv,g=>s==null?void 0:s(g),{once:!0}),Jw(h,m),m.defaultPrevented?d.current=!1:i.onClose()}};return r.jsx(GS,{...a,ref:c,disabled:n,onClick:ae(e.onClick,f),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),d.current=!0},onPointerUp:ae(e.onPointerUp,h=>{var m;d.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:ae(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||Tm.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Ld.displayName=Hu;var GS=u.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:a,...o}=e,i=mg(Hu,n),l=BS(n),c=u.useRef(null),d=je(t,c),[f,h]=u.useState(!1),[m,g]=u.useState("");return u.useEffect(()=>{const b=c.current;b&&g((b.textContent??"").trim())},[o.children]),r.jsx(Tl.ItemSlot,{scope:n,disabled:s,textValue:a??m,children:r.jsx(RS,{asChild:!0,...l,focusable:!s,children:r.jsx(xe.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...o,ref:d,onPointerMove:ae(e.onPointerMove,Rl(b=>{s?i.onItemLeave(b):(i.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ae(e.onPointerLeave,Rl(b=>i.onItemLeave(b))),onFocus:ae(e.onFocus,()=>h(!0)),onBlur:ae(e.onBlur,()=>h(!1))})})})}),N5="MenuCheckboxItem",QS=u.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...a}=e;return r.jsx(JS,{scope:e.__scopeMenu,checked:n,children:r.jsx(Ld,{role:"menuitemcheckbox","aria-checked":qu(n)?"mixed":n,...a,ref:t,"data-state":vg(n),onSelect:ae(a.onSelect,()=>s==null?void 0:s(qu(n)?!0:!n),{checkForDefaultPrevented:!1})})})});QS.displayName=N5;var KS="MenuRadioGroup",[j5,C5]=Kr(KS,{value:void 0,onValueChange:()=>{}}),XS=u.forwardRef((e,t)=>{const{value:n,onValueChange:s,...a}=e,o=Ct(s);return r.jsx(j5,{scope:e.__scopeMenu,value:n,onValueChange:o,children:r.jsx(gg,{...a,ref:t})})});XS.displayName=KS;var ZS="MenuRadioItem",WS=u.forwardRef((e,t)=>{const{value:n,...s}=e,a=C5(ZS,e.__scopeMenu),o=n===a.value;return r.jsx(JS,{scope:e.__scopeMenu,checked:o,children:r.jsx(Ld,{role:"menuitemradio","aria-checked":o,...s,ref:t,"data-state":vg(o),onSelect:ae(s.onSelect,()=>{var i;return(i=a.onValueChange)==null?void 0:i.call(a,n)},{checkForDefaultPrevented:!1})})})});WS.displayName=ZS;var xg="MenuItemIndicator",[JS,E5]=Kr(xg,{checked:!1}),eN=u.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...a}=e,o=E5(xg,n);return r.jsx(Ot,{present:s||qu(o.checked)||o.checked===!0,children:r.jsx(xe.span,{...a,ref:t,"data-state":vg(o.checked)})})});eN.displayName=xg;var k5="MenuSeparator",tN=u.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(xe.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});tN.displayName=k5;var A5="MenuArrow",nN=u.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=Dd(n);return r.jsx(bd,{...a,...s,ref:t})});nN.displayName=A5;var T5="MenuSub",[Cz,sN]=Kr(T5),Fi="MenuSubTrigger",aN=u.forwardRef((e,t)=>{const n=Xr(Fi,e.__scopeMenu),s=oc(Fi,e.__scopeMenu),a=sN(Fi,e.__scopeMenu),o=mg(Fi,e.__scopeMenu),i=u.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,d={__scopeMenu:e.__scopeMenu},f=u.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return u.useEffect(()=>f,[f]),u.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),r.jsx(fg,{asChild:!0,...d,children:r.jsx(GS,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":iN(n.open),...e,ref:pd(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ae(e.onPointerMove,Rl(h=>{o.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:ae(e.onPointerLeave,Rl(h=>{var g,b;f();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const x=(b=n.content)==null?void 0:b.dataset.side,w=x==="right",v=w?-5:5,p=m[w?"left":"right"],y=m[w?"right":"left"];o.onPointerGraceIntentChange({area:[{x:h.clientX+v,y:h.clientY},{x:p,y:m.top},{x:y,y:m.top},{x:y,y:m.bottom},{x:p,y:m.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(h),h.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:ae(e.onKeyDown,h=>{var g;const m=o.searchRef.current!=="";e.disabled||m&&h.key===" "||c5[s.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});aN.displayName=Fi;var rN="MenuSubContent",oN=u.forwardRef((e,t)=>{const n=qS(En,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,o=Xr(En,e.__scopeMenu),i=oc(En,e.__scopeMenu),l=sN(rN,e.__scopeMenu),c=u.useRef(null),d=je(t,c);return r.jsx(Tl.Provider,{scope:e.__scopeMenu,children:r.jsx(Ot,{present:s||o.open,children:r.jsx(Tl.Slot,{scope:e.__scopeMenu,children:r.jsx(pg,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;i.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:ae(e.onFocusOutside,f=>{f.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:ae(e.onEscapeKeyDown,f=>{i.onClose(),f.preventDefault()}),onKeyDown:ae(e.onKeyDown,f=>{var g;const h=f.currentTarget.contains(f.target),m=u5[i.dir].includes(f.key);h&&m&&(o.onOpenChange(!1),(g=l.trigger)==null||g.focus(),f.preventDefault())})})})})})});oN.displayName=rN;function iN(e){return e?"open":"closed"}function qu(e){return e==="indeterminate"}function vg(e){return qu(e)?"indeterminate":e?"checked":"unchecked"}function R5(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function M5(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function _5(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=M5(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function O5(e,t){const{x:n,y:s}=e;let a=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o],c=t[i],d=l.x,f=l.y,h=c.x,m=c.y;f>s!=m>s&&n<(h-d)*(s-f)/(m-f)+d&&(a=!a)}return a}function D5(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return O5(n,t)}function Rl(e){return t=>t.pointerType==="mouse"?e(t):void 0}var L5=HS,z5=fg,P5=FS,I5=VS,U5=gg,$5=YS,B5=Ld,H5=QS,q5=XS,F5=WS,V5=eN,Y5=tN,G5=nN,Q5=aN,K5=oN,zd="DropdownMenu",[X5,Ez]=fn(zd,[$S]),Vt=$S(),[Z5,lN]=X5(zd),cN=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:a,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,c=Vt(t),d=u.useRef(null),[f,h]=Ua({prop:a,defaultProp:o??!1,onChange:i,caller:zd});return r.jsx(Z5,{scope:t,triggerId:qn(),triggerRef:d,contentId:qn(),open:f,onOpenChange:h,onOpenToggle:u.useCallback(()=>h(m=>!m),[h]),modal:l,children:r.jsx(L5,{...c,open:f,onOpenChange:h,dir:s,modal:l,children:n})})};cN.displayName=zd;var uN="DropdownMenuTrigger",dN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...a}=e,o=lN(uN,n),i=Vt(n);return r.jsx(z5,{asChild:!0,...i,children:r.jsx(xe.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:pd(t,o.triggerRef),onPointerDown:ae(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:ae(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});dN.displayName=uN;var W5="DropdownMenuPortal",fN=e=>{const{__scopeDropdownMenu:t,...n}=e,s=Vt(t);return r.jsx(P5,{...s,...n})};fN.displayName=W5;var hN="DropdownMenuContent",mN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=lN(hN,n),o=Vt(n),i=u.useRef(!1);return r.jsx(I5,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...s,ref:t,onCloseAutoFocus:ae(e.onCloseAutoFocus,l=>{var c;i.current||(c=a.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:ae(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,f=c.button===2||d;(!a.modal||f)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});mN.displayName=hN;var J5="DropdownMenuGroup",e3=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Vt(n);return r.jsx(U5,{...a,...s,ref:t})});e3.displayName=J5;var t3="DropdownMenuLabel",pN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Vt(n);return r.jsx($5,{...a,...s,ref:t})});pN.displayName=t3;var n3="DropdownMenuItem",gN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Vt(n);return r.jsx(B5,{...a,...s,ref:t})});gN.displayName=n3;var s3="DropdownMenuCheckboxItem",xN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Vt(n);return r.jsx(H5,{...a,...s,ref:t})});xN.displayName=s3;var a3="DropdownMenuRadioGroup",r3=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Vt(n);return r.jsx(q5,{...a,...s,ref:t})});r3.displayName=a3;var o3="DropdownMenuRadioItem",vN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Vt(n);return r.jsx(F5,{...a,...s,ref:t})});vN.displayName=o3;var i3="DropdownMenuItemIndicator",yN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Vt(n);return r.jsx(V5,{...a,...s,ref:t})});yN.displayName=i3;var l3="DropdownMenuSeparator",bN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Vt(n);return r.jsx(Y5,{...a,...s,ref:t})});bN.displayName=l3;var c3="DropdownMenuArrow",u3=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Vt(n);return r.jsx(G5,{...a,...s,ref:t})});u3.displayName=c3;var d3="DropdownMenuSubTrigger",wN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Vt(n);return r.jsx(Q5,{...a,...s,ref:t})});wN.displayName=d3;var f3="DropdownMenuSubContent",SN=u.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Vt(n);return r.jsx(K5,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});SN.displayName=f3;var h3=cN,m3=dN,p3=fN,NN=mN,jN=pN,CN=gN,EN=xN,kN=vN,AN=yN,TN=bN,RN=wN,MN=SN;const yg=h3,bg=m3,g3=u.forwardRef(({className:e,inset:t,children:n,...s},a)=>r.jsxs(RN,{ref:a,className:Ne("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s,children:[n,r.jsx(lg,{className:"ml-auto"})]}));g3.displayName=RN.displayName;const x3=u.forwardRef(({className:e,...t},n)=>r.jsx(MN,{ref:n,className:Ne("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));x3.displayName=MN.displayName;const Pd=u.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(p3,{children:r.jsx(NN,{ref:s,sideOffset:t,className:Ne("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Pd.displayName=NN.displayName;const Nr=u.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(CN,{ref:s,className:Ne("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));Nr.displayName=CN.displayName;const v3=u.forwardRef(({className:e,children:t,checked:n,...s},a)=>r.jsxs(EN,{ref:a,className:Ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(AN,{children:r.jsx(Ed,{className:"h-4 w-4"})})}),t]}));v3.displayName=EN.displayName;const y3=u.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(kN,{ref:s,className:Ne("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(AN,{children:r.jsx(z_,{className:"h-2 w-2 fill-current"})})}),t]}));y3.displayName=kN.displayName;const _N=u.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(jN,{ref:s,className:Ne("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));_N.displayName=jN.displayName;const Fu=u.forwardRef(({className:e,...t},n)=>r.jsx(TN,{ref:n,className:Ne("-mx-1 my-1 h-px bg-muted",e),...t}));Fu.displayName=TN.displayName;function lv(){const{setTheme:e}=aM();return r.jsxs(yg,{children:[r.jsx(bg,{asChild:!0,children:r.jsxs(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-muted/60 transition-all duration-200",children:[r.jsx(HO,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),r.jsx(vO,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),r.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),r.jsxs(Pd,{align:"end",children:[r.jsx(Nr,{onClick:()=>e("light"),children:"Light"}),r.jsx(Nr,{onClick:()=>e("dark"),children:"Dark"}),r.jsx(Nr,{onClick:()=>e("system"),children:"System"})]})]})}const b3=Cd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function He({className:e,variant:t,...n}){return r.jsx("div",{className:Ne(b3({variant:t}),e),...n})}function w3(){const{currentLanguage:e,setLanguage:t,supportedLanguages:n,getLanguageConfig:s,isTranslating:a}=ig(),o=s(e);return r.jsxs(yg,{children:[r.jsx(bg,{asChild:!0,children:r.jsxs(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-muted/60 transition-all duration-200",children:[a?r.jsx(Al,{className:"h-4 w-4 animate-spin"}):r.jsx("span",{className:"text-sm",children:(o==null?void 0:o.flag)||""}),r.jsx("span",{className:"sr-only",children:"Select language"})]})}),r.jsxs(Pd,{align:"end",className:"w-56",children:[r.jsxs(_N,{className:"flex items-center gap-2",children:[r.jsx(K_,{className:"h-4 w-4"}),"Choose Language"]}),r.jsx(Fu,{}),n.map(i=>r.jsxs(Nr,{onClick:()=>t(i.code),className:"flex items-center justify-between gap-2 cursor-pointer",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-base",children:i.flag}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:i.name}),r.jsx("span",{className:"text-xs text-muted-foreground",children:i.nativeName})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[i.gemmaSupported&&r.jsx(He,{variant:"secondary",className:"text-xs px-1.5 py-0.5",children:"AI"}),e===i.code&&r.jsx(Ed,{className:"h-4 w-4 text-primary"})]})]},i.code)),r.jsx(Fu,{}),r.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:" Powered by Gemma 3n AI"})]})]})}function S3({book:e,chapter:t,darkMode:n,onToggleDarkMode:s,onToggleAiChat:a,onToggleAutoLearning:o,onToggleChapterNotes:i,onToggleDiscussionAgent:l,onTogglePowerSummaries:c,onToggleQuizAgent:d,onToggleTeacherAgent:f,aiChatOpen:h=!1,autoLearningOpen:m=!1,chapterNotesOpen:g=!1,discussionAgentOpen:b=!1,powerSummariesOpen:x=!1,quizAgentOpen:w=!1,teacherAgentOpen:v=!1}){return r.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-border/50 bg-background/95 backdrop-blur-xl shadow-sm supports-[backdrop-filter]:bg-background/80 h-16 flex items-center",children:r.jsxs("div",{className:"container flex h-full items-center px-4 lg:px-6",children:[r.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-2 sm:px-4",children:r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[r.jsx("h1",{className:"text-sm sm:text-base lg:text-lg font-semibold tracking-tight text-foreground truncate max-w-[200px] sm:max-w-[300px] lg:max-w-none",children:e}),r.jsxs("div",{className:"flex items-center space-x-1 px-1.5 sm:px-2 py-1 rounded-md bg-primary/10 border border-primary/20",children:[r.jsx("span",{className:"text-xs font-medium text-primary hidden sm:inline",children:"Chapter"}),r.jsxs("span",{className:"text-xs font-bold text-primary",children:["Ch. ",t]})]})]})}),r.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3",children:[r.jsxs("div",{className:"hidden md:flex lg:flex items-center space-x-1",children:[r.jsxs("div",{className:"hidden lg:flex items-center space-x-1 px-2 py-1 rounded-lg bg-muted/30 border border-border/50",children:[r.jsxs(V,{variant:"ghost",size:"sm",onClick:i,className:`h-8 px-2.5 transition-all duration-200 ${g?"bg-green-500/10 text-green-700 border border-green-200/50":"hover:bg-muted/60"}`,title:"Chapter Notes",children:[r.jsx(Fn,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Notes"})]}),r.jsxs(V,{variant:"ghost",size:"sm",onClick:o,className:`h-8 px-2.5 transition-all duration-200 ${m?"bg-purple-500/10 text-purple-700 border border-purple-200/50":"hover:bg-muted/60"}`,title:"Auto Learning",children:[r.jsx(nn,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Learn"})]}),r.jsxs(V,{variant:"ghost",size:"sm",onClick:c,className:`h-8 px-2.5 transition-all duration-200 ${x?"bg-yellow-500/10 text-yellow-700 border border-yellow-200/50":"hover:bg-muted/60"}`,title:"Power Summaries",children:[r.jsx(Xt,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Summary"})]})]}),r.jsxs("div",{className:"hidden lg:flex items-center space-x-1 px-2 py-1 rounded-lg bg-muted/30 border border-border/50",children:[r.jsxs(V,{variant:"ghost",size:"sm",onClick:a,className:`h-8 px-2.5 transition-all duration-200 ${h?"bg-blue-500/10 text-blue-700 border border-blue-200/50":"hover:bg-muted/60"}`,title:"AI Chat Assistant",children:[r.jsx(Us,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Chat"})]}),r.jsxs(V,{variant:"ghost",size:"sm",onClick:l,className:`h-8 px-2.5 transition-all duration-200 ${b?"bg-indigo-500/10 text-indigo-700 border border-indigo-200/50":"hover:bg-muted/60"}`,title:"Discussion Agent",children:[r.jsx(cn,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Discuss"})]}),r.jsxs(V,{variant:"ghost",size:"sm",onClick:d,className:`h-8 px-2.5 transition-all duration-200 ${w?"bg-red-500/10 text-red-700 border border-red-200/50":"hover:bg-muted/60"}`,title:"Quiz Agent",children:[r.jsx(VO,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Quiz"})]}),r.jsxs(V,{variant:"ghost",size:"sm",onClick:f,className:`h-8 px-2.5 transition-all duration-200 ${v?"bg-orange-500/10 text-orange-700 border border-orange-200/50":"hover:bg-muted/60"}`,title:"Teacher Agent",children:[r.jsx(_o,{className:"h-4 w-4 mr-1.5"}),r.jsx("span",{className:"text-xs font-medium",children:"Teacher"})]})]}),r.jsxs("div",{className:"hidden md:flex lg:hidden items-center space-x-1 px-2 py-1 rounded-lg bg-muted/30 border border-border/50",children:[r.jsx(V,{variant:"ghost",size:"sm",onClick:a,className:`h-8 px-2 transition-all duration-200 ${h?"bg-blue-500/10 text-blue-700 border border-blue-200/50":"hover:bg-muted/60"}`,title:"AI Chat",children:r.jsx(Us,{className:"h-4 w-4"})}),r.jsx(V,{variant:"ghost",size:"sm",onClick:i,className:`h-8 px-2 transition-all duration-200 ${g?"bg-green-500/10 text-green-700 border border-green-200/50":"hover:bg-muted/60"}`,title:"Notes",children:r.jsx(Fn,{className:"h-4 w-4"})}),r.jsx(V,{variant:"ghost",size:"sm",onClick:c,className:`h-8 px-2 transition-all duration-200 ${x?"bg-yellow-500/10 text-yellow-700 border border-yellow-200/50":"hover:bg-muted/60"}`,title:"Summary",children:r.jsx(Xt,{className:"h-4 w-4"})}),r.jsx(V,{variant:"ghost",size:"sm",onClick:f,className:`h-8 px-2 transition-all duration-200 ${v?"bg-orange-500/10 text-orange-700 border border-orange-200/50":"hover:bg-muted/60"}`,title:"Teacher",children:r.jsx(_o,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"md:hidden flex items-center space-x-1",children:[r.jsx(V,{variant:"ghost",size:"sm",onClick:a,className:`h-8 w-8 p-0 transition-all duration-200 ${h?"bg-blue-500/10 text-blue-700 border border-blue-200/50":"hover:bg-muted/60"}`,title:"AI Chat",children:r.jsx(Us,{className:"h-4 w-4"})}),r.jsx(V,{variant:"ghost",size:"sm",onClick:i,className:`h-8 w-8 p-0 transition-all duration-200 ${g?"bg-green-500/10 text-green-700 border border-green-200/50":"hover:bg-muted/60"}`,title:"Notes",children:r.jsx(Fn,{className:"h-4 w-4"})}),r.jsx(V,{variant:"ghost",size:"sm",onClick:f,className:`h-8 w-8 p-0 transition-all duration-200 ${v?"bg-orange-500/10 text-orange-700 border border-orange-200/50":"hover:bg-muted/60"}`,title:"Teacher",children:r.jsx(_o,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"hidden sm:flex items-center space-x-1 px-2 py-1 rounded-lg bg-muted/30 border border-border/50",children:[r.jsx(w3,{}),r.jsx(lv,{})]}),r.jsx("div",{className:"sm:hidden flex items-center space-x-1",children:r.jsx(lv,{})}),r.jsxs(V,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-muted/60 transition-all duration-200",children:[r.jsx(wS,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"User profile"})]})]})]})})}var N3="Separator",cv="horizontal",j3=["horizontal","vertical"],ON=u.forwardRef((e,t)=>{const{decorative:n,orientation:s=cv,...a}=e,o=C3(s)?s:cv,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return r.jsx(xe.div,{"data-orientation":o,...l,...a,ref:t})});ON.displayName=N3;function C3(e){return j3.includes(e)}var DN=ON;const Qs=u.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},a)=>r.jsx(DN,{ref:a,decorative:n,orientation:t,className:Ne("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));Qs.displayName=DN.displayName;const xs={BOOKMARKS:"bible-companion-bookmarks",NOTES:"bible-companion-notes",HIGHLIGHTS:"bible-companion-highlights"};function wg(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch(t){return console.error(`Failed to load data from ${e}:`,t),[]}}function Zr(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(`Failed to save data to ${e}:`,n)}}function Gn(){return wg(xs.BOOKMARKS)}function LN(e){const t=Gn(),n={...e,id:`bookmark-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};return t.unshift(n),Zr(xs.BOOKMARKS,t),n}function E3(e,t){const n=Gn(),s=n.findIndex(a=>a.id===e);return s===-1?null:(n[s]={...n[s],...t},Zr(xs.BOOKMARKS,n),n[s])}function k3(e){const t=Gn(),n=t.filter(s=>s.id!==e);return n.length===t.length?!1:(Zr(xs.BOOKMARKS,n),!0)}function Ks(){return wg(xs.NOTES)}function A3(e){const t=Ks(),n={...e,id:`note-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};return t.unshift(n),Zr(xs.NOTES,t),n}function T3(e,t){const n=Ks(),s=n.findIndex(a=>a.id===e);return s===-1?null:(n[s]={...n[s],...t},Zr(xs.NOTES,n),n[s])}function R3(e){const t=Ks(),n=t.filter(s=>s.id!==e);return n.length===t.length?!1:(Zr(xs.NOTES,n),!0)}function Ml(){return wg(xs.HIGHLIGHTS)}function M3(e){const t=Ml(),n=t.filter(s=>s.id!==e);return n.length===t.length?!1:(Zr(xs.HIGHLIGHTS,n),!0)}function _3(e){const t=Gn(),n=e.toLowerCase();return t.filter(s=>{var a;return s.title.toLowerCase().includes(n)||s.content.toLowerCase().includes(n)||((a=s.notes)==null?void 0:a.toLowerCase().includes(n))||s.tags.some(o=>o.toLowerCase().includes(n))})}function O3(e){const t=Ks(),n=e.toLowerCase();return t.filter(s=>s.title.toLowerCase().includes(n)||s.content.toLowerCase().includes(n)||s.tags.some(a=>a.toLowerCase().includes(n)))}function D3(e){const t=Ml(),n=e.toLowerCase();return t.filter(s=>s.text.toLowerCase().includes(n))}function L3(){const e=Gn();return Array.from(new Set(e.map(t=>t.folder)))}function z3(){const e=Ks();return Array.from(new Set(e.map(t=>t.category)))}function zN(){const e=Gn(),t=Ks(),n=e.flatMap(a=>a.tags),s=t.flatMap(a=>a.tags);return Array.from(new Set([...n,...s]))}function P3({isOpen:e=!0,onToggle:t,currentPage:n="reader",documentId:s,currentChapter:a=1,totalChapters:o=1}){const[i,l]=u.useState(!1),[c,d]=u.useState(null),[f,h]=u.useState(!1),[m,g]=u.useState(0),[,b]=Gr();u.useEffect(()=>{l(!0),h(!0)},[]),u.useEffect(()=>{const N=Gn();g(N.length)},[]);const x=()=>{d("sidebar"),l(!1)},w=()=>{d(null),l(!0)},v=[{id:"home",label:"Home",icon:r.jsx(sO,{className:"w-6 h-6"}),href:"/",section:"main"},{id:"library",label:"Library",icon:r.jsx(mS,{className:"w-6 h-6"}),href:"/library",section:"main",active:n==="library"},{id:"reader",label:"Reader",icon:r.jsx($n,{className:"w-6 h-6"}),section:"main",active:n==="reader",badge:s?`${a}/${o}`:void 0},{id:"search",label:"Search",icon:r.jsx(Lr,{className:"w-6 h-6"}),href:"/search",section:"main"},{id:"bookmarks",label:"Bookmarks",icon:r.jsx(Dr,{className:"w-6 h-6"}),href:"/bookmarks",section:"main",badge:m>0?m.toString():void 0},{id:"reading-progress",label:"Progress",icon:r.jsx(dg,{className:"w-6 h-6"}),section:"analytics"},{id:"performance",label:"Analytics",icon:r.jsx(E_,{className:"w-6 h-6"}),href:"/performance",section:"analytics"},{id:"ai-chat",label:"AI Chat",icon:r.jsx(Us,{className:"w-6 h-6"}),href:"/agents",section:"ai",badge:"New"},{id:"ai-assistant",label:"Assistant",icon:r.jsx(cn,{className:"w-6 h-6"}),href:"/agents",section:"ai"}],p=[{id:"preferences",label:"Settings",icon:r.jsx(Oo,{className:"w-6 h-6"}),href:"/settings",section:"settings"},{id:"profile",label:"Profile",icon:r.jsx(wS,{className:"w-6 h-6"}),section:"settings"}],y=N=>{if(N.href&&(b(N.href),N.href==="/bookmarks")){const C=Gn();g(C.length)}N.onClick&&N.onClick()},S=N=>r.jsxs("div",{className:"relative group",onMouseEnter:()=>d(N.id),onMouseLeave:()=>d(null),children:[r.jsxs(V,{variant:N.active?"default":"ghost",className:`
          w-full h-11 px-3 transition-all duration-300 ease-out
          ${i?"justify-center px-2":"justify-start gap-3"}
          ${N.active?"bg-primary text-primary-foreground shadow-md scale-[1.02] ring-1 ring-primary/20":"hover:bg-muted/60 hover:shadow-sm hover:translate-x-1"}
          group-hover:shadow-lg transform-gpu
          rounded-lg
        `,onClick:()=>y(N),children:[r.jsx("div",{className:`
          flex items-center justify-center transition-all duration-200 ease-out
          ${N.active?"scale-110":"group-hover:scale-110"}
          w-5 h-5
        `,children:N.icon}),r.jsxs("div",{className:`
          flex-1 flex items-center justify-between overflow-hidden transition-all duration-300 ease-out
          ${i?"w-0 opacity-0 translate-x-2":"w-full opacity-100 translate-x-0"}
        `,children:[r.jsx("span",{className:"font-medium text-sm truncate",children:N.label}),N.badge&&r.jsx(He,{variant:N.active?"secondary":"outline",className:`
                ml-2 text-xs px-1.5 py-0.5 transition-all duration-200
                ${N.badge==="New"?"bg-green-100 text-green-700 border-green-200":""}
                ${N.badge==="AI"?"bg-blue-100 text-blue-700 border-blue-200":""}
                ${N.badge==="Pro"?"bg-purple-100 text-purple-700 border-purple-200":""}
                hover:scale-105
              `,children:N.badge})]})]}),i&&c===N.id&&r.jsx("div",{className:"absolute left-full ml-3 top-1/2 transform -translate-y-1/2 z-50 animate-in slide-in-from-left-4 zoom-in-95 duration-300",children:r.jsxs("div",{className:"bg-popover text-popover-foreground px-4 py-3 rounded-lg shadow-2xl border text-sm whitespace-nowrap backdrop-blur-lg",children:[r.jsx("div",{className:"font-medium",children:N.label}),N.badge&&r.jsx(He,{variant:"outline",className:"mt-1 text-xs animate-in scale-in-50 duration-200 delay-100",children:N.badge})]})})]},N.id),j=v.reduce((N,C)=>{const A=C.section||"main";return N[A]||(N[A]=[]),N[A].push(C),N},{}),E={main:"Navigation",analytics:"Analytics",ai:"AI Tools",settings:"Settings"};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`
          fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden transition-opacity duration-300
          ${e?"opacity-100":"opacity-0 pointer-events-none"}
        `,onClick:t}),r.jsxs("div",{className:`
           fixed left-0 top-0 h-full bg-background/95 backdrop-blur-sm border-r border-border/50 z-50
           transition-all duration-300 ease-out shadow-lg
           ${i?"w-16 hover:w-72":"w-72"}
           translate-x-0
           group
         `,onMouseEnter:x,onMouseLeave:w,children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border/50 h-14",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-1.5 bg-primary rounded-lg shadow-sm",children:r.jsx($n,{className:"w-4 h-4 text-primary-foreground"})}),r.jsx("div",{className:`
               transition-all duration-300 ease-out overflow-hidden
               ${i?"w-0 opacity-0":"w-auto opacity-100"}
             `,children:r.jsx("h2",{className:"font-semibold text-base whitespace-nowrap",children:"Library Companion"})})]}),r.jsx(V,{variant:"ghost",size:"sm",onClick:()=>l(!i),className:`
               h-8 w-8 p-0 transition-all duration-300 ease-out hover:bg-muted/60
               ${i?"rotate-180":"rotate-0"}
             `,children:r.jsx(Qx,{className:"w-4 h-4 transition-transform duration-300"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-4",children:[Object.entries(j).map(([N,C])=>r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:`
                transition-all duration-300 ease-out overflow-hidden
                ${i?"h-0 opacity-0":"h-auto opacity-100"}
              `,children:r.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider px-2 py-1.5",children:E[N]})}),r.jsx("div",{className:"space-y-1",children:C.map(S)}),N!=="settings"&&r.jsx("div",{className:`
                  transition-all duration-300 ease-out
                  ${i?"opacity-0":"opacity-100"}
                `,children:r.jsx(Qs,{className:"my-2"})})]},N)),r.jsxs("div",{className:"space-y-2 pt-2 border-t border-border/50",children:[r.jsx("div",{className:`
              transition-all duration-300 ease-out overflow-hidden
              ${i?"h-0 opacity-0":"h-auto opacity-100"}
            `,children:r.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider px-2 py-1.5",children:"Settings"})}),r.jsx("div",{className:"space-y-1",children:p.map(S)})]})]}),r.jsx("div",{className:"p-3 border-t border-border/50",children:r.jsx("div",{className:`
            transition-all duration-300 ease-out overflow-hidden
            ${i?"h-0 opacity-0":"h-auto opacity-100"}
          `,children:r.jsxs("div",{className:"bg-muted/50 rounded-lg p-2.5 space-y-1.5 hover:bg-muted/70 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:"Reading Session Active"})]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:s&&`Chapter ${a} of ${o}`})]})})}),r.jsx(V,{variant:"outline",size:"sm",onClick:t,className:`
            absolute -right-3 top-4 w-6 h-6 rounded-full bg-background border shadow-md
            hover:scale-110 transition-all duration-200 lg:hidden
            ${i&&!f?"opacity-0":"opacity-100"}
          `,children:r.jsx(Qx,{className:`w-3 h-3 transition-transform duration-200 ${e?"":"rotate-180"}`})})]})]})}const Oe=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ne("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Oe.displayName="Card";const Fe=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ne("flex flex-col space-y-1.5 p-6",e),...t}));Fe.displayName="CardHeader";const Qe=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ne("text-2xl font-semibold leading-none tracking-tight",e),...t}));Qe.displayName="CardTitle";const Bn=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ne("text-sm text-muted-foreground",e),...t}));Bn.displayName="CardDescription";const Ie=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ne("p-6 pt-0",e),...t}));Ie.displayName="CardContent";const I3=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ne("flex items-center p-6 pt-0",e),...t}));I3.displayName="CardFooter";var Id="Dialog",[PN,kz]=fn(Id),[U3,Xn]=PN(Id),IN=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:i=!0}=e,l=u.useRef(null),c=u.useRef(null),[d,f]=Ua({prop:s,defaultProp:a??!1,onChange:o,caller:Id});return r.jsx(U3,{scope:t,triggerRef:l,contentRef:c,contentId:qn(),titleId:qn(),descriptionId:qn(),open:d,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(h=>!h),[f]),modal:i,children:n})};IN.displayName=Id;var UN="DialogTrigger",$N=u.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Xn(UN,n),o=je(t,a.triggerRef);return r.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":jg(a.open),...s,ref:o,onClick:ae(e.onClick,a.onOpenToggle)})});$N.displayName=UN;var Sg="DialogPortal",[$3,BN]=PN(Sg,{forceMount:void 0}),HN=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:a}=e,o=Xn(Sg,t);return r.jsx($3,{scope:t,forceMount:n,children:u.Children.map(s,i=>r.jsx(Ot,{present:n||o.open,children:r.jsx(Jl,{asChild:!0,container:a,children:i})}))})};HN.displayName=Sg;var Vu="DialogOverlay",qN=u.forwardRef((e,t)=>{const n=BN(Vu,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=Xn(Vu,e.__scopeDialog);return o.modal?r.jsx(Ot,{present:s||o.open,children:r.jsx(H3,{...a,ref:t})}):null});qN.displayName=Vu;var B3=za("DialogOverlay.RemoveScroll"),H3=u.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Xn(Vu,n);return r.jsx(ac,{as:B3,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(xe.div,{"data-state":jg(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),zr="DialogContent",FN=u.forwardRef((e,t)=>{const n=BN(zr,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=Xn(zr,e.__scopeDialog);return r.jsx(Ot,{present:s||o.open,children:o.modal?r.jsx(q3,{...a,ref:t}):r.jsx(F3,{...a,ref:t})})});FN.displayName=zr;var q3=u.forwardRef((e,t)=>{const n=Xn(zr,e.__scopeDialog),s=u.useRef(null),a=je(t,n.contentRef,s);return u.useEffect(()=>{const o=s.current;if(o)return _d(o)},[]),r.jsx(VN,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ae(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ae(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:ae(e.onFocusOutside,o=>o.preventDefault())})}),F3=u.forwardRef((e,t)=>{const n=Xn(zr,e.__scopeDialog),s=u.useRef(!1),a=u.useRef(!1);return r.jsx(VN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=n.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),VN=u.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=e,l=Xn(zr,n),c=u.useRef(null),d=je(t,c);return Rd(),r.jsxs(r.Fragment,{children:[r.jsx(nc,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:r.jsx(gi,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":jg(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(V3,{titleId:l.titleId}),r.jsx(G3,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Ng="DialogTitle",YN=u.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Xn(Ng,n);return r.jsx(xe.h2,{id:a.titleId,...s,ref:t})});YN.displayName=Ng;var GN="DialogDescription",QN=u.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Xn(GN,n);return r.jsx(xe.p,{id:a.descriptionId,...s,ref:t})});QN.displayName=GN;var KN="DialogClose",XN=u.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=Xn(KN,n);return r.jsx(xe.button,{type:"button",...s,ref:t,onClick:ae(e.onClick,()=>a.onOpenChange(!1))})});XN.displayName=KN;function jg(e){return e?"open":"closed"}var ZN="DialogTitleWarning",[Az,WN]=dT(ZN,{contentName:zr,titleName:Ng,docsSlug:"dialog"}),V3=({titleId:e})=>{const t=WN(ZN),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return u.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Y3="DialogDescriptionWarning",G3=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${WN(Y3).contentName}}.`;return u.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},Q3=IN,K3=$N,X3=HN,JN=qN,ej=FN,tj=YN,nj=QN,Z3=XN;const Wr=Q3,sj=K3,W3=X3,aj=u.forwardRef(({className:e,...t},n)=>r.jsx(JN,{ref:n,className:Ne("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));aj.displayName=JN.displayName;const Ka=u.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(W3,{children:[r.jsx(aj,{}),r.jsxs(ej,{ref:s,className:Ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,r.jsxs(Z3,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(dn,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ka.displayName=ej.displayName;const Xa=({className:e,...t})=>r.jsx("div",{className:Ne("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Xa.displayName="DialogHeader";const Ud=({className:e,...t})=>r.jsx("div",{className:Ne("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ud.displayName="DialogFooter";const Za=u.forwardRef(({className:e,...t},n)=>r.jsx(tj,{ref:n,className:Ne("text-lg font-semibold leading-none tracking-tight",e),...t}));Za.displayName=tj.displayName;const Ni=u.forwardRef(({className:e,...t},n)=>r.jsx(nj,{ref:n,className:Ne("text-sm text-muted-foreground",e),...t}));Ni.displayName=nj.displayName;const dt=u.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:Ne("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...n}));dt.displayName="Input";var J3="Label",rj=u.forwardRef((e,t)=>r.jsx(xe.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));rj.displayName=J3;var oj=rj;const e6=Cd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ut=u.forwardRef(({className:e,...t},n)=>r.jsx(oj,{ref:n,className:Ne(e6(),e),...t}));Ut.displayName=oj.displayName;function t6({onUploadSuccess:e}){const[t,n]=u.useState(null),[s,a]=u.useState(!1),{toast:o}=Ft(),i=d=>{var h;const f=(h=d.target.files)==null?void 0:h[0];if(f){if(!["application/pdf","text/plain"].includes(f.type)){o({title:"Invalid file type",description:"Please select a PDF or TXT file",variant:"destructive"});return}if(f.size>10*1024*1024){o({title:"File too large",description:"Please select a file smaller than 10MB",variant:"destructive"});return}n(f)}},l=async()=>{if(!t)return;a(!0);const d=new FormData;d.append("file",t);try{await is("/api/documents/upload",{method:"POST",body:d}),o({title:"Upload successful",description:`${t.name} has been processed and is ready to read`}),n(null),e()}catch{o({title:"Upload failed",description:"There was an error processing your document. Please try again.",variant:"destructive"})}finally{a(!1)}},c=d=>d==="application/pdf"?r.jsx(cg,{className:"h-8 w-8 text-red-500"}):r.jsx(Fn,{className:"h-8 w-8 text-blue-500"});return r.jsxs(Oe,{className:"w-full max-w-md mx-auto",children:[r.jsxs(Fe,{children:[r.jsxs(Qe,{className:"flex items-center gap-2",children:[r.jsx(Em,{className:"h-5 w-5"}),"Upload Document"]}),r.jsx(Bn,{children:"Upload PDF or TXT files to start reading with intelligent chapter detection"})]}),r.jsxs(Ie,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ut,{htmlFor:"file-upload",children:"Select File"}),r.jsx(dt,{id:"file-upload",type:"file",accept:".pdf,.txt,text/plain,application/pdf",onChange:i,disabled:s})]}),t&&r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted rounded-lg",children:[c(t.type),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:t.name}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[(t.size/1024/1024).toFixed(2)," MB"]})]})]}),r.jsx(V,{onClick:l,disabled:!t||s,className:"w-full",children:s?r.jsxs(r.Fragment,{children:[r.jsx(Al,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Em,{className:"mr-2 h-4 w-4"}),"Upload & Process"]})}),r.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[r.jsx("p",{children:" Supported formats: PDF, TXT"}),r.jsx("p",{children:" Maximum file size: 10MB"}),r.jsx("p",{children:" Chapters will be automatically detected"})]})]})]})}function n6(){return r.jsxs(Oe,{className:"overflow-hidden animate-pulse",children:[r.jsx(Fe,{className:"pb-3",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-muted to-muted/60 rounded-lg skeleton-shimmer"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 bg-gradient-to-r from-muted to-muted/60 rounded skeleton-shimmer"}),r.jsx("div",{className:"h-3 bg-gradient-to-r from-muted to-muted/60 rounded w-2/3 skeleton-shimmer"})]})]})})}),r.jsx(Ie,{className:"pt-0",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-16 h-6 bg-gradient-to-r from-muted to-muted/60 rounded skeleton-shimmer"}),r.jsx("div",{className:"w-12 h-6 bg-gradient-to-r from-muted to-muted/60 rounded skeleton-shimmer"})]}),r.jsx("div",{className:"w-20 h-4 bg-gradient-to-r from-muted to-muted/60 rounded skeleton-shimmer"})]})})]})}function s6({document:e,isOpen:t,onClose:n,onSelect:s}){return e?r.jsx(Wr,{open:t,onOpenChange:n,children:r.jsxs(Ka,{className:"max-w-2xl animate-in fade-in-0 zoom-in-95 slide-in-from-bottom-4 duration-300",children:[r.jsx(Xa,{children:r.jsxs(Za,{className:"flex items-center gap-2 animate-in slide-in-from-left-3 duration-300 delay-100",children:[r.jsx(x_,{className:"h-5 w-5 text-primary animate-pulse"}),e.title]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4 animate-in slide-in-from-left-3 duration-300 delay-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(cg,{className:"h-4 w-4"}),e.filename]}),r.jsxs(He,{variant:"secondary",className:"animate-in scale-in-50 duration-300 delay-300",children:[r.jsx($n,{className:"h-3 w-3 mr-1"}),e.totalChapters," chapters"]}),r.jsx(He,{variant:"outline",className:"animate-in scale-in-50 duration-300 delay-400",children:e.fileType.toUpperCase()})]}),r.jsx(Oe,{className:"animate-in slide-in-from-bottom-3 duration-300 delay-300",children:r.jsxs(Ie,{className:"pt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Xt,{className:"h-5 w-5 text-primary animate-pulse"}),r.jsx("h3",{className:"font-semibold",children:"Document Information"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"animate-in slide-in-from-left-2 duration-300 delay-500",children:[r.jsx("span",{className:"text-muted-foreground",children:"Added on:"}),r.jsx("p",{className:"font-medium",children:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),r.jsxs("div",{className:"animate-in slide-in-from-right-2 duration-300 delay-600",children:[r.jsx("span",{className:"text-muted-foreground",children:"File type:"}),r.jsxs("p",{className:"font-medium",children:[e.fileType.toUpperCase()," Document"]})]})]})]})}),r.jsxs("div",{className:"flex gap-3 animate-in slide-in-from-bottom-3 duration-300 delay-400",children:[r.jsxs(V,{onClick:()=>s(e),className:"flex-1 group hover:scale-105 transition-all duration-200 hover:shadow-lg",children:[r.jsx(fS,{className:"mr-2 h-4 w-4 group-hover:animate-pulse"}),"Open Document"]}),r.jsx(V,{variant:"outline",className:"hover:scale-105 transition-all duration-200 hover:shadow-lg",children:r.jsx($u,{className:"h-4 w-4"})})]})]})]})}):null}function Rm({onSelectDocument:e}){const[t,n]=u.useState(!1),[s,a]=u.useState(""),[o,i]=u.useState(null),[l,c]=u.useState(!1),[d,f]=u.useState("grid"),{toast:h}=Ft(),m=Fa(),{data:g=[],isLoading:b}=Cn({queryKey:["/api/documents"],queryFn:()=>is("/api/documents")}),{data:x=[]}=Cn({queryKey:["/api/reading-progress"],queryFn:()=>is("/api/reading-progress")}),w=Xl({mutationFn:A=>is(`/api/documents/${A}`,{method:"DELETE"}),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/documents"]}),h({title:"Document deleted",description:"The document has been removed from your library"})},onError:()=>{h({title:"Delete failed",description:"Failed to delete the document. Please try again.",variant:"destructive"})}}),v=()=>{m.invalidateQueries({queryKey:["/api/documents"]}),n(!1)},p=(A,T)=>{A.stopPropagation(),confirm("Are you sure you want to delete this document?")&&w.mutate(T)},y=(A,T)=>{A.stopPropagation(),i(T),c(!0)},S=A=>A==="pdf"?r.jsx($n,{className:"h-10 w-10 text-slate-700 dark:text-slate-300 group-hover:scale-110 transition-transform duration-200"}):r.jsx($n,{className:"h-10 w-10 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform duration-200"}),j=g.filter(A=>A.title.toLowerCase().includes(s.toLowerCase())||A.filename.toLowerCase().includes(s.toLowerCase())),E=A=>{const T=JSON.parse(localStorage.getItem("readingPositions")||"{}");if(T[A])return T[A].chapter;const z=x.filter(M=>M.documentId===A);return z.length>0?Math.max(...z.map($=>$.chapter)):1},N=A=>{const T=JSON.parse(localStorage.getItem("readingPositions")||"{}");let z=1;if(T[A.id])z=T[A.id].chapter;else{const M=x.filter($=>$.documentId===A.id);M.length>0&&(z=Math.max(...M.map($=>$.chapter)))}return!A.totalChapters||A.totalChapters===0?0:Math.round(z/A.totalChapters*100)},C=A=>{alert(`Show chapter summary for: ${A.title}`)};return t?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 animate-in fade-in-0 duration-500",children:r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsx(V,{variant:"outline",onClick:()=>n(!1),className:"mb-4 hover:scale-105 transition-all duration-200 hover:shadow-md",children:" Back to Library"})}),r.jsx(t6,{onUploadSuccess:v})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"sticky top-0 z-30 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-sm rounded-b-2xl px-6 py-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4 border-b border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-400/20 to-purple-400/10 rounded-xl shadow-md",children:r.jsx(mS,{className:"h-8 w-8 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-extrabold tracking-tight text-slate-900 dark:text-white mb-1",children:"Document Library"}),r.jsx("p",{className:"text-base text-slate-500 dark:text-slate-300",children:"All your study documents in one place"})]})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs(V,{variant:"outline",className:"rounded-full px-4 py-2 shadow-md hover:shadow-lg bg-white/70 dark:bg-slate-800/70 backdrop-blur-md",onClick:()=>n(!0),children:[r.jsx(Ma,{className:"h-5 w-5 mr-2"}),"Add Document"]})})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-8 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(dt,{placeholder:"Search documents...",value:s,onChange:A=>a(A.target.value),className:"pl-12 pr-10 py-3 rounded-full shadow focus:shadow-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-lg transition-all"}),r.jsx(Lr,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-blue-400"}),s&&r.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-red-500 transition-colors",onClick:()=>a(""),"aria-label":"Clear search",children:""})]}),r.jsx(V,{variant:d==="grid"?"default":"outline",size:"icon",className:"rounded-full shadow-md hover:shadow-lg",onClick:()=>f("grid"),title:"Grid view",children:r.jsx(rO,{className:"h-5 w-5"})}),r.jsx(V,{variant:d==="list"?"default":"outline",size:"icon",className:"rounded-full shadow-md hover:shadow-lg",onClick:()=>f("list"),title:"List view",children:r.jsx(uO,{className:"h-5 w-5"})})]}),b?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Array.from({length:4}).map((A,T)=>r.jsx("div",{className:"animate-in slide-in-from-bottom-3 duration-500",style:{animationDelay:`${T*100}ms`},children:r.jsx(n6,{})},T))}):j.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-in fade-in-0 zoom-in-95 duration-500",children:[r.jsx("div",{className:"p-6 bg-muted/50 rounded-full mb-6 animate-pulse",children:r.jsx($n,{className:"h-16 w-16 text-muted-foreground"})}),r.jsx("h3",{className:"text-2xl font-semibold mb-3 animate-in slide-in-from-bottom-3 duration-500 delay-200",children:s?"No documents found":"Your library is empty"}),r.jsx("p",{className:"text-muted-foreground text-lg mb-8 text-center max-w-md animate-in slide-in-from-bottom-3 duration-500 delay-300",children:s?"Try adjusting your search terms or browse all documents":"Start building your digital library by uploading your first document"}),!s&&r.jsxs(V,{onClick:()=>n(!0),size:"lg",className:"animate-in slide-in-from-bottom-3 duration-500 delay-400 hover:scale-105 transition-all hover:shadow-xl group",children:[r.jsx(Ma,{className:"mr-2 h-5 w-5 group-hover:rotate-90 transition-transform duration-200"}),"Upload Your First Document"]})]}):r.jsx("div",{className:`grid gap-6 ${d==="grid"?"grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4":"grid-cols-1 max-w-6xl"}`,children:j.map(A=>r.jsxs("div",{className:"group relative rounded-3xl bg-white/90 dark:bg-slate-900/90 shadow-xl hover:shadow-2xl border border-slate-200/50 dark:border-slate-700/50 transition-all duration-500 cursor-pointer hover:scale-[1.03] hover:-translate-y-1 overflow-hidden backdrop-blur-lg",onClick:()=>e(A,E(A.id)),children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/50 to-transparent dark:from-slate-800/50 pointer-events-none"}),r.jsxs("div",{className:"relative p-8",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[S(A.fileType),N(A)>0&&r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white dark:border-slate-900 flex items-center justify-center",children:r.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white line-clamp-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors leading-tight",children:A.title}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 truncate",children:A.filename})]})]}),r.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-all duration-300 flex-shrink-0 ml-2",children:[r.jsx(V,{variant:"ghost",size:"icon",onClick:T=>y(T,A),className:"rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/50 h-8 w-8 shadow-sm",title:"Preview",children:r.jsx(fS,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),r.jsx(V,{variant:"ghost",size:"icon",onClick:T=>{T.stopPropagation(),C(A)},className:"rounded-full hover:bg-purple-100 dark:hover:bg-purple-900/50 h-8 w-8 shadow-sm",title:"Show summary",children:r.jsx(Xt,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),r.jsx(V,{variant:"ghost",size:"icon",onClick:T=>p(T,A.id),className:"rounded-full hover:bg-red-100 dark:hover:bg-red-900/50 h-8 w-8 shadow-sm",disabled:w.isPending,title:"Delete",children:w.isPending?r.jsx(Al,{className:"h-4 w-4 animate-spin text-red-600 dark:text-red-400"}):r.jsx(Qa,{className:"h-4 w-4 text-red-600 dark:text-red-400"})})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-6",children:[r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800",children:[r.jsx($n,{className:"h-3 w-3 mr-1.5"}),A.totalChapters," chapters"]}),r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-200 dark:border-slate-700",children:[r.jsx(cg,{className:"h-3 w-3 mr-1.5"}),A.fileType.toUpperCase()]}),N(A)>0&&r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 border border-emerald-200 dark:border-emerald-800",children:[r.jsx(pS,{className:"h-3 w-3 mr-1.5"}),"In Progress"]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:N(A)>0?"Reading Progress":"Ready to start"}),r.jsxs("span",{className:"text-slate-500 dark:text-slate-400 font-mono",children:[N(A),"%"]})]}),r.jsx("div",{className:"relative w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5 overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-full transition-all duration-1000 ease-out relative",style:{width:`${N(A)}%`},children:N(A)>0&&r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("div",{className:"flex items-center gap-1.5 text-slate-500 dark:text-slate-400",children:N(A)>0?r.jsxs(r.Fragment,{children:[r.jsx(tc,{className:"h-3 w-3"}),r.jsxs("span",{children:["Chapter ",E(A.id)]})]}):r.jsxs(r.Fragment,{children:[r.jsx(vS,{className:"h-3 w-3"}),r.jsx("span",{children:"New document"})]})}),r.jsx("div",{className:"text-slate-400 dark:text-slate-500",children:N(A)>0?"Continue reading":"Start reading"})]})]})]})]},A.id))}),r.jsx(s6,{document:o,isOpen:l,onClose:()=>c(!1),onSelect:A=>e(A,E(A.id))})]})})}const Qn=u.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:Ne("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Qn.displayName="Textarea";function $d({isOpen:e,onClose:t,selectedText:n,documentId:s,documentTitle:a,chapter:o,paragraph:i,onAnnotationSaved:l}){const[c,d]=u.useState("");Fa();const{toast:f}=Ft(),h=Xl({mutationFn:async b=>await is("/api/annotations",{method:"POST",body:b}),onSuccess:b=>{l==null||l({...b,note:c}),d(""),t(),f({title:"Note saved successfully",description:"Your note has been saved and the text has been highlighted."})},onError:()=>{f({title:"Failed to save note",description:"There was a problem saving your note. Please try again.",variant:"destructive"})}}),m=()=>{c.trim()&&h.mutate({documentId:s,chapter:o,paragraph:i,selectedText:n,note:c.trim()})},g=()=>{d(""),t()};return r.jsx(Wr,{open:e,onOpenChange:g,children:r.jsxs(Ka,{className:"max-w-lg border-border",children:[r.jsxs(Xa,{className:"space-y-3",children:[r.jsxs(Za,{className:"text-xl font-semibold flex items-center gap-2",children:[r.jsx(hs,{className:"w-5 h-5 text-amber-500"}),"Add Study Note"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your personal notes and insights to this text"})]}),r.jsxs("div",{className:"space-y-6 mt-6",children:[r.jsxs("div",{children:[r.jsxs(Ut,{className:"text-sm font-medium mb-3 flex items-center gap-2",children:[r.jsx(Dr,{className:"w-4 h-4 text-blue-500"}),"Selected Text"]}),r.jsx("div",{className:"p-4 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/30 dark:to-orange-900/30 border border-amber-200 dark:border-amber-700 rounded-lg text-sm leading-relaxed",children:r.jsxs("span",{className:"font-bold text-black dark:text-white",children:['"',n,'"']})})]}),r.jsxs("div",{children:[r.jsxs(Ut,{htmlFor:"note",className:"text-sm font-medium mb-3 flex items-center gap-2",children:[r.jsx(jO,{className:"w-4 h-4 text-green-500"}),"Your Note"]}),r.jsx(Qn,{id:"note",value:c,onChange:b=>d(b.target.value),placeholder:"Share your thoughts, insights, or reflections on this text...",rows:5,className:"resize-none"}),r.jsxs("div",{className:"mt-2 text-xs text-muted-foreground text-right",children:[c.length," characters"]})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx(V,{variant:"outline",onClick:g,className:"flex-1",disabled:h.isPending,children:"Cancel"}),r.jsx(V,{onClick:m,className:"flex-1",disabled:!c.trim()||h.isPending,children:h.isPending?r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving Note..."]}):r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Ed,{className:"w-4 h-4"}),"Save Note"]})})]})]})]})})}function a6({onTextSelected:e,onHighlightRemoved:t,highlightColors:n=["bg-yellow-200 dark:bg-yellow-800/40","bg-blue-200 dark:bg-blue-800/40","bg-green-200 dark:bg-green-800/40","bg-pink-200 dark:bg-pink-800/40","bg-purple-200 dark:bg-purple-800/40","bg-orange-200 dark:bg-orange-800/40"]}){const[s,a]=u.useState(null),[o,i]=u.useState([]),[l,c]=u.useState(n[0]),[d,f]=u.useState(!1),[h,m]=u.useState({x:0,y:0}),g=u.useRef(null),b=u.useCallback(()=>{const p=window.getSelection();if(!p||p.rangeCount===0){a(null),f(!1);return}const y=p.getRangeAt(0),S=p.toString().trim();if(console.log(" Raw selection text:",`"${p.toString()}"`),console.log(" Trimmed text:",`"${S}"`),console.log(" Text length:",S.length),console.log(" Range details:",{startOffset:y.startOffset,endOffset:y.endOffset,collapsed:y.collapsed}),S.length===0){a(null),f(!1);return}let j=y.commonAncestorContainer;if(j.nodeType===Node.TEXT_NODE&&(j=j.parentElement),!j||!(j instanceof Element)){a(null),f(!1);return}if(!j.closest("p[data-verse], p[data-paragraph]")){a(null),f(!1);return}const{startContainer:N,endContainer:C}=y,A=N.nodeType===Node.TEXT_NODE?N.parentElement:N,T=C.nodeType===Node.TEXT_NODE?C.parentElement:C;if(!A.closest("p[data-verse], p[data-paragraph]")||!T.closest("p[data-verse], p[data-paragraph]")){a(null),f(!1);return}if(A.closest("p[data-verse], p[data-paragraph]")!==T.closest("p[data-verse], p[data-paragraph]")){a(null),f(!1);return}const z=y.getBoundingClientRect(),M=z.left+z.width/2,$=z.top-60;a({text:S,range:y,rect:z}),m({x:M,y:$}),f(!0)},[]),x=u.useCallback((p=l)=>{var C,A,T;if(!s)return;const y=`highlight-${Date.now()}`,S=s.text,j=s.range.cloneRange(),E={id:y,text:S,range:j,color:p,position:{x:s.rect.left,y:s.rect.top}};console.log(" Enhanced selection - Original text:",S),console.log(" Enhanced selection - Text length:",S.length);const N={startOffset:j.startOffset,endOffset:j.endOffset,containerText:j.startContainer.textContent||"",beforeText:((C=j.startContainer.textContent)==null?void 0:C.substring(0,j.startOffset))||"",afterText:((A=j.endContainer.textContent)==null?void 0:A.substring(j.endOffset))||""};console.log(" Selection context:",N);try{const z=document.createElement("span");z.className=`highlight-text ${p}`,z.setAttribute("data-highlight-id",y),z.setAttribute("data-selection-highlight","true"),z.textContent=S,z.title="Highlighted text",s.range.deleteContents(),s.range.insertNode(z),i(k=>[...k,E]);const M=document.createRange(),$=j.commonAncestorContainer.nodeType===Node.TEXT_NODE?j.commonAncestorContainer.parentElement:j.commonAncestorContainer;$&&(M.selectNodeContents($),console.log(" Context range created for:",$.tagName),console.log(" Full context text:",M.toString().substring(0,100)+"..."));const X=new CustomEvent("preciseTextSelection",{detail:{text:S,selectionContext:N,type:"highlight"}});document.dispatchEvent(X),e==null||e(S,j,"highlight"),setTimeout(()=>{z.style.transition="all 0.3s ease",z.style.transform="scale(1.02)",setTimeout(()=>{z.style.transform="scale(1)"},300)},10)}catch(z){console.warn("Failed to create highlight:",z)}(T=window.getSelection())==null||T.removeAllRanges(),a(null),f(!1)},[s,l,e]),w=u.useCallback(async()=>{if(s)try{await navigator.clipboard.writeText(s.text);const p=g.current;p&&(p.classList.add("animate-pulse"),setTimeout(()=>p.classList.remove("animate-pulse"),500))}catch(p){console.warn("Failed to copy text:",p)}},[s]),v=u.useCallback(async()=>{if(s)if(navigator.share)try{await navigator.share({text:s.text,title:"Shared Text"})}catch(p){console.warn("Failed to share:",p)}else w()},[s,w]);return u.useEffect(()=>(document.addEventListener("mouseup",b),document.addEventListener("keyup",b),()=>{document.removeEventListener("mouseup",b),document.removeEventListener("keyup",b)}),[b]),u.useEffect(()=>{const p=y=>{g.current&&!g.current.contains(y.target)&&f(!1)};if(d)return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[d]),!d||!s?null:r.jsxs("div",{ref:g,className:"fixed z-50 animate-in slide-in-from-bottom duration-300 gpu-accelerated",style:{left:h.x,top:h.y,transform:"translateX(-50%)"},children:[r.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-3 theme-transition card-hover note-creation",children:[r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 text-center study-stagger-1",children:"Study Highlighter"}),r.jsxs("div",{className:"flex items-center gap-2 pr-2 border-r border-gray-200 dark:border-gray-700 study-stagger-2",children:[r.jsx(bO,{className:"w-4 h-4 text-gray-500 dark:text-gray-400 study-timer"}),n.map((p,y)=>r.jsx("button",{className:`w-7 h-7 rounded-full border-2 transition-all duration-300 hover:scale-125 hover:rotate-12 ${p} ${l===p?"border-gray-900 dark:border-white shadow-lg scale-110 note-highlight":"border-gray-300 dark:border-gray-600"} highlight-apply`,style:{animationDelay:`${y*75}ms`},onClick:()=>c(p),title:`Study highlight color ${y+1}`},p))]})]}),r.jsxs("div",{className:"flex items-center gap-2 study-stagger-3",children:[r.jsx(V,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0 btn-scale hover:scale-110 transition-all duration-300 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 study-stagger-1",onClick:()=>x(),title:"Create study highlight",children:r.jsx(Bu,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400 note-highlight"})}),r.jsx(V,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0 btn-scale hover:scale-110 transition-all duration-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 study-stagger-2",onClick:w,title:"Copy to clipboard",children:r.jsx(U_,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),r.jsx(V,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0 btn-scale hover:scale-110 transition-all duration-300 hover:bg-green-50 dark:hover:bg-green-900/20 study-stagger-3",onClick:v,title:"Share selection",children:r.jsx(DO,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),r.jsx(V,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0 btn-scale hover:scale-110 transition-all duration-300 hover:bg-purple-50 dark:hover:bg-purple-900/20 bookmark-save study-stagger-4",onClick:()=>e==null?void 0:e(s.text,s.range),title:"Add bookmark",children:r.jsx(b_,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),r.jsx(V,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0 btn-scale hover:scale-110 transition-all duration-300 hover:bg-amber-50 dark:hover:bg-amber-900/20 note-creation study-stagger-5",onClick:()=>e==null?void 0:e(s.text,s.range,"note"),title:"Add study note",children:r.jsx(hs,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})})]}),r.jsx("div",{className:"pl-2 border-l border-gray-200 dark:border-gray-700",children:r.jsx(V,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 btn-scale animate-in slide-in-from-right",onClick:()=>f(!1),title:"Close",children:r.jsx(dn,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})})]}),r.jsxs("div",{className:"mt-2 bg-gray-900/90 dark:bg-gray-100/90 text-white dark:text-gray-900 text-xs px-2 py-1 rounded backdrop-blur-sm text-center animate-in fade-in delay-200",children:[s.text.length," characters selected"]})]})}function _l(e,[t,n]){return Math.min(n,Math.max(t,e))}function r6(e,t){return u.useReducer((n,s)=>t[n][s]??n,e)}var Cg="ScrollArea",[ij,Tz]=fn(Cg),[o6,Tn]=ij(Cg),lj=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:a,scrollHideDelay:o=600,...i}=e,[l,c]=u.useState(null),[d,f]=u.useState(null),[h,m]=u.useState(null),[g,b]=u.useState(null),[x,w]=u.useState(null),[v,p]=u.useState(0),[y,S]=u.useState(0),[j,E]=u.useState(!1),[N,C]=u.useState(!1),A=je(t,z=>c(z)),T=Si(a);return r.jsx(o6,{scope:n,type:s,dir:T,scrollHideDelay:o,scrollArea:l,viewport:d,onViewportChange:f,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:b,scrollbarXEnabled:j,onScrollbarXEnabledChange:E,scrollbarY:x,onScrollbarYChange:w,scrollbarYEnabled:N,onScrollbarYEnabledChange:C,onCornerWidthChange:p,onCornerHeightChange:S,children:r.jsx(xe.div,{dir:T,...i,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});lj.displayName=Cg;var cj="ScrollAreaViewport",uj=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:a,...o}=e,i=Tn(cj,n),l=u.useRef(null),c=je(t,l,i.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),r.jsx(xe.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});uj.displayName=cj;var vs="ScrollAreaScrollbar",Eg=u.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=Tn(vs,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=a,l=e.orientation==="horizontal";return u.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),a.type==="hover"?r.jsx(i6,{...s,ref:t,forceMount:n}):a.type==="scroll"?r.jsx(l6,{...s,ref:t,forceMount:n}):a.type==="auto"?r.jsx(dj,{...s,ref:t,forceMount:n}):a.type==="always"?r.jsx(kg,{...s,ref:t}):null});Eg.displayName=vs;var i6=u.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=Tn(vs,e.__scopeScrollArea),[o,i]=u.useState(!1);return u.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),i(!0)},f=()=>{c=window.setTimeout(()=>i(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),r.jsx(Ot,{present:n||o,children:r.jsx(dj,{"data-state":o?"visible":"hidden",...s,ref:t})})}),l6=u.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=Tn(vs,e.__scopeScrollArea),o=e.orientation==="horizontal",i=Hd(()=>c("SCROLL_END"),100),[l,c]=r6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return u.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),u.useEffect(()=>{const d=a.viewport,f=o?"scrollLeft":"scrollTop";if(d){let h=d[f];const m=()=>{const g=d[f];h!==g&&(c("SCROLL"),i()),h=g};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[a.viewport,o,c,i]),r.jsx(Ot,{present:n||l!=="hidden",children:r.jsx(kg,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:ae(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ae(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),dj=u.forwardRef((e,t)=>{const n=Tn(vs,e.__scopeScrollArea),{forceMount:s,...a}=e,[o,i]=u.useState(!1),l=e.orientation==="horizontal",c=Hd(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?d:f)}},10);return ri(n.viewport,c),ri(n.content,c),r.jsx(Ot,{present:s||o,children:r.jsx(kg,{"data-state":o?"visible":"hidden",...a,ref:t})})}),kg=u.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,a=Tn(vs,e.__scopeScrollArea),o=u.useRef(null),i=u.useRef(0),[l,c]=u.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=gj(l.viewport,l.content),f={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m};function h(m,g){return m6(m,i.current,l,g)}return n==="horizontal"?r.jsx(c6,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const m=a.viewport.scrollLeft,g=uv(m,l,a.dir);o.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?r.jsx(u6,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&o.current){const m=a.viewport.scrollTop,g=uv(m,l);o.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),c6=u.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...a}=e,o=Tn(vs,e.__scopeScrollArea),[i,l]=u.useState(),c=u.useRef(null),d=je(t,c,o.onScrollbarXChange);return u.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(hj,{"data-orientation":"horizontal",...a,ref:d,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Bd(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(o.viewport){const m=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),vj(m,h)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&s({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Gu(i.paddingLeft),paddingEnd:Gu(i.paddingRight)}})}})}),u6=u.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...a}=e,o=Tn(vs,e.__scopeScrollArea),[i,l]=u.useState(),c=u.useRef(null),d=je(t,c,o.onScrollbarYChange);return u.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(hj,{"data-orientation":"vertical",...a,ref:d,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Bd(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(o.viewport){const m=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),vj(m,h)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&i&&s({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Gu(i.paddingTop),paddingEnd:Gu(i.paddingBottom)}})}})}),[d6,fj]=ij(vs),hj=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:a,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:f,onResize:h,...m}=e,g=Tn(vs,n),[b,x]=u.useState(null),w=je(t,A=>x(A)),v=u.useRef(null),p=u.useRef(""),y=g.viewport,S=s.content-s.viewport,j=Ct(f),E=Ct(c),N=Hd(h,10);function C(A){if(v.current){const T=A.clientX-v.current.left,z=A.clientY-v.current.top;d({x:T,y:z})}}return u.useEffect(()=>{const A=T=>{const z=T.target;(b==null?void 0:b.contains(z))&&j(T,S)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[y,b,S,j]),u.useEffect(E,[s,E]),ri(b,N),ri(g.content,N),r.jsx(d6,{scope:n,scrollbar:b,hasThumb:a,onThumbChange:Ct(o),onThumbPointerUp:Ct(i),onThumbPositionChange:E,onThumbPointerDown:Ct(l),children:r.jsx(xe.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:ae(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),v.current=b.getBoundingClientRect(),p.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),C(A))}),onPointerMove:ae(e.onPointerMove,C),onPointerUp:ae(e.onPointerUp,A=>{const T=A.target;T.hasPointerCapture(A.pointerId)&&T.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=p.current,g.viewport&&(g.viewport.style.scrollBehavior=""),v.current=null})})})}),Yu="ScrollAreaThumb",mj=u.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=fj(Yu,e.__scopeScrollArea);return r.jsx(Ot,{present:n||a.hasThumb,children:r.jsx(f6,{ref:t,...s})})}),f6=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...a}=e,o=Tn(Yu,n),i=fj(Yu,n),{onThumbPositionChange:l}=i,c=je(t,h=>i.onThumbChange(h)),d=u.useRef(void 0),f=Hd(()=>{d.current&&(d.current(),d.current=void 0)},100);return u.useEffect(()=>{const h=o.viewport;if(h){const m=()=>{if(f(),!d.current){const g=p6(h,l);d.current=g,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[o.viewport,f,l]),r.jsx(xe.div,{"data-state":i.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:ae(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),b=h.clientX-g.left,x=h.clientY-g.top;i.onThumbPointerDown({x:b,y:x})}),onPointerUp:ae(e.onPointerUp,i.onThumbPointerUp)})});mj.displayName=Yu;var Ag="ScrollAreaCorner",pj=u.forwardRef((e,t)=>{const n=Tn(Ag,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?r.jsx(h6,{...e,ref:t}):null});pj.displayName=Ag;var h6=u.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,a=Tn(Ag,n),[o,i]=u.useState(0),[l,c]=u.useState(0),d=!!(o&&l);return ri(a.scrollbarX,()=>{var h;const f=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(f),c(f)}),ri(a.scrollbarY,()=>{var h;const f=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(f),i(f)}),d?r.jsx(xe.div,{...s,ref:t,style:{width:o,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Gu(e){return e?parseInt(e,10):0}function gj(e,t){const n=e/t;return isNaN(n)?0:n}function Bd(e){const t=gj(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function m6(e,t,n,s="ltr"){const a=Bd(n),o=a/2,i=t||o,l=a-i,c=n.scrollbar.paddingStart+i,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,h=s==="ltr"?[0,f]:[f*-1,0];return xj([c,d],h)(e)}function uv(e,t,n="ltr"){const s=Bd(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-a,i=t.content-t.viewport,l=o-s,c=n==="ltr"?[0,i]:[i*-1,0],d=_l(e,c);return xj([0,i],[0,l])(d)}function xj(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function vj(e,t){return e>0&&e<t}var p6=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},i=n.left!==o.left,l=n.top!==o.top;(i||l)&&t(),n=o,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function Hd(e,t){const n=Ct(e),s=u.useRef(0);return u.useEffect(()=>()=>window.clearTimeout(s.current),[]),u.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function ri(e,t){const n=Ct(t);kt(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,n])}var yj=lj,g6=uj,x6=pj;const $s=u.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(yj,{ref:s,className:Ne("relative overflow-hidden",e),...n,children:[r.jsx(g6,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(bj,{}),r.jsx(x6,{})]}));$s.displayName=yj.displayName;const bj=u.forwardRef(({className:e,orientation:t="vertical",...n},s)=>r.jsx(Eg,{ref:s,orientation:t,className:Ne("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:r.jsx(mj,{className:"relative flex-1 rounded-full bg-border"})}));bj.displayName=Eg.displayName;class v6{constructor(){this.learningDatabase=new Map,this.agentSubscriptions=new Map,this.crossReferences=new Map}subscribeAgent(t,n){this.agentSubscriptions.has(t)||this.agentSubscriptions.set(t,[]),this.agentSubscriptions.get(t).push(n)}unsubscribeAgent(t){this.agentSubscriptions.delete(t)}async addLearning(t){this.learningDatabase.set(t.id,t),this.updateCrossReferences(t);try{await fetch("/api/ai-learning/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(n){console.warn("Server persistence failed, continuing with local storage:",n instanceof Error?n.message:"Unknown error")}this.safelyBroadcastToAgents({fromAgent:t.agentSource,toAgent:"all",type:"share-learning",data:{term:t.term,content:t.content,context:t.context,relatedTerms:t.relatedTerms},timestamp:new Date().toISOString()})}getLearning(t){const n=[];Array.from(this.learningDatabase.entries()).forEach(([a,o])=>{(o.term.toLowerCase().includes(t.toLowerCase())||o.content.toLowerCase().includes(t.toLowerCase()))&&n.push(o)});const s=this.crossReferences.get(t.toLowerCase())||[];for(const a of s)Array.from(this.learningDatabase.entries()).forEach(([o,i])=>{i.term.toLowerCase()===a&&!n.includes(i)&&n.push(i)});return n.sort((a,o)=>o.context.confidence-a.context.confidence)}getContextualLearning(t,n){const s=[];return Array.from(this.learningDatabase.entries()).forEach(([a,o])=>{var i;((i=o.context.book)==null?void 0:i.toLowerCase())===t.toLowerCase()&&(!n||o.context.chapter===n)&&s.push(o)}),s.sort((a,o)=>new Date(o.context.timestamp).getTime()-new Date(a.context.timestamp).getTime())}getSmartSuggestions(t,n,s){const a=t?this.getContextualLearning(t,n):[],o=Array.from(this.learningDatabase.values()).sort((l,c)=>new Date(c.context.timestamp).getTime()-new Date(l.context.timestamp).getTime()).slice(0,10),i=[];return a.slice(0,3).forEach(l=>{i.push(`Explain: ${l.term}`),l.relatedTerms.slice(0,2).forEach(c=>{i.push(`Define: ${c}`)})}),o.slice(0,2).forEach(l=>{i.some(c=>c.includes(l.term))||i.push(`More about: ${l.term}`)}),i.slice(0,6)}async requestInformation(t,n,s){const a=this.getLearning(n);return this.safelyBroadcastToAgents({fromAgent:t,toAgent:"all",type:"request-info",data:{query:n,context:s},timestamp:new Date().toISOString()}),a}shareInsight(t,n,s,a=[]){const o={id:`insight-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,agentSource:t,type:"insight",term:s.term||"general insight",content:n,context:{book:s.book,chapter:s.chapter,timestamp:new Date().toISOString(),confidence:.8},relatedTerms:a,sources:s.sources||[],metadata:s};this.addLearning(o)}async getExpertInsights(t){try{const n=this.getContextualLearning(t);return n.length===0?null:{masteredConcepts:n.filter(a=>a.context.confidence>.7).map(a=>a.term).filter((a,o,i)=>i.indexOf(a)===o).slice(0,10)}}catch(n){return console.error("Failed to get expert insights:",n),null}}getAgentStats(){const t={};return Array.from(this.learningDatabase.entries()).forEach(([n,s])=>{const a=s.agentSource;t[a]||(t[a]={learningCount:0,lastActivity:s.context.timestamp}),t[a].learningCount++,new Date(s.context.timestamp)>new Date(t[a].lastActivity)&&(t[a].lastActivity=s.context.timestamp)}),t}updateCrossReferences(t){const n=t.term.toLowerCase();t.relatedTerms.forEach(s=>{const a=s.toLowerCase();this.crossReferences.has(a)||this.crossReferences.set(a,[]),this.crossReferences.get(a).includes(n)||this.crossReferences.get(a).push(n)}),this.crossReferences.has(n)||this.crossReferences.set(n,[]),t.relatedTerms.forEach(s=>{const a=s.toLowerCase();this.crossReferences.get(n).includes(a)||this.crossReferences.get(n).push(a)})}broadcastToAgents(t){if(t.toAgent==="all")Array.from(this.agentSubscriptions.entries()).forEach(([n,s])=>{n!==t.fromAgent&&s.forEach(a=>{try{a(t)}catch(o){console.error(`Error broadcasting to agent ${n}:`,o)}})});else{const n=this.agentSubscriptions.get(t.toAgent);n&&n.forEach(s=>{try{s(t)}catch(a){console.error(`Error sending to agent ${t.toAgent}:`,a)}})}}safelyBroadcastToAgents(t){const n=Array.from(this.agentSubscriptions.keys()),s=t.toAgent==="all"?n.filter(i=>i!==t.fromAgent):[t.toAgent];if(s.length===0){console.info(` No agents subscribed to receive communication from ${t.fromAgent}`);return}let a=0,o=0;s.forEach(i=>{const l=this.agentSubscriptions.get(i);l?l.forEach(c=>{try{c(t),a++}catch(d){o++,console.warn(` Agent ${i} failed to receive communication:`,d instanceof Error?d.message:"Unknown error")}}):console.info(` Agent ${i} not currently subscribed`)}),a>0&&console.info(` Successfully notified ${a} agents about "${t.data.term}"`),o>0&&console.warn(` Failed to notify ${o} agents (they may not be running)`)}async initialize(){try{const t=await fetch("/api/ai-learning/all");t.ok&&(await t.json()).learningData.forEach(s=>{this.learningDatabase.set(s.id,s),this.updateCrossReferences(s)})}catch(t){console.error("Failed to initialize learning service:",t)}}async sendFeedback(t){try{const n=await fetch("/api/ai-learning/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const s=await n.json().catch(()=>({message:"Failed to submit feedback"}));throw new Error(s.message)}}catch(n){throw console.error("Error submitting feedback:",n),n}}}const ks=new v6;ks.initialize();function qd(){const e=a_(),{currentLanguage:t}=ig();return{...e,sendMessage:async(i,l)=>{const c={...l,language:t};return console.log(` Sending message with language: ${t}`),e.sendMessage(i,c)},sendQuizRequest:async(i,l)=>{if(!e.socket||!e.isConnected)throw new Error("Not connected to agent system");const c={...l,language:t,sessionId:e.sessionId,userId:(l==null?void 0:l.userId)||2};return console.log(` Sending quiz request in language: ${t}`),new Promise((d,f)=>{const h=setTimeout(()=>{f(new Error("Quiz request timeout"))},6e4);e.socket.emit("quizMessage",{message:i,context:c},m=>{clearTimeout(h),m!=null&&m.error?f(new Error(m.error)):d()})})},sendDiscussionMessage:async(i,l)=>{if(!e.socket||!e.isConnected)throw new Error("Not connected to agent system");const c={message:i,sessionId:e.sessionId,userId:(l==null?void 0:l.userId)||2,documentId:l==null?void 0:l.documentId,chapter:l==null?void 0:l.chapter,mode:l==null?void 0:l.mode,language:t,conversationHistory:(l==null?void 0:l.conversationHistory)||[]};return console.log(" Sending discussion message with payload:",{...c,conversationHistoryLength:c.conversationHistory.length}),new Promise((d,f)=>{const h=setTimeout(()=>{f(new Error("Discussion message timeout"))},18e4);e.socket.emit("discussionMessage",c,m=>{clearTimeout(h),m!=null&&m.error?f(new Error(m.error)):d()})})},requestAnalysis:async(i,l,c)=>e.requestAnalysis(i,l,c),currentLanguage:t,isLanguageAware:!0}}const y6={chat:{icon:Us,name:"AI Assistant",color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30",borderColor:"border-blue-200 dark:border-blue-800"},learning:{icon:nn,name:"Learning Agent",color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-100 dark:bg-purple-900/30",borderColor:"border-purple-200 dark:border-purple-800"},discussion:{icon:eD,name:"Discussion Agent",color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-100 dark:bg-orange-900/30",borderColor:"border-orange-200 dark:border-orange-800"},summary:{icon:Xt,name:"Summary Agent",color:"text-yellow-600 dark:text-yellow-400",bgColor:"bg-yellow-100 dark:bg-yellow-900/30",borderColor:"border-yellow-200 dark:border-yellow-800"},navigation:{icon:cn,name:"Navigation Agent",color:"text-green-600 dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30",borderColor:"border-green-200 dark:border-green-800"}};function Tg({isTyping:e,agentType:t="chat",estimatedTime:n=3,currentProgress:s=0,customMessage:a}){const[o,i]=u.useState(""),[l,c]=u.useState(""),[d,f]=u.useState(!1),h=y6[t],m=h.icon,g=["Thinking...","Processing your request...","Analyzing content...","Generating response...","Almost ready...","Finalizing thoughts..."];return u.useEffect(()=>{if(!e){i("");return}const b=setInterval(()=>{i(x=>x.length>=3?"":x+".")},500);return()=>clearInterval(b)},[e]),u.useEffect(()=>{if(!e){c(""),f(!1);return}f(n>5);let b=0;if(c(a||g[0]),!a){const x=setInterval(()=>{b=(b+1)%g.length,c(g[b])},2e3);return()=>clearInterval(x)}},[e,a,n]),e?r.jsxs("div",{className:"flex items-start gap-3 p-4 animate-in slide-in-from-left duration-500",children:[r.jsx("div",{className:`
        flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center
        ${h.bgColor} ${h.borderColor} border-2 shadow-sm
        animate-in bounce-in duration-300
      `,children:r.jsx(m,{className:`w-5 h-5 ${h.color} animate-pulse`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1 animate-in fade-in delay-200",children:h.name}),r.jsxs("div",{className:`
          inline-block max-w-sm p-3 rounded-2xl rounded-tl-sm
          ${h.bgColor} ${h.borderColor} border
          shadow-sm animate-in scale-in duration-300 delay-300
        `,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"1.4s"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"200ms",animationDuration:"1.4s"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"400ms",animationDuration:"1.4s"}})]}),r.jsxs("div",{className:`text-sm ${h.color} font-medium animate-in fade-in delay-500`,children:[l,o]})]}),d&&r.jsxs("div",{className:"mt-3 animate-in slide-in-from-bottom delay-700",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Progress"}),r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:[Math.round(s),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:r.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ease-out bg-gradient-to-r ${t==="chat"?"from-blue-500 to-blue-600":t==="learning"?"from-purple-500 to-purple-600":t==="discussion"?"from-orange-500 to-orange-600":t==="summary"?"from-yellow-500 to-yellow-600":"from-green-500 to-green-600"}`,style:{width:`${s}%`}})}),n>0&&r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 animate-in fade-in delay-1000",children:["Estimated: ",n,"s remaining"]})]})]}),r.jsxs("div",{className:"mt-2 flex items-center gap-2 animate-in slide-in-from-left delay-1000",children:[r.jsx("div",{className:"flex space-x-1",children:[0,1,2,3,4].map(b=>r.jsx("div",{className:`w-1 h-1 rounded-full transition-all duration-300 ${h.color.replace("text-","bg-")}`,style:{animationDelay:`${b*100}ms`,animation:"pulse 2s infinite ease-in-out"}},b))}),r.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 animate-pulse",children:"AI is analyzing..."})]})]})]}):null}const Wf="aiAgentChatPanelPosition",dv="aiAgentChatPanelMinimized";function b6({documentId:e,chapter:t,isOpen:n,onToggle:s}){const[a,o]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(()=>typeof window<"u"?localStorage.getItem(dv)==="true":!1),[f,h]=u.useState(""),[m,g]=u.useState(!1),[b,x]=u.useState(!1),[w,v]=u.useState(0),[p,y]=u.useState("chat"),[S,j]=u.useState(!1),[E,N]=u.useState(!1),C=u.useRef(null),[A,T]=u.useState(()=>{if(typeof window<"u"){const oe=localStorage.getItem(Wf);if(oe)try{const de=JSON.parse(oe);if(typeof de.x=="number"&&typeof de.y=="number")return de}catch{}}const Z=window.innerWidth-400-16,Y=window.innerHeight-600-16;return{x:Math.max(20,Z),y:Math.max(96,Y)}}),[z,M]=u.useState(!1),[$,X]=u.useState({x:0,y:0}),[k,R]=u.useState({x:0,y:0}),B=u.useRef(null),O=u.useRef(null),U=u.useRef(),{toast:L}=Ft(),[P,H]=u.useState({}),[Q,_]=u.useState(null),[se,te]=u.useState(""),{socket:I,isConnected:W,sessionId:G,serverRestartDetected:F,sendMessage:ne,requestAnalysis:ee}=qd();u.useEffect(()=>{var Z;(Z=C.current)==null||Z.scrollIntoView({behavior:"smooth"})},[a]),u.useEffect(()=>{a.length>1&&G&&Re()},[a,G]),u.useEffect(()=>{G&&e&&ce()&&console.log(" Loaded saved AI chat conversation")},[G,e]),u.useEffect(()=>{F&&(console.log(" Server restart detected in AI chat, clearing conversation"),o([]),localStorage.removeItem(le()))},[F]),u.useEffect(()=>{if(U.current===void 0){U.current=t;return}if(U.current!==t&&t!==void 0){const Z={id:`msg-system-${Date.now()}`,role:"system",content:`Context updated to Chapter ${t}.`,timestamp:new Date,agent:"System"};o(Y=>[...Y,Z]),L({title:"Context Updated",description:`The AI is now aware you are on chapter ${t}.`,duration:3e3}),U.current=t}},[t,L]);const le=()=>`ai_chat_${e||"general"}_${G}`,Re=()=>{try{j(!0);const Z={messages:a,documentId:e,chapter:t,lastUpdated:new Date().toISOString(),sessionId:G};localStorage.setItem(le(),JSON.stringify(Z)),setTimeout(()=>j(!1),500)}catch(Z){console.error("Failed to save AI chat conversation:",Z),j(!1)}},ce=()=>{try{const Z=localStorage.getItem(le());if(Z){const Y=JSON.parse(Z),oe=new Date(Y.lastUpdated);if((new Date().getTime()-oe.getTime())/(1e3*60*60)<24&&Y.sessionId===G)return o(Y.messages.map(me=>({...me,timestamp:new Date(me.timestamp)}))),!0}return!1}catch(Z){return console.error("Failed to load saved AI chat conversation:",Z),!1}},Se=()=>{confirm("Are you sure you want to clear this conversation? This action cannot be undone.")&&(o([]),localStorage.removeItem(le()),L({title:"Conversation Cleared",description:"Chat history has been cleared.",duration:2e3}))},De=()=>{const Z={title:`AI Chat: ${e?`Document ${e}`:"General"} ${t?`- Chapter ${t}`:""}`,timestamp:new Date().toISOString(),messages:a.map(q=>({role:q.role,content:q.content,timestamp:q.timestamp.toISOString(),agent:q.agent})),metadata:{documentId:e,chapter:t,sessionId:G}},Y=new Blob([JSON.stringify(Z,null,2)],{type:"application/json"}),oe=URL.createObjectURL(Y),de=document.createElement("a");de.href=oe,de.download=`ai-chat-${e||"general"}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(oe),L({title:"Conversation Exported",description:"Chat history has been exported as JSON file.",duration:2e3})};u.useEffect(()=>{I&&(I.on("chatResponse",Y=>{var de,q;const oe=Y.isExpertResponse?`${(de=Y.expertise)==null?void 0:de.domain} Expert (Level ${(q=Y.expertise)==null?void 0:q.expertiseLevel}/10)`:"StudyAssistant";qe("assistant",Y.message,oe)}),I.on("analysisCompleted",Y=>{qe("system",`Analysis completed for ${Y.documentId}, Chapter ${Y.chapter}`,"TextAnalysis")}),I.on("insightsGenerated",Y=>{qe("system",`New insights generated: ${Y.insights.length} insights available`,"InsightGeneration")}));const Z=Y=>{if(Y.type==="share-learning")ks.getLearning(Y.data.term).length>0&&qe("system",` Other AI agents learned about "${Y.data.term}": ${Y.data.content}`,Y.fromAgent);else if(Y.type==="request-info"){const oe=a.filter(de=>de.content.toLowerCase().includes(Y.data.query.toLowerCase()));oe.length>0&&ks.shareInsight("chat",`Found ${oe.length} relevant conversation insights about "${Y.data.query}"`,{term:Y.data.query,conversationContext:!0},$e(oe.map(de=>de.content).join(" ")))}};return ks.subscribeAgent("chat",Z),()=>{I&&(I.off("chatResponse"),I.off("analysisCompleted"),I.off("insightsGenerated")),ks.unsubscribeAgent("chat")}},[I,a]);const qe=(Z,Y,oe)=>{const de={id:`msg-${Date.now()}-${Math.random()}`,role:Z,content:Y,timestamp:new Date,agent:oe};if(o(q=>[...q,de]),Z==="assistant"&&Y.length>50){const q={id:`chat-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,agentSource:"chat",type:"conversation",term:"conversation insight",content:Y,context:{book:e?"current document":void 0,chapter:t,timestamp:new Date().toISOString(),confidence:.7},relatedTerms:$e(Y),sources:[],metadata:{agent:oe,conversationContext:!0}};ks.addLearning(q)}},$e=Z=>{const Y=Z.toLowerCase().split(/\s+/),oe=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","this","that","these","those"]),de=new Map;return Y.forEach(me=>{const ye=me.replace(/[^\w]/g,"");ye.length>4&&!oe.has(ye)&&de.set(ye,(de.get(ye)||0)+1)}),Array.from(de.entries()).sort((me,ye)=>ye[1]-me[1]).slice(0,5).map(([me])=>me)},At=async()=>{if(!i.trim()||!W||!G)return;qe("user",i),x(!0),v(0),y("chat");const Z=setInterval(()=>{v(oe=>oe>=90?oe:oe+Math.random()*20)},500),Y={userId:1,documentId:e,chapter:t};try{await ne(i,Y),l("")}catch{qe("system","Failed to send message. Please try again.")}finally{clearInterval(Z),v(100),setTimeout(()=>{x(!1),v(0)},800)}},Rn=async()=>{if(!(!e||!W))try{await ee(e,t),qe("system","Analysis requested. You will be notified when complete.")}catch{qe("system","Failed to request analysis.")}},Mn=Z=>{h(Z.content),g(!0)},at=()=>{g(!1),h("")},Dt=()=>{var me;const Z=window.getSelection();if(!Z||Z.rangeCount===0)return;const Y=Z.toString().trim();if(Y.length<3)return;const de=Z.getRangeAt(0).commonAncestorContainer;(de.nodeType===Node.TEXT_NODE?(me=de.parentElement)==null?void 0:me.closest('[data-message-role="assistant"], [data-message-role="system"]'):de.closest('[data-message-role="assistant"], [data-message-role="system"]'))&&(h(Y),g(!0),setTimeout(()=>{var ye;(ye=window.getSelection())==null||ye.removeAllRanges()},100))};u.useEffect(()=>{const Z=()=>{z||setTimeout(Dt,50)};if(n)return document.addEventListener("mouseup",Z),()=>{document.removeEventListener("mouseup",Z)}},[n,z]);const ge=Z=>{switch(Z.toLowerCase()){case"textanalysisagent":return r.jsx(nn,{className:"h-4 w-4"});case"insightgenerationagent":return r.jsx(lO,{className:"h-4 w-4"});case"studyassistantagent":return r.jsx($n,{className:"h-4 w-4"});default:return r.jsx(cn,{className:"h-4 w-4"})}},K=Z=>{Z.target.closest("button")||(Z.preventDefault(),Z.stopPropagation(),M(!0),X({x:Z.clientX,y:Z.clientY}),R({x:Z.clientX-A.x,y:Z.clientY-A.y}),B.current&&(B.current.style.cursor="grabbing",B.current.style.transform="scale(1.02)",B.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},ue=Z=>{z&&(Z.preventDefault(),Z.stopPropagation(),O.current&&cancelAnimationFrame(O.current),O.current=requestAnimationFrame(()=>{const oe=c?64:600,de=Math.max(10,Math.min(window.innerWidth-400-10,Z.clientX-k.x)),q=Math.max(10,Math.min(window.innerHeight-oe-10,Z.clientY-k.y));T({x:de,y:q})}))},pe=()=>{M(!1),O.current&&(cancelAnimationFrame(O.current),O.current=null),B.current&&(B.current.style.cursor="",B.current.style.transform="",B.current.style.boxShadow="");const Z=window.getSelection();Z&&Z.removeAllRanges(),localStorage.setItem(Wf,JSON.stringify(A))};u.useEffect(()=>{if(z){document.addEventListener("mousemove",ue,{passive:!1}),document.addEventListener("mouseup",pe,{passive:!0});const Z=Y=>{if(Y.touches.length===1){const oe=Y.touches[0],de={preventDefault:()=>Y.preventDefault(),stopPropagation:()=>Y.stopPropagation(),clientX:oe.clientX,clientY:oe.clientY};ue(de)}};return document.addEventListener("touchmove",Z,{passive:!1}),document.addEventListener("touchend",pe,{passive:!0}),document.body.style.overflow="hidden",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",ue),document.removeEventListener("mouseup",pe),document.removeEventListener("touchmove",Z),document.removeEventListener("touchend",pe),document.body.style.overflow="",document.body.style.userSelect="",O.current&&(cancelAnimationFrame(O.current),O.current=null)}}},[z,k]),u.useEffect(()=>{localStorage.setItem(Wf,JSON.stringify(A))},[A]),u.useEffect(()=>{localStorage.setItem(dv,c?"true":"false")},[c]);const ve=async(Z,Y,oe)=>{if(P[Z.id])return;const de={messageId:Z.id,feedback:Y,reason:oe,documentId:e,chapter:t,userId:1,agentId:Z.agent,messageContent:Z.content};try{await ks.sendFeedback(de),H(q=>({...q,[Z.id]:Y})),L({title:"Feedback Submitted",description:"Thank you for helping us improve!"})}catch{L({title:"Feedback Error",description:"Could not submit your feedback at this time.",variant:"destructive"})}finally{_(null),te("")}},be=async(Z,Y)=>{if(Y==="negative"){_(Z);return}ve(Z,Y)},Tt=()=>{Q&&ve(Q,"negative",se)};return n?r.jsxs("div",{ref:B,className:"fixed z-50",style:{left:`${A.x}px`,top:`${A.y}px`,transform:"none"},children:[r.jsxs(Oe,{className:`w-96 transition-all duration-300 ${c?"h-16":"h-[600px]"} shadow-2xl border-2 border-primary/20 ${z?"select-none cursor-grabbing":""}`,style:{willChange:z?"transform":"auto",transition:z?"box-shadow 0.2s ease-out":"all 0.3s ease-out",zIndex:z?60:50},children:[r.jsx(Fe,{className:`pb-2 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 select-none transition-all duration-200 ${z?"cursor-grabbing bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-800/30 dark:to-purple-800/30":"cursor-grab hover:from-blue-100 hover:to-purple-100 dark:hover:from-blue-800/30 dark:hover:to-purple-800/30"}`,onMouseDown:K,onDragStart:Z=>Z.preventDefault(),style:{userSelect:"none",touchAction:"none"},title:"Drag to move",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Qe,{className:"text-lg flex items-center gap-2",children:[r.jsx(cn,{className:"h-5 w-5 text-primary"}),"AI Reading Companion",r.jsx(He,{className:`text-xs ${W?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:W?"Online":"Offline"}),r.jsxs("div",{className:"flex gap-0.5 ml-2 opacity-50",children:[r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[S&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400 mr-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Saving..."]}),F&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-orange-600 dark:text-orange-400 mr-2",children:[r.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"Reset"]}),r.jsx(V,{onClick:()=>d(!c),className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:c?r.jsx(Qr,{className:"h-4 w-4"}):r.jsx(Ga,{className:"h-4 w-4"})}),r.jsx(V,{onClick:s,className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:r.jsx(dn,{className:"h-4 w-4"})})]})]})}),!c&&r.jsxs(Ie,{className:"p-0 flex flex-col h-[520px]",children:[r.jsx($s,{className:"flex-1 p-4",children:r.jsxs("div",{className:"space-y-4",children:[a.length===0?r.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[r.jsx(cn,{className:"h-12 w-12 mx-auto mb-4 text-primary/50"}),r.jsx("p",{className:"text-sm",children:"Welcome! Ask me anything about your reading."}),r.jsx("p",{className:"text-xs mt-2",children:"I can provide insights, explanations, and study guidance."})]}):a.map((Z,Y)=>r.jsx("div",{className:`flex ${Z.role==="user"?"justify-end":"justify-start"} group ${Z.role==="user"?"message-slide-right animate-in":"message-slide-left animate-in"} ${Y<5?`message-stagger-${Math.min(Y+1,5)}`:""}`,children:r.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 transition-all duration-300 message-bubble-pop gpu-accelerated ${Z.role==="user"?"bg-primary text-primary-foreground hover:scale-[1.02] shadow-lg hover:shadow-xl transform hover:-translate-y-1":Z.role==="system"?"bg-blue-100 dark:bg-blue-900 text-blue-900 dark:text-blue-100 hover:bg-blue-200 dark:hover:bg-blue-800 hover:scale-[1.01] insight-sparkle":"bg-muted hover:bg-muted/80 hover:scale-[1.01] shadow-md hover:shadow-lg transform hover:-translate-y-0.5"} ${Z.role==="assistant"||Z.role==="system"?"cursor-text":""}`,"data-message-id":Z.id,"data-message-role":Z.role,"data-agent":Z.agent||"AI Assistant",children:[Z.agent&&r.jsxs("div",{className:"flex items-center justify-between gap-1 mb-1 text-xs opacity-70 message-header animate-in fade-in delay-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`relative agent-avatar ${Z.role==="system"?"agent-thinking":"agent-active"} transition-all duration-300`,children:ge(Z.agent)}),r.jsx("span",{className:"font-medium",children:Z.agent})]}),(Z.role==="assistant"||Z.role==="system")&&r.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-blue-500 hover:text-blue-700 opacity-0 group-hover:opacity-100 transition-all duration-300 hover:scale-110 btn-scale",onClick:()=>Mn(Z),title:"Save as note",children:r.jsx(hs,{className:"h-3 w-3 animate-in bounce-in delay-500"})})]}),r.jsx("p",{className:"text-sm select-text agent-message-content",children:Z.content}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs opacity-70 mt-1 timestamp",children:Z.timestamp.toLocaleTimeString()}),(Z.role==="assistant"||Z.role==="system")&&r.jsxs("div",{className:"flex items-center gap-1 mt-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[r.jsx(V,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 hover:text-green-500 disabled:opacity-100 ${P[Z.id]==="positive"?"text-green-500":"text-muted-foreground"}`,onClick:()=>be(Z,"positive"),disabled:!!P[Z.id],title:"Good response",children:r.jsx(bS,{className:"h-3 w-3"})}),r.jsx(V,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 hover:text-red-500 disabled:opacity-100 ${P[Z.id]==="negative"?"text-red-500":"text-muted-foreground"}`,onClick:()=>be(Z,"negative"),disabled:!!P[Z.id],title:"Bad response",children:r.jsx(yS,{className:"h-3 w-3"})})]})]})]})},Z.id)),b&&r.jsx(Tg,{isTyping:b,agentType:p,currentProgress:w,estimatedTime:3,customMessage:"Analyzing your question..."}),r.jsx("div",{ref:C})]})}),r.jsx(Qs,{}),r.jsxs("div",{className:"p-4 space-y-2",children:[e&&r.jsxs(V,{onClick:Rn,disabled:!W,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 disabled:opacity-50",children:[r.jsx(nn,{className:"h-4 w-4 mr-2"}),"Analyze Current Chapter"]}),a.length>0&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx(V,{onClick:Se,variant:"outline",size:"sm",className:"flex-1 px-3 py-2 text-sm border border-red-300 dark:border-red-600 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400",children:"Clear Chat"}),r.jsx(V,{onClick:De,variant:"outline",size:"sm",className:"flex-1 px-3 py-2 text-sm border border-blue-300 dark:border-blue-600 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-blue-600 dark:text-blue-400",children:"Export"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(dt,{placeholder:G?"Ask about your reading...":"Connecting...",value:i,onChange:Z=>l(Z.target.value),onKeyPress:Z=>Z.key==="Enter"&&At(),disabled:!W||!G,className:"flex-1"}),r.jsx(V,{onClick:At,disabled:!W||!G||!i.trim(),className:"px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white disabled:opacity-50",children:r.jsx(Ad,{className:"h-4 w-4"})})]})]})]})]}),r.jsx($d,{isOpen:m,onClose:at,selectedText:f,documentId:-2,chapter:t||1,documentTitle:"AI Chat",paragraph:0}),r.jsx(Wr,{open:!!Q,onOpenChange:Z=>!Z&&_(null),children:r.jsxs(Ka,{children:[r.jsxs(Xa,{children:[r.jsx(Za,{children:"Provide additional feedback"}),r.jsx(Ni,{children:"Your feedback is valuable. Please provide a reason to help us improve the AI."})]}),r.jsx(Qn,{value:se,onChange:Z=>te(Z.target.value),placeholder:"e.g., This response was not relevant to my question.",className:"my-4"}),r.jsxs(Ud,{children:[r.jsx(V,{variant:"outline",onClick:()=>{_(null),te("")},children:"Cancel"}),r.jsx(V,{onClick:Tt,children:"Submit Feedback"})]})]})})]}):null}var Rg="Progress",Mg=100,[w6,Rz]=fn(Rg),[S6,N6]=w6(Rg),wj=u.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:a,getValueLabel:o=j6,...i}=e;(a||a===0)&&!fv(a)&&console.error(C6(`${a}`,"Progress"));const l=fv(a)?a:Mg;s!==null&&!hv(s,l)&&console.error(E6(`${s}`,"Progress"));const c=hv(s,l)?s:null,d=Qu(c)?o(c,l):void 0;return r.jsx(S6,{scope:n,value:c,max:l,children:r.jsx(xe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Qu(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":jj(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});wj.displayName=Rg;var Sj="ProgressIndicator",Nj=u.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,a=N6(Sj,n);return r.jsx(xe.div,{"data-state":jj(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});Nj.displayName=Sj;function j6(e,t){return`${Math.round(e/t*100)}%`}function jj(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Qu(e){return typeof e=="number"}function fv(e){return Qu(e)&&!isNaN(e)&&e>0}function hv(e,t){return Qu(e)&&!isNaN(e)&&e<=t&&e>=0}function C6(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Mg}\`.`}function E6(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Mg} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Cj=wj,k6=Nj;const Ku=u.forwardRef(({className:e,value:t,...n},s)=>r.jsx(Cj,{ref:s,className:Ne("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:r.jsx(k6,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Ku.displayName=Cj.displayName;const Jf="autoLearningPanelPosition",mv="autoLearningPanelMinimized";function A6({documentId:e,documentTitle:t,isOpen:n,onToggle:s}){const[a,o]=u.useState(null),[i,l]=u.useState(!1),[c,d]=u.useState(""),[f,h]=u.useState(""),[m,g]=u.useState(!1),[b,x]=u.useState(!1),[w,v]=u.useState(()=>typeof window<"u"?localStorage.getItem(mv)==="true":!1),[p,y]=u.useState(()=>{if(typeof window<"u"){const H=localStorage.getItem(Jf);if(H)try{const Q=JSON.parse(H);if(typeof Q.x=="number"&&typeof Q.y=="number")return Q}catch{}}const L=window.innerWidth-450-16,P=window.innerHeight-500-16;return{x:Math.max(20,L),y:Math.max(96,P)}}),[S,j]=u.useState(!1),[E,N]=u.useState({x:0,y:0}),[C,A]=u.useState({x:0,y:0}),T=u.useRef(null),z=u.useRef(null);u.useEffect(()=>{n&&M()},[e,n]),u.useEffect(()=>{if(n){const L=window.innerWidth-450-16,P=window.innerHeight-(w?64:b?700:500)-16;y({x:Math.max(20,L),y:Math.max(96,P)})}},[w,b]),u.useEffect(()=>{localStorage.setItem(Jf,JSON.stringify(p))},[p]),u.useEffect(()=>{localStorage.setItem(mv,w?"true":"false")},[w]),u.useEffect(()=>{a&&console.log("AI Expertise object:",a)},[a]);const M=async()=>{try{const P=await(await fetch(`/api/expertise/${e}`)).json();P.success&&o(P.expertise)}catch(L){console.error("Failed to fetch expertise:",L)}},$=async()=>{l(!0);try{if((await(await fetch(`/api/auto-learn/${e}`,{method:"POST",headers:{"Content-Type":"application/json"}})).json()).success){let H=0;const Q=15,_=async()=>{if(H>=Q){l(!1);return}H++,await M();const te=await(await fetch(`/api/expertise/${e}`)).json();if(te.success&&te.expertise.expertise){l(!1);return}const I=Math.min(3e4,3e3+H*2e3);setTimeout(_,I)};setTimeout(_,5e3)}}catch(L){console.error("Auto-learning failed:",L),l(!1)}},X=async()=>{if(c.trim()){g(!0);try{const P=await(await fetch(`/api/expert-chat/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:c})})).json();P.success&&h(P.response)}catch(L){console.error("Expert chat failed:",L),h("Sorry, I encountered an error while processing your question.")}finally{g(!1)}}},k=L=>{w||(L.preventDefault(),L.stopPropagation(),j(!0),N({x:L.clientX,y:L.clientY}),A({x:L.clientX-p.x,y:L.clientY-p.y}),T.current&&(T.current.style.cursor="grabbing",T.current.style.transform="scale(1.02)",T.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},R=L=>{S&&(L.preventDefault(),L.stopPropagation(),z.current&&cancelAnimationFrame(z.current),z.current=requestAnimationFrame(()=>{const P=w?300:400,H=w?60:b?700:500,Q=Math.max(10,Math.min(window.innerWidth-P-10,L.clientX-C.x)),_=Math.max(10,Math.min(window.innerHeight-H-10,L.clientY-C.y));y({x:Q,y:_})}))},B=()=>{j(!1),z.current&&(cancelAnimationFrame(z.current),z.current=null),T.current&&(T.current.style.cursor="",T.current.style.transform="",T.current.style.boxShadow="");const L=window.getSelection();L&&L.removeAllRanges(),localStorage.setItem(Jf,JSON.stringify(p))};u.useEffect(()=>{if(S){document.addEventListener("mousemove",R,{passive:!1}),document.addEventListener("mouseup",B,{passive:!0});const L=P=>{if(P.touches.length===1){const H=P.touches[0],Q={preventDefault:()=>P.preventDefault(),stopPropagation:()=>P.stopPropagation(),clientX:H.clientX,clientY:H.clientY};R(Q)}};return document.addEventListener("touchmove",L,{passive:!1}),document.addEventListener("touchend",B,{passive:!0}),document.body.style.overflow="hidden",()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",B),document.removeEventListener("touchmove",L),document.removeEventListener("touchend",B),document.body.style.overflow="",z.current&&(cancelAnimationFrame(z.current),z.current=null)}}},[S,C]);const O=L=>L>=8?"bg-green-500":L>=6?"bg-blue-500":L>=4?"bg-yellow-500":"bg-red-500",U=L=>L>=9?"Master Expert":L>=7?"Expert":L>=5?"Advanced":L>=3?"Intermediate":"Beginner";return n?r.jsxs("div",{ref:T,className:`fixed z-40 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden transition-all duration-300 ${S?"select-none cursor-grabbing":""}`,style:{left:p.x,top:p.y,width:w?"300px":"400px",height:w?"60px":b?"700px":"500px",maxWidth:"90vw",maxHeight:"90vh",overscrollBehavior:"contain",willChange:S?"transform":"auto",transition:S?"box-shadow 0.2s ease-out, transform 0.2s ease-out":"all 0.3s ease-out",transform:S?"scale(1.02)":"scale(1)",zIndex:S?80:60},onWheel:L=>L.stopPropagation(),onScroll:L=>L.stopPropagation(),onMouseEnter:L=>L.stopPropagation(),children:[r.jsxs("div",{className:`flex items-center justify-between p-4 bg-gradient-to-r from-purple-500 to-blue-600 text-white select-none transition-all duration-200 ${S?"cursor-grabbing bg-gradient-to-r from-purple-600 to-blue-700":"cursor-grab hover:from-purple-550 hover:to-blue-650"}`,onMouseDown:k,onDragStart:L=>L.preventDefault(),style:{userSelect:"none",touchAction:"none"},children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:r.jsx(nn,{className:"w-5 h-5"})}),r.jsxs("div",{className:"select-none",style:{userSelect:"none"},children:[r.jsx("h3",{className:"font-semibold select-none",style:{userSelect:"none"},children:"AI Auto-Learning"}),r.jsx("p",{className:"text-xs opacity-90 select-none",style:{userSelect:"none"},children:t})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[i&&r.jsxs("div",{className:"flex items-center space-x-1 text-xs bg-white/20 px-2 py-1 rounded",children:[r.jsx(nn,{className:"w-3 h-3 animate-pulse"}),r.jsx("span",{children:"Learning..."})]}),r.jsx(V,{variant:"ghost",size:"sm",onClick:()=>v(!w),className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:w?r.jsx(Qr,{className:"h-4 w-4"}):r.jsx(Ga,{className:"h-4 w-4"})}),r.jsx(V,{variant:"ghost",size:"sm",onClick:s,className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:r.jsx(dn,{className:"h-4 w-4"})})]})]}),!w&&r.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto hide-scrollbar",style:{height:"calc(100% - 80px)"},children:[r.jsx("div",{className:"border-2 border-purple-200 dark:border-purple-700 bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg p-4",children:a!=null&&a.expertise?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm",children:"AI Expertise Level"}),r.jsx(He,{className:`${O(a.expertiseLevel||0)} text-white text-xs`,children:U(a.expertiseLevel||0)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsxs("span",{children:["Domain: ",a.domain]}),r.jsxs("span",{children:[a.expertiseLevel,"/10"]})]}),r.jsx(Ku,{value:(a.expertiseLevel||0)*10,className:"h-2"}),r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Mastery: ",(a.expertiseLevel||0)*10,"%"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 text-center",children:[r.jsx($n,{className:"h-6 w-6 text-blue-500 mx-auto mb-1"}),r.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:a.totalConcepts}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Concepts"})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 text-center",children:[r.jsx(dg,{className:"h-6 w-6 text-green-500 mx-auto mb-1"}),r.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:a.fineTuningExamples}),r.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Examples"})]})]}),a.concepts&&a.concepts.length>0&&r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[r.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100 text-sm",children:"Key Concepts"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.concepts.slice(0,6).map((L,P)=>r.jsx(He,{variant:"secondary",className:"text-xs bg-secondary dark:bg-secondary/80 text-secondary-foreground dark:text-secondary-foreground",children:L},P)),a.concepts.length>6&&r.jsxs(He,{variant:"outline",className:"text-xs border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300",children:["+",a.concepts.length-6]})]})]}),a.concepts&&a.concepts.length>0&&r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 mt-2",children:[r.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100 text-sm",children:"Concepts Learned"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:a.concepts.map((L,P)=>r.jsx(He,{variant:"secondary",className:"text-xs bg-secondary dark:bg-secondary/80 text-secondary-foreground dark:text-secondary-foreground",children:L},P))})]}),a.examples&&a.examples.length>0&&r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700 mt-2",children:[r.jsx("h4",{className:"font-semibold mb-2 text-gray-900 dark:text-gray-100 text-sm",children:"Example Questions"}),r.jsx("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-800 dark:text-gray-200",children:a.examples.map((L,P)=>r.jsx("li",{children:L},P))})]}),r.jsxs(V,{onClick:()=>x(!b),className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[r.jsx(nu,{className:"h-4 w-4 mr-2"}),b?"Hide Expert Chat":"Chat with AI Expert"]})]}):r.jsxs("div",{className:"text-center py-4",children:[r.jsx(nn,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-3"}),r.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"Ready to Learn"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 text-sm",children:"The AI hasn't specialized in this document yet. Click below to start the auto-learning process."}),r.jsx(V,{onClick:$,disabled:i,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2",children:i?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"h-4 w-4 mr-2 animate-spin"}),"Learning..."]}):r.jsxs(r.Fragment,{children:[r.jsx(nn,{className:"h-4 w-4 mr-2"}),"Start Auto-Learning"]})})]})}),b&&(a==null?void 0:a.expertise)&&r.jsxs("div",{className:"border-2 border-blue-200 dark:border-blue-700 bg-white dark:bg-slate-900 rounded-lg p-4",children:[r.jsxs("h4",{className:"flex items-center gap-2 text-gray-900 dark:text-gray-100 font-semibold mb-3",children:[r.jsx(nu,{className:"h-4 w-4 text-blue-600"}),"Expert Chat - ",a.domain]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(dt,{placeholder:"Ask an expert question...",value:c,onChange:L=>d(L.target.value),onKeyPress:L=>L.key==="Enter"&&X()}),r.jsx(V,{onClick:X,disabled:m||!c.trim(),className:"w-full",children:m?r.jsxs(r.Fragment,{children:[r.jsx(nn,{className:"h-4 w-4 mr-2 animate-pulse"}),"AI Expert is thinking..."]}):r.jsxs(r.Fragment,{children:[r.jsx(nu,{className:"h-4 w-4 mr-2"}),"Ask Expert"]})}),f&&r.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[r.jsxs("h5",{className:"font-semibold mb-2 flex items-center gap-2 text-gray-900 dark:text-gray-100 text-sm",children:[r.jsx(nn,{className:"h-4 w-4 text-purple-600"}),"Expert Response:"]}),r.jsx(Qn,{value:f,readOnly:!0,className:"min-h-[100px] bg-white dark:bg-slate-900 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 text-sm"})]})]})]}),i&&r.jsx("div",{className:"border-2 border-yellow-200 dark:border-yellow-700 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Xt,{className:"h-8 w-8 text-yellow-600 dark:text-yellow-400 mx-auto mb-3 animate-pulse"}),r.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-900 dark:text-gray-100",children:"AI is Learning..."}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3 text-xs",children:"The AI is analyzing your document and building expertise."}),r.jsx(Ku,{value:33,className:"h-2"})]})})]})]}):null}const eh="aiChapterNotesPanelPosition",pv="aiChapterNotesPanelMinimized";function T6({documentId:e,chapter:t,isVisible:n,onToggle:s}){const[a,o]=u.useState(new Set),[i,l]=u.useState(()=>typeof window<"u"?localStorage.getItem(pv)==="true":!1),c=Fa(),[d,f]=u.useState(()=>{if(typeof window<"u"){const X=localStorage.getItem(eh);if(X)try{const k=JSON.parse(X);if(typeof k.x=="number"&&typeof k.y=="number")return k}catch{}}const M=window.innerWidth-420-16,$=window.innerHeight-600-16;return{x:Math.max(20,M),y:Math.max(96,$)}}),[h,m]=u.useState(!1),[g,b]=u.useState({x:0,y:0}),[x,w]=u.useState({x:0,y:0}),v=u.useRef(null),p=u.useRef(null);u.useEffect(()=>{if(n){const M=window.innerWidth-420-16,$=window.innerHeight-(i?64:600)-16;f({x:Math.max(20,M),y:Math.max(96,$)})}},[i]),u.useEffect(()=>{localStorage.setItem(eh,JSON.stringify(d))},[d]),u.useEffect(()=>{localStorage.setItem(pv,i?"true":"false")},[i]);const{data:y=[]}=Cn({queryKey:["/api/annotations"]}),S=Xl({mutationFn:async M=>await is(`/api/annotations/${M}`,{method:"DELETE"}),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/annotations"]})}}),j=y.filter(M=>(M.documentId===-1||M.documentId===-2)&&M.chapter===t),E=M=>{const $=new Set(a);$.has(M)?$.delete(M):$.add(M),o($)},N=(M,$)=>{window.confirm(`Are you sure you want to delete this ${$} note? This action cannot be undone.`)&&S.mutate(M)},C=M=>{i||(M.preventDefault(),M.stopPropagation(),m(!0),b({x:M.clientX,y:M.clientY}),w({x:M.clientX-d.x,y:M.clientY-d.y}),v.current&&(v.current.style.cursor="grabbing",v.current.style.transform="scale(1.02)",v.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},A=M=>{h&&(M.preventDefault(),M.stopPropagation(),p.current&&cancelAnimationFrame(p.current),p.current=requestAnimationFrame(()=>{const $=i?300:400,X=i?60:600,k=Math.max(10,Math.min(window.innerWidth-$-10,M.clientX-x.x)),R=Math.max(10,Math.min(window.innerHeight-X-10,M.clientY-x.y));f({x:k,y:R})}))},T=()=>{m(!1),p.current&&(cancelAnimationFrame(p.current),p.current=null),v.current&&(v.current.style.cursor="",v.current.style.transform="",v.current.style.boxShadow="");const M=window.getSelection();M&&M.removeAllRanges(),localStorage.setItem(eh,JSON.stringify(d))};u.useEffect(()=>{if(h){document.addEventListener("mousemove",A,{passive:!1}),document.addEventListener("mouseup",T,{passive:!0});const M=$=>{if($.touches.length===1){const X=$.touches[0],k={preventDefault:()=>$.preventDefault(),stopPropagation:()=>$.stopPropagation(),clientX:X.clientX,clientY:X.clientY};A(k)}};return document.addEventListener("touchmove",M,{passive:!1}),document.addEventListener("touchend",T,{passive:!0}),document.body.style.overflow="hidden",()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",T),document.removeEventListener("touchmove",M),document.removeEventListener("touchend",T),document.body.style.overflow="",p.current&&(cancelAnimationFrame(p.current),p.current=null)}}},[h,x]);const z=M=>M===-1?{name:"AI Discussion",icon:Us,color:"from-pink-500 to-rose-600",bgColor:"bg-pink-50 dark:bg-pink-900/20",textColor:"text-pink-700 dark:text-pink-300"}:M===-2?{name:"AI Chat",icon:cn,color:"from-blue-500 to-purple-600",bgColor:"bg-blue-50 dark:bg-blue-900/20",textColor:"text-blue-700 dark:text-blue-300"}:{name:"AI Note",icon:hs,color:"from-purple-500 to-indigo-600",bgColor:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-700 dark:text-purple-300"};return n?r.jsxs("div",{ref:v,className:`fixed z-40 bg-white dark:bg-slate-900 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden transition-all duration-300 ${h?"select-none cursor-grabbing":""}`,style:{left:d.x,top:d.y,width:i?"300px":"400px",height:i?"60px":"600px",maxWidth:"90vw",maxHeight:"90vh",overscrollBehavior:"contain",willChange:h?"transform":"auto",transition:h?"box-shadow 0.2s ease-out, transform 0.2s ease-out":"all 0.3s ease-out",transform:h?"scale(1.02)":"scale(1)",zIndex:h?80:60},onWheel:M=>M.stopPropagation(),onScroll:M=>M.stopPropagation(),onMouseEnter:M=>M.stopPropagation(),children:[r.jsxs("div",{className:`flex items-center justify-between p-4 bg-gradient-to-r from-purple-500 to-indigo-600 text-white select-none transition-all duration-200 ${h?"cursor-grabbing bg-gradient-to-r from-purple-600 to-indigo-700":"cursor-grab hover:from-purple-550 hover:to-indigo-650"}`,onMouseDown:C,onDragStart:M=>M.preventDefault(),style:{userSelect:"none",touchAction:"none"},children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:r.jsx(gS,{className:"w-5 h-5"})}),r.jsxs("div",{className:"select-none",style:{userSelect:"none"},children:[r.jsx("h3",{className:"font-semibold select-none",style:{userSelect:"none"},children:"AI Chapter Notes"}),r.jsxs("p",{className:"text-xs opacity-90 select-none",style:{userSelect:"none"},children:["Chapter ",t,"  ",j.length," ",j.length===1?"note":"notes"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(V,{variant:"ghost",size:"sm",onClick:()=>l(!i),className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:i?r.jsx(Qr,{className:"h-4 w-4"}):r.jsx(Ga,{className:"h-4 w-4"})}),r.jsx(V,{variant:"ghost",size:"sm",onClick:s,className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:r.jsx(dn,{className:"h-4 w-4"})})]})]}),!i&&r.jsx("div",{className:"p-4 overflow-y-auto",style:{height:"calc(100% - 80px)"},children:r.jsx("div",{className:"space-y-4",children:j.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[r.jsx(Us,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),r.jsx("p",{className:"text-sm font-medium",children:"No AI notes for this chapter yet"}),r.jsx("p",{className:"text-xs mt-1",children:"Use the AI Discussion or AI Chat to create notes for this chapter"})]}):j.sort((M,$)=>new Date($.createdAt).getTime()-new Date(M.createdAt).getTime()).map(M=>{const $=z(M.documentId),X=$.icon,k=a.has(M.id);return r.jsxs("div",{className:`border border-slate-200 dark:border-slate-700 hover:shadow-md transition-all duration-200 ${$.bgColor} rounded-lg p-4`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-r ${$.color} flex items-center justify-center`,children:r.jsx(X,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsx("div",{className:`text-sm font-medium ${$.textColor}`,children:$.name}),r.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[r.jsx(tc,{className:"w-3 h-3"}),(()=>{try{const R=new Date(M.createdAt);return isNaN(R.getTime())||M.createdAt==="CURRENT_TIMESTAMP"?"Recently created":R.toLocaleDateString()}catch{return"Recently created"}})()]})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(V,{variant:"ghost",size:"sm",onClick:()=>N(M.id,$.name),className:"h-7 w-7 p-0 bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/40 text-red-600 hover:text-red-700 border border-red-200 dark:border-red-800",title:`Delete ${$.name} note`,disabled:S.isPending,children:r.jsx(Qa,{className:"h-3 w-3"})}),r.jsx(V,{variant:"ghost",size:"sm",onClick:()=>E(M.id),className:"h-7 w-7 p-0 hover:bg-slate-200 dark:hover:bg-slate-700",children:k?r.jsx(kd,{className:"h-4 w-4"}):r.jsx(lg,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[r.jsx(hs,{className:"w-3 h-3 text-slate-400"}),r.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:M.documentId===-1?"AI Discussion Note":M.documentId===-2?"AI Chat Note":"AI Note"})]}),r.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:r.jsx("p",{className:"text-sm text-slate-800 dark:text-slate-200 leading-relaxed",children:k?M.note:`${M.note.substring(0,150)}${M.note.length>150?"...":""}`})})]}),M.selectedText&&M.selectedText.trim()&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[r.jsx(AO,{className:"w-3 h-3 text-slate-400"}),r.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"Selected Text"})]}),r.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-lg p-3 border-l-4 border-purple-400",children:r.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:k?M.selectedText:`${M.selectedText.substring(0,100)}${M.selectedText.length>100?"...":""}`})})]}),(M.note.length>150||M.selectedText&&M.selectedText.length>100)&&r.jsx("div",{className:"mt-2 text-center",children:r.jsx(V,{variant:"ghost",size:"sm",onClick:()=>E(M.id),className:"text-xs text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:k?"Show less":"Show more"})})]},M.id)})})})]}):null}function R6({documentId:e,chapter:t,isOpen:n,onToggle:s,currentBook:a}){const[o,i]=u.useState([]),[l,c]=u.useState(""),[d,f]=u.useState(!1),[h,m]=u.useState(!1),[g,b]=u.useState(!1),[x,w]=u.useState(!1),[v,p]=u.useState(""),[y,S]=u.useState(!1),[j,E]=u.useState(null),[N,C]=u.useState({}),[A,T]=u.useState(null),[z,M]=u.useState(""),$=u.useRef(null);u.useRef(null);const[X,k]=u.useState({x:100,y:100}),[R,B]=u.useState(!1),[O,U]=u.useState({x:0,y:0}),[L,P]=u.useState({x:0,y:0}),H=u.useRef(null),Q=u.useRef(null),{toast:_}=Ft(),se=Fa(),{socket:te,isConnected:I,sessionId:W,sendDiscussionMessage:G,currentLanguage:F}=qd();u.useEffect(()=>{console.log(` [AI Discussion] Language changed to: ${F}`)},[F]);const ne=u.useCallback(()=>{$.current&&$.current.scrollIntoView({behavior:"smooth"})},[]);u.useEffect(()=>{n&&I&&W?(console.log(" [FRONTEND] Initializing discussion with:",{isConnected:I,sessionId:W,documentId:e,chapter:t}),E(null),Mn()||$e()):n&&!I?(console.warn(" [FRONTEND] Discussion opened but not connected to AI system"),E("Connecting to AI system..."),o.length===0&&$e()):n&&I&&!W&&(console.warn(" [FRONTEND] Discussion opened but no session ID available"),E("Creating chat session..."),o.length===0&&$e())},[n,I,W]);const ee=u.useCallback(q=>{if(console.log(" [FRONTEND] Received discussionResponse:",q),q.error){E("AI discussion error - please try again"),m(!1),i(ye=>ye.filter(Me=>!(Me.role==="assistant"&&(Me.content==="Processing your request..."||Me.content.startsWith("Sorry, I encountered an error")||Me.content.startsWith("I apologize, but the discussion is taking longer")))));return}m(!1),E(null);const me={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:"assistant",content:q.message,timestamp:new Date,type:"discussion"};i(ye=>{const Lt=[...ye.filter(ys=>!(ys.role==="assistant"&&(ys.content==="Processing your request..."||ys.content.startsWith("Sorry, I encountered an error")||ys.content.startsWith("I apologize, but the discussion is taking longer")))),me];return console.log(" [FRONTEND] Updated messages array length:",Lt.length),Lt}),setTimeout(ne,100)},[ne]),le=u.useCallback(q=>{if(console.log(" [FRONTEND] Received noteCreated:",q),q.error){_({title:"Error",description:q.message||"Failed to save note",variant:"destructive"});return}q.success&&(_({title:"Note Saved",description:"Your note has been saved successfully"}),se.invalidateQueries({queryKey:["/api/annotations"]}))},[_,se]),Re=u.useCallback(q=>{console.log(" [FRONTEND] Received discussionInsight:",q);const me={id:`insight-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:"system",content:` ${q.insight}`,timestamp:new Date,type:"insight"};i(ye=>[...ye,me]),setTimeout(ne,100)},[ne]),ce=u.useCallback(q=>{console.log(" [FRONTEND] Received agentContext:",q)},[]),Se=u.useCallback(q=>{if(console.log(" [FRONTEND] Received aiPersonalityResponse:",q),q.sessionId!==W){console.log(" [FRONTEND] Ignoring response for different session:",q.sessionId);return}const me={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:q.messageType==="panel-summary"?"system":"assistant",content:q.content,timestamp:new Date,type:"discussion",aiPersonality:q.personalityName,modelUsed:q.modelUsed,messageType:q.messageType};console.log(" [FRONTEND] Adding AI personality message:",me),i(ye=>{const Me=[...ye,me];return console.log(" [FRONTEND] Updated messages array length:",Me.length),Me}),setTimeout(ne,100)},[W,ne]),De=u.useCallback(q=>{console.error(" [FRONTEND] Socket connection error:",q),E("Connection error - please refresh the page")},[]),qe=u.useCallback(()=>{console.warn(" [FRONTEND] Socket disconnected"),E("Disconnected. Attempting to reconnect...")},[]);u.useEffect(()=>{if(!te){console.warn(" [FRONTEND] No socket available for discussion agent");return}return console.log(" [FRONTEND] Setting up socket event listeners"),te.on("discussionResponse",ee),te.on("noteCreated",le),te.on("discussionInsight",Re),te.on("agentContext",ce),te.on("aiPersonalityResponse",Se),te.on("connect_error",De),te.on("disconnect",qe),()=>{console.log(" [FRONTEND] Cleaning up socket event listeners"),te&&(te.off("discussionResponse",ee),te.off("noteCreated",le),te.off("discussionInsight",Re),te.off("agentContext",ce),te.off("aiPersonalityResponse",Se),te.off("connect_error",De),te.off("disconnect",qe))}},[te,ee,le,Re,ce,Se,De,qe]);const $e=()=>{const q={id:"welcome",role:"system",content:`Welcome to AI Discussion! I'm here to help you explore ideas and have meaningful conversations about ${a||"your reading"}. Feel free to share your thoughts, ask questions, or request that I save important insights as notes.

Try clicking the " Panel" button to start a group discussion with multiple AI experts!`,timestamp:new Date,type:"discussion"};console.log(" [FRONTEND] Initializing discussion with welcome message:",q),i([q])};u.useEffect(()=>{n&&o.length===0&&(console.log(" [FRONTEND] No messages found, initializing discussion"),setTimeout(()=>{$e()},100))},[n,o.length,a]),u.useEffect(()=>{n&&X.x===100&&X.y===100&&k({x:Math.max(20,50),y:Math.max(20,120)})},[n]),u.useEffect(()=>{o.length>1&&W&&Rn()},[o,W]);const At=()=>`discussion_history_${e||"global"}_session_${W}`,Rn=()=>{if(W)try{w(!0);const q={messages:o,documentId:e,chapter:t,currentBook:a,lastUpdated:new Date().toISOString(),sessionId:W};localStorage.setItem(At(),JSON.stringify(q)),setTimeout(()=>w(!1),500)}catch(q){console.error("Failed to save conversation:",q),w(!1)}},Mn=()=>{try{const q=localStorage.getItem(At());if(q){const me=JSON.parse(q);if(me.sessionId===W)return i(me.messages.map(ye=>({...ye,timestamp:new Date(ye.timestamp)}))),console.log(" [FRONTEND] Loaded saved conversation from localStorage"),!0}return!1}catch(q){return console.error("Failed to load conversation from localStorage:",q),!1}},at=(q,me,ye,Me)=>{const Lt={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:q,content:me,timestamp:new Date,type:ye,tags:Me};i(ys=>[...ys,Lt])},Dt=()=>{confirm("Are you sure you want to clear this conversation? This action cannot be undone.")&&(i([]),localStorage.removeItem(At()),$e())},ge=()=>{const q={title:`Discussion: ${a||"General"} ${t?`- Chapter ${t}`:""}`,timestamp:new Date().toISOString(),messages:o.map(Lt=>({role:Lt.role,content:Lt.content,timestamp:Lt.timestamp.toISOString(),type:Lt.type})),metadata:{documentId:e,chapter:t,currentBook:a,sessionId:W}},me=new Blob([JSON.stringify(q,null,2)],{type:"application/json"}),ye=URL.createObjectURL(me),Me=document.createElement("a");Me.href=ye,Me.download=`discussion-${a||"general"}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Me),Me.click(),document.body.removeChild(Me),URL.revokeObjectURL(ye)},K=async()=>{if(console.log(" [FRONTEND] handleSendMessage called:",{inputMessage:l.trim(),isConnected:I,sessionId:W,socket:!!te}),!l.trim()){console.warn(" [FRONTEND] Empty message, not sending");return}if(!I){console.error(" [FRONTEND] Not connected to AI system"),E("Not connected to AI system"),_({title:"Connection Error",description:"Please wait for the AI to connect before sending messages.",variant:"destructive"});return}if(!W){console.error(" [FRONTEND] No session ID available"),E("No chat session available"),_({title:"Session Error",description:"Chat session not available. Please refresh the page.",variant:"destructive"});return}if(!te){console.error(" [FRONTEND] No socket available"),E("Socket connection not available"),_({title:"Connection Error",description:"Socket connection not available. Please refresh the page.",variant:"destructive"});return}at("user",l,"discussion"),m(!0),E(null);const q=o.map(Me=>({id:Me.id,role:Me.role,content:Me.content,timestamp:Me.timestamp.toISOString(),type:Me.type,tags:Me.tags,aiPersonality:Me.aiPersonality,modelUsed:Me.modelUsed})),me={userId:2,documentId:e,chapter:t,agentType:"discussion",conversationHistory:q},ye=l;c("");try{console.log(" [FRONTEND] Sending discussion message with conversation history:",{message:ye,context:me,conversationHistoryLength:q.length,currentLanguage:F}),console.log(` [FRONTEND] Current language from hook: ${F}`),console.log(` [FRONTEND] Language in localStorage: ${localStorage.getItem("bible-companion-language")}`),await G(ye,me),console.log(" [FRONTEND] Message sent successfully")}catch(Me){console.error(" [FRONTEND] Failed to send discussion message:",Me),at("system","Failed to send message. Please try again.","discussion"),_({title:"Message Failed",description:"Failed to send message. Please check your connection and try again.",variant:"destructive"}),E("Message failed - please try again"),m(!1)}},ue=q=>{q.key==="Enter"&&(q.ctrlKey||q.metaKey)&&K()},pe=q=>{d||(q.preventDefault(),q.stopPropagation(),B(!0),U({x:q.clientX,y:q.clientY}),P({x:q.clientX-X.x,y:q.clientY-X.y}),H.current&&(H.current.style.cursor="grabbing",H.current.style.transform="scale(1.02)",H.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},ve=q=>{R&&(q.preventDefault(),q.stopPropagation(),Q.current&&cancelAnimationFrame(Q.current),Q.current=requestAnimationFrame(()=>{const me=d?300:800,ye=d?60:600,Me=Math.max(10,Math.min(window.innerWidth-me-10,q.clientX-L.x)),Lt=Math.max(10,Math.min(window.innerHeight-ye-10,q.clientY-L.y));k({x:Me,y:Lt})}))},be=()=>{B(!1),Q.current&&(cancelAnimationFrame(Q.current),Q.current=null),H.current&&(H.current.style.cursor="",H.current.style.transform="",H.current.style.boxShadow="");const q=window.getSelection();q&&q.removeAllRanges()};u.useEffect(()=>{if(R){document.addEventListener("mousemove",ve,{passive:!1}),document.addEventListener("mouseup",be,{passive:!0});const q=me=>{if(me.touches.length===1){const ye=me.touches[0],Me={preventDefault:()=>me.preventDefault(),stopPropagation:()=>me.stopPropagation(),clientX:ye.clientX,clientY:ye.clientY};ve(Me)}};return document.addEventListener("touchmove",q,{passive:!1}),document.addEventListener("touchend",be,{passive:!0}),document.body.style.overflow="hidden",()=>{document.removeEventListener("mousemove",ve),document.removeEventListener("mouseup",be),document.removeEventListener("touchmove",q),document.removeEventListener("touchend",be),document.body.style.overflow="",Q.current&&(cancelAnimationFrame(Q.current),Q.current=null)}}},[R,L]);const Tt=()=>{var ys;const q=window.getSelection();if(!q||q.rangeCount===0)return;const me=q.toString().trim();if(me.length<3)return;const Me=q.getRangeAt(0).commonAncestorContainer;(Me.nodeType===Node.TEXT_NODE?(ys=Me.parentElement)==null?void 0:ys.closest('[data-message-role="assistant"], [data-message-role="system"]'):Me.closest('[data-message-role="assistant"], [data-message-role="system"]'))&&(p(me),S(!0),setTimeout(()=>{var Pg;(Pg=window.getSelection())==null||Pg.removeAllRanges()},100))};u.useEffect(()=>{const q=()=>{R||setTimeout(Tt,50)};if(n)return document.addEventListener("mouseup",q),()=>{document.removeEventListener("mouseup",q)}},[n,R]);const Z=()=>{S(!1),p("")},Y=async()=>{if(console.log(" [FRONTEND] handleStartGroupDiscussion called"),console.log(" [FRONTEND] isConnected:",I,"sessionId:",W),!I||!W){_({title:"Connection Error",description:"Please wait for the AI to connect before starting a group discussion.",variant:"destructive"});return}m(!0),at("user","Start group discussion panel","discussion");try{te&&(console.log(" [FRONTEND] Emitting discussionMessage with group discussion"),te.emit("discussionMessage",{message:"group discussion",sessionId:W,documentId:e,chapter:t,type:"startGroupDiscussion"}))}catch(q){console.error("Failed to start group discussion:",q),_({title:"Error",description:"Failed to start group discussion. Please try again.",variant:"destructive"}),m(!1)}},oe=async(q,me,ye)=>{if(N[q.id])return;const Me={messageId:q.id,feedback:me,reason:ye,documentId:e,chapter:t,userId:2,agentId:q.aiPersonality||"AIDiscussionAgent",messageContent:q.content};try{await ks.sendFeedback(Me),C(Lt=>({...Lt,[q.id]:me})),_({title:"Feedback Submitted",description:"Thank you for helping us improve!"})}catch{_({title:"Feedback Error",description:"Could not submit your feedback at this time.",variant:"destructive"})}finally{T(null),M("")}},de=()=>{A&&oe(A,"negative",z)};return u.useEffect(()=>{if(W&&e&&n)if(Mn()){if(console.log(" [FRONTEND] Loaded saved conversation from localStorage"),te&&o.length>1){const me=o.map(ye=>({id:ye.id,role:ye.role,content:ye.content,timestamp:ye.timestamp.toISOString(),type:ye.type,tags:ye.tags,aiPersonality:ye.aiPersonality,modelUsed:ye.modelUsed}));te.emit("discussionMessage",{message:"Context restored from saved conversation",sessionId:W,userId:2,documentId:e,chapter:t,language:F,conversationHistory:me,isContextRestore:!0})}}else console.log(" [FRONTEND] No saved conversation found, initializing new discussion"),$e()},[W,e,n]),n?r.jsxs("div",{ref:H,className:`fixed z-40 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-md hover:shadow-lg overflow-hidden transition-all duration-300 ${R?"select-none cursor-grabbing":""}`,style:{left:X.x,top:X.y,width:d?"300px":"650px",height:d?"60px":"550px",maxWidth:"90vw",maxHeight:"85vh",overscrollBehavior:"contain",willChange:R?"transform":"auto",transition:R?"box-shadow 0.2s ease-out, transform 0.2s ease-out":"all 0.3s ease-out",transform:R?"scale(1.02)":"scale(1)",zIndex:R?80:60},onWheel:q=>q.stopPropagation(),onScroll:q=>q.stopPropagation(),onMouseEnter:q=>q.stopPropagation(),children:[r.jsxs("div",{className:`flex items-center justify-between p-4 bg-gradient-to-r from-pink-500 to-rose-600 text-white select-none transition-all duration-200 ${R?"cursor-grabbing bg-gradient-to-r from-pink-600 to-rose-700":"cursor-grab hover:from-pink-550 hover:to-rose-650"}`,onMouseDown:pe,onDragStart:q=>q.preventDefault(),style:{userSelect:"none",touchAction:"none"},children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:r.jsx(Us,{className:"w-5 h-5"})}),r.jsxs("div",{className:"select-none",style:{userSelect:"none"},children:[r.jsx("h3",{className:"font-semibold select-none",style:{userSelect:"none"},children:"AI Discussion"}),r.jsxs("p",{className:"text-xs opacity-90 select-none",style:{userSelect:"none"},children:[a?`Discussing: ${a}`:"Book Discussion & Notes",t&&` - Chapter ${t}`]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[h&&r.jsxs("div",{className:"flex items-center space-x-1 text-xs bg-white/20 px-2 py-1 rounded",children:[r.jsx(nn,{className:"w-3 h-3 animate-pulse"}),r.jsx("span",{children:"Learning..."})]}),x&&r.jsxs("div",{className:"flex items-center space-x-1 text-xs bg-white/20 px-2 py-1 rounded",children:[r.jsx($u,{className:"w-3 h-3 animate-pulse"}),r.jsx("span",{children:"Saving..."})]}),j&&r.jsxs("div",{className:"flex items-center space-x-1 text-xs bg-red-500/20 px-2 py-1 rounded border border-red-500/30",children:[r.jsx(dn,{className:"w-3 h-3"}),r.jsx("span",{children:j})]}),r.jsx(V,{variant:"outline",size:"sm",onClick:Y,disabled:!I||!W||h,className:"text-xs h-8 px-3 bg-gradient-to-r from-purple-500/20 to-pink-500/20 border-purple-300/50 text-white hover:from-purple-500/30 hover:to-pink-500/30 disabled:opacity-50",title:I?W?"Start Group Discussion Panel":"Creating session...":"Connecting to AI system...",children:" Panel"}),r.jsx(He,{variant:"secondary",className:`border-white/30 ${I?"bg-green-500/20 text-green-100":"bg-red-500/20 text-red-100"}`,children:I?W?"Connected":"Creating Session...":"Disconnected"}),r.jsxs(yg,{children:[r.jsx(bg,{asChild:!0,children:r.jsx(V,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:r.jsx(q_,{className:"h-4 w-4"})})}),r.jsxs(Pd,{align:"end",className:"w-48",children:[r.jsxs(Nr,{onClick:ge,children:[r.jsx($u,{className:"w-4 h-4 mr-2"}),"Export Conversation"]}),r.jsx(Fu,{}),r.jsxs(Nr,{onClick:Dt,className:"text-red-600",children:[r.jsx(Qa,{className:"w-4 h-4 mr-2"}),"Clear Conversation"]})]})]}),r.jsx(V,{variant:"ghost",size:"sm",onClick:()=>f(!d),className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:d?r.jsx(Qr,{className:"h-4 w-4"}):r.jsx(Ga,{className:"h-4 w-4"})}),r.jsx(V,{variant:"ghost",size:"sm",onClick:s,className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:r.jsx(dn,{className:"h-4 w-4"})})]})]}),!d&&r.jsxs("div",{className:"flex flex-col overflow-hidden",style:{height:"calc(100% - 80px)"},children:[r.jsx("div",{className:"flex-1 overflow-hidden",style:{minHeight:"300px"},children:r.jsx($s,{className:"h-full w-full",children:r.jsxs("div",{className:"space-y-4 p-4 pb-2 min-h-full",children:[o.length===0&&r.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[r.jsx(nu,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),j?r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-red-500",children:j}),r.jsx("p",{className:"text-sm",children:"Please wait or refresh the page if the issue persists."})]}):I?W?r.jsx("p",{children:"Loading conversation..."}):r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{children:"Creating chat session..."}),r.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]}):r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{children:"Connecting to AI system..."}),r.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})]}),o.map((q,me)=>r.jsxs("div",{className:`flex items-start gap-3 ${q.role==="user"?"justify-end":""}`,children:[q.role==="assistant"&&r.jsx(cn,{size:24,className:"text-zinc-500 flex-shrink-0"}),q.role==="system"&&r.jsx(uS,{size:24,className:"text-blue-500 flex-shrink-0"}),r.jsxs("div",{className:`
                      p-3 rounded-lg max-w-lg break-words overflow-hidden
                      ${q.role==="user"?"bg-blue-500 text-white":"bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200"}
                      ${q.role==="system"?"bg-blue-100 dark:bg-blue-900/50 border border-blue-300 dark:border-blue-700 w-full max-w-none":""}
                    `,children:[r.jsx("div",{className:"text-sm overflow-hidden",children:q.content}),r.jsx("p",{className:"text-xs text-right mt-2 opacity-60",children:new Date(q.timestamp).toLocaleTimeString()})]}),q.role==="user"&&r.jsx("div",{className:"w-6 h-6 rounded-full bg-zinc-300 flex items-center justify-center text-zinc-600 flex-shrink-0",children:"U"})]},q.id)),r.jsx("div",{ref:$})]})})}),r.jsx("div",{className:"flex-shrink-0 border-t border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 p-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{value:l,onChange:q=>c(q.target.value),onKeyPress:ue,placeholder:I?W?j?"Connection error - please wait...":"Share your thoughts, ask questions, or request insights...":"Creating session...":"Connecting to AI system...",disabled:h,className:"w-full pr-20 resize-none",rows:2}),r.jsx(V,{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:K,disabled:!l.trim()||h,children:r.jsx(Ad,{size:18})})]})})]}),r.jsx($d,{isOpen:y,onClose:Z,selectedText:v,documentId:e??-1,documentTitle:a||"AI Discussion",chapter:t??1,paragraph:null}),r.jsx(Wr,{open:!!A,onOpenChange:q=>!q&&T(null),children:r.jsxs(Ka,{children:[r.jsxs(Xa,{children:[r.jsx(Za,{children:"Provide additional feedback"}),r.jsx(Ni,{children:"Your feedback is valuable. Please provide a reason to help us improve the AI."})]}),r.jsx(Qn,{value:z,onChange:q=>M(q.target.value),placeholder:"e.g., This response was not relevant to my question.",className:"my-4"}),r.jsxs(Ud,{children:[r.jsx(V,{variant:"outline",onClick:()=>{T(null),M("")},children:"Cancel"}),r.jsx(V,{onClick:de,children:"Submit Feedback"})]})]})})]}):null}const gv="powerSummariesPanelMinimized";function M6({documentId:e,currentChapter:t,currentChapterData:n,isVisible:s,onToggle:a}){if(!e)return null;const[o,i]=u.useState(null),[l,c]=u.useState(!1),[d,f]=u.useState(!1),[h,m]=u.useState(()=>{if(typeof window<"u"){const Q=localStorage.getItem("powerSummariesPanelPosition");if(Q)try{const _=JSON.parse(Q);if(typeof _.x=="number"&&typeof _.y=="number")return _}catch{}}const P=window.innerWidth-420-16,H=window.innerHeight-600-16;return{x:Math.max(20,P),y:Math.max(96,H)}});u.useEffect(()=>{localStorage.setItem("powerSummariesPanelPosition",JSON.stringify(h))},[h]);const[g,b]=u.useState(!1),[x,w]=u.useState({x:0,y:0}),[v,p]=u.useState({x:0,y:0}),[y,S]=u.useState(()=>typeof window<"u"?localStorage.getItem(gv)==="true":!1);Fa();const j=u.useRef(null),E=u.useRef(null),N=u.useRef(null),C=u.useRef(null),{data:A,isLoading:T,error:z,refetch:M}=Cn({queryKey:[`power-summaries-${e}`],queryFn:()=>is(`/api/power-summaries/${e}`),enabled:s&&!!e}),$=(A==null?void 0:A.summaries)||[],X=$.find(P=>P.chapter===t),k=Xl({mutationFn:async()=>{if(!e)throw new Error("Document ID is required");let P,H;if(n)P=n.paragraphs.map(se=>se.text).join(" "),H=n.title;else{const se=await fetch(`/api/documents/${e}/chapter/${t}`);if(!se.ok)throw new Error("Failed to fetch chapter data");const te=await se.json();P=te.paragraphs.map(I=>I.text).join(" "),H=te.title}const Q=await fetch("/api/ai-power-summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentId:e,chapter:t,text:P,title:H})});if(!Q.ok)throw new Error("Failed to generate power summary");return(await Q.json()).summary},onSuccess:()=>{M(),setTimeout(()=>{const P=$.find(H=>H.chapter===t);P&&i(P.id)},100)}});u.useEffect(()=>{if(s){const P=window.innerWidth-420-16,H=window.innerHeight-(y?64:Math.min(window.innerHeight-80,600))-16;m({x:Math.max(20,P),y:Math.max(96,H)})}},[y]),u.useEffect(()=>{localStorage.setItem(gv,y?"true":"false")},[y]);const R=P=>{y||(P.preventDefault(),P.stopPropagation(),b(!0),w({x:P.clientX,y:P.clientY}),p({x:P.clientX-h.x,y:P.clientY-h.y}),N.current&&(N.current.style.cursor="grabbing",N.current.style.transform="scale(1.02)",N.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},B=P=>{g&&(P.preventDefault(),P.stopPropagation(),C.current&&cancelAnimationFrame(C.current),C.current=requestAnimationFrame(()=>{const Q=y?64:Math.min(window.innerHeight-80,600),_=Math.max(10,Math.min(window.innerWidth-420-10,P.clientX-v.x)),se=Math.max(10,Math.min(window.innerHeight-Q-10,P.clientY-v.y));m({x:_,y:se})}))},O=()=>{b(!1),C.current&&(cancelAnimationFrame(C.current),C.current=null),N.current&&(N.current.style.cursor="",N.current.style.transform="",N.current.style.boxShadow="");const P=window.getSelection();P&&P.removeAllRanges(),localStorage.setItem("powerSummariesPanelPosition",JSON.stringify(h))};u.useEffect(()=>{if(g){document.addEventListener("mousemove",B,{passive:!1}),document.addEventListener("mouseup",O,{passive:!0});const P=H=>{if(H.touches.length===1){const Q=H.touches[0],_={preventDefault:()=>H.preventDefault(),stopPropagation:()=>H.stopPropagation(),clientX:Q.clientX,clientY:Q.clientY};B(_)}};return document.addEventListener("touchmove",P,{passive:!1}),document.addEventListener("touchend",O,{passive:!0}),document.body.style.overflow="hidden",()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",O),document.removeEventListener("touchmove",P),document.removeEventListener("touchend",O),document.body.style.overflow="",C.current&&(cancelAnimationFrame(C.current),C.current=null)}}},[g,v]);const U=P=>{const H=o===P;i(H?null:P),H||setTimeout(()=>{var Q;(Q=E.current)==null||Q.scrollIntoView({behavior:"smooth",block:"nearest"})},150)};u.useEffect(()=>{const P=j.current;if(!P)return;const H=()=>{const Q=P.scrollTop,_=P.scrollHeight,se=P.clientHeight;c(Q>100),f(Q+se<_-50)};return P.addEventListener("scroll",H),()=>P.removeEventListener("scroll",H)},[]);const L=()=>{var P;(P=j.current)==null||P.scrollTo({top:0,behavior:"smooth"})};return s?r.jsx(r.Fragment,{children:r.jsxs("div",{ref:N,className:`fixed bg-slate-900/95 backdrop-blur-xl border border-slate-700/50 rounded-2xl shadow-2xl z-20 overflow-hidden transition-all duration-300 ${g?"select-none cursor-grabbing":""}`,style:{left:h.x,top:h.y,width:y?"300px":"400px",height:y?"60px":`${Math.min(window.innerHeight-80,600)}px`,maxWidth:"90vw",maxHeight:"90vh",overscrollBehavior:"contain",willChange:g?"transform":"auto",transition:g?"box-shadow 0.2s ease-out, transform 0.2s ease-out":"all 0.3s ease-out",transform:g?"scale(1.02)":"scale(1)",zIndex:g?80:60},onWheel:P=>P.stopPropagation(),onScroll:P=>P.stopPropagation(),onMouseEnter:P=>P.stopPropagation(),children:[r.jsxs("div",{className:`flex items-center justify-between p-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white select-none transition-all duration-200 ${g?"cursor-grabbing bg-gradient-to-r from-purple-600 to-pink-600":"cursor-grab hover:from-purple-550 hover:to-pink-550"}`,onMouseDown:R,onDragStart:P=>P.preventDefault(),style:{userSelect:"none",touchAction:"none"},children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:r.jsx(Xt,{className:"h-4 w-4"})}),r.jsxs("div",{className:"select-none",style:{userSelect:"none"},children:[r.jsx("h3",{className:"font-semibold select-none",style:{userSelect:"none"},children:"Power Summaries"}),!y&&r.jsxs("div",{className:"flex items-center gap-2 text-white/80 text-sm",children:[r.jsx(eO,{className:"h-3 w-3"}),r.jsxs("span",{children:[$.length," ",$.length===1?"summary":"summaries"]}),!X&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsxs("div",{className:"flex items-center gap-1 text-white/60 text-xs",children:[r.jsx(gS,{className:"h-3 w-3"}),r.jsxs("span",{children:["Ch. ",t," ready to summarize"]})]})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[!y&&!X&&!k.isPending&&r.jsx(V,{onClick:()=>k.mutate(),variant:"ghost",size:"sm",className:"text-white hover:bg-white/20 p-2 h-8 w-8 group",title:`Generate summary for Chapter ${t}`,children:r.jsx(Ma,{className:"h-4 w-4 group-hover:rotate-90 transition-transform duration-200"})}),!y&&k.isPending&&r.jsxs("div",{className:"flex items-center gap-2 text-white/80 text-sm",children:[r.jsx(Al,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{className:"text-xs",children:"Generating..."})]}),r.jsx(V,{variant:"ghost",size:"sm",onClick:()=>S(!y),className:"h-8 w-8 p-0 hover:bg-white/20 text-white",children:y?r.jsx(Qr,{className:"h-4 w-4"}):r.jsx(Ga,{className:"h-4 w-4"})}),r.jsx(V,{variant:"ghost",size:"sm",onClick:a,className:"h-8 w-8 p-0 hover:bg-white/20 text-white",title:"Close Power Summaries",children:r.jsx(dn,{className:"h-4 w-4"})})]})]}),!y&&r.jsxs("div",{className:"flex-1 relative",style:{height:"calc(100% - 80px)"},children:[r.jsxs("div",{ref:j,className:"h-full overflow-y-auto p-4 scrollbar-thin",style:{scrollBehavior:"smooth"},children:[k.isError&&r.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:r.jsx("p",{className:"text-red-400 text-sm",children:"Failed to generate summary. Please try again."})}),T?r.jsx("div",{className:"space-y-4",children:[...Array(3)].map((P,H)=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-slate-700 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-slate-700 rounded w-1/2"})]},H))}):z?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Xt,{className:"h-12 w-12 text-slate-600 mx-auto mb-3"}),r.jsx("p",{className:"text-sm font-medium text-slate-400",children:"Failed to load summaries"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Please try again later"})]}):$.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsxs("div",{className:"relative mb-6",children:[r.jsx(Xt,{className:"h-12 w-12 text-slate-600 mx-auto mb-3"}),!X&&r.jsx(V,{onClick:()=>k.mutate(),disabled:k.isPending,className:"absolute -top-2 -right-2 h-6 w-6 p-0 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white border-0 shadow-lg",title:"Generate your first power summary",children:r.jsx(Ma,{className:"h-3 w-3"})})]}),r.jsx("p",{className:"text-sm font-medium text-slate-400",children:"No power summaries yet"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Click the + icon to generate your first power summary"})]}):r.jsxs("div",{className:"space-y-3",children:[X&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx($n,{className:"h-4 w-4 text-blue-400"}),r.jsx("span",{className:"text-sm font-medium text-blue-400",children:"Current Chapter"})]}),r.jsx(Mm,{ref:o===X.id?E:void 0,summary:X,isExpanded:o===X.id,onToggle:()=>U(X.id),isCurrentChapter:!0})]}),!X&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx($n,{className:"h-4 w-4 text-blue-400"}),r.jsx("span",{className:"text-sm font-medium text-blue-400",children:"Current Chapter"})]}),r.jsx("div",{className:"rounded-xl border border-dashed border-slate-600/50 bg-slate-800/30 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-lg flex items-center justify-center text-xs font-bold text-white",children:t}),r.jsxs("div",{children:[r.jsxs("h5",{className:"font-medium text-white text-sm",children:["Chapter ",t]}),r.jsx("p",{className:"text-xs text-slate-400",children:"No summary yet"})]})]}),r.jsx(V,{onClick:()=>k.mutate(),disabled:k.isPending,size:"sm",className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white border-0",children:k.isPending?r.jsx(Al,{className:"h-3 w-3 animate-spin"}):r.jsx(Ma,{className:"h-3 w-3"})})]})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-3",children:"All Summaries"}),$.filter(P=>P.chapter!==t).map(P=>r.jsx(Mm,{ref:o===P.id?E:void 0,summary:P,isExpanded:o===P.id,onToggle:()=>U(P.id),isCurrentChapter:!1},P.id))]})]})]}),d&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-slate-900/95 to-transparent pointer-events-none"})]}),!y&&l&&r.jsx("button",{onClick:L,className:"absolute right-4 bottom-4 w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center z-10 group",title:"Scroll to top",children:r.jsx(cS,{className:"h-3 w-3 group-hover:animate-bounce"})})]})}):r.jsx("div",{className:"fixed bottom-56 right-6 z-10",children:r.jsxs(V,{onClick:a,className:"h-14 w-14 rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white border-0 relative",title:"Open Power Summaries",children:[r.jsx(Xt,{className:"h-6 w-6"}),$.length>0&&r.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-white/20 rounded-full flex items-center justify-center border-2 border-white/50",children:r.jsx("span",{className:"text-xs font-bold text-white",children:$.length})})]})})}const Mm=Es.forwardRef(({summary:e,isExpanded:t,onToggle:n,isCurrentChapter:s},a)=>{const{toast:o}=Ft(),i=Fa(),[l,c]=u.useState(!1),d=async()=>{if(window.confirm("Delete this power summary?")){c(!0);try{if(!(await fetch(`/api/power-summaries/${e.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete");o({title:"Power summary deleted",variant:"default"}),i.invalidateQueries()}catch{o({title:"Failed to delete power summary",variant:"destructive"})}finally{c(!1)}}},f=h=>{try{const m=new Date(h);return isNaN(m.getTime())||h==="CURRENT_TIMESTAMP"?"Recently created":m.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Recently created"}};return r.jsxs("div",{ref:a,className:`rounded-xl border transition-all duration-300 ${s?"border-blue-500/50 bg-gradient-to-r from-blue-500/10 to-purple-500/10":"border-slate-700/50 bg-slate-800/50 hover:border-slate-600/50"}`,children:[r.jsxs("button",{onClick:n,className:"w-full p-4 text-left flex items-center justify-between hover:bg-slate-700/30 transition-colors rounded-xl",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("div",{className:`w-6 h-6 rounded-lg flex items-center justify-center text-xs font-bold ${s?"bg-blue-500 text-white":"bg-purple-500 text-white"}`,children:e.chapter}),r.jsx("h5",{className:"font-medium text-white text-sm truncate",children:e.chapterTitle})]}),r.jsx("p",{className:"text-xs text-slate-400 line-clamp-2",children:e.powerSummary}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx(ec,{className:"h-3 w-3 text-slate-500"}),r.jsx("span",{className:"text-xs text-slate-500",children:f(e.createdAt)})]})]}),r.jsx("div",{className:"ml-3 flex-shrink-0",children:t?r.jsx(kd,{className:"h-4 w-4 text-slate-400"}):r.jsx(lg,{className:"h-4 w-4 text-slate-400"})})]}),t&&r.jsxs("div",{className:"px-4 pb-4 space-y-4 border-t border-slate-700/50 mt-2 pt-4",children:[r.jsx("div",{className:"flex justify-end mb-2",children:r.jsx(V,{variant:"ghost",size:"icon",className:"text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-full",onClick:d,disabled:l,title:"Delete power summary",children:r.jsx(Qa,{className:"h-5 w-5"})})}),r.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 to-cyan-500/10 rounded-lg p-3 border border-blue-500/20",children:[r.jsxs("h6",{className:"flex items-center gap-2 text-sm font-medium text-blue-300 mb-3",children:[r.jsx(Xt,{className:"h-4 w-4"}),"Power Summary"]}),r.jsx("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700/30",children:r.jsx("p",{className:"text-sm text-slate-200 leading-relaxed font-medium",children:e.powerSummary})})]})]})]})});Mm.displayName="PowerSummaryCard";var Fd="Tabs",[_6,Mz]=fn(Fd,[Md]),Ej=Md(),[O6,_g]=_6(Fd),kj=u.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=e,f=Si(l),[h,m]=Ua({prop:s,onChange:a,defaultProp:o??"",caller:Fd});return r.jsx(O6,{scope:n,baseId:qn(),value:h,onValueChange:m,orientation:i,dir:f,activationMode:c,children:r.jsx(xe.div,{dir:f,"data-orientation":i,...d,ref:t})})});kj.displayName=Fd;var Aj="TabsList",Tj=u.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...a}=e,o=_g(Aj,n),i=Ej(n);return r.jsx(TS,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:s,children:r.jsx(xe.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});Tj.displayName=Aj;var Rj="TabsTrigger",Mj=u.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...o}=e,i=_g(Rj,n),l=Ej(n),c=Dj(i.baseId,s),d=Lj(i.baseId,s),f=s===i.value;return r.jsx(RS,{asChild:!0,...l,focusable:!a,active:f,children:r.jsx(xe.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...o,ref:t,onMouseDown:ae(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?i.onValueChange(s):h.preventDefault()}),onKeyDown:ae(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(s)}),onFocus:ae(e.onFocus,()=>{const h=i.activationMode!=="manual";!f&&!a&&h&&i.onValueChange(s)})})})});Mj.displayName=Rj;var _j="TabsContent",Oj=u.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:a,children:o,...i}=e,l=_g(_j,n),c=Dj(l.baseId,s),d=Lj(l.baseId,s),f=s===l.value,h=u.useRef(f);return u.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),r.jsx(Ot,{present:a||f,children:({present:m})=>r.jsx(xe.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&o})})});Oj.displayName=_j;function Dj(e,t){return`${e}-trigger-${t}`}function Lj(e,t){return`${e}-content-${t}`}var D6=kj,zj=Tj,Pj=Mj,Ij=Oj;const Uj=D6,Og=u.forwardRef(({className:e,...t},n)=>r.jsx(zj,{ref:n,className:Ne("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Og.displayName=zj.displayName;const jr=u.forwardRef(({className:e,...t},n)=>r.jsx(Pj,{ref:n,className:Ne("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));jr.displayName=Pj.displayName;const Cr=u.forwardRef(({className:e,...t},n)=>r.jsx(Ij,{ref:n,className:Ne("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Cr.displayName=Ij.displayName;const xv="aiQuizAgentPanelPosition",vv="aiQuizAgentPanelMinimized",L6=({quiz:e})=>{var m;const[t,n]=u.useState(0),[s,a]=u.useState({}),[o,i]=u.useState(!1),l=e.questions[t],c=g=>{a(b=>({...b,[t]:g}))},d=()=>{t<e.questions.length-1?n(g=>g+1):i(!0)},f=()=>{t>0&&n(g=>g-1)},h=()=>e.questions.reduce((g,b,x)=>s[x]===b.correctAnswer?g+1:g,0);return o?r.jsxs("div",{className:"p-4",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Quiz Results"}),r.jsxs("p",{className:"text-lg mb-4",children:["You scored ",h()," out of ",e.questions.length]}),r.jsx(V,{onClick:()=>{i(!1),n(0),a({})},children:"Retake Quiz"}),r.jsx("div",{className:"mt-6 space-y-4",children:e.questions.map((g,b)=>r.jsxs("div",{className:`p-3 rounded-lg ${s[b]===g.correctAnswer?"bg-green-100 dark:bg-green-900/50":"bg-red-100 dark:bg-red-900/50"}`,children:[r.jsxs("p",{className:"font-semibold",children:[b+1,". ",g.question]}),r.jsxs("p",{children:["Your answer: ",s[b]||"Not answered"]}),r.jsxs("p",{children:["Correct answer: ",g.correctAnswer]}),r.jsx("p",{className:"text-sm mt-2",children:r.jsx("em",{children:g.explanation})})]},g.id))})]}):l?r.jsxs("div",{className:"p-4 flex flex-col h-full",children:[r.jsxs("div",{className:"mb-4",children:[r.jsxs("p",{className:"text-sm text-zinc-500",children:["Question ",t+1," of ",e.questions.length]}),r.jsx("h2",{className:"text-lg font-semibold mt-1",children:l.question})]}),r.jsx("div",{className:"flex-1 space-y-3",children:(m=l.options)==null?void 0:m.map((g,b)=>r.jsxs("div",{onClick:()=>c(g),className:`flex items-center p-3 rounded-lg cursor-pointer transition-colors border-2 ${s[t]===g?"bg-blue-100 dark:bg-blue-900/50 border-blue-500":"bg-zinc-100 dark:bg-zinc-800 border-transparent hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:[r.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex-shrink-0 ${s[t]===g?"bg-blue-500 border-blue-500":"border-zinc-400"}`}),r.jsx("span",{children:g})]},b))}),r.jsxs("div",{className:"flex justify-between items-center mt-4",children:[r.jsx(V,{onClick:f,disabled:t===0,children:"Previous"}),r.jsx(V,{onClick:d,children:t===e.questions.length-1?"Finish":"Next"})]})]}):r.jsx("div",{children:"Loading question..."})},z6=({history:e,onTakeAgain:t})=>r.jsxs("div",{className:"space-y-4 h-full",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Quiz History"}),e.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-500",children:[r.jsx(tc,{size:48}),r.jsx("p",{className:"mt-4 text-center",children:"No quiz history yet."}),r.jsx("p",{className:"text-sm text-center mt-2",children:"Complete some quizzes to see them here!"})]}):r.jsx($s,{className:"flex-1",children:r.jsx("div",{className:"space-y-3",children:e.map(n=>r.jsx(Oe,{className:"p-4",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold",children:n.title}),r.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:n.description}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsxs(He,{variant:"outline",className:"text-xs",children:[n.questions.length," questions"]}),r.jsx(He,{variant:"outline",className:"text-xs",children:n.difficulty}),r.jsxs(He,{variant:"outline",className:"text-xs",children:[n.estimatedTime," min"]})]})]}),r.jsx(V,{size:"sm",onClick:()=>t(n),children:"Take Again"})]})},n.id))})})]});function P6({documentId:e,chapter:t,isOpen:n,onToggle:s}){const[a,o]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(()=>typeof window<"u"?localStorage.getItem(vv)==="true":!1),[f,h]=u.useState("chat"),[m,g]=u.useState(!1),[b,x]=u.useState(null),[w,v]=u.useState([]),p=u.useRef(null),[y,S]=u.useState(()=>{if(typeof window<"u"){const G=localStorage.getItem(xv);if(G)try{const Re=JSON.parse(G);if(typeof Re.x=="number"&&typeof Re.y=="number")return Re}catch{}const F=Math.min(window.innerWidth*.8,1200),ne=window.innerHeight*.8,ee=(window.innerWidth-F)/2,le=(window.innerHeight-ne)/2;return{x:ee,y:le}}return{x:100,y:100}}),[j,E]=u.useState(!1),[N,C]=u.useState({x:0,y:0}),[A,T]=u.useState({x:0,y:0}),z=u.useRef(null),M=u.useRef(null),$=u.useRef(),{toast:X}=Ft(),{socket:k,isConnected:R,agentStatuses:B,sendQuizRequest:O}=qd();u.useEffect(()=>{var G;(G=p.current)==null||G.scrollIntoView({behavior:"smooth"})},[a]),u.useEffect(()=>{if(!k)return;const G=F=>{g(!1),o(ne=>{const ee=ne.filter(le=>!(le.role==="assistant"&&(le.content==="Processing your request..."||le.content.startsWith("Sorry, I encountered an error")||le.content.startsWith("I apologize, but the quiz generation is taking longer"))));if(F.success&&F.quiz){x(F.quiz),h("quiz");const le={id:`msg-success-${Date.now()}`,role:"assistant",content:` Quiz generated successfully!

**${F.quiz.title}**
${F.quiz.description}

 **Quiz Details:**
 ${F.quiz.questions.length} questions
 ${F.quiz.difficulty} difficulty
 Estimated time: ${F.quiz.estimatedTime} minutes
 Tags: ${F.quiz.tags.join(", ")}

Click on the "Quiz" tab to take the quiz!`,timestamp:new Date,quiz:F.quiz};return[...ee,le]}else{const le=ee.filter(ce=>!(ce.role==="assistant"&&ce.content.startsWith("Sorry, I encountered an error"))),Re={id:`msg-error-${Date.now()}`,role:"assistant",content:F.message||"Sorry, I encountered an error generating your quiz. Please try again with a different request.",timestamp:new Date};return[...le,Re]}})};return k.on("quizGenerated",G),()=>{k.off("quizGenerated",G)}},[k]),u.useEffect(()=>{if(n&&a.length===0){const G={id:`msg-welcome-${Date.now()}`,role:"assistant",content:` Welcome to the Quiz Agent! I can help you create personalized quizzes about the content you're reading.

**What I can do:**
 Generate quizzes from any chapter or document
 Create different question types (multiple choice, true/false, etc.)
 Adapt difficulty to your level
 Provide detailed explanations for answers
 Focus on the specific book's unique content and themes

**Try asking:**
 "Create a 10-question quiz about this chapter"
 "Make an easy quiz with multiple choice questions"
 "Generate a hard quiz with short answer questions"
 "Quiz me on the main characters and themes"

What kind of quiz would you like to create about this content?`,timestamp:new Date};o([G])}},[n,a.length]),u.useEffect(()=>{if($.current!==t&&t!==void 0){const G={id:`msg-system-${Date.now()}`,role:"system",content:`Context updated to Chapter ${t}. I can now create quizzes about this specific chapter.`,timestamp:new Date};o(F=>[...F,G]),X({title:"Context Updated",description:`The Quiz Agent is now aware you are on chapter ${t}.`,duration:3e3}),$.current=t}},[t,X]);const U=(G,F,ne)=>{const ee={id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,role:G,content:F,timestamp:new Date,quiz:ne};o(le=>[...le,ee])},L=async()=>{if(!i.trim()||!R)return;const G=i.trim();l(""),U("user",G),U("assistant","Processing your request..."),g(!0);try{await O(G,{documentId:e,chapter:t,userId:2}),setTimeout(()=>{m&&(g(!1),U("assistant","I apologize, but the quiz generation is taking longer than expected. Please try again."))},6e4)}catch(F){g(!1),U("assistant","Sorry, I encountered an error. Please try again."),console.error("Quiz message error:",F)}},P=G=>{G.key==="Enter"&&!G.shiftKey&&(G.preventDefault(),L())},H=G=>{if(G.preventDefault(),E(!0),z.current){const F=z.current.getBoundingClientRect();C({x:G.clientX,y:G.clientY}),T({x:G.clientX-F.left,y:G.clientY-F.top})}},Q=G=>{if(!j||!z.current)return;const F=()=>{const ne=G.clientX-A.x,ee=G.clientY-A.y;S({x:ne,y:ee})};M.current&&cancelAnimationFrame(M.current),M.current=requestAnimationFrame(F)},_=()=>{j&&(E(!1),localStorage.setItem(xv,JSON.stringify(y)))},se=G=>{if(!j||!z.current)return;const F=()=>{const ne=G.touches[0],ee=ne.clientX-A.x,le=ne.clientY-A.y;S({x:ee,y:le})};M.current&&cancelAnimationFrame(M.current),M.current=requestAnimationFrame(F)};u.useEffect(()=>(j?(window.addEventListener("mousemove",Q),window.addEventListener("mouseup",_),window.addEventListener("touchmove",se),window.addEventListener("touchend",_),document.body.style.userSelect="none"):(window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",_),window.removeEventListener("touchmove",se),window.removeEventListener("touchend",_),document.body.style.userSelect="auto"),()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",_),window.removeEventListener("touchmove",se),window.removeEventListener("touchend",_),M.current&&cancelAnimationFrame(M.current)}),[j]);const te=()=>{d(!c),localStorage.setItem(vv,String(!c))},I=G=>G.split(/(\n|\*\*.*?\*\*|`.*?`)/g).filter(Boolean).map((ne,ee)=>ne===`
`?r.jsx("br",{},ee):ne.startsWith("**")&&ne.endsWith("**")?r.jsx("strong",{children:ne.slice(2,-2)},ee):ne.startsWith("`")&&ne.endsWith("`")?r.jsx("code",{className:"bg-zinc-200 dark:bg-zinc-700 rounded-sm px-1 font-mono text-xs",children:ne.slice(1,-1)},ee):r.jsx("span",{className:"break-words",children:ne},ee)),W=B.find(G=>G.name==="QuizAgent");return n?r.jsx("div",{ref:z,className:`fixed ${c?"bottom-4 right-4":""} z-50 flex items-center justify-center`,style:{left:c?"auto":`${y.x}px`,top:c?"auto":`${y.y}px`,touchAction:"none"},children:r.jsxs(Oe,{className:`bg-white/80 dark:bg-zinc-900/80 backdrop-blur-lg shadow-2xl rounded-xl border border-zinc-200 dark:border-zinc-800 transition-all duration-300 ease-in-out ${c?"w-80 h-12":"w-[80vw] max-w-[1200px] h-[80vh] flex flex-col"}`,children:[r.jsxs(Fe,{className:`flex flex-row items-center justify-between p-2 pl-4 bg-zinc-100/80 dark:bg-zinc-800/80 rounded-t-xl ${j?"cursor-grabbing":"cursor-grab"}`,onMouseDown:H,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cn,{size:18,className:"text-zinc-600 dark:text-zinc-300"}),r.jsx(Qe,{className:"text-base font-semibold text-zinc-800 dark:text-zinc-100",children:"AI Quiz Agent"}),W&&r.jsx(He,{variant:W.isRunning?"default":"secondary",children:W.isRunning?"Active":"Idle"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(V,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:te,children:r.jsx(Ga,{size:16})}),r.jsx(V,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:s,children:r.jsx(dn,{size:16})})]})]}),!c&&r.jsx(Ie,{className:"p-0 flex-1 flex flex-col overflow-hidden",children:r.jsxs(Uj,{value:f,onValueChange:G=>h(G),className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs(Og,{className:"grid w-full grid-cols-3 rounded-none bg-zinc-100/80 dark:bg-zinc-800/80 flex-shrink-0",children:[r.jsx(jr,{value:"chat",children:"Chat"}),r.jsx(jr,{value:"quiz",disabled:!b,children:"Quiz"}),r.jsx(jr,{value:"history",children:"History"})]}),r.jsxs(Cr,{value:"chat",className:"flex-1 flex flex-col overflow-hidden h-full",children:[r.jsx("div",{className:"flex-1 overflow-hidden",style:{minHeight:"300px"},children:r.jsx($s,{className:"h-full w-full",children:r.jsxs("div",{className:"space-y-4 p-4 pb-2 min-h-full",children:[a.map((G,F)=>r.jsxs("div",{className:`flex items-start gap-3 ${G.role==="user"?"justify-end":""}`,children:[G.role==="assistant"&&r.jsx(cn,{size:24,className:"text-zinc-500 flex-shrink-0"}),G.role==="system"&&r.jsx(uS,{size:24,className:"text-blue-500 flex-shrink-0"}),r.jsxs("div",{className:`
                            p-3 rounded-lg max-w-lg break-words overflow-hidden
                            ${G.role==="user"?"bg-blue-500 text-white":"bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200"}
                            ${G.role==="system"?"bg-blue-100 dark:bg-blue-900/50 border border-blue-300 dark:border-blue-700 w-full max-w-none":""}
                          `,children:[r.jsx("div",{className:"text-sm overflow-hidden",children:I(G.content)}),r.jsx("p",{className:"text-xs text-right mt-2 opacity-60",children:new Date(G.timestamp).toLocaleTimeString()})]}),G.role==="user"&&r.jsx("div",{className:"w-6 h-6 rounded-full bg-zinc-300 flex items-center justify-center text-zinc-600 flex-shrink-0",children:"U"})]},G.id)),m&&r.jsx(Tg,{isTyping:m}),r.jsx("div",{ref:p})]})})}),r.jsx("div",{className:"flex-shrink-0 border-t border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 p-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{value:i,onChange:G=>l(G.target.value),onKeyPress:P,placeholder:"Ask a question or request a quiz...",className:"w-full pr-20 resize-none",rows:2}),r.jsx(V,{className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:L,disabled:!i.trim()||!R||m,children:r.jsx(Ad,{size:18})})]})})]}),r.jsx(Cr,{value:"quiz",className:"flex-1 overflow-hidden p-4",children:b?r.jsx("div",{className:"h-full overflow-auto",children:r.jsx(L6,{quiz:b})}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-500",children:[r.jsx(Xt,{size:48}),r.jsx("p",{className:"mt-4",children:"No quiz active."}),r.jsx("p",{className:"text-sm text-center mt-2",children:"Generate a quiz from the chat tab to start."})]})}),r.jsx(Cr,{value:"history",className:"flex-1 overflow-hidden p-4",children:r.jsx("div",{className:"h-full overflow-auto",children:r.jsx(z6,{history:w,onTakeAgain:G=>{x(G),h("quiz")}})})})]})})]})}):null}function $j(e){const t=u.useRef({value:e,previous:e});return u.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Bj=["PageUp","PageDown"],Hj=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],qj={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ji="Slider",[_m,I6,U6]=Td(ji),[Fj,_z]=fn(ji,[U6]),[$6,Vd]=Fj(ji),Vj=u.forwardRef((e,t)=>{const{name:n,min:s=0,max:a=100,step:o=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:f,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:b,...x}=e,w=u.useRef(new Set),v=u.useRef(0),y=i==="horizontal"?B6:H6,[S=[],j]=Ua({prop:f,defaultProp:d,onChange:z=>{var $;($=[...w.current][v.current])==null||$.focus(),h(z)}}),E=u.useRef(S);function N(z){const M=G6(S,z);T(z,M)}function C(z){T(z,v.current)}function A(){const z=E.current[v.current];S[v.current]!==z&&m(S)}function T(z,M,{commit:$}={commit:!1}){const X=Z6(o),k=W6(Math.round((z-s)/o)*o+s,X),R=_l(k,[s,a]);j((B=[])=>{const O=V6(B,R,M);if(X6(O,c*o)){v.current=O.indexOf(R);const U=String(O)!==String(B);return U&&$&&m(O),U?O:B}else return B})}return r.jsx($6,{scope:e.__scopeSlider,name:n,disabled:l,min:s,max:a,valueIndexToChangeRef:v,thumbs:w.current,values:S,orientation:i,form:b,children:r.jsx(_m.Provider,{scope:e.__scopeSlider,children:r.jsx(_m.Slot,{scope:e.__scopeSlider,children:r.jsx(y,{"aria-disabled":l,"data-disabled":l?"":void 0,...x,ref:t,onPointerDown:ae(x.onPointerDown,()=>{l||(E.current=S)}),min:s,max:a,inverted:g,onSlideStart:l?void 0:N,onSlideMove:l?void 0:C,onSlideEnd:l?void 0:A,onHomeKeyDown:()=>!l&&T(s,0,{commit:!0}),onEndKeyDown:()=>!l&&T(a,S.length-1,{commit:!0}),onStepKeyDown:({event:z,direction:M})=>{if(!l){const k=Bj.includes(z.key)||z.shiftKey&&Hj.includes(z.key)?10:1,R=v.current,B=S[R],O=o*k*M;T(B+O,R,{commit:!0})}}})})})})});Vj.displayName=ji;var[Yj,Gj]=Fj(ji,{startEdge:"left",endEdge:"right",size:"width",direction:1}),B6=u.forwardRef((e,t)=>{const{min:n,max:s,dir:a,inverted:o,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...f}=e,[h,m]=u.useState(null),g=je(t,y=>m(y)),b=u.useRef(void 0),x=Si(a),w=x==="ltr",v=w&&!o||!w&&o;function p(y){const S=b.current||h.getBoundingClientRect(),j=[0,S.width],N=Dg(j,v?[n,s]:[s,n]);return b.current=S,N(y-S.left)}return r.jsx(Yj,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:r.jsx(Qj,{dir:x,"data-orientation":"horizontal",...f,ref:g,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:y=>{const S=p(y.clientX);i==null||i(S)},onSlideMove:y=>{const S=p(y.clientX);l==null||l(S)},onSlideEnd:()=>{b.current=void 0,c==null||c()},onStepKeyDown:y=>{const j=qj[v?"from-left":"from-right"].includes(y.key);d==null||d({event:y,direction:j?-1:1})}})})}),H6=u.forwardRef((e,t)=>{const{min:n,max:s,inverted:a,onSlideStart:o,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c,...d}=e,f=u.useRef(null),h=je(t,f),m=u.useRef(void 0),g=!a;function b(x){const w=m.current||f.current.getBoundingClientRect(),v=[0,w.height],y=Dg(v,g?[s,n]:[n,s]);return m.current=w,y(x-w.top)}return r.jsx(Yj,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:r.jsx(Qj,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const w=b(x.clientY);o==null||o(w)},onSlideMove:x=>{const w=b(x.clientY);i==null||i(w)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:x=>{const v=qj[g?"from-bottom":"from-top"].includes(x.key);c==null||c({event:x,direction:v?-1:1})}})})}),Qj=u.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c,...d}=e,f=Vd(ji,n);return r.jsx(xe.span,{...d,ref:t,onKeyDown:ae(e.onKeyDown,h=>{h.key==="Home"?(i(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):Bj.concat(Hj).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:ae(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(m)?m.focus():s(h)}),onPointerMove:ae(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:ae(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),o(h))})})}),Kj="SliderTrack",Xj=u.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=Vd(Kj,n);return r.jsx(xe.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});Xj.displayName=Kj;var Om="SliderRange",Zj=u.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,a=Vd(Om,n),o=Gj(Om,n),i=u.useRef(null),l=je(t,i),c=a.values.length,d=a.values.map(m=>e2(m,a.min,a.max)),f=c>1?Math.min(...d):0,h=100-Math.max(...d);return r.jsx(xe.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:l,style:{...e.style,[o.startEdge]:f+"%",[o.endEdge]:h+"%"}})});Zj.displayName=Om;var Dm="SliderThumb",Wj=u.forwardRef((e,t)=>{const n=I6(e.__scopeSlider),[s,a]=u.useState(null),o=je(t,l=>a(l)),i=u.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return r.jsx(q6,{...e,ref:o,index:i})}),q6=u.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:a,...o}=e,i=Vd(Dm,n),l=Gj(Dm,n),[c,d]=u.useState(null),f=je(t,p=>d(p)),h=c?i.form||!!c.closest("form"):!0,m=m1(c),g=i.values[s],b=g===void 0?0:e2(g,i.min,i.max),x=Y6(s,i.values.length),w=m==null?void 0:m[l.size],v=w?Q6(w,b,l.direction):0;return u.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${b}% + ${v}px)`},children:[r.jsx(_m.ItemSlot,{scope:e.__scopeSlider,children:r.jsx(xe.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":i.min,"aria-valuenow":g,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:f,style:g===void 0?{display:"none"}:e.style,onFocus:ae(e.onFocus,()=>{i.valueIndexToChangeRef.current=s})})}),h&&r.jsx(Jj,{name:a??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:g},s)]})});Wj.displayName=Dm;var F6="RadioBubbleInput",Jj=u.forwardRef(({__scopeSlider:e,value:t,...n},s)=>{const a=u.useRef(null),o=je(a,s),i=$j(t);return u.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&f){const h=new Event("input",{bubbles:!0});f.call(l,t),l.dispatchEvent(h)}},[i,t]),r.jsx(xe.input,{style:{display:"none"},...n,ref:o,defaultValue:t})});Jj.displayName=F6;function V6(e=[],t,n){const s=[...e];return s[n]=t,s.sort((a,o)=>a-o)}function e2(e,t,n){const o=100/(n-t)*(e-t);return _l(o,[0,100])}function Y6(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function G6(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),s=Math.min(...n);return n.indexOf(s)}function Q6(e,t,n){const s=e/2,o=Dg([0,50],[0,s]);return(s-o(t)*n)*n}function K6(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function X6(e,t){if(t>0){const n=K6(e);return Math.min(...n)>=t}return!0}function Dg(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function Z6(e){return(String(e).split(".")[1]||"").length}function W6(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var t2=Vj,J6=Xj,eL=Zj,tL=Wj;const ru=u.forwardRef(({className:e,...t},n)=>r.jsxs(t2,{ref:n,className:Ne("relative flex w-full touch-none select-none items-center",e),...t,children:[r.jsx(J6,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:r.jsx(eL,{className:"absolute h-full bg-primary"})}),r.jsx(tL,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ru.displayName=t2.displayName;var nL=[" ","Enter","ArrowUp","ArrowDown"],sL=[" ","Enter"],Pr="Select",[Yd,Gd,aL]=Td(Pr),[Ci,Oz]=fn(Pr,[aL,Va]),Qd=Va(),[rL,Wa]=Ci(Pr),[oL,iL]=Ci(Pr),n2=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:f,autoComplete:h,disabled:m,required:g,form:b}=e,x=Qd(t),[w,v]=u.useState(null),[p,y]=u.useState(null),[S,j]=u.useState(!1),E=Si(d),[N,C]=Ua({prop:s,defaultProp:a??!1,onChange:o,caller:Pr}),[A,T]=Ua({prop:i,defaultProp:l,onChange:c,caller:Pr}),z=u.useRef(null),M=w?b||!!w.closest("form"):!0,[$,X]=u.useState(new Set),k=Array.from($).map(R=>R.props.value).join(";");return r.jsx(Jp,{...x,children:r.jsxs(rL,{required:g,scope:t,trigger:w,onTriggerChange:v,valueNode:p,onValueNodeChange:y,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:qn(),value:A,onValueChange:T,open:N,onOpenChange:C,dir:E,triggerPointerDownPosRef:z,disabled:m,children:[r.jsx(Yd.Provider,{scope:t,children:r.jsx(oL,{scope:e.__scopeSelect,onNativeOptionAdd:u.useCallback(R=>{X(B=>new Set(B).add(R))},[]),onNativeOptionRemove:u.useCallback(R=>{X(B=>{const O=new Set(B);return O.delete(R),O})},[]),children:n})}),M?r.jsxs(E2,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:A,onChange:R=>T(R.target.value),disabled:m,form:b,children:[A===void 0?r.jsx("option",{value:""}):null,Array.from($)]},k):null]})})};n2.displayName=Pr;var s2="SelectTrigger",a2=u.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...a}=e,o=Qd(n),i=Wa(s2,n),l=i.disabled||s,c=je(t,i.onTriggerChange),d=Gd(n),f=u.useRef("touch"),[h,m,g]=A2(x=>{const w=d().filter(y=>!y.disabled),v=w.find(y=>y.value===i.value),p=T2(w,x,v);p!==void 0&&i.onValueChange(p.value)}),b=x=>{l||(i.onOpenChange(!0),g()),x&&(i.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return r.jsx(Wl,{asChild:!0,...o,children:r.jsx(xe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":k2(i.value)?"":void 0,...a,ref:c,onClick:ae(a.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&b(x)}),onPointerDown:ae(a.onPointerDown,x=>{f.current=x.pointerType;const w=x.target;w.hasPointerCapture(x.pointerId)&&w.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(b(x),x.preventDefault())}),onKeyDown:ae(a.onKeyDown,x=>{const w=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&m(x.key),!(w&&x.key===" ")&&nL.includes(x.key)&&(b(),x.preventDefault())})})})});a2.displayName=s2;var r2="SelectValue",o2=u.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,children:o,placeholder:i="",...l}=e,c=Wa(r2,n),{onValueNodeHasChildrenChange:d}=c,f=o!==void 0,h=je(t,c.onValueNodeChange);return kt(()=>{d(f)},[d,f]),r.jsx(xe.span,{...l,ref:h,style:{pointerEvents:"none"},children:k2(c.value)?r.jsx(r.Fragment,{children:i}):o})});o2.displayName=r2;var lL="SelectIcon",i2=u.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...a}=e;return r.jsx(xe.span,{"aria-hidden":!0,...a,ref:t,children:s||""})});i2.displayName=lL;var cL="SelectPortal",l2=e=>r.jsx(Jl,{asChild:!0,...e});l2.displayName=cL;var Ir="SelectContent",c2=u.forwardRef((e,t)=>{const n=Wa(Ir,e.__scopeSelect),[s,a]=u.useState();if(kt(()=>{a(new DocumentFragment)},[]),!n.open){const o=s;return o?li.createPortal(r.jsx(u2,{scope:e.__scopeSelect,children:r.jsx(Yd.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),o):null}return r.jsx(d2,{...e,ref:t})});c2.displayName=Ir;var On=10,[u2,Ja]=Ci(Ir),uL="SelectContentImpl",dL=za("SelectContent.RemoveScroll"),d2=u.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:b,hideWhenDetached:x,avoidCollisions:w,...v}=e,p=Wa(Ir,n),[y,S]=u.useState(null),[j,E]=u.useState(null),N=je(t,I=>S(I)),[C,A]=u.useState(null),[T,z]=u.useState(null),M=Gd(n),[$,X]=u.useState(!1),k=u.useRef(!1);u.useEffect(()=>{if(y)return _d(y)},[y]),Rd();const R=u.useCallback(I=>{const[W,...G]=M().map(ee=>ee.ref.current),[F]=G.slice(-1),ne=document.activeElement;for(const ee of I)if(ee===ne||(ee==null||ee.scrollIntoView({block:"nearest"}),ee===W&&j&&(j.scrollTop=0),ee===F&&j&&(j.scrollTop=j.scrollHeight),ee==null||ee.focus(),document.activeElement!==ne))return},[M,j]),B=u.useCallback(()=>R([C,y]),[R,C,y]);u.useEffect(()=>{$&&B()},[$,B]);const{onOpenChange:O,triggerPointerDownPosRef:U}=p;u.useEffect(()=>{if(y){let I={x:0,y:0};const W=F=>{var ne,ee;I={x:Math.abs(Math.round(F.pageX)-(((ne=U.current)==null?void 0:ne.x)??0)),y:Math.abs(Math.round(F.pageY)-(((ee=U.current)==null?void 0:ee.y)??0))}},G=F=>{I.x<=10&&I.y<=10?F.preventDefault():y.contains(F.target)||O(!1),document.removeEventListener("pointermove",W),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",W),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",W),document.removeEventListener("pointerup",G,{capture:!0})}}},[y,O,U]),u.useEffect(()=>{const I=()=>O(!1);return window.addEventListener("blur",I),window.addEventListener("resize",I),()=>{window.removeEventListener("blur",I),window.removeEventListener("resize",I)}},[O]);const[L,P]=A2(I=>{const W=M().filter(ne=>!ne.disabled),G=W.find(ne=>ne.ref.current===document.activeElement),F=T2(W,I,G);F&&setTimeout(()=>F.ref.current.focus())}),H=u.useCallback((I,W,G)=>{const F=!k.current&&!G;(p.value!==void 0&&p.value===W||F)&&(A(I),F&&(k.current=!0))},[p.value]),Q=u.useCallback(()=>y==null?void 0:y.focus(),[y]),_=u.useCallback((I,W,G)=>{const F=!k.current&&!G;(p.value!==void 0&&p.value===W||F)&&z(I)},[p.value]),se=s==="popper"?Lm:f2,te=se===Lm?{side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:b,hideWhenDetached:x,avoidCollisions:w}:{};return r.jsx(u2,{scope:n,content:y,viewport:j,onViewportChange:E,itemRefCallback:H,selectedItem:C,onItemLeave:Q,itemTextRefCallback:_,focusSelectedItem:B,selectedItemText:T,position:s,isPositioned:$,searchRef:L,children:r.jsx(ac,{as:dL,allowPinchZoom:!0,children:r.jsx(nc,{asChild:!0,trapped:p.open,onMountAutoFocus:I=>{I.preventDefault()},onUnmountAutoFocus:ae(a,I=>{var W;(W=p.trigger)==null||W.focus({preventScroll:!0}),I.preventDefault()}),children:r.jsx(gi,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:I=>I.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:r.jsx(se,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:I=>I.preventDefault(),...v,...te,onPlaced:()=>X(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ae(v.onKeyDown,I=>{const W=I.ctrlKey||I.altKey||I.metaKey;if(I.key==="Tab"&&I.preventDefault(),!W&&I.key.length===1&&P(I.key),["ArrowUp","ArrowDown","Home","End"].includes(I.key)){let F=M().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);if(["ArrowUp","End"].includes(I.key)&&(F=F.slice().reverse()),["ArrowUp","ArrowDown"].includes(I.key)){const ne=I.target,ee=F.indexOf(ne);F=F.slice(ee+1)}setTimeout(()=>R(F)),I.preventDefault()}})})})})})})});d2.displayName=uL;var fL="SelectItemAlignedPosition",f2=u.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...a}=e,o=Wa(Ir,n),i=Ja(Ir,n),[l,c]=u.useState(null),[d,f]=u.useState(null),h=je(t,N=>f(N)),m=Gd(n),g=u.useRef(!1),b=u.useRef(!0),{viewport:x,selectedItem:w,selectedItemText:v,focusSelectedItem:p}=i,y=u.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&x&&w&&v){const N=o.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),A=o.valueNode.getBoundingClientRect(),T=v.getBoundingClientRect();if(o.dir!=="rtl"){const ne=T.left-C.left,ee=A.left-ne,le=N.left-ee,Re=N.width+le,ce=Math.max(Re,C.width),Se=window.innerWidth-On,De=_l(ee,[On,Math.max(On,Se-ce)]);l.style.minWidth=Re+"px",l.style.left=De+"px"}else{const ne=C.right-T.right,ee=window.innerWidth-A.right-ne,le=window.innerWidth-N.right-ee,Re=N.width+le,ce=Math.max(Re,C.width),Se=window.innerWidth-On,De=_l(ee,[On,Math.max(On,Se-ce)]);l.style.minWidth=Re+"px",l.style.right=De+"px"}const z=m(),M=window.innerHeight-On*2,$=x.scrollHeight,X=window.getComputedStyle(d),k=parseInt(X.borderTopWidth,10),R=parseInt(X.paddingTop,10),B=parseInt(X.borderBottomWidth,10),O=parseInt(X.paddingBottom,10),U=k+R+$+O+B,L=Math.min(w.offsetHeight*5,U),P=window.getComputedStyle(x),H=parseInt(P.paddingTop,10),Q=parseInt(P.paddingBottom,10),_=N.top+N.height/2-On,se=M-_,te=w.offsetHeight/2,I=w.offsetTop+te,W=k+R+I,G=U-W;if(W<=_){const ne=z.length>0&&w===z[z.length-1].ref.current;l.style.bottom="0px";const ee=d.clientHeight-x.offsetTop-x.offsetHeight,le=Math.max(se,te+(ne?Q:0)+ee+B),Re=W+le;l.style.height=Re+"px"}else{const ne=z.length>0&&w===z[0].ref.current;l.style.top="0px";const le=Math.max(_,k+x.offsetTop+(ne?H:0)+te)+G;l.style.height=le+"px",x.scrollTop=W-_+x.offsetTop}l.style.margin=`${On}px 0`,l.style.minHeight=L+"px",l.style.maxHeight=M+"px",s==null||s(),requestAnimationFrame(()=>g.current=!0)}},[m,o.trigger,o.valueNode,l,d,x,w,v,o.dir,s]);kt(()=>y(),[y]);const[S,j]=u.useState();kt(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const E=u.useCallback(N=>{N&&b.current===!0&&(y(),p==null||p(),b.current=!1)},[y,p]);return r.jsx(mL,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:E,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:r.jsx(xe.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});f2.displayName=fL;var hL="SelectPopperPosition",Lm=u.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:a=On,...o}=e,i=Qd(n);return r.jsx(yd,{...i,...o,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Lm.displayName=hL;var[mL,Lg]=Ci(Ir,{}),zm="SelectViewport",h2=u.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...a}=e,o=Ja(zm,n),i=Lg(zm,n),l=je(t,o.onViewportChange),c=u.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Yd.Slot,{scope:n,children:r.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ae(a.onScroll,d=>{const f=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&h){const g=Math.abs(c.current-f.scrollTop);if(g>0){const b=window.innerHeight-On*2,x=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),v=Math.max(x,w);if(v<b){const p=v+g,y=Math.min(b,p),S=p-y;h.style.height=y+"px",h.style.bottom==="0px"&&(f.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});h2.displayName=zm;var m2="SelectGroup",[pL,gL]=Ci(m2),xL=u.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=qn();return r.jsx(pL,{scope:n,id:a,children:r.jsx(xe.div,{role:"group","aria-labelledby":a,...s,ref:t})})});xL.displayName=m2;var p2="SelectLabel",g2=u.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=gL(p2,n);return r.jsx(xe.div,{id:a.id,...s,ref:t})});g2.displayName=p2;var Xu="SelectItem",[vL,x2]=Ci(Xu),v2=u.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:a=!1,textValue:o,...i}=e,l=Wa(Xu,n),c=Ja(Xu,n),d=l.value===s,[f,h]=u.useState(o??""),[m,g]=u.useState(!1),b=je(t,p=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,p,s,a)}),x=qn(),w=u.useRef("touch"),v=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(vL,{scope:n,value:s,disabled:a,textId:x,isSelected:d,onItemTextChange:u.useCallback(p=>{h(y=>y||((p==null?void 0:p.textContent)??"").trim())},[]),children:r.jsx(Yd.ItemSlot,{scope:n,value:s,disabled:a,textValue:f,children:r.jsx(xe.div,{role:"option","aria-labelledby":x,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:b,onFocus:ae(i.onFocus,()=>g(!0)),onBlur:ae(i.onBlur,()=>g(!1)),onClick:ae(i.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:ae(i.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:ae(i.onPointerDown,p=>{w.current=p.pointerType}),onPointerMove:ae(i.onPointerMove,p=>{var y;w.current=p.pointerType,a?(y=c.onItemLeave)==null||y.call(c):w.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ae(i.onPointerLeave,p=>{var y;p.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:ae(i.onKeyDown,p=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&p.key===" "||(sL.includes(p.key)&&v(),p.key===" "&&p.preventDefault())})})})})});v2.displayName=Xu;var Vi="SelectItemText",y2=u.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,...o}=e,i=Wa(Vi,n),l=Ja(Vi,n),c=x2(Vi,n),d=iL(Vi,n),[f,h]=u.useState(null),m=je(t,v=>h(v),c.onItemTextChange,v=>{var p;return(p=l.itemTextRefCallback)==null?void 0:p.call(l,v,c.value,c.disabled)}),g=f==null?void 0:f.textContent,b=u.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:x,onNativeOptionRemove:w}=d;return kt(()=>(x(b),()=>w(b)),[x,w,b]),r.jsxs(r.Fragment,{children:[r.jsx(xe.span,{id:c.textId,...o,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?li.createPortal(o.children,i.valueNode):null]})});y2.displayName=Vi;var b2="SelectItemIndicator",w2=u.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return x2(b2,n).isSelected?r.jsx(xe.span,{"aria-hidden":!0,...s,ref:t}):null});w2.displayName=b2;var Pm="SelectScrollUpButton",S2=u.forwardRef((e,t)=>{const n=Ja(Pm,e.__scopeSelect),s=Lg(Pm,e.__scopeSelect),[a,o]=u.useState(!1),i=je(t,s.onScrollButtonChange);return kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?r.jsx(j2,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});S2.displayName=Pm;var Im="SelectScrollDownButton",N2=u.forwardRef((e,t)=>{const n=Ja(Im,e.__scopeSelect),s=Lg(Im,e.__scopeSelect),[a,o]=u.useState(!1),i=je(t,s.onScrollButtonChange);return kt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<d;o(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?r.jsx(j2,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});N2.displayName=Im;var j2=u.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...a}=e,o=Ja("SelectScrollButton",n),i=u.useRef(null),l=Gd(n),c=u.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return u.useEffect(()=>()=>c(),[c]),kt(()=>{var f;const d=l().find(h=>h.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),r.jsx(xe.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ae(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:ae(a.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:ae(a.onPointerLeave,()=>{c()})})}),yL="SelectSeparator",C2=u.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(xe.div,{"aria-hidden":!0,...s,ref:t})});C2.displayName=yL;var Um="SelectArrow",bL=u.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Qd(n),o=Wa(Um,n),i=Ja(Um,n);return o.open&&i.position==="popper"?r.jsx(bd,{...a,...s,ref:t}):null});bL.displayName=Um;var wL="SelectBubbleInput",E2=u.forwardRef(({__scopeSelect:e,value:t,...n},s)=>{const a=u.useRef(null),o=je(s,a),i=$j(t);return u.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&f){const h=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(h)}},[i,t]),r.jsx(xe.select,{...n,style:{...j1,...n.style},ref:o,defaultValue:t})});E2.displayName=wL;function k2(e){return e===""||e===void 0}function A2(e){const t=Ct(e),n=u.useRef(""),s=u.useRef(0),a=u.useCallback(i=>{const l=n.current+i;t(l),function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=u.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,a,o]}function T2(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=SL(e,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function SL(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var NL=n2,R2=a2,jL=o2,CL=i2,EL=l2,M2=c2,kL=h2,_2=g2,O2=v2,AL=y2,TL=w2,D2=S2,L2=N2,z2=C2;const Ur=NL,$r=jL,$a=u.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(R2,{ref:s,className:Ne("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(CL,{asChild:!0,children:r.jsx(kd,{className:"h-4 w-4 opacity-50"})})]}));$a.displayName=R2.displayName;const P2=u.forwardRef(({className:e,...t},n)=>r.jsx(D2,{ref:n,className:Ne("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(cS,{className:"h-4 w-4"})}));P2.displayName=D2.displayName;const I2=u.forwardRef(({className:e,...t},n)=>r.jsx(L2,{ref:n,className:Ne("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(kd,{className:"h-4 w-4"})}));I2.displayName=L2.displayName;const Ba=u.forwardRef(({className:e,children:t,position:n="popper",...s},a)=>r.jsx(EL,{children:r.jsxs(M2,{ref:a,className:Ne("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(P2,{}),r.jsx(kL,{className:Ne("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(I2,{})]})}));Ba.displayName=M2.displayName;const RL=u.forwardRef(({className:e,...t},n)=>r.jsx(_2,{ref:n,className:Ne("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));RL.displayName=_2.displayName;const Kt=u.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(O2,{ref:s,className:Ne("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(TL,{children:r.jsx(Ed,{className:"h-4 w-4"})})}),r.jsx(AL,{children:t})]}));Kt.displayName=O2.displayName;const ML=u.forwardRef(({className:e,...t},n)=>r.jsx(z2,{ref:n,className:Ne("-mx-1 my-1 h-px bg-muted",e),...t}));ML.displayName=z2.displayName;const yv=[{id:"elevenlabs-adam",name:"Adam (ElevenLabs)",description:"Deep, authoritative voice perfect for reading scripture with gravitas",gender:"male",accent:"American",age:"middle",style:"narration",provider:"elevenlabs",voiceId:"pNInz6obpgDQGcFmaJgB",premium:!0},{id:"elevenlabs-rachel",name:"Rachel (ElevenLabs)",description:"Warm, gentle female voice ideal for Psalms and comforting passages",gender:"female",accent:"American",age:"young",style:"gentle",provider:"elevenlabs",voiceId:"o7lPjDgzlF8ZloHzVPeK",premium:!0},{id:"elevenlabs-arnold",name:"Arnold (ElevenLabs)",description:"Rich, resonant voice with natural storytelling ability",gender:"male",accent:"American",age:"elderly",style:"storytelling",provider:"elevenlabs",voiceId:"ErXwobaYiN019PkySvjV",premium:!0},{id:"murf-david",name:"David (Murf)",description:"Professional narrator voice with clear pronunciation",gender:"male",accent:"British",age:"middle",style:"narration",provider:"murf",voiceId:"david_british_male",premium:!1},{id:"murf-sarah",name:"Sarah (Murf)",description:"Expressive storyteller with emotional range",gender:"female",accent:"American",age:"young",style:"storytelling",provider:"murf",voiceId:"sarah_american_female",premium:!1}];function _L(){const[e,t]=u.useState("elevenlabs-adam"),[n,s]=u.useState(!1),[a,o]=u.useState(null),[i,l]=u.useState(null),[c,d]=u.useState(""),[f,h]=u.useState({stability:.8,similarity:.8,style:.3,speakerBoost:!0,emotion:"neutral",speed:1}),m=u.useRef(null),g=u.useCallback(async(j,E,N)=>{var A;const C=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${E}`,{method:"POST",headers:{Accept:"audio/mpeg","Content-Type":"application/json","xi-api-key":N},body:JSON.stringify({text:j,model_id:"eleven_monolingual_v1",voice_settings:{stability:f.stability,similarity_boost:f.similarity,style:f.style,use_speaker_boost:f.speakerBoost}}),signal:(A=m.current)==null?void 0:A.signal});if(!C.ok)throw new Error(`ElevenLabs API error: ${C.status} ${C.statusText}`);return await C.blob()},[f]),b=u.useCallback(async(j,E,N)=>{var z;const C=await fetch("https://api.murf.ai/v1/speech/generate",{method:"POST",headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"},body:JSON.stringify({voiceId:E,text:j,speed:f.speed,format:"mp3"}),signal:(z=m.current)==null?void 0:z.signal});if(!C.ok)throw new Error(`Murf API error: ${C.status} ${C.statusText}`);const A=await C.json();return await(await fetch(A.audioUrl)).blob()},[f]),x=u.useCallback(async j=>{if(!c)throw new Error("API key is required for AI voice generation");const E=yv.find(N=>N.id===e);if(!E)throw new Error("Selected voice not found");s(!0),m.current=new AbortController;try{console.log(` Generating AI speech with ${E.name}...`);let N;switch(E.provider){case"elevenlabs":N=await g(j,E.voiceId,c);break;case"murf":N=await b(j,E.voiceId,c);break;default:throw new Error(`Provider ${E.provider} not implemented`)}const C=URL.createObjectURL(N);return l(C),console.log(` AI speech generated successfully (${N.size} bytes)`),C}catch(N){throw console.error(" AI speech generation failed:",N),N}finally{s(!1),m.current=null}},[e,c,g,b]),w=u.useCallback(async j=>{try{a&&(a.pause(),a.currentTime=0);const E=new Audio(j);o(E),E.onloadstart=()=>console.log(" Loading AI generated audio..."),E.oncanplay=()=>console.log(" AI audio ready to play"),E.onplay=()=>console.log(" AI speech playback started"),E.onpause=()=>console.log(" AI speech paused"),E.onended=()=>{console.log(" AI speech playback completed"),o(null)},E.onerror=N=>{console.error(" AI audio playback error:",N)},await E.play()}catch(E){throw console.error(" Failed to play AI generated speech:",E),E}},[a]),v=u.useCallback(async j=>{try{const E=await x(j);await w(E)}catch(E){throw console.error(" AI speech failed:",E),E}},[x,w]),p=u.useCallback(()=>{a&&(a.pause(),a.currentTime=0,o(null)),m.current&&m.current.abort()},[a]),y=u.useCallback(j=>{h(E=>({...E,...j}))},[]),S=u.useCallback(()=>{p(),i&&URL.revokeObjectURL(i)},[p,i]);return{selectedVoice:e,isGenerating:n,currentAudio:a,settings:f,apiKey:c,availableVoices:yv,setSelectedVoice:t,setApiKey:d,updateSettings:y,generateSpeech:x,playGeneratedSpeech:w,speakWithAI:v,stopSpeech:p,cleanup:S,isPlaying:a&&!a.paused,canGenerate:!!c&&!n}}const OL=[{id:"coqui-jenny",name:"Jenny (Coqui)",description:"High-quality female voice from Coqui TTS - completely free",gender:"female",language:"en",provider:"coqui",type:"local",modelName:"tts_models/en/ljspeech/tacotron2-DDC",offline:!0,quality:"excellent",speed:"medium"},{id:"coqui-male",name:"David (Coqui)",description:"Professional male narrator voice - open source",gender:"male",language:"en",provider:"coqui",type:"local",modelName:"tts_models/en/vctk/vits",offline:!0,quality:"excellent",speed:"medium"},{id:"bark-speaker-1",name:"Samuel (Bark)",description:"Natural conversational male voice with emotion - free",gender:"male",language:"en",provider:"bark",type:"local",voiceId:"v2/en_speaker_1",offline:!0,quality:"excellent",speed:"slow"},{id:"bark-speaker-2",name:"Sarah (Bark)",description:"Expressive female voice with laughter and emotions",gender:"female",language:"en",provider:"bark",type:"local",voiceId:"v2/en_speaker_2",offline:!0,quality:"excellent",speed:"slow"},{id:"chatterbox-default",name:"Alex (Chatterbox)",description:"Ultra-fast AI voice with emotion control - MIT licensed",gender:"neutral",language:"en",provider:"chatterbox",type:"local",offline:!0,quality:"good",speed:"fast"},{id:"browser-enhanced-female",name:"Enhanced Female",description:"Browser-based voice with AI processing effects",gender:"female",language:"en",provider:"browser",type:"browser",offline:!0,quality:"good",speed:"fast"},{id:"browser-enhanced-male",name:"Enhanced Male",description:"Browser-based voice with warmth and clarity processing",gender:"male",language:"en",provider:"browser",type:"browser",offline:!0,quality:"good",speed:"fast"},{id:"custom-upload-1",name:"My Custom Voice 1",description:"Upload your own voice sample for AI cloning",gender:"neutral",language:"en",provider:"custom",type:"uploaded",offline:!0,quality:"excellent",speed:"medium"}];function DL(){const[e,t]=u.useState("bark-speaker-1"),[n,s]=u.useState(!1),[a,o]=u.useState(null),[i,l]=u.useState(null),[c,d]=u.useState(""),[f,h]=u.useState({temperature:.7,speed:1,pitch:1,emotion:"neutral",addBreaths:!0,addEmphasis:!0}),[m,g]=u.useState([]),[b,x]=u.useState(!1),[w,v]=u.useState({step:"",progress:0}),[p,y]=u.useState(!1),S=u.useRef(null);u.useEffect(()=>{try{const L=JSON.parse(localStorage.getItem("customVoices")||"[]");if(console.log(" Loading saved custom voices:",L.length),L.length>0){const P=L.map(H=>{let Q=null;if(H.audioDataUrl)try{const _=atob(H.audioDataUrl.split(",")[1]),se=new Array(_.length);for(let W=0;W<_.length;W++)se[W]=_.charCodeAt(W);const te=new Uint8Array(se),I=new Blob([te],{type:"audio/mpeg"});Q=URL.createObjectURL(I)}catch(_){console.warn(" Failed to restore audio for voice:",H.name,_)}return{...H,customAudioFile:null,customAudioUrl:Q}});g(P),console.log(" Loaded custom voices from localStorage:",P.map(H=>H.name))}}catch(L){console.error(" Failed to load custom voices from localStorage:",L)}},[]);const j=u.useCallback(async(L,P)=>{var Q;d("Using Coqui TTS (requires Python setup)...");const H=await fetch("http://localhost:5000/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:L,model_name:P,speaker_idx:null,language_idx:null,speed:f.speed}),signal:(Q=S.current)==null?void 0:Q.signal});if(!H.ok)throw new Error(`Coqui TTS error: ${H.status}`);return await H.blob()},[f]),E=u.useCallback(async(L,P)=>{var te;d("Generating with Bark AI (free)...");const H=await fetch("https://suno-bark.hf.space/api/v1/inference",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:L,voice_preset:P,temperature:f.temperature,length_penalty:1,repetition_penalty:1.35}),signal:(te=S.current)==null?void 0:te.signal});if(!H.ok)throw new Error(`Bark API error: ${H.status}`);const Q=await H.json(),_=atob(Q.audio),se=new Uint8Array(_.length);for(let I=0;I<_.length;I++)se[I]=_.charCodeAt(I);return new Blob([se],{type:"audio/wav"})},[f]),N=u.useCallback(async L=>{var H;d("Generating with Chatterbox (ultra-fast)...");const P=await fetch("https://api.chatterbox.run/v1/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:L,voice:"default",speed:f.speed,emotion_intensity:f.emotion==="neutral"?.5:.8}),signal:(H=S.current)==null?void 0:H.signal});if(!P.ok)throw new Error(`Chatterbox error: ${P.status}`);return await P.blob()},[f]),C=u.useCallback(async(L,P)=>(d("Processing with enhanced browser voice..."),new Promise((H,Q)=>{try{const _=new SpeechSynthesisUtterance(L),se=speechSynthesis.getVoices(),te=se.find(I=>I.lang.startsWith("en")&&I.name.toLowerCase().includes(P==="female"?"female":"male"))||se.find(I=>I.lang.startsWith("en"))||se[0];switch(te&&(_.voice=te),_.rate=f.speed,_.pitch=f.pitch,_.volume=1,P==="male"&&(_.pitch=Math.max(.1,_.pitch*.8)),f.emotion){case"happy":_.pitch*=1.2,_.rate*=1.1;break;case"sad":_.pitch*=.8,_.rate*=.9;break;case"excited":_.pitch*=1.3,_.rate*=1.2;break;case"calm":_.pitch*=.9,_.rate*=.95;break}_.onend=()=>{const I=new Blob([""],{type:"audio/wav"});H(I)},_.onerror=I=>{Q(new Error(`Speech synthesis error: ${I.error}`))},console.log(` Speaking with ${(te==null?void 0:te.name)||"default"} voice (${P})`),speechSynthesis.speak(_)}catch(_){Q(_)}})),[f]);u.useCallback(async(L,P)=>{var H,Q;console.log(` Using RVC server for custom voice cloning (${P.name})`);try{console.log(" Checking RVC server connection...");const _=await fetch("http://localhost:6006/health",{method:"GET",signal:(H=S.current)==null?void 0:H.signal});if(!_.ok)throw new Error("RVC server not responding");const se=await _.json();console.log(" RVC server connected:",se.message)}catch(_){return console.warn(" RVC server unavailable, falling back to browser speech:",_),new Promise((se,te)=>{try{const I=new SpeechSynthesisUtterance(L),W=speechSynthesis.getVoices();let G=null;P.gender==="female"?G=W.find(F=>F.lang.startsWith("en")&&(F.name.toLowerCase().includes("female")||F.name.toLowerCase().includes("woman")||F.name.toLowerCase().includes("zira")||F.name.toLowerCase().includes("hazel"))):P.gender==="male"&&(G=W.find(F=>F.lang.startsWith("en")&&(F.name.toLowerCase().includes("male")||F.name.toLowerCase().includes("man")||F.name.toLowerCase().includes("david")||F.name.toLowerCase().includes("mark")))),G||(G=W.find(F=>F.lang.startsWith("en"))||W[0]),G&&(I.voice=G,console.log(` Fallback voice: ${G.name}`)),I.rate=f.speed,I.pitch=P.gender==="male"?.8:P.gender==="female"?1.2:1,I.onend=()=>{const F=new Blob([""],{type:"audio/wav"});se(F)},I.onerror=F=>{if(F.error==="interrupted"||F.error==="canceled"||p){console.log(" Fallback speech was intentionally stopped");const ne=new Blob([""],{type:"audio/wav"});se(ne)}else te(new Error(`Speech synthesis error: ${F.error}`))},console.log(` Fallback speech: "${L.substring(0,50)}..."`),speechSynthesis.speak(I)}catch(I){te(I)}})}try{console.log(" Sending voice cloning request to RVC server..."),d("Analyzing your voice...");const _=await fetch("http://localhost:6006/voice-conversion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:L,reference_audio:P.customAudioUrl||"",speed:f.speed}),signal:(Q=S.current)==null?void 0:Q.signal});if(!_.ok)throw new Error(`RVC server error: ${_.status}`);console.log(" Received RVC response, processing instructions..."),d("Processing voice characteristics...");const se=await _.json();if(console.log(" RVC response:",se),se.use_browser_tts)return console.log(" Using enhanced browser TTS with custom voice characteristics"),new Promise((te,I)=>{try{const W=new SpeechSynthesisUtterance(L),G=speechSynthesis.getVoices();let F=null;const ne=se.voice_characteristics||{};P.gender==="female"||ne.gender==="female"?F=G.find(ee=>ee.lang.startsWith("en")&&(ee.name.toLowerCase().includes("female")||ee.name.toLowerCase().includes("woman")||ee.name.toLowerCase().includes("zira")||ee.name.toLowerCase().includes("hazel"))):(P.gender==="male"||ne.gender==="male")&&(F=G.find(ee=>ee.lang.startsWith("en")&&(ee.name.toLowerCase().includes("male")||ee.name.toLowerCase().includes("man")||ee.name.toLowerCase().includes("david")||ee.name.toLowerCase().includes("mark")))),F||(F=G.find(ee=>ee.lang.startsWith("en"))||G[0]),F&&(W.voice=F,console.log(` Enhanced voice: ${F.name} (${ne.voice_type||"custom"})`)),W.rate=ne.speed||f.speed,W.pitch=ne.pitch||(P.gender==="male"?.8:P.gender==="female"?1.2:1),ne.emotion==="happy"?(W.pitch*=1.2,W.rate*=1.1):ne.emotion==="sad"&&(W.pitch*=.8,W.rate*=.9),console.log(` Enhanced speech settings: rate=${W.rate}, pitch=${W.pitch}`),W.onend=()=>{console.log(` Enhanced custom voice speech completed (${P.name})`);const ee=new Blob([""],{type:"audio/wav"});te(ee)},W.onerror=ee=>{I(new Error(`Enhanced speech synthesis error: ${ee.error}`))},console.log(` Enhanced speech: "${L.substring(0,50)}..." with ${P.name} characteristics`),speechSynthesis.speak(W)}catch(W){I(W)}});throw new Error("RVC server did not provide TTS instructions")}catch(_){console.error(" RVC voice cloning failed:",_);const se=_ instanceof Error?_.message:String(_);throw new Error(`Custom voice cloning failed: ${se}`)}},[f]);const A=u.useCallback(async L=>{const H=U().find(Q=>Q.id===e);if(!H)throw new Error("Selected voice not found");s(!0),S.current=new AbortController;try{console.log(` Generating free AI speech with ${H.name}...`);let Q=null;switch(H.provider){case"coqui":Q=await j(L,H.modelName);break;case"bark":Q=await E(L,H.voiceId);break;case"chatterbox":Q=await N(L);break;case"browser":Q=await C(L,H.gender);break;case"custom":return console.log(` Using custom voice characteristics for: ${H.name}`),new Promise((se,te)=>{try{const I=new SpeechSynthesisUtterance(L),W=speechSynthesis.getVoices();let G=null;H.gender==="female"?G=W.find(F=>F.lang.startsWith("en")&&(F.name.toLowerCase().includes("female")||F.name.toLowerCase().includes("woman")||F.name.toLowerCase().includes("zira")||F.name.toLowerCase().includes("hazel"))):H.gender==="male"&&(G=W.find(F=>F.lang.startsWith("en")&&(F.name.toLowerCase().includes("male")||F.name.toLowerCase().includes("man")||F.name.toLowerCase().includes("david")||F.name.toLowerCase().includes("mark")))),G||(G=W.find(F=>F.lang.startsWith("en"))||W[0]),G&&(I.voice=G,console.log(` Selected voice: ${G.name} for ${H.name}`)),I.rate=f.speed,I.pitch=H.gender==="male"?.7:H.gender==="female"?1.3:1,I.volume=1,I.onend=()=>{console.log(` Custom voice speech completed: ${H.name}`);const F=new Blob([""],{type:"audio/wav"}),ne=URL.createObjectURL(F);se(ne)},I.onerror=F=>{if(F.error==="interrupted"||F.error==="canceled"||p){console.log(" Speech was intentionally stopped");const ne=new Blob([""],{type:"audio/wav"}),ee=URL.createObjectURL(ne);se(ee)}else te(new Error(`Speech error: ${F.error}`))},console.log(` Speaking with ${H.name} voice...`),speechSynthesis.speak(I)}catch(I){te(I)}});break;default:throw new Error(`Provider ${H.provider} not implemented`)}if(!Q)throw new Error("Failed to generate audio blob");const _=URL.createObjectURL(Q);return l(_),console.log(` Free AI speech generated successfully (${Q.size} bytes)`),_}catch(Q){throw console.error(" Free AI speech generation failed:",Q),Q}finally{s(!1),d(""),S.current=null}},[e,m,j,E,N,C]),T=u.useCallback(async L=>{try{if(a&&(a.pause(),a.currentTime=0),(await(await fetch(L)).blob()).size===0){console.log(" Using direct speech synthesis (no audio file to play)");return}const Q=new Audio(L);o(Q),Q.onloadstart=()=>console.log(" Loading free AI audio..."),Q.oncanplay=()=>console.log(" Free AI audio ready"),Q.onplay=()=>console.log(" Free AI speech started"),Q.onended=()=>{console.log(" Free AI speech completed"),o(null)},Q.onerror=_=>{console.error(" Free AI audio error:",_)},await Q.play()}catch(P){throw console.error(" Failed to play free AI speech:",P),P}},[a]),z=u.useCallback(async L=>{try{const P=await A(L);if((await(await fetch(P)).blob()).size===0){URL.revokeObjectURL(P),console.log(" Custom voice speech completed successfully");return}await T(P)}catch(P){throw console.error(" Free AI speech failed:",P),P}},[A,T]),M=u.useCallback(()=>{console.log(" Stopping speech"),y(!0),a&&(a.pause(),a.currentTime=0,o(null)),speechSynthesis.speaking&&(n||a)?(console.log(" Canceling speech synthesis (our speech)"),speechSynthesis.cancel()):speechSynthesis.speaking&&console.log(" Speech synthesis is active but not ours, leaving it alone"),S.current&&S.current.abort(),s(!1),d(""),setTimeout(()=>y(!1),100)},[a,n]),$=u.useCallback(L=>{h(P=>({...P,...L}))},[]),X=u.useCallback(L=>({coqui:`
# Install Coqui TTS (Free & Open Source)
pip install TTS

# Run local server
python -m TTS.server.server --list_models
python -m TTS.server.server --model_name tts_models/en/ljspeech/tacotron2-DDC

# Your local API will be at: http://localhost:5002
      `,bark:`
# Install Bark (Free)
pip install git+https://github.com/suno-ai/bark.git

# Or use HuggingFace Spaces (no installation needed)
# https://huggingface.co/spaces/suno/bark
      `,chatterbox:`
# Install Chatterbox (MIT License - Free)
pip install chatterbox-tts

# Python usage:
from chatterbox import ChatterboxTTS
tts = ChatterboxTTS()
audio = tts.synthesize("Hello world!")
      `})[L]||"Instructions not available",[]),k=u.useCallback(()=>{(n||a)&&M(),i&&URL.revokeObjectURL(i)},[M,i,n,a]),R=u.useCallback(async(L,P,H,Q,_)=>{var te;x(!0),v({step:"Initializing...",progress:0});let se=null;try{if(console.log(" Starting voice upload process...",{fileName:(L==null?void 0:L.name)||"unknown",fileSize:(L==null?void 0:L.size)||0,voiceName:P||"unnamed",hasMetadata:!!_}),!L)throw new Error("No audio file provided");if(!(P!=null&&P.trim()))throw new Error("Voice name is required");if(!(H!=null&&H.trim()))throw new Error("Voice description is required");v({step:"Analyzing audio properties...",progress:10}),console.log(" Analyzing audio properties...");let I=0,W=44100,G="mono";await new Promise(ce=>setTimeout(ce,10));try{if(typeof window<"u"&&(window.AudioContext||window.webkitAudioContext)){se=new(window.AudioContext||window.webkitAudioContext),console.log(" Reading audio file...");const ce=await Promise.race([L.arrayBuffer(),new Promise((Se,De)=>setTimeout(()=>De(new Error("File read timeout")),8e3))]);if(await new Promise(Se=>setTimeout(Se,10)),ce&&ce.byteLength>0)try{console.log(" Decoding audio data...");const Se=await Promise.race([se.decodeAudioData(ce.slice(0)),new Promise((De,qe)=>setTimeout(()=>qe(new Error("Audio decode timeout")),3e3))]);Se&&(I=Math.round(Se.duration*100)/100,W=Se.sampleRate||44100,G=Se.numberOfChannels===1?"mono":"stereo",console.log(" Audio analysis successful:",{duration:I,sampleRate:W,channels:G}))}catch(Se){console.warn(" Audio decode failed, using estimates:",Se),I=Math.max(1,Math.round(L.size/32e3))}}else console.warn(" AudioContext not available")}catch(ce){console.warn(" Audio analysis failed, using safe defaults:",ce)}finally{if(se){try{typeof se.close=="function"&&await se.close()}catch(ce){console.warn(" Could not close AudioContext:",ce)}se=null}}I<=0&&(I=Math.max(1,Math.round(L.size/32e3)),console.log(" Using fallback duration estimate:",I)),v({step:"Determining file format...",progress:30}),console.log(" Determining file format...");let F="mp3";try{const Se=(te=(L.name||"").split(".").pop())==null?void 0:te.toLowerCase();Se&&["wav","mp3","ogg","m4a"].includes(Se)?(F=Se,console.log(" Format detected:",F)):console.warn(" Unknown/missing file extension, defaulting to mp3:",Se)}catch(ce){console.warn(" Format detection failed, using mp3 default:",ce)}v({step:"Converting to base64 for storage...",progress:40}),console.log(" Converting to base64 for storage...");let ne="";await new Promise(ce=>setTimeout(ce,10));try{L.size>10*1024*1024?(console.warn(" File too large for base64 conversion, skipping persistence"),ne=""):(ne=await Promise.race([new Promise((ce,Se)=>{const De=new FileReader;let qe;De.onprogress=$e=>{if($e.lengthComputable){const At=Math.round($e.loaded/$e.total*100);console.log(` Base64 conversion progress: ${At}%`)}},De.onload=()=>{clearTimeout(qe);const $e=De.result;typeof $e=="string"?ce($e):Se(new Error("FileReader result is not a string"))},De.onerror=()=>{clearTimeout(qe),Se(De.error||new Error("FileReader failed"))},qe=setTimeout(()=>{console.log(" Base64 conversion in progress...")},2e3),De.readAsDataURL(L)}),new Promise((ce,Se)=>setTimeout(()=>Se(new Error("Base64 conversion timeout")),12e3))]),console.log(" Base64 conversion successful, size:",Math.round(ne.length/1024),"KB"))}catch(ce){console.warn(" Base64 conversion failed, voice will not persist across sessions:",ce)}await new Promise(ce=>setTimeout(ce,10)),v({step:"Generating metadata...",progress:60}),console.log(" Generating auto-detected metadata...");const ee={age:(_==null?void 0:_.age)||(I>30?"adult":"young"),accent:(_==null?void 0:_.accent)||"american",tone:(_==null?void 0:_.tone)||"warm",style:(_==null?void 0:_.style)||"narrator",pitch:(_==null?void 0:_.pitch)||"medium",category:(_==null?void 0:_.category)||"religious",recordingQuality:I>0&&L.size/I>5e4?"professional":"good",backgroundNoise:(_==null?void 0:_.backgroundNoise)||"minimal"};v({step:"Creating voice object...",progress:70}),console.log(" Creating voice object with metadata...");let le,Re="";await new Promise(ce=>setTimeout(ce,10));try{try{Re=URL.createObjectURL(L),console.log(" Audio URL created successfully")}catch(ce){throw console.error(" Failed to create audio URL:",ce),new Error("Could not create audio URL for voice sample")}le={id:`custom-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:P.trim(),description:H.trim(),gender:Q,language:"en",provider:"custom",type:"uploaded",customAudioFile:L,customAudioUrl:Re,audioDataUrl:ne||void 0,offline:!0,quality:"excellent",speed:"medium",age:(_==null?void 0:_.age)||ee.age,accent:(_==null?void 0:_.accent)||ee.accent,tone:(_==null?void 0:_.tone)||ee.tone,style:(_==null?void 0:_.style)||ee.style,pitch:(_==null?void 0:_.pitch)||ee.pitch,tags:(_==null?void 0:_.tags)||["custom","uploaded"],category:(_==null?void 0:_.category)||ee.category,intendedUse:(_==null?void 0:_.intendedUse)||`Custom voice: ${P}`,bestFor:(_==null?void 0:_.bestFor)||["Bible reading","General narration"],sampleRate:W>0?W:void 0,duration:I>0?Math.round(I*100)/100:void 0,fileSize:L.size,format:F,channels:G,backgroundNoise:(_==null?void 0:_.backgroundNoise)||ee.backgroundNoise,recordingQuality:(_==null?void 0:_.recordingQuality)||ee.recordingQuality,creator:(_==null?void 0:_.creator)||"User",createdAt:new Date().toISOString(),usageCount:0,rating:5,notes:(_==null?void 0:_.notes)||"",favorite:(_==null?void 0:_.favorite)||!1,sampleText:(_==null?void 0:_.sampleText)||"",sampleContext:(_==null?void 0:_.sampleContext)||`Custom voice sample: ${P}`,voiceEmotions:[],isPrivate:(_==null?void 0:_.isPrivate)!==!1,source:"Recorded by user"},console.log(" Voice object created successfully")}catch(ce){if(console.error(" Error creating voice object:",ce),Re)try{URL.revokeObjectURL(Re)}catch(Se){console.warn(" Could not clean up audio URL:",Se)}throw new Error(`Failed to create voice object: ${ce instanceof Error?ce.message:"Unknown error"}`)}v({step:"Adding voice to application...",progress:85}),console.log(" Adding voice to state..."),await new Promise(ce=>setTimeout(ce,10));try{g(ce=>{const Se=[...ce,le];return console.log(" Updated custom voices:",Se.map(De=>De.name)),Se}),console.log(" Voice added to state successfully")}catch(ce){if(console.error(" Failed to add voice to state:",ce),le.customAudioUrl)try{URL.revokeObjectURL(le.customAudioUrl)}catch(Se){console.warn(" Could not clean up audio URL:",Se)}throw new Error(`Failed to add voice to application state: ${ce instanceof Error?ce.message:"Unknown error"}`)}v({step:"Saving voice data...",progress:95}),console.log(" Saving voice to localStorage..."),await new Promise(ce=>setTimeout(ce,10));try{const ce=JSON.parse(localStorage.getItem("customVoices")||"[]"),Se={...le,customAudioFile:null,customAudioUrl:null,audioDataUrl:ne};ce.push(Se),typeof requestIdleCallback<"u"?await new Promise(De=>{requestIdleCallback(()=>{localStorage.setItem("customVoices",JSON.stringify(ce)),De()})}):localStorage.setItem("customVoices",JSON.stringify(ce)),console.log(" Voice saved to localStorage successfully")}catch(ce){console.warn(" Could not save voice to localStorage:",ce),console.warn("Voice will still work for current session but will not persist after app restart")}return v({step:"Upload complete!",progress:100}),console.log(" Custom voice upload completed successfully!"),console.log(" Final voice metadata:",{id:le.id,name:le.name,duration:le.duration,sampleRate:le.sampleRate,fileSize:le.fileSize,format:le.format,channels:le.channels,quality:le.recordingQuality,tags:le.tags,hasAudioUrl:!!le.customAudioUrl,hasDataUrl:!!ne,persistsAcrossSessions:!!ne}),le}catch(I){console.error(" Custom voice upload failed at top level:",I);let W="Failed to upload custom voice";I instanceof Error&&(I.message.includes("No audio file")?W="Please select an audio file to upload":I.message.includes("Voice name is required")?W="Please enter a name for your custom voice":I.message.includes("Voice description is required")?W="Please enter a description for your custom voice":I.message.includes("Could not create audio URL")?W="The selected audio file could not be processed. Please try a different file.":I.message.includes("File read timeout")?W="The audio file is too large or corrupted. Please try a smaller file.":W=`Upload failed: ${I.message}`);const G=new Error(W);throw G.name="VoiceUploadError",G}finally{x(!1),v({step:"",progress:0}),console.log(" Voice upload process completed, cleaning up...")}},[]),B=u.useCallback(async(L,P)=>{if(!P.customAudioUrl)throw new Error("No custom audio sample available");try{const Q=await fetch("http://localhost:6006/voice-conversion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:L,reference_audio:P.customAudioUrl,speed:f.speed})});if(Q.ok)return await Q.blob()}catch{console.log("RVC not available, falling back to browser synthesis")}const H=P.gender==="neutral"?"male":P.gender;return C(L,H)},[f,C]),O=u.useCallback(L=>{g(P=>{const H=P.filter(te=>te.id!==L),Q=P.find(te=>te.id===L);Q!=null&&Q.customAudioUrl&&URL.revokeObjectURL(Q.customAudioUrl);const se=JSON.parse(localStorage.getItem("customVoices")||"[]").filter(te=>te.id!==L);return localStorage.setItem("customVoices",JSON.stringify(se)),console.log(" Deleted custom voice:",L),H})},[]),U=u.useCallback(()=>[...OL,...m],[m]);return{selectedVoice:e,isGenerating:n,currentAudio:a,settings:f,installationProgress:c,customVoices:m,isUploadingVoice:b,uploadProgress:w,isStopping:p,availableVoices:U(),setSelectedVoice:t,updateSettings:$,generateSpeech:A,playGeneratedSpeech:T,speakWithFreeAI:z,stopSpeech:M,getInstallationInstructions:X,cleanup:k,uploadCustomVoice:R,deleteCustomVoice:O,cloneVoiceFromSample:B,isPlaying:a&&!a.paused,canGenerate:!n&&!p}}function U2(e){const[t,n]=u.useState(!1),[s,a]=u.useState(0),[o,i]=u.useState(165),l=u.useRef(null),c=u.useRef(null),d=u.useRef(!1),f=u.useRef([]),h=()=>{if(console.log(" useSpeech.speak() called"),console.log(" Verses:",e),console.log(" Verses length:",e.length),console.log(" window.speechSynthesis available:",!!window.speechSynthesis),!window.speechSynthesis||e.length===0){console.log(" Cannot speak: no speechSynthesis or no verses");return}if(d.current){console.log(" Already speaking, stopping current speech first"),m(),setTimeout(()=>{d.current=!1,h()},100);return}window.speechSynthesis.cancel(),setTimeout(()=>{let b=e.map(w=>w.text).join(" ");console.log(" Combined text length:",b.length),console.log(" First 100 chars:",b.substring(0,100)),console.log(" Last 100 chars:",b.substring(b.length-100)),b.length>5e3&&console.log(" Warning: Text is very long, some browsers may have issues"),(b.includes(`
`)||b.includes("\r"))&&(console.log(" Warning: Text contains line breaks, cleaning..."),b=b.replace(/[\r\n]+/g," ").replace(/\s+/g," "),console.log(" Cleaned text length:",b.length));const x=new SpeechSynthesisUtterance(b);x.rate=.8,x.pitch=1,x.volume=1,x.onstart=()=>{console.log(" Speech started"),d.current=!0,n(!0),c.current=setInterval(()=>{a(w=>Math.min(w+1,o))},1e3)},x.onend=()=>{console.log(" Speech ended"),d.current=!1,n(!1),a(0),c.current&&(clearInterval(c.current),c.current=null)},x.onerror=w=>{console.error(" Speech error:",w),console.error(" Error details:",{error:w.error,elapsedTime:w.elapsedTime,charIndex:w.charIndex,name:w.name}),d.current=!1,n(!1),a(0),c.current&&(clearInterval(c.current),c.current=null)},l.current=x,console.log(" Starting speech synthesis..."),window.speechSynthesis.speak(x)},200)},m=()=>{window.speechSynthesis&&(window.speechSynthesis.cancel(),d.current=!1,n(!1),a(0),c.current&&(clearInterval(c.current),c.current=null))},g=()=>{t?m():h()};return u.useEffect(()=>()=>{c.current&&clearInterval(c.current),window.speechSynthesis&&d.current&&window.speechSynthesis.cancel()},[]),u.useEffect(()=>{if(JSON.stringify(e)!==JSON.stringify(f.current)){console.log(" Verses changed, updating duration estimate"),f.current=e,t&&m();const x=e.reduce((w,v)=>w+v.text.split(" ").length,0);i(Math.ceil(x/2.5))}},[e,t]),{isPlaying:t,currentTime:s,duration:o,togglePlayback:g,speak:h,stop:m}}function LL({isPlaying:e,amplitude:t=.5}){const s=Array.from({length:12},(a,o)=>o);return r.jsx("div",{className:"flex items-center justify-center gap-1 h-8 px-3 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900 rounded-md overflow-hidden relative",children:s.map(a=>r.jsx("div",{className:`w-1 rounded-full transition-all duration-200 ${e?"bg-gradient-to-t from-green-500 via-blue-500 to-purple-500":"bg-gradient-to-t from-green-400 to-blue-400"}`,style:{height:e?`${8+Math.random()*16*t}px`:"4px",animationDelay:`${a*60}ms`,animationDuration:`${800+Math.random()*400}ms`}},a))})}const th="aiVoiceReaderPosition",bv="aiVoiceReaderMinimized";function zL({content:e,documentId:t,currentChapter:n,onNavigateNext:s,canNavigateNext:a,className:o,isOpen:i,onToggle:l}){const{selectedVoice:c,isGenerating:d,settings:f,apiKey:h,availableVoices:m,setSelectedVoice:g,setApiKey:b,updateSettings:x,speakWithAI:w,stopSpeech:v,isPlaying:p}=_L(),{selectedVoice:y,isGenerating:S,isUploadingVoice:j,uploadCustomVoice:E,speakWithFreeAI:N,availableVoices:C}=DL(),A=e?e.map((Y,oe)=>({number:oe+1,text:Y.text||""})):[],{isPlaying:T,currentTime:z,duration:M,stop:$}=U2(A),[X,k]=u.useState(!0),[R,B]=u.useState(!0),[O,U]=u.useState(()=>typeof window<"u"?localStorage.getItem(bv)==="true":!1),[L,P]=u.useState("voices"),[H,Q]=u.useState(!1),[_,se]=u.useState(()=>{if(typeof window<"u"){const de=localStorage.getItem(th);if(de)try{const q=JSON.parse(de);if(typeof q.x=="number"&&typeof q.y=="number")return q}catch{}}const Y=window.innerWidth-400-16,oe=window.innerHeight-600-16;return{x:Math.max(20,Y),y:Math.max(96,oe)}}),[te,I]=u.useState(!1),[W,G]=u.useState({x:0,y:0}),[F,ne]=u.useState({x:0,y:0}),ee=u.useRef(null),le=u.useRef(null),[Re,ce]=u.useState(null),[Se,De]=u.useState(""),[qe,$e]=u.useState(null);u.useEffect(()=>{const Y=localStorage.getItem("ai-voice-api-key");Y&&b(Y)},[b]),u.useEffect(()=>{var Y,oe;if(console.log(" Checking speech synthesis status..."),console.log(" Speech synthesis available:",!!window.speechSynthesis),console.log(" Speech synthesis speaking:",(Y=window.speechSynthesis)==null?void 0:Y.speaking),console.log(" Speech synthesis paused:",(oe=window.speechSynthesis)==null?void 0:oe.paused),window.speechSynthesis){const de=window.speechSynthesis.getVoices();console.log(" Available voices:",de.length),console.log(" Voice names:",de.map(q=>q.name)),de.length===0&&(window.speechSynthesis.onvoiceschanged=()=>{const q=window.speechSynthesis.getVoices();console.log(" Voices loaded:",q.length),console.log(" Voice names:",q.map(me=>me.name))})}},[]),u.useEffect(()=>{localStorage.setItem(th,JSON.stringify(_))},[_]),u.useEffect(()=>{localStorage.setItem(bv,O.toString())},[O]);const At=async()=>{if(console.log(" Playing chapter in chunks..."),!e||e.length===0){console.log(" No content to play");return}if(H){console.log(" Already playing chapter, ignoring request");return}Q(!0);try{if(R){window.speechSynthesis.cancel(),await new Promise(Y=>setTimeout(Y,200));for(let Y=0;Y<e.length;Y++){const oe=e[Y];console.log(` Playing paragraph ${Y+1}/${e.length}`),await new Promise((de,q)=>{window.speechSynthesis.cancel();const me=new SpeechSynthesisUtterance(oe.text||"");me.rate=.8,me.pitch=1,me.volume=1,me.onstart=()=>{console.log(` Paragraph ${Y+1} speech started`)},me.onend=()=>{console.log(` Paragraph ${Y+1} speech ended`),de()},me.onerror=ye=>{console.error(` Paragraph ${Y+1} speech error:`,ye),q(ye)},setTimeout(()=>{window.speechSynthesis.speak(me)},50)}),await new Promise(de=>setTimeout(de,200))}console.log(" All paragraphs completed"),a&&s&&s()}else{const Y=e.map(oe=>oe.text||"").join(" ");console.log(" Full text length:",Y.length),console.log(" First 100 chars:",Y.substring(0,100)),X?(console.log(" Using free AI voice"),await N(Y)):(console.log(" Using paid AI voice"),await w(Y))}}catch(Y){console.error(" Failed to play chapter:",Y)}finally{Q(!1)}},Rn=Y=>{var de;const oe=(de=Y.target.files)==null?void 0:de[0];if($e(null),oe){if(!oe.type.startsWith("audio/")){$e("Please upload a valid audio file (.mp3, .wav, etc.)");return}if(oe.size>50*1024*1024){$e("File too large. Please upload a file smaller than 50MB.");return}ce(oe),Se||De(oe.name.replace(/\.[^/.]+$/,""))}},Mn=async()=>{if(!(!Re||!Se.trim()))try{const Y=await E(Re,Se,"","neutral");$e("Voice cloned successfully! "),ce(null),De("")}catch{$e("Failed to clone voice. Please try again.")}},at=Y=>{const oe=Y.target;oe.closest("button")||oe.closest("input")||oe.closest("select")||oe.closest('[role="button"]')||oe.closest("[data-radix-collection-item]")||(Y.preventDefault(),I(!0),G({x:Y.clientX,y:Y.clientY}),ne({x:Y.clientX-_.x,y:Y.clientY-_.y}),ee.current&&(ee.current.style.cursor="grabbing",ee.current.style.transform="scale(1.02)",ee.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},Dt=u.useCallback(Y=>{te&&(Y.preventDefault(),le.current&&cancelAnimationFrame(le.current),le.current=requestAnimationFrame(()=>{const de=O?64:600,q=Math.max(10,Math.min(window.innerWidth-400-10,Y.clientX-F.x)),me=Math.max(10,Math.min(window.innerHeight-de-10,Y.clientY-F.y));se(ye=>ye.x!==q||ye.y!==me?{x:q,y:me}:ye)}))},[te,F,O]),ge=u.useCallback(()=>{I(!1),le.current&&(cancelAnimationFrame(le.current),le.current=null),ee.current&&(ee.current.style.cursor="",ee.current.style.transform="",ee.current.style.boxShadow=""),localStorage.setItem(th,JSON.stringify(_))},[_]),K=()=>{const Y=window.innerWidth-400-16,oe=window.innerHeight-(O?64:600)-16;se({x:Math.max(20,Y),y:Math.max(96,oe)})};u.useEffect(()=>{if(te){document.addEventListener("mousemove",Dt,{passive:!1}),document.addEventListener("mouseup",ge,{passive:!0});const Y=de=>{if(de.touches.length===1){const q=de.touches[0];de.preventDefault();const me={preventDefault:()=>de.preventDefault(),stopPropagation:()=>de.stopPropagation(),clientX:q.clientX,clientY:q.clientY};Dt(me)}},oe=de=>{ge()};return document.addEventListener("touchmove",Y,{passive:!1}),document.addEventListener("touchend",oe,{passive:!0}),()=>{document.removeEventListener("mousemove",Dt),document.removeEventListener("mouseup",ge),document.removeEventListener("touchmove",Y),document.removeEventListener("touchend",oe),le.current&&(cancelAnimationFrame(le.current),le.current=null)}}},[te,F,Dt,ge]);const ue=X?C:m,pe=X?y:c,ve=R?!1:X?S:d,be=R?T||H:p,Tt=H||be,Z=()=>{console.log(" handleStopSpeech called"),console.log(" useBrowserVoice:",R),console.log(" currentIsPlaying:",be),console.log(" isPlayingChapter:",H),R?(console.log(" Stopping browser speech synthesis"),$(),Q(!1)):(console.log(" Stopping AI voice"),v())};return i?r.jsx("div",{ref:ee,className:"fixed z-50",style:{left:`${_.x}px`,top:`${_.y}px`,transform:"none",willChange:te?"transform, box-shadow":"auto",pointerEvents:"all"},children:r.jsxs(Oe,{className:`w-96 transition-all duration-300 ${O?"h-16":"h-[600px]"} shadow-2xl border-2 border-primary/20 ${te?"select-none cursor-grabbing":""}`,style:{willChange:te?"transform":"auto",transition:te?"none":"all 0.3s ease-out",transform:te?"scale(1.02)":"scale(1)",zIndex:te?60:50,boxShadow:te?"0 25px 50px -12px rgba(0, 0, 0, 0.25)":"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[r.jsxs(Fe,{className:"pb-2 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 select-none transition-all duration-200",style:{userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:[r.jsx("div",{className:`absolute top-0 left-0 right-0 h-8 transition-colors ${te?"cursor-grabbing hover:bg-gray-100/50 dark:hover:bg-gray-800/50":"cursor-grab hover:bg-gray-100/50 dark:hover:bg-gray-800/50"}`,onMouseDown:at,onDoubleClick:K,title:"Drag to move  Double-click to reset position",children:Tt&&r.jsx("div",{className:"absolute top-1 left-1 text-xs text-green-600 dark:text-green-400",children:" Playing"})}),r.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[r.jsxs(Qe,{className:"text-lg flex items-center gap-2",children:[r.jsx(SS,{className:"h-5 w-5 text-primary"}),"AI Voice Reader",r.jsx(He,{className:`text-xs ${R?"bg-green-500 text-white":X?"bg-orange-500 text-white":"bg-blue-500 text-white"}`,children:R?"Browser":X?"Free AI":"Premium"}),r.jsxs("div",{className:"flex gap-0.5 ml-2 opacity-50",children:[r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[ve&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 dark:text-blue-400 mr-2",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),"Generating..."]}),(be||!1)&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400 mr-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Playing"]}),r.jsx(V,{onClick:()=>U(!O),className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:O?r.jsx(Qr,{className:"h-4 w-4"}):r.jsx(Ga,{className:"h-4 w-4"})}),r.jsx(V,{onClick:l,className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:r.jsx(dn,{className:"h-4 w-4"})})]})]}),!O&&r.jsxs("div",{className:"flex space-x-2 mt-2 relative z-10",children:[r.jsx(V,{onClick:()=>P("voices"),className:`flex-1 px-3 py-1 text-sm ${L==="voices"?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Voices"}),r.jsx(V,{onClick:()=>P("clone"),className:`flex-1 px-3 py-1 text-sm ${L==="clone"?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Clone"}),r.jsx(V,{onClick:()=>P("settings"),className:`flex-1 px-3 py-1 text-sm ${L==="settings"?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Settings"})]})]}),!O&&r.jsxs(Ie,{className:"p-0 flex flex-col h-[520px]",children:[L==="voices"&&r.jsx($s,{className:"flex-1 p-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(LL,{isPlaying:be||!1}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(V,{size:"sm",onClick:be?Z:At,disabled:ve,className:"flex-1",children:[be?r.jsx(SO,{className:"w-4 h-4 mr-2"}):r.jsx(pS,{className:"w-4 h-4 mr-2"}),be?"Stop":H?"Reading...":"Play Chapter"]})}),r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg space-y-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Voice Engine:"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(V,{variant:R?"default":"outline",size:"sm",onClick:()=>{B(!0),k(!1)},className:"flex-1",children:" Browser"}),r.jsx(V,{variant:!R&&X?"default":"outline",size:"sm",onClick:()=>{B(!1),k(!0)},className:"flex-1",children:" Free AI"}),r.jsx(V,{variant:!R&&!X?"default":"outline",size:"sm",onClick:()=>{B(!1),k(!1)},className:"flex-1",children:" Premium"})]}),R&&r.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 text-center",children:" Ready to use - no setup required!"})]}),!R&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Voice:"}),r.jsxs(Ur,{value:pe,onValueChange:X?Y=>g(Y):g,children:[r.jsx($a,{children:r.jsx($r,{})}),r.jsx(Ba,{children:ue.map(Y=>r.jsx(Kt,{value:Y.id,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:Y.gender==="male"?"":Y.gender==="female"?"":""}),r.jsx("span",{children:Y.name})]})},Y.id))})]})]}),R&&r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg space-y-2",children:[r.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-1",children:" Browser Voice Selected"}),r.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Using your system's built-in text-to-speech engine. This works offline and doesn't require any API keys or setup."}),be&&r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-xs text-blue-600 dark:text-blue-400",children:[r.jsx("span",{children:"Progress"}),r.jsxs("span",{children:[Math.floor(z/M*100),"%"]})]}),r.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${z/M*100}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-blue-600 dark:text-blue-400",children:[r.jsxs("span",{children:[Math.floor(z/60),":",(z%60).toString().padStart(2,"0")]}),r.jsxs("span",{children:[Math.floor(M/60),":",(M%60).toString().padStart(2,"0")]})]})]})]}),!X&&!h&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(dt,{type:"password",placeholder:"ElevenLabs API key...",value:h,onChange:Y=>b(Y.target.value),className:"text-sm"}),r.jsxs("div",{className:"text-xs text-gray-600",children:["Get your key at ",r.jsx("a",{href:"https://elevenlabs.io",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:"ElevenLabs"})]})]}),a&&r.jsx("div",{className:"text-xs text-gray-600 text-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:"Will auto-navigate to next chapter when finished"})]})}),L==="clone"&&r.jsx($s,{className:"flex-1 p-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center text-muted-foreground py-4",children:[r.jsx(Kx,{className:"h-12 w-12 mx-auto mb-4 text-primary/50"}),r.jsx("p",{className:"text-sm",children:"Upload your voice sample to create a custom AI voice."}),r.jsx("p",{className:"text-xs mt-2",children:"Works completely free with browser-based AI."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[r.jsx("input",{type:"file",accept:"audio/*",onChange:Rn,className:"hidden",id:"voice-upload"}),r.jsxs("label",{htmlFor:"voice-upload",className:"cursor-pointer flex flex-col items-center gap-2 text-sm",children:[r.jsx(Kx,{className:"w-8 h-8 text-gray-400"}),Re?r.jsxs("div",{className:"text-center",children:[r.jsxs("span",{className:"text-green-600 font-medium",children:[" ",Re.name]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to change file"})]}):r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"font-medium",children:"Upload voice sample"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"MP3, WAV - 30+ seconds recommended"})]})]})]}),Re&&r.jsxs("div",{className:"space-y-3",children:[r.jsx(dt,{value:Se,onChange:Y=>De(Y.target.value),placeholder:"Voice name...",className:"text-sm"}),r.jsx(V,{onClick:Mn,disabled:!Re||!Se.trim()||j,className:"w-full",children:j?"Cloning Voice...":"Create Voice Clone"})]}),qe&&r.jsx("div",{className:`p-3 rounded-lg text-sm ${qe.includes("success")?"bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-400"}`,children:qe})]})]})}),L==="settings"&&r.jsx($s,{className:"flex-1 p-4",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center text-muted-foreground py-4",children:[r.jsx(Oo,{className:"h-12 w-12 mx-auto mb-4 text-primary/50"}),r.jsx("p",{className:"text-sm",children:"Advanced voice settings and controls."}),r.jsx("p",{className:"text-xs mt-2",children:"Fine-tune your AI voice experience."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Voice Stability"}),r.jsx(ru,{value:[f.stability],onValueChange:([Y])=>x({stability:Y}),min:0,max:1,step:.1,className:"w-full"}),r.jsxs("div",{className:"text-xs text-center text-gray-500",children:[f.stability.toFixed(1)," (consistency)"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Voice Similarity"}),r.jsx(ru,{value:[f.similarity],onValueChange:([Y])=>x({similarity:Y}),min:0,max:1,step:.1,className:"w-full"}),r.jsxs("div",{className:"text-xs text-center text-gray-500",children:[f.similarity.toFixed(1)," (voice match)"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Speech Speed"}),r.jsx(ru,{value:[f.speed||1],onValueChange:([Y])=>x({speed:Y}),min:.5,max:1.5,step:.1,className:"w-full"}),r.jsxs("div",{className:"text-xs text-center text-gray-500",children:[(f.speed||1).toFixed(1),"x speed"]})]})]})]})})]})]})}):null}function PL({onSelection:e}){const t=u.useCallback(()=>{var f,h,m,g;const s=window.getSelection();if(!s||s.toString().trim().length===0)return;const a=s.toString().trim(),i=s.getRangeAt(0).commonAncestorContainer;let l=i.nodeType===Node.TEXT_NODE?i.parentElement:i,c=!1,d=null;for(;l;){if((f=l.hasAttribute)!=null&&f.call(l,"data-paragraph")){d=parseInt(l.getAttribute("data-paragraph")||"0"),c=!0;break}if((h=l.classList)!=null&&h.contains("chapter-title")||(m=l.classList)!=null&&m.contains("sidebar")||(g=l.classList)!=null&&g.contains("topbar")||l.tagName==="H1"||l.tagName==="H2"||l.tagName==="H3"||l.closest(".sidebar")||l.closest(".topbar")||l.closest("header")){s.removeAllRanges();return}l=l.parentElement}if(!c||d===null){s.removeAllRanges();return}s.removeAllRanges(),a&&e(a,d)},[e]),n=u.useCallback(()=>(document.addEventListener("mouseup",t),()=>{document.removeEventListener("mouseup",t)}),[t]);return{handleTextSelection:t,startSelection:n}}var Kd="Popover",[$2,Dz]=fn(Kd,[Va]),ic=Va(),[IL,er]=$2(Kd),B2=e=>{const{__scopePopover:t,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:i=!1}=e,l=ic(t),c=u.useRef(null),[d,f]=u.useState(!1),[h,m]=Ua({prop:s,defaultProp:a??!1,onChange:o,caller:Kd});return r.jsx(Jp,{...l,children:r.jsx(IL,{scope:t,contentId:qn(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:u.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:d,onCustomAnchorAdd:u.useCallback(()=>f(!0),[]),onCustomAnchorRemove:u.useCallback(()=>f(!1),[]),modal:i,children:n})})};B2.displayName=Kd;var H2="PopoverAnchor",UL=u.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=er(H2,n),o=ic(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=a;return u.useEffect(()=>(i(),()=>l()),[i,l]),r.jsx(Wl,{...o,...s,ref:t})});UL.displayName=H2;var q2="PopoverTrigger",F2=u.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=er(q2,n),o=ic(n),i=je(t,a.triggerRef),l=r.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":K2(a.open),...s,ref:i,onClick:ae(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:r.jsx(Wl,{asChild:!0,...o,children:l})});F2.displayName=q2;var zg="PopoverPortal",[$L,BL]=$2(zg,{forceMount:void 0}),V2=e=>{const{__scopePopover:t,forceMount:n,children:s,container:a}=e,o=er(zg,t);return r.jsx($L,{scope:t,forceMount:n,children:r.jsx(Ot,{present:n||o.open,children:r.jsx(Jl,{asChild:!0,container:a,children:s})})})};V2.displayName=zg;var oi="PopoverContent",Y2=u.forwardRef((e,t)=>{const n=BL(oi,e.__scopePopover),{forceMount:s=n.forceMount,...a}=e,o=er(oi,e.__scopePopover);return r.jsx(Ot,{present:s||o.open,children:o.modal?r.jsx(qL,{...a,ref:t}):r.jsx(FL,{...a,ref:t})})});Y2.displayName=oi;var HL=za("PopoverContent.RemoveScroll"),qL=u.forwardRef((e,t)=>{const n=er(oi,e.__scopePopover),s=u.useRef(null),a=je(t,s),o=u.useRef(!1);return u.useEffect(()=>{const i=s.current;if(i)return _d(i)},[]),r.jsx(ac,{as:HL,allowPinchZoom:!0,children:r.jsx(G2,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ae(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ae(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ae(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),FL=u.forwardRef((e,t)=>{const n=er(oi,e.__scopePopover),s=u.useRef(!1),a=u.useRef(!1);return r.jsx(G2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=n.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),G2=u.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,...h}=e,m=er(oi,n),g=ic(n);return Rd(),r.jsx(nc,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:r.jsx(gi,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:r.jsx(yd,{"data-state":K2(m.open),role:"dialog",id:m.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Q2="PopoverClose",VL=u.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=er(Q2,n);return r.jsx(xe.button,{type:"button",...s,ref:t,onClick:ae(e.onClick,()=>a.onOpenChange(!1))})});VL.displayName=Q2;var YL="PopoverArrow",GL=u.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,a=ic(n);return r.jsx(bd,{...a,...s,ref:t})});GL.displayName=YL;function K2(e){return e?"open":"closed"}var QL=B2,KL=F2,XL=V2,X2=Y2;const ZL=QL,WL=KL,Z2=u.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},a)=>r.jsx(XL,{children:r.jsx(X2,{ref:a,align:t,sideOffset:n,className:Ne("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...s})}));Z2.displayName=X2.displayName;const nh="aiTeacherAgentPanelPosition",sh="aiTeacherAgentPanelMinimized";function JL({documentId:e,chapter:t,isOpen:n,onToggle:s}){const[a,o]=u.useState([]),[i,l]=u.useState(""),[c,d]=u.useState(!1),[f,h]=u.useState(()=>typeof window<"u"?localStorage.getItem(sh)==="true":!1),[m,g]=u.useState(""),[b,x]=u.useState(!1),[w,v]=u.useState(!1),[p,y]=u.useState(0),[S,j]=u.useState(!1),[E,N]=u.useState({}),[C,A]=u.useState(null),[T,z]=u.useState(""),M=u.useRef(null),[$,X]=u.useState(()=>{if(typeof window<"u"){const pe=localStorage.getItem(nh);if(pe)try{const ve=JSON.parse(pe);if(typeof ve.x=="number"&&typeof ve.y=="number")return ve}catch{}}const K=window.innerWidth-400-16,ue=window.innerHeight-600-16;return{x:Math.max(20,K),y:Math.max(96,ue)}}),[k,R]=u.useState(!1),[B,O]=u.useState({x:0,y:0}),[U,L]=u.useState({x:0,y:0}),P=u.useRef(null),H=u.useRef(null),Q=u.useRef(),{toast:_}=Ft(),{socket:se,isConnected:te,sessionId:I,currentLanguage:W}=qd(),{translate:G,currentLanguage:F}=ig(),ne=u.useCallback(()=>{M.current&&M.current.scrollIntoView({behavior:"smooth"})},[]);u.useEffect(()=>{var K;(K=M.current)==null||K.scrollIntoView({behavior:"smooth"})},[a]),u.useEffect(()=>{a.length>1&&I&&le()},[a,I]),u.useEffect(()=>{I&&e&&Re()&&console.log(" Loaded saved Teacher Agent conversation")},[I,e]),u.useEffect(()=>{if(Q.current===void 0){Q.current=t;return}if(Q.current!==t&&t!==void 0){(async()=>{let pe=`Teaching context updated to Chapter ${t}.`;if(F!=="en")try{pe=await G({text:pe,targetLanguage:F,context:"ui"})}catch(be){console.error("Failed to translate system message:",be)}const ve={id:`msg-system-${Date.now()}`,role:"system",content:pe,timestamp:new Date,agent:"Teacher Agent"};o(be=>[...be,ve])})();let ue=`The Teacher Agent is now aware you are on chapter ${t}.`;F!=="en"?G({text:ue,targetLanguage:F,context:"ui"}).then(pe=>{_({title:"Teaching Context Updated",description:pe,duration:3e3})}).catch(()=>{_({title:"Teaching Context Updated",description:ue,duration:3e3})}):_({title:"Teaching Context Updated",description:ue,duration:3e3}),Q.current=t}},[t,_,F,G]);const ee=()=>`teacher_agent_${e||"general"}_${I}`,le=()=>{try{j(!0);const K={messages:a,documentId:e,chapter:t,lastUpdated:new Date().toISOString(),sessionId:I};localStorage.setItem(ee(),JSON.stringify(K)),setTimeout(()=>j(!1),500)}catch(K){console.error("Failed to save Teacher Agent conversation:",K),j(!1)}},Re=()=>{try{const K=localStorage.getItem(ee());if(K){const ue=JSON.parse(K),pe=new Date(ue.lastUpdated);if((new Date().getTime()-pe.getTime())/(1e3*60*60)<24&&ue.sessionId===I)return o(ue.messages.map(Tt=>({...Tt,timestamp:new Date(Tt.timestamp)}))),!0}return!1}catch(K){return console.error("Failed to load saved Teacher Agent conversation:",K),!1}},ce=()=>{confirm("Are you sure you want to clear this teaching conversation? This action cannot be undone.")&&(o([]),localStorage.removeItem(ee()),_({title:"Teaching Conversation Cleared",description:"Chat history has been cleared.",duration:2e3}))},Se=()=>{const K={title:`Teacher Agent: ${e?`Document ${e}`:"General"} ${t?`- Chapter ${t}`:""}`,timestamp:new Date().toISOString(),messages:a.map(be=>({role:be.role,content:be.content,timestamp:be.timestamp.toISOString(),agent:be.agent})),metadata:{documentId:e,chapter:t,sessionId:I,language:W}},ue=new Blob([JSON.stringify(K,null,2)],{type:"application/json"}),pe=URL.createObjectURL(ue),ve=document.createElement("a");ve.href=pe,ve.download=`teacher-agent-conversation-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),URL.revokeObjectURL(pe),_({title:"Conversation Exported",description:"Teaching conversation has been exported successfully.",duration:2e3})};u.useEffect(()=>{if(!se)return;const K=async ue=>{if(d(!1),v(!1),ue.error)return;console.log(` Teacher Agent: Received response in language: ${ue.language||"unknown"}`),console.log(` Teacher Agent: User language: ${F}`);let pe=ue.message;if(F!=="en")try{console.log(` Teacher Agent: Translating response from ${ue.language||"unknown"} to ${F}`),pe=await G({text:ue.message,targetLanguage:F,context:"explanation"}),console.log(" Teacher Agent: Translation completed")}catch(ve){console.error("Failed to translate teacher response:",ve),pe=ue.message}o(ve=>[...ve,{id:`teacher-${Date.now()}`,role:"teacher",content:pe,timestamp:new Date,agent:"Teacher Agent"}]),setTimeout(ne,100)};return se.on("teacherResponse",K),()=>{se.off("teacherResponse",K)}},[se,ne,F,G]);const De=async()=>{if(!i.trim()||!se||!I)return;const K={id:`user-${Date.now()}`,role:"user",content:i,timestamp:new Date};o(pe=>[...pe,K]),l(""),d(!0),v(!0),y(0);const ue=setInterval(()=>{y(pe=>pe>=90?(clearInterval(ue),90):pe+10)},200);console.log(` Teacher Agent: Sending message in language: ${F}`),se.emit("teacherMessage",{message:K.content,sessionId:I,userId:2,documentId:e,chapter:t,language:F,conversationHistory:a.map(pe=>({id:pe.id,role:pe.role,content:pe.content,timestamp:pe.timestamp.toISOString()}))})},qe=K=>{g(K.content),x(!0)},$e=()=>{x(!1),g("")},At=async(K,ue,pe)=>{if(E[K.id])return;const ve={messageId:K.id,feedback:ue,reason:pe,documentId:e,chapter:t,userId:2,agentId:K.agent||"Teacher Agent",messageContent:K.content};try{await ks.sendFeedback(ve),N(be=>({...be,[K.id]:ue})),A(null),z(""),_({title:"Feedback Submitted",description:"Thank you for your feedback! It helps improve the teaching experience.",duration:2e3})}catch(be){console.error("Failed to submit feedback:",be),_({title:"Feedback Error",description:"Failed to submit feedback. Please try again.",duration:2e3})}},Rn=async(K,ue)=>{ue==="negative"?A(K):await At(K,ue)},Mn=()=>{C&&At(C,"negative",T)},at=K=>{K.target.closest("button")||(K.preventDefault(),K.stopPropagation(),R(!0),O({x:K.clientX,y:K.clientY}),L({x:K.clientX-$.x,y:K.clientY-$.y}),P.current&&(P.current.style.cursor="grabbing",P.current.style.transform="scale(1.02)",P.current.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)"))},Dt=K=>{k&&(K.preventDefault(),K.stopPropagation(),H.current&&cancelAnimationFrame(H.current),H.current=requestAnimationFrame(()=>{const pe=f?64:600,ve=Math.max(10,Math.min(window.innerWidth-400-10,K.clientX-U.x)),be=Math.max(10,Math.min(window.innerHeight-pe-10,K.clientY-U.y));X({x:ve,y:be})}))},ge=()=>{R(!1),H.current&&(cancelAnimationFrame(H.current),H.current=null),P.current&&(P.current.style.cursor="",P.current.style.transform="",P.current.style.boxShadow="");const K=window.getSelection();K&&K.removeAllRanges(),localStorage.setItem(nh,JSON.stringify($))};return u.useEffect(()=>{if(k){document.addEventListener("mousemove",Dt,{passive:!1}),document.addEventListener("mouseup",ge,{passive:!0});const K=ue=>{if(ue.touches.length===1){const pe=ue.touches[0],ve={preventDefault:()=>ue.preventDefault(),stopPropagation:()=>ue.stopPropagation(),clientX:pe.clientX,clientY:pe.clientY};Dt(ve)}};return document.addEventListener("touchmove",K,{passive:!1}),document.addEventListener("touchend",ge,{passive:!0}),document.body.style.overflow="hidden",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",Dt),document.removeEventListener("mouseup",ge),document.removeEventListener("touchmove",K),document.removeEventListener("touchend",ge),document.body.style.overflow="",document.body.style.userSelect="",H.current&&(cancelAnimationFrame(H.current),H.current=null)}}},[k,U]),u.useEffect(()=>{localStorage.setItem(nh,JSON.stringify($))},[$]),u.useEffect(()=>{localStorage.setItem(sh,f?"true":"false")},[f]),u.useEffect(()=>{n&&o([])},[n]),n?r.jsxs("div",{ref:P,className:"fixed z-50",style:{left:`${$.x}px`,top:`${$.y}px`,transform:"none"},children:[r.jsxs(Oe,{className:`w-96 transition-all duration-300 ${f?"h-16":"h-[600px]"} shadow-2xl border-2 border-orange-200/30 ${k?"select-none cursor-grabbing":""}`,style:{willChange:k?"transform":"auto",transition:k?"box-shadow 0.2s ease-out":"all 0.3s ease-out",zIndex:k?60:50},children:[r.jsx(Fe,{className:`pb-2 bg-gradient-to-r from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20 select-none transition-all duration-200 ${k?"cursor-grabbing bg-gradient-to-r from-orange-100 to-yellow-100 dark:from-orange-800/30 dark:to-yellow-800/30":"cursor-grab hover:from-orange-100 hover:to-yellow-100 dark:hover:from-orange-800/30 dark:hover:to-yellow-800/30"}`,onMouseDown:at,onDragStart:K=>K.preventDefault(),style:{userSelect:"none",touchAction:"none"},title:"Drag to move",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(Qe,{className:"text-lg flex items-center gap-2",children:[r.jsx(_o,{className:"h-5 w-5 text-orange-600"}),"AI Teacher",r.jsx(He,{className:`text-xs ${te?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:te?"Online":"Offline"}),r.jsxs("div",{className:"flex gap-0.5 ml-2 opacity-50",children:[r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),r.jsx("div",{className:"w-1 h-1 bg-current rounded-full"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[S&&r.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400 mr-2",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Saving..."]}),r.jsx(V,{onClick:()=>{h(!f),localStorage.setItem(sh,(!f).toString())},className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:f?r.jsx(Qr,{className:"h-4 w-4"}):r.jsx(Ga,{className:"h-4 w-4"})}),r.jsx(V,{onClick:s,className:"h-8 w-8 p-0 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800",children:r.jsx(dn,{className:"h-4 w-4"})})]})]})}),!f&&r.jsxs(Ie,{className:"p-0 flex flex-col h-[520px]",children:[r.jsx($s,{className:"flex-1 p-4",children:r.jsxs("div",{className:"space-y-4",children:[a.length===0?r.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[r.jsx(_o,{className:"h-12 w-12 mx-auto mb-4 text-orange-500/50"}),r.jsx("p",{className:"text-sm",children:"Welcome to your AI Teacher!"}),r.jsx("p",{className:"text-xs mt-2",children:"Ask me anything for step-by-step explanations and guidance."})]}):a.map((K,ue)=>r.jsx("div",{className:`flex ${K.role==="user"?"justify-end":"justify-start"} group ${K.role==="user"?"message-slide-right animate-in":"message-slide-left animate-in"} ${ue<5?`message-stagger-${Math.min(ue+1,5)}`:""}`,children:r.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 transition-all duration-300 message-bubble-pop gpu-accelerated ${K.role==="user"?"bg-orange-500 text-white hover:scale-[1.02] shadow-lg hover:shadow-xl transform hover:-translate-y-1":K.role==="system"?"bg-orange-100 dark:bg-orange-900 text-orange-900 dark:text-orange-100 hover:bg-orange-200 dark:hover:bg-orange-800 hover:scale-[1.01] insight-sparkle":"bg-muted hover:bg-muted/80 hover:scale-[1.01] shadow-md hover:shadow-lg transform hover:-translate-y-0.5"} ${K.role==="teacher"||K.role==="system"?"cursor-text":""}`,"data-message-id":K.id,"data-message-role":K.role,"data-agent":K.agent||"Teacher Agent",children:[K.agent&&r.jsxs("div",{className:"flex items-center justify-between gap-1 mb-1 text-xs opacity-70 message-header animate-in fade-in delay-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`relative agent-avatar ${K.role==="system"?"agent-thinking":"agent-active"} transition-all duration-300`,children:r.jsx(_o,{className:"h-3 w-3"})}),r.jsx("span",{className:"font-medium",children:K.agent})]}),(K.role==="teacher"||K.role==="system")&&r.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-orange-500 hover:text-orange-700 opacity-0 group-hover:opacity-100 transition-all duration-300 hover:scale-110 btn-scale",onClick:()=>qe(K),title:"Save as note",children:r.jsx(hs,{className:"h-3 w-3 animate-in bounce-in delay-500"})})]}),r.jsx("p",{className:"text-sm select-text agent-message-content",children:K.content}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs opacity-70 mt-1 timestamp",children:K.timestamp.toLocaleTimeString()}),(K.role==="teacher"||K.role==="system")&&r.jsxs("div",{className:"flex items-center gap-1 mt-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[r.jsx(V,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 hover:text-green-500 disabled:opacity-100 ${E[K.id]==="positive"?"text-green-500":"text-muted-foreground"}`,onClick:()=>Rn(K,"positive"),disabled:!!E[K.id],title:"Good explanation",children:r.jsx(bS,{className:"h-3 w-3"})}),r.jsx(V,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 hover:text-red-500 disabled:opacity-100 ${E[K.id]==="negative"?"text-red-500":"text-muted-foreground"}`,onClick:()=>Rn(K,"negative"),disabled:!!E[K.id],title:"Needs improvement",children:r.jsx(yS,{className:"h-3 w-3"})})]})]})]})},K.id)),w&&r.jsx(Tg,{isTyping:w,agentType:"discussion",currentProgress:p,estimatedTime:3,customMessage:"Preparing your explanation..."}),r.jsx("div",{ref:M})]})}),r.jsx(Qs,{}),r.jsxs("div",{className:"p-4 space-y-2",children:[a.length>0&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx(V,{onClick:ce,variant:"outline",size:"sm",className:"flex-1 px-3 py-2 text-sm border border-red-300 dark:border-red-600 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400",children:"Clear Chat"}),r.jsx(V,{onClick:Se,variant:"outline",size:"sm",className:"flex-1 px-3 py-2 text-sm border border-orange-300 dark:border-orange-600 bg-white dark:bg-gray-800 hover:bg-orange-50 dark:hover:bg-orange-900/20 text-orange-600 dark:text-orange-400",children:"Export"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(dt,{placeholder:I?"Ask for step-by-step explanation...":"Connecting...",value:i,onChange:K=>l(K.target.value),onKeyPress:K=>K.key==="Enter"&&De(),disabled:!te||!I,className:"flex-1"}),r.jsx(V,{onClick:De,disabled:!te||!I||!i.trim(),className:"px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white disabled:opacity-50",children:r.jsx(Ad,{className:"h-4 w-4"})})]})]})]})]}),r.jsx($d,{isOpen:b,onClose:$e,selectedText:m,documentId:-3,chapter:t||1,documentTitle:"Teacher Agent",paragraph:0}),r.jsx(Wr,{open:!!C,onOpenChange:K=>!K&&A(null),children:r.jsxs(Ka,{children:[r.jsxs(Xa,{children:[r.jsx(Za,{children:"Provide additional feedback"}),r.jsx(Ni,{children:"Your feedback helps improve the teaching experience. Please provide a reason."})]}),r.jsx(Qn,{value:T,onChange:K=>z(K.target.value),placeholder:"e.g., This explanation was not clear enough for my level.",className:"my-4"}),r.jsxs(Ud,{children:[r.jsx(V,{variant:"outline",onClick:()=>{A(null),z("")},children:"Cancel"}),r.jsx(V,{onClick:Mn,children:"Submit Feedback"})]})]})})]}):null}function ez({note:e}){return r.jsxs(ZL,{children:[r.jsx(WL,{asChild:!0,children:r.jsx("button",{className:"ml-1 align-middle text-amber-500 hover:text-amber-700 focus:outline-none",title:"Show note",children:r.jsx(hs,{className:"w-4 h-4 inline"})})}),r.jsxs(Z2,{className:"max-w-xs text-sm",children:[r.jsx("div",{className:"font-semibold mb-1 text-amber-700",children:"Your Note"}),r.jsx("div",{className:"text-foreground whitespace-pre-line",children:e})]})]})}function tz({document:e,chapter:t,annotations:n,onTextSelected:s,currentChapter:a,totalChapters:o,onNextChapter:i,onPrevChapter:l}){const[c,d]=u.useState(0),[f,h]=u.useState(0),[m,g]=u.useState(0),[b]=u.useState(Date.now()),[x,w]=u.useState(null),{toast:v}=Ft(),p=t.paragraphs||[];U2(p);const{startSelection:y}=PL({onSelection:(E,N)=>{if(E&&E.trim()){const C=window.document.createRange();s(E.trim(),C,"note")}}});u.useEffect(()=>{const E=N=>{if(!(N.target instanceof HTMLInputElement||N.target instanceof HTMLTextAreaElement))switch(N.key){case"ArrowLeft":N.preventDefault(),l();break;case"ArrowRight":N.preventDefault(),i();break;case"b":(N.ctrlKey||N.metaKey)&&N.preventDefault();break;case"n":(N.ctrlKey||N.metaKey)&&N.preventDefault();break}};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[i,l]),u.useEffect(()=>{const E=setInterval(()=>{h(Math.round((Date.now()-b)/6e4))},3e4);return()=>clearInterval(E)},[b]),u.useEffect(()=>{const E={root:null,rootMargin:"0px",threshold:.8},N=new IntersectionObserver(A=>{A.forEach(T=>{if(T.isIntersecting){const z=T.target,M=parseInt(z.dataset.paragraph||"0");if(M>c){d(M);const X=(z.textContent||"").split(/\s+/).length;g(k=>k+X)}}})},E);return window.document.querySelectorAll("[data-paragraph]").forEach(A=>N.observe(A)),()=>N.disconnect()},[c]),u.useEffect(()=>y(),[y]);const S=E=>{w(x===E?null:E)},j=Xl({mutationFn:async E=>{if(!(await fetch(`/api/annotations/${E}`,{method:"DELETE"})).ok)throw new Error("Failed to delete note");return!0},onSuccess:()=>{wo.invalidateQueries(),v({title:"Note deleted",variant:"default"})},onError:()=>{v({title:"Failed to delete note",variant:"destructive"})}});return r.jsxs("main",{className:"flex-1 overflow-auto bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 reading-content",children:[r.jsx(a6,{onTextSelected:s,onHighlightRemoved:E=>{console.log("Highlight removed:",E)}}),r.jsxs("div",{className:"max-w-4xl mx-auto px-8 py-12",children:[r.jsxs("header",{className:"mb-16 text-center animate-in fade-in-0 slide-in-from-top-4 duration-800",children:[r.jsx("h1",{className:"text-4xl md:text-5xl font-light tracking-tight text-foreground mb-4",children:e.title}),r.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm text-muted-foreground",children:[r.jsxs("span",{children:["Chapter ",a]}),r.jsx(Qs,{orientation:"vertical",className:"h-4"}),r.jsxs("span",{children:[p.length," sections"]}),r.jsx(Qs,{orientation:"vertical",className:"h-4"}),r.jsxs("span",{children:["~",Math.round(m/200||p.length*2)," min read"]})]})]}),r.jsx("article",{className:"space-y-8",children:p.map((E,N)=>{const C=n.some(T=>T.paragraph===E.number||T.paragraph===null&&p.length===1),A=x===E.number;return r.jsxs("section",{className:`
                  group relative transition-all duration-500 ease-out cursor-pointer
                  ${E.number<=c?"opacity-100":"opacity-75"}
                  ${A?"scale-105 bg-muted/30 rounded-lg p-6 shadow-lg":"hover:bg-muted/10 rounded-lg p-4"}
                  animate-in slide-in-from-bottom-4 duration-700
                `,style:{animationDelay:`${N*100}ms`},"data-paragraph":E.number,onClick:()=>S(E.number),children:[r.jsx("div",{className:`
                  absolute left-0 top-1/2 -translate-y-1/2 -translate-x-12 opacity-0 group-hover:opacity-100 transition-all duration-300
                  w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium
                  ${C?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}
                `,children:C?r.jsx(Dr,{className:"w-3 h-3"}):E.number}),r.jsxs("div",{className:"relative",children:[r.jsx("p",{className:"text-lg md:text-xl leading-relaxed text-foreground font-light tracking-wide selection:bg-primary/20 document-paragraph","data-paragraph-text":E.number,children:(()=>{let T=E.text;const z=n.filter($=>($.paragraph===E.number||$.paragraph===null&&p.length===1)&&$.selectedText&&$.selectedText.trim().length>0);if(z.length>0&&(console.log(` Applying ${z.length} highlights to paragraph ${E.number}`),z.forEach($=>{console.log(` Highlighting: "${$.selectedText}"`)})),z.length===0)return T;z.sort(($,X)=>X.selectedText.length-$.selectedText.length);let M=[T];return z.forEach(($,X)=>{const k=[];let R=!1;M.forEach((B,O)=>{if(typeof B=="string"&&$.selectedText&&B.includes($.selectedText)&&!R){const U=$.selectedText.trim(),L=B.indexOf(U);if(L!==-1){const P=B.substring(0,L),H=B.substring(L+U.length);console.log(` Highlighting "${U.substring(0,50)}..." (${U.length} chars)`),console.log(` Found at position ${L}`),console.log(` Before: "${P.substring(Math.max(0,P.length-20))}"`),console.log(` After: "${H.substring(0,20)}..."`),P&&k.push(P),k.push(r.jsxs("span",{className:"inline-flex items-center annotation-highlight",children:[r.jsx("mark",{className:"bg-yellow-200 dark:bg-yellow-600 px-1 rounded highlight-text",children:U}),$.note&&r.jsx(ez,{note:$.note})]},`ann-${$.id}-${X}-${O}`)),H&&k.push(H),R=!0}else k.push(B)}else k.push(B)}),M=k}),M})()}),A&&r.jsxs("div",{className:"mt-4 flex items-center gap-2 animate-in slide-in-from-bottom-2 duration-300",children:[r.jsxs(V,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>s(E.text,new Range,"note"),children:[r.jsx(hs,{className:"w-3 h-3 mr-1"}),"Add Note"]}),r.jsxs(V,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>s(E.text,new Range,"bookmark"),children:[r.jsx(Dr,{className:"w-3 h-3 mr-1"}),"Bookmark"]}),C&&r.jsx(He,{variant:"secondary",className:"text-xs",children:"Has annotation"})]})]}),C&&r.jsx("div",{className:"mt-4 space-y-3",children:n.filter(T=>T.paragraph===E.number||T.paragraph===null&&p.length===1).map(T=>r.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-amber-700 dark:text-amber-200 mb-1 font-semibold",children:"Highlighted:"}),r.jsxs("div",{className:"italic text-amber-900 dark:text-amber-100 mb-2",children:['"',T.selectedText,'"']}),r.jsx("div",{className:"text-xs text-green-700 dark:text-green-200 mb-1 font-semibold",children:"Your Note:"}),r.jsx("div",{className:"text-green-900 dark:text-green-100",children:T.note})]}),r.jsx("button",{className:"ml-4 text-xs text-red-600 hover:underline",onClick:z=>{z.stopPropagation(),j.mutate(T.id)},disabled:j.isPending,title:"Delete note",children:"Delete"})]})},T.id))})]},E.number)})}),r.jsx("footer",{className:"mt-20 pt-12 border-t border-border/50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(V,{variant:"outline",onClick:l,disabled:a<=1,className:"group hover:scale-105 transition-all duration-200",children:[r.jsx(Ya,{className:"w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform"}),"Previous Chapter"]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-light text-muted-foreground",children:[a," / ",o]}),r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Use   arrow keys to navigate"})]}),r.jsxs(V,{variant:"outline",onClick:i,disabled:a>=o,className:"group hover:scale-105 transition-all duration-200",children:["Next Chapter",r.jsx(p_,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})]})})]})]})}function nz(){var Dt;const e=Lw(),[,t]=Gr(),[n,s]=u.useState(!1),[a,o]=u.useState(!1),[i,l]=u.useState(null),[c,d]=u.useState(1),[f,h]=u.useState(!1),[m,g]=u.useState(""),[b,x]=u.useState(null),[w,v]=u.useState(()=>typeof window<"u"?localStorage.getItem("aiChatOpen")==="true":!1),[p,y]=u.useState(()=>typeof window<"u"?localStorage.getItem("autoLearningOpen")==="true":!1),[S,j]=u.useState(()=>typeof window<"u"?localStorage.getItem("chapterNotesOpen")==="true":!1),[E,N]=u.useState(()=>typeof window<"u"?localStorage.getItem("discussionAgentOpen")==="true":!1),[C,A]=u.useState(()=>typeof window<"u"?localStorage.getItem("powerSummariesOpen")==="true":!1),[T,z]=u.useState(()=>typeof window<"u"?localStorage.getItem("quizAgentOpen")==="true":!1),[M,$]=u.useState(()=>typeof window<"u"?localStorage.getItem("voiceReaderOpen")==="true":!1),[X,k]=u.useState(()=>typeof window<"u"?localStorage.getItem("teacherAgentOpen")==="true":!1),[R,B]=u.useState(null);u.useRef(null);const{toast:O}=Ft(),U=e.documentId?parseInt(e.documentId):null,L=e.chapter?parseInt(e.chapter):1,{data:P}=Cn({queryKey:[`/api/documents/${U}`],queryFn:()=>is(`/api/documents/${U}`),enabled:!!U}),{data:H,error:Q,isLoading:_}=Cn({queryKey:[`/api/documents/${U}/chapters/${L}`],queryFn:()=>is(`/api/documents/${U}/chapters/${L}`),enabled:!!U}),{data:se=[],refetch:te}=Cn({queryKey:[`/api/annotations/${U}/${L}`],queryFn:()=>is(`/api/annotations/${U}/${L}`),enabled:!!U});u.useEffect(()=>{se.length>0&&console.log(" Loaded annotations:",se)},[se]),u.useCallback(ge=>{document.querySelectorAll(".highlight-text[data-annotation-id]").forEach(ue=>{const pe=ue.nextSibling;if(pe&&pe.nodeType===Node.TEXT_NODE){const ve=ue.textContent||"",be=pe.textContent||"";pe.textContent=ve+be}ue.remove()}),ge.forEach(ue=>{ue.selectedText&&I(ue.selectedText,ue.id)})},[]);const I=u.useCallback((ge,K)=>{var be,Tt;const ue=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,null),pe=[];let ve;for(;ve=ue.nextNode();)pe.push(ve);for(const Z of pe){const Y=Z.textContent||"",oe=Y.indexOf(ge);if(oe!==-1){const de=document.createElement("span");de.className="highlight-text bg-yellow-200 dark:bg-yellow-800/40",de.setAttribute("data-highlight-id",K?`annotation-${K}`:`highlight-${Date.now()}`),K&&de.setAttribute("data-annotation-id",K),de.textContent=ge,de.title="Annotated text";const q=Y.substring(0,oe),me=Y.substring(oe+ge.length);if(q){const ye=document.createTextNode(q);(be=Z.parentNode)==null||be.insertBefore(ye,Z)}(Tt=Z.parentNode)==null||Tt.insertBefore(de,Z),Z.textContent=me;break}}},[U,L,O]);u.useEffect(()=>{P&&l(P)},[P]),u.useEffect(()=>{H&&d(L)},[H,L]),u.useEffect(()=>{const ge=K=>{const ue=K.target;if(ue.classList.contains("highlight-text")&&(K.preventDefault(),K.stopPropagation(),confirm("Remove this highlight?"))){const pe=ue.getAttribute("data-annotation-id");pe?fetch(`/api/annotations/${pe}`,{method:"DELETE"}).then(be=>{if(be.ok)wo.invalidateQueries({queryKey:[`/api/annotations/${U}/${L}`]}),wo.invalidateQueries({queryKey:["/api/annotations"]}),O({title:"Highlight removed",description:"The highlight has been permanently removed."});else throw new Error("Failed to delete annotation")}).catch(be=>{console.error("Failed to delete annotation:",be),O({title:"Error",description:"Failed to remove highlight. Please try again.",variant:"destructive"})}):O({title:"Highlight removed",description:"The highlight has been removed."});const ve=ue.nextSibling;if(ve&&ve.nodeType===Node.TEXT_NODE){const be=ue.textContent||"",Tt=ve.textContent||"";ve.textContent=be+Tt}ue.remove()}};return document.addEventListener("click",ge),()=>document.removeEventListener("click",ge)},[U,L,O]);const W=(ge,K=1)=>{t(`/reader/${ge.id}/${K}`)},G=(ge,K,ue)=>{var Tt,Z;if(!i||!U||!c)return;const pe=ge.replace(/\s+/g," ").trim();ge!==pe&&(console.log(" Text was cleaned:"),console.log(" Original:",`"${ge}"`),console.log(" Cleaned:",`"${pe}"`),console.log(" Length difference:",ge.length-pe.length));let ve=null,be=K.startContainer;if(be.nodeType===Node.TEXT_NODE&&(be=be.parentElement),be instanceof Element){const Y=be.closest("[data-paragraph]");if(Y)ve=parseInt(Y.getAttribute("data-paragraph")||"0"),console.log(" Found paragraph section with number:",ve);else{const oe=be.closest("[data-paragraph-text]");oe?(ve=parseInt(oe.getAttribute("data-paragraph-text")||"0"),console.log(" Found paragraph text element with number:",ve)):(console.log(" Could not find paragraph section with data-paragraph attribute"),console.log(" Current element:",be),console.log(" Element className:",be.className),console.log(" Element tagName:",be.tagName))}}if(ve===null){const Y=H==null?void 0:H.chapter;i&&((Tt=Y==null?void 0:Y.paragraphs)==null?void 0:Tt.length)===1&&(ve=Y.paragraphs[0].number,console.log(" Using fallback paragraph number:",ve))}if(console.log(" Selected text:",ge),console.log(" Text length:",ge.length),console.log(" Cleaned text:",pe),console.log(" Detected paragraph:",ve),K.startContainer&&K.endContainer&&(console.log(" Selection start:",K.startOffset),console.log(" Selection end:",K.endOffset),console.log(" Start container:",((Z=K.startContainer.textContent)==null?void 0:Z.substring(0,50))+"..."),console.log(" Selected range text:",K.toString())),ue==="note")g(pe),x(ve),h(!0);else if(ue==="highlight")g(pe),x(ve),h(!0);else if(ue==="bookmark")try{const Y=LN({title:`Bookmark from ${i.title} Chapter ${c}`,content:ge,documentId:(U==null?void 0:U.toString())||"",documentTitle:i.title,chapter:c,paragraph:ve||void 0,folder:"General",tags:["manual"],notes:`Bookmarked from ${i.title} Chapter ${c}`});O({title:"Bookmark created",description:"Your bookmark has been saved to your collection."})}catch(Y){console.error("Failed to save bookmark:",Y),O({title:"Error",description:"Failed to save bookmark. Please try again.",variant:"destructive"})}else console.log("Text selected without specific action:",ge)},F=()=>{g(""),x(null),h(!1);const ge=window.getSelection();ge&&ge.removeAllRanges()},ne=()=>{s(ge=>{const K=!ge;return O({title:K?"Sidebar Closed":"Sidebar Opened",description:K?"Navigation panel has been hidden":"Navigation panel is now visible",duration:1e3}),K})},ee=()=>{o(!a),O({title:a?"Light Mode Enabled":"Dark Mode Enabled",description:a?"Switched to light theme":"Switched to dark theme",duration:1e3})},le=u.useCallback(()=>{const ge=typeof(i==null?void 0:i.content)=="string"?JSON.parse(i.content).totalChapters:(i==null?void 0:i.totalChapters)||1;U&&c<ge&&(document.querySelectorAll(".highlight-text[data-annotation-id]").forEach(ue=>ue.remove()),t(`/reader/${U}/${c+1}`),O({title:`Chapter ${c+1}`,description:"Moving to next chapter",duration:1e3}))},[c,i,U,t,O]),Re=u.useCallback(()=>{U&&c>1&&(document.querySelectorAll(".highlight-text[data-annotation-id]").forEach(K=>K.remove()),t(`/reader/${U}/${c-1}`),O({title:`Chapter ${c-1}`,description:"Moving to previous chapter",duration:1e3}))},[c,U,t,O]),ce=()=>{v(!w),O({title:w?"AI Chat Closed":"AI Chat Opened",description:w?"AI chat has been closed":"AI assistant is ready to help",duration:1500})},Se=()=>{y(!p),O({title:p?"Auto Learning Deactivated":"Auto Learning Activated",description:p?"Auto learning has been turned off":"AI is now learning from your reading",duration:1500})},De=()=>{j(!S),O({title:S?"Chapter Notes Closed":"Chapter Notes Opened",description:S?"Chapter notes have been closed":"AI-generated chapter insights available",duration:1500})},qe=()=>{const ge=!E;N(ge),ge&&B("discussion"),O({title:ge?"Discussion Agent Activated":"Discussion Agent Closed",description:ge?"Ready to discuss chapter content":"Discussion has been closed",duration:1500})},$e=()=>{A(!C),O({title:C?"Power Summaries Closed":"Power Summaries Opened",description:C?"Power summaries have been closed":"AI-powered chapter summaries available",duration:1500})},At=()=>{z(!T),O({title:T?"Quiz Agent Closed":"Quiz Agent Opened",description:T?"Quiz agent has been closed":"Ready to create quizzes about this content",duration:1500})},Rn=()=>{$(!M),O({title:M?"Voice Reader Closed":"Voice Reader Opened",description:M?"Voice reader has been closed":"AI voice reader is ready to narrate content",duration:1500})},Mn=()=>{const ge=!X;k(ge),localStorage.setItem("teacherAgentOpen",ge.toString())};if(u.useEffect(()=>{localStorage.setItem("aiChatOpen",w?"true":"false")},[w]),u.useEffect(()=>{localStorage.setItem("autoLearningOpen",p?"true":"false")},[p]),u.useEffect(()=>{localStorage.setItem("chapterNotesOpen",S?"true":"false")},[S]),u.useEffect(()=>{localStorage.setItem("discussionAgentOpen",E?"true":"false")},[E]),u.useEffect(()=>{localStorage.setItem("powerSummariesOpen",C?"true":"false")},[C]),u.useEffect(()=>{localStorage.setItem("quizAgentOpen",T?"true":"false")},[T]),u.useEffect(()=>{localStorage.setItem("voiceReaderOpen",M?"true":"false")},[M]),u.useEffect(()=>{if(!(!U||!c))try{const ge=JSON.parse(localStorage.getItem("readingPositions")||"{}");ge[U]={chapter:c},localStorage.setItem("readingPositions",JSON.stringify(ge))}catch{}},[U,c]),!U||!i)return r.jsx(Rm,{onSelectDocument:W});if(!H)return Q?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center animate-in scale-in duration-500",children:[r.jsx("h2",{className:"text-2xl font-semibold text-destructive mb-2",children:"Error Loading Document"}),r.jsx("p",{className:"text-muted-foreground",children:"Failed to load the document. Please try again."}),r.jsx(V,{onClick:()=>t("/"),className:"mt-4",children:"Back to Library"})]})}):_?r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center animate-in fade-in duration-500",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-medium mb-2",children:"Loading Document"}),r.jsx("p",{className:"text-muted-foreground",children:"Preparing your reading experience..."})]})}):null;const at=H.chapter;return console.log(" DocumentReader - currentChapterData:",at),console.log(" DocumentReader - paragraphs:",at==null?void 0:at.paragraphs),console.log(" DocumentReader - paragraphs length:",(Dt=at==null?void 0:at.paragraphs)==null?void 0:Dt.length),r.jsx("div",{className:`min-h-screen theme-transition-root ${a?"dark":""}`,children:r.jsxs("div",{className:"bg-background text-foreground theme-transition-content",children:[r.jsx(S3,{book:i.title,chapter:c,darkMode:a,onToggleDarkMode:ee,onToggleAiChat:ce,onToggleAutoLearning:Se,onToggleChapterNotes:De,onToggleDiscussionAgent:qe,onTogglePowerSummaries:$e,onToggleQuizAgent:At,onToggleTeacherAgent:Mn,aiChatOpen:w,autoLearningOpen:p,chapterNotesOpen:S,discussionAgentOpen:E,powerSummariesOpen:C,quizAgentOpen:T,teacherAgentOpen:X}),r.jsxs("div",{className:"flex relative",children:[r.jsx(P3,{isOpen:n,onToggle:ne,currentPage:"reader",documentId:i.id,currentChapter:c,totalChapters:typeof i.content=="string"?JSON.parse(i.content).totalChapters:i.totalChapters}),r.jsx("div",{className:`flex-1 transition-all duration-500 ease-out ${n?"lg:ml-72":"lg:ml-16"} ml-0`,children:r.jsx(tz,{document:i,chapter:at,annotations:se,onTextSelected:G,currentChapter:c,totalChapters:typeof i.content=="string"?JSON.parse(i.content).totalChapters:i.totalChapters,onNextChapter:le,onPrevChapter:Re})})]}),r.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col space-y-3 z-40",children:[r.jsx(V,{onClick:Rn,size:"lg",className:`w-14 h-14 rounded-full shadow-xl transition-all duration-300 ${M?"bg-green-500 scale-110 shadow-green-500/30":"bg-secondary hover:scale-105"}`,title:"AI Voice Reader",children:r.jsx(SS,{className:"w-6 h-6"})}),r.jsx(V,{onClick:qe,size:"lg",className:`w-14 h-14 rounded-full shadow-xl transition-all duration-300 ${E?"bg-blue-500 scale-110 shadow-blue-500/30":"bg-secondary hover:scale-105"}`,title:"AI Discussion Panel",children:r.jsx(cn,{className:"w-6 h-6"})}),r.jsx(V,{onClick:ce,size:"lg",className:`w-14 h-14 rounded-full shadow-xl transition-all duration-300 ${w?"bg-primary scale-110 shadow-primary/30":"bg-secondary hover:scale-105"}`,title:"AI Chat Assistant",children:r.jsx(Us,{className:"w-6 h-6"})})]}),U&&r.jsxs(r.Fragment,{children:[r.jsx(b6,{documentId:U,chapter:c,isOpen:w,onToggle:ce}),r.jsx(R6,{documentId:U,chapter:c,isOpen:E,onToggle:qe,currentBook:i.title}),r.jsx(A6,{documentId:U,documentTitle:i.title,isOpen:p,onToggle:Se}),r.jsx(T6,{documentId:U,chapter:c,isVisible:S,onToggle:De}),r.jsx(M6,{documentId:U,currentChapter:c,currentChapterData:at,isVisible:C,onToggle:$e}),r.jsx(P6,{documentId:U,chapter:c,isOpen:T,onToggle:At}),r.jsx(zL,{content:(at==null?void 0:at.paragraphs)||[],documentId:U,currentChapter:c,onNavigateNext:le,canNavigateNext:c<(typeof(i==null?void 0:i.content)=="string"?JSON.parse(i.content).totalChapters:(i==null?void 0:i.totalChapters)||1),isOpen:M,onToggle:Rn})]}),r.jsx($d,{isOpen:f,onClose:F,selectedText:m,documentId:U||0,documentTitle:i.title,chapter:c,paragraph:b,onAnnotationSaved:ge=>{console.log(" Annotation saved:",ge),console.log(" Selected text:",m),console.log(" Paragraph:",b),wo.setQueryData([`/api/annotations/${U}/${c}`],K=>{const ue={...ge,id:ge.id||Date.now(),documentId:U,chapter:c,selectedText:m.replace(/\s+/g," ").trim(),note:ge.note,paragraph:b,createdAt:ge.createdAt||new Date().toISOString()};return console.log(" New annotation to cache:",ue),K?[...K,ue]:[ue]}),wo.invalidateQueries({queryKey:[`/api/annotations/${U}/${c}`]})}}),U&&r.jsx(JL,{documentId:U,chapter:c,isOpen:X,onToggle:Mn})]})})}function sz(){var f,h,m,g,b,x,w,v,p,y,S,j,E,N,C,A,T,z,M,$,X,k,R;const[e,t]=u.useState(5e3),{data:n,isLoading:s,refetch:a}=Cn({queryKey:["/api/performance"],queryFn:()=>fetch("/api/performance").then(B=>B.json()),refetchInterval:e}),{data:o}=Cn({queryKey:["/api/performance/live"],queryFn:()=>fetch("/api/performance/live").then(B=>B.json()),refetchInterval:2e3});if(s)return r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading performance metrics..."})]})})});const i=n||{},l=o||{},c=(B,O)=>B<=O.good?"text-green-600":B<=O.warning?"text-yellow-600":"text-red-600",d=(B,O)=>B<=O.good?r.jsx(Cm,{className:"w-4 h-4 text-green-600"}):B<=O.warning?r.jsx(Mo,{className:"w-4 h-4 text-yellow-600"}):r.jsx(Mo,{className:"w-4 h-4 text-red-600"});return r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ya,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold",children:"Performance Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Real-time system and AI performance monitoring"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(V,{onClick:()=>a(),variant:"outline",children:"Refresh"}),r.jsx(V,{onClick:()=>t(B=>B===5e3?1e3:5e3),variant:"outline",children:e===1e3?"Slow Refresh":"Fast Refresh"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(Oe,{children:[r.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Qe,{className:"text-sm font-medium",children:"API Response Time"}),r.jsx(jm,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ie,{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"text-2xl font-bold",children:[((f=i.api)==null?void 0:f.averageResponseTime)||0,"ms"]}),d(((h=i.api)==null?void 0:h.averageResponseTime)||0,{good:100,warning:500})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[((m=i.api)==null?void 0:m.totalRequests)||0," total requests"]})]})]}),r.jsxs(Oe,{children:[r.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Qe,{className:"text-sm font-medium",children:"Memory Usage"}),r.jsx(W_,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ie,{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"text-2xl font-bold",children:((b=(g=i.system)==null?void 0:g.memory)==null?void 0:b.used)||"N/A"}),r.jsx(dg,{className:"h-4 w-4 text-green-600"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",((w=(x=i.system)==null?void 0:x.memory)==null?void 0:w.total)||"N/A"," total"]})]})]}),r.jsxs(Oe,{children:[r.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Qe,{className:"text-sm font-medium",children:"Database Queries"}),r.jsx(dS,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ie,{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:"text-2xl font-bold",children:[((v=i.database)==null?void 0:v.averageQueryTime)||"N/A","ms"]}),d(((p=i.database)==null?void 0:p.averageQueryTime)||0,{good:50,warning:200})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[((y=i.database)==null?void 0:y.totalQueries)||0," total queries"]})]})]}),r.jsxs(Oe,{children:[r.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Qe,{className:"text-sm font-medium",children:"System Uptime"}),r.jsx(tc,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ie,{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"text-2xl font-bold",children:((S=i.system)==null?void 0:S.uptime)||"N/A"}),r.jsx(Cm,{className:"h-4 w-4 text-green-600"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Node.js ",((j=i.system)==null?void 0:j.nodeVersion)||"N/A"]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Oe,{children:[r.jsxs(Fe,{children:[r.jsx(Qe,{children:"AI Service Status"}),r.jsx(Bn,{children:"Ollama and AI model performance"})]}),r.jsxs(Ie,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Ollama Connection"}),r.jsx("span",{className:`text-sm ${((E=i.ollama)==null?void 0:E.status)==="optimized"?"text-green-600":"text-red-600"}`,children:((N=i.ollama)==null?void 0:N.status)||"Unknown"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Model"}),r.jsx("span",{className:"text-sm",children:((C=i.ollama)==null?void 0:C.model)||"N/A"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Cache Hit Rate"}),r.jsxs("span",{className:"text-sm",children:[((A=i.api)==null?void 0:A.cacheHitRate)||0,"%"]})]}),r.jsx(Ku,{value:((T=i.api)==null?void 0:T.cacheHitRate)||0,className:"w-full"})]})]}),r.jsxs(Oe,{children:[r.jsxs(Fe,{children:[r.jsx(Qe,{children:"Recent Slow Queries"}),r.jsx(Bn,{children:"API endpoints taking longer than 500ms"})]}),r.jsx(Ie,{children:r.jsx("div",{className:"space-y-2",children:((M=(z=i.api)==null?void 0:z.slowQueries)==null?void 0:M.slice(0,5).map((B,O)=>r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"font-medium",children:B.endpoint}),r.jsxs("span",{className:c(B.duration,{good:500,warning:1e3}),children:[B.duration.toFixed(0),"ms"]})]},O)))||r.jsx("p",{className:"text-sm text-muted-foreground",children:"No slow queries detected"})})})]})]}),i.recommendations&&i.recommendations.length>0&&r.jsxs(Oe,{children:[r.jsxs(Fe,{children:[r.jsx(Qe,{children:"Performance Recommendations"}),r.jsx(Bn,{children:"Suggestions to improve system performance"})]}),r.jsx(Ie,{children:r.jsx("div",{className:"space-y-2",children:i.recommendations.map((B,O)=>r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(Mo,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),r.jsx("span",{className:"text-sm",children:B})]},O))})})]}),l&&r.jsxs(Oe,{children:[r.jsxs(Fe,{children:[r.jsx(Qe,{children:"Live Metrics"}),r.jsx(Bn,{children:"Real-time system metrics (updates every 2 seconds)"})]}),r.jsx(Ie,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Requests/min:"})," ",(($=l.api)==null?void 0:$.requestsPerMinute)||0]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Current Response Time:"})," ",((k=(X=l.api)==null?void 0:X.currentResponseTime)==null?void 0:k.toFixed(0))||0,"ms"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Memory Used:"})," ",Math.round(((R=l.memory)==null?void 0:R.heapUsed)/1024/1024)||0,"MB"]})]})})]})]})})}const az=Cd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),W2=u.forwardRef(({className:e,variant:t,...n},s)=>r.jsx("div",{ref:s,role:"alert",className:Ne(az({variant:t}),e),...n}));W2.displayName="Alert";const rz=u.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:Ne("mb-1 font-medium leading-none tracking-tight",e),...t}));rz.displayName="AlertTitle";const J2=u.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ne("text-sm [&_p]:leading-relaxed",e),...t}));J2.displayName="AlertDescription";function oz(){var v;const[e,t]=u.useState(null),{data:n,isLoading:s,error:a,refetch:o}=Cn({queryKey:["/api/intelligence/agents/status"],queryFn:()=>fetch("/api/intelligence/agents/status").then(p=>p.json()),refetchInterval:3e4}),{data:i,isLoading:l}=Cn({queryKey:["/api/intelligence/models/available"],queryFn:()=>fetch("/api/intelligence/models/available").then(p=>p.json())}),{data:c,isLoading:d}=Cn({queryKey:["/api/intelligence/agents/interactions"],queryFn:()=>fetch("/api/intelligence/agents/interactions").then(p=>p.json()),refetchInterval:6e4}),f=(n==null?void 0:n.agents)||[],h=((v=i==null?void 0:i.data)==null?void 0:v.availableModels)||[],m=(c==null?void 0:c.interactions)||[],g=p=>{switch(p){case"active":return"bg-green-500";case"busy":return"bg-yellow-500";case"inactive":return"bg-gray-500";default:return"bg-gray-500"}},b=p=>{switch(p){case"active":return"Active";case"busy":return"Busy";case"inactive":return"Inactive";default:return"Unknown"}},x=p=>new Date(p).toLocaleString(),w=p=>{const y=Math.floor(p/36e5),S=Math.floor(p%(1e3*60*60)/(1e3*60));return y>0?`${y}h ${S}m`:`${S}m`};return s?r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Loading agent dashboard..."})]})})}):r.jsx("div",{className:"min-h-screen bg-background p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ya,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold",children:"AI Agent Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage and monitor your AI agents"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(V,{onClick:()=>o(),variant:"outline",children:[r.jsx(cl,{className:"w-4 h-4 mr-2"}),"Refresh"]}),r.jsxs(V,{variant:"outline",children:[r.jsx(Oo,{className:"w-4 h-4 mr-2"}),"Settings"]})]})]}),a&&r.jsxs(W2,{variant:"destructive",children:[r.jsx(Mo,{className:"h-4 w-4"}),r.jsx(J2,{children:"Failed to load agent data. Please check your connection and try again."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(Oe,{children:[r.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Qe,{className:"text-sm font-medium",children:"Active Agents"}),r.jsx(cn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ie,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f.filter(p=>p.status==="active").length}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",f.length," total agents"]})]})]}),r.jsxs(Oe,{children:[r.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Qe,{className:"text-sm font-medium",children:"Tasks Completed"}),r.jsx(jm,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ie,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f.reduce((p,y)=>p+y.tasksCompleted,0)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"across all agents"})]})]}),r.jsxs(Oe,{children:[r.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Qe,{className:"text-sm font-medium",children:"Avg Response Time"}),r.jsx(Xt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ie,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[f.length>0?Math.round(f.reduce((p,y)=>p+y.averageResponseTime,0)/f.length):0,"ms"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"system average"})]})]}),r.jsxs(Oe,{children:[r.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(Qe,{className:"text-sm font-medium",children:"Available Models"}),r.jsx(nn,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(Ie,{children:[r.jsx("div",{className:"text-2xl font-bold",children:h.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"AI models ready"})]})]})]}),r.jsxs(Uj,{defaultValue:"agents",className:"space-y-6",children:[r.jsxs(Og,{children:[r.jsx(jr,{value:"agents",children:"Agents"}),r.jsx(jr,{value:"models",children:"Models"}),r.jsx(jr,{value:"interactions",children:"Interactions"})]}),r.jsx(Cr,{value:"agents",className:"space-y-6",children:f.length>0?r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:f.map((p,y)=>r.jsxs(Oe,{className:`cursor-pointer transition-all hover:shadow-lg ${e===p.name?"ring-2 ring-primary":""}`,children:[r.jsxs(Fe,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Qe,{className:"text-lg",children:p.name}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${g(p.status)}`}),r.jsx(He,{variant:p.status==="active"?"default":p.status==="busy"?"secondary":"outline",children:b(p.status)})]})]}),r.jsx(Bn,{children:p.description})]}),r.jsxs(Ie,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Tasks:"})," ",p.tasksCompleted]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Avg Time:"})," ",p.averageResponseTime,"ms"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Uptime:"})," ",w(p.uptime)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Last Activity:"})," ",p.lastActivity]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Specialties:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:p.specialties.map((S,j)=>r.jsx(He,{variant:"outline",className:"text-xs",children:S},j))})]})]})]},y))}):r.jsx(Oe,{children:r.jsxs(Ie,{className:"p-8 text-center",children:[r.jsx(cn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Agents Available"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"No AI agents are currently running or configured."}),r.jsxs(V,{children:[r.jsx(Oo,{className:"w-4 h-4 mr-2"}),"Configure Agents"]})]})})}),r.jsx(Cr,{value:"models",className:"space-y-6",children:l?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 border-b-2 border-primary mr-2"}),r.jsx("span",{children:"Loading models..."})]}):h.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((p,y)=>r.jsxs(Oe,{className:"cursor-pointer transition-all hover:shadow-lg",children:[r.jsxs(Fe,{children:[r.jsx(Qe,{className:"text-lg",children:p.name}),r.jsx(Bn,{children:p.description})]}),r.jsxs(Ie,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{children:"Status:"}),r.jsx(He,{variant:p.status==="available"?"default":"secondary",children:p.status})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{children:"Parameters:"}),r.jsx("span",{children:p.parameters||"N/A"})]})]})]},y))}):r.jsx(Oe,{children:r.jsxs(Ie,{className:"p-8 text-center",children:[r.jsx(nn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Models Available"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"No AI models are currently available or configured."}),r.jsxs(V,{children:[r.jsx(Oo,{className:"w-4 h-4 mr-2"}),"Configure Models"]})]})})}),r.jsx(Cr,{value:"interactions",className:"space-y-6",children:d?r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 border-b-2 border-primary mr-2"}),r.jsx("span",{children:"Loading interactions..."})]}):m.length>0?r.jsx("div",{className:"space-y-4",children:m.map(p=>r.jsxs(Oe,{children:[r.jsx(Fe,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(He,{variant:"outline",children:p.agentName}),r.jsx(He,{variant:"secondary",children:p.type})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[r.jsx(tc,{className:"w-4 h-4"}),r.jsx("span",{children:x(p.timestamp)}),p.success?r.jsx(Cm,{className:"w-4 h-4 text-green-500"}):r.jsx(Mo,{className:"w-4 h-4 text-red-500"})]})]})}),r.jsxs(Ie,{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Request:"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:p.message})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Response:"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:p.response})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Response Time: ",p.responseTime,"ms"]}),r.jsxs("span",{children:["Status: ",p.success?"Success":"Failed"]})]})]})]},p.id))}):r.jsx(Oe,{children:r.jsxs(Ie,{className:"p-8 text-center",children:[r.jsx(jm,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Interactions Yet"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"No agent interactions have been recorded yet. Start using your AI agents to see their activity here."}),r.jsxs(V,{variant:"outline",onClick:()=>window.location.reload(),children:[r.jsx(cl,{className:"w-4 h-4 mr-2"}),"Refresh Data"]})]})})})]})]})})}function iz(){const[e,t]=Gr(),[n,s]=u.useState(""),[a,o]=u.useState("all"),[i,l]=u.useState([]),[c,d]=u.useState(!1);u.useEffect(()=>{n.trim()?f():l([])},[n,a]);const f=()=>{d(!0);const x=n.trim();if(!x){l([]),d(!1);return}const w=[];(a==="all"||a==="bookmark")&&_3(x).forEach(p=>{w.push({id:p.id,title:p.title,content:p.content,type:"bookmark",documentId:p.documentId,documentTitle:p.documentTitle,chapter:p.chapter,timestamp:p.timestamp,tags:p.tags,folder:p.folder})}),(a==="all"||a==="note")&&O3(x).forEach(p=>{w.push({id:p.id,title:p.title,content:p.content,type:"note",documentId:p.documentId,documentTitle:p.documentTitle,chapter:p.chapter,timestamp:p.timestamp,tags:p.tags,category:p.category})}),(a==="all"||a==="highlight")&&D3(x).forEach(p=>{w.push({id:p.id,title:`Highlight from ${p.documentTitle}`,content:p.text,type:"highlight",documentId:p.documentId,documentTitle:p.documentTitle,chapter:p.chapter,timestamp:p.timestamp,color:p.color})}),w.sort((v,p)=>p.timestamp-v.timestamp),l(w),d(!1)},h=x=>{x.documentId&&x.chapter&&t(`/reader/${x.documentId}/${x.chapter}`)},m=x=>{switch(x){case"document":return r.jsx(Fn,{className:"w-4 h-4"});case"note":return r.jsx(hs,{className:"w-4 h-4"});case"highlight":return r.jsx(Bu,{className:"w-4 h-4"});case"bookmark":return r.jsx(Dr,{className:"w-4 h-4"});default:return r.jsx(Fn,{className:"w-4 h-4"})}},g=x=>{switch(x){case"note":return"bg-green-100 text-green-700";case"highlight":return"bg-yellow-100 text-yellow-700";case"bookmark":return"bg-purple-100 text-purple-700";default:return"bg-blue-100 text-blue-700"}},b=x=>x&&{"bg-yellow-200 dark:bg-yellow-800/40":"bg-yellow-200 dark:bg-yellow-800/40","bg-blue-200 dark:bg-blue-800/40":"bg-blue-200 dark:bg-blue-800/40","bg-green-200 dark:bg-green-800/40":"bg-green-200 dark:bg-green-800/40","bg-pink-200 dark:bg-pink-800/40":"bg-pink-200 dark:bg-pink-800/40","bg-purple-200 dark:bg-purple-800/40":"bg-purple-200 dark:bg-purple-800/40","bg-orange-200 dark:bg-orange-800/40":"bg-orange-200 dark:bg-orange-800/40"}[x]||"";return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ya,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Search"}),r.jsx("p",{className:"text-muted-foreground",children:"Search through your documents, notes, highlights, and bookmarks"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(dt,{placeholder:"Search for content, notes, or highlights...",value:n,onChange:x=>s(x.target.value),className:"pl-10"})]})}),r.jsxs(Ur,{value:a,onValueChange:x=>o(x),children:[r.jsx($a,{className:"w-40",children:r.jsx($r,{placeholder:"Type"})}),r.jsxs(Ba,{children:[r.jsx(Kt,{value:"all",children:"All Types"}),r.jsx(Kt,{value:"document",children:"Documents"}),r.jsx(Kt,{value:"note",children:"Notes"}),r.jsx(Kt,{value:"highlight",children:"Highlights"}),r.jsx(Kt,{value:"bookmark",children:"Bookmarks"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[c&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Searching..."})]}),!c&&n&&i.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Lr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No results found"}),r.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search terms or filters"})]}),!c&&i.map(x=>r.jsxs(Oe,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 group",onClick:()=>h(x),children:[r.jsx(Fe,{className:"pb-3",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m(x.type),r.jsx(He,{variant:"secondary",className:g(x.type),children:x.type.charAt(0).toUpperCase()+x.type.slice(1)})]}),r.jsx(Qe,{className:"text-lg line-clamp-2 group-hover:text-primary transition-colors",children:x.title}),x.documentTitle&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[r.jsx(Fn,{className:"w-3 h-3"}),r.jsx("span",{children:x.documentTitle}),x.chapter&&r.jsxs("span",{children:["Chapter ",x.chapter]})]})]})})}),r.jsxs(Ie,{className:"pt-0",children:[r.jsx("div",{className:`p-3 rounded-lg mb-3 ${x.color?b(x.color):"bg-muted/50"}`,children:r.jsx("p",{className:"text-sm line-clamp-3",children:x.content})}),r.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ec,{className:"w-3 h-3"}),new Date(x.timestamp).toLocaleDateString(),x.category&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsx("span",{children:x.category})]}),x.folder&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsx("span",{children:x.folder})]})]})}),x.tags&&x.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:x.tags.map(w=>r.jsxs(He,{variant:"outline",className:"text-xs",children:[r.jsx(ug,{className:"w-2 h-2 mr-1"}),w]},w))})]})]},x.id)),!c&&i.length>0&&r.jsx("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:r.jsxs("span",{children:[i.length," result",i.length!==1?"s":""," found"]})})]})]})}function lz(){var X;const[e,t]=Gr(),{toast:n}=Ft(),[s,a]=u.useState([]),[o,i]=u.useState(""),[l,c]=u.useState("all"),[d,f]=u.useState("all"),[h,m]=u.useState(!1),[g,b]=u.useState({}),[x,w]=u.useState(null),[v,p]=u.useState([]),[y,S]=u.useState([]);u.useEffect(()=>{j()},[]);const j=()=>{const k=Gn();a(k),p(["all",...L3()]),S(["all",...zN()])},E=s.filter(k=>{var U;const R=k.title.toLowerCase().includes(o.toLowerCase())||k.content.toLowerCase().includes(o.toLowerCase())||((U=k.notes)==null?void 0:U.toLowerCase().includes(o.toLowerCase())),B=l==="all"||k.folder===l,O=d==="all"||k.tags.includes(d);return R&&B&&O}),N=k=>{t(`/reader/${k.documentId}/${k.chapter}`)},C=k=>{k3(k)?(j(),n({title:"Bookmark deleted",description:"The bookmark has been removed from your collection."})):n({title:"Error",description:"Failed to delete bookmark.",variant:"destructive"})},A=k=>{w(k.id),b(k),m(!0)},T=()=>{if(!g.title||!g.content){n({title:"Missing information",description:"Please provide a title and content for the bookmark.",variant:"destructive"});return}x?E3(x,g)&&(j(),n({title:"Bookmark updated",description:"Your bookmark has been successfully updated."})):LN({title:g.title,content:g.content,documentId:g.documentId||"",documentTitle:g.documentTitle||"",chapter:g.chapter||1,paragraph:g.paragraph,folder:g.folder||"General",tags:g.tags||[],notes:g.notes})&&(j(),n({title:"Bookmark created",description:"Your new bookmark has been saved."})),b({}),w(null),m(!1)},z=()=>{b({}),w(null),m(!1)},M=k=>{var R;k&&!((R=g.tags)!=null&&R.includes(k))&&b({...g,tags:[...g.tags||[],k]})},$=k=>{var R;b({...g,tags:((R=g.tags)==null?void 0:R.filter(B=>B!==k))||[]})};return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ya,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Bookmarks"}),r.jsx("p",{className:"text-muted-foreground",children:"Your saved passages and important references"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(dt,{placeholder:"Search bookmarks...",value:o,onChange:k=>i(k.target.value),className:"pl-10"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Ur,{value:l,onValueChange:c,children:[r.jsx($a,{className:"w-40",children:r.jsx($r,{placeholder:"Folder"})}),r.jsx(Ba,{children:v.map(k=>r.jsx(Kt,{value:k,children:k==="all"?"All Folders":k},k))})]}),r.jsxs(Ur,{value:d,onValueChange:f,children:[r.jsx($a,{className:"w-40",children:r.jsx($r,{placeholder:"Tag"})}),r.jsx(Ba,{children:y.map(k=>r.jsx(Kt,{value:k,children:k==="all"?"All Tags":k},k))})]}),r.jsxs(Wr,{open:h,onOpenChange:m,children:[r.jsx(sj,{asChild:!0,children:r.jsxs(V,{onClick:()=>{b({}),w(null)},children:[r.jsx(Ma,{className:"w-4 h-4 mr-2"}),"Add Bookmark"]})}),r.jsxs(Ka,{className:"max-w-2xl",children:[r.jsxs(Xa,{children:[r.jsx(Za,{children:x?"Edit Bookmark":"Add New Bookmark"}),r.jsx(Ni,{children:"Create a new bookmark to save important passages for later reference."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Ut,{htmlFor:"title",children:"Title *"}),r.jsx(dt,{id:"title",placeholder:"Bookmark title...",value:g.title||"",onChange:k=>b({...g,title:k.target.value})})]}),r.jsxs("div",{children:[r.jsx(Ut,{htmlFor:"content",children:"Content *"}),r.jsx(Qn,{id:"content",placeholder:"Selected text or your notes...",value:g.content||"",onChange:k=>b({...g,content:k.target.value}),rows:4})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Ut,{htmlFor:"documentTitle",children:"Document"}),r.jsx(dt,{id:"documentTitle",placeholder:"Document title...",value:g.documentTitle||"",onChange:k=>b({...g,documentTitle:k.target.value})})]}),r.jsxs("div",{children:[r.jsx(Ut,{htmlFor:"chapter",children:"Chapter"}),r.jsx(dt,{id:"chapter",type:"number",placeholder:"Chapter number...",value:g.chapter||"",onChange:k=>b({...g,chapter:parseInt(k.target.value)||1})})]})]}),r.jsxs("div",{children:[r.jsx(Ut,{htmlFor:"folder",children:"Folder"}),r.jsx(dt,{id:"folder",placeholder:"Folder name...",value:g.folder||"",onChange:k=>b({...g,folder:k.target.value})})]}),r.jsxs("div",{children:[r.jsx(Ut,{htmlFor:"notes",children:"Notes"}),r.jsx(Qn,{id:"notes",placeholder:"Additional notes...",value:g.notes||"",onChange:k=>b({...g,notes:k.target.value}),rows:2})]}),r.jsxs("div",{children:[r.jsx(Ut,{children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(X=g.tags)==null?void 0:X.map(k=>r.jsxs(He,{variant:"secondary",className:"gap-1",children:[k,r.jsx("button",{onClick:()=>$(k),className:"ml-1 hover:text-destructive",children:r.jsx(dn,{className:"w-3 h-3"})})]},k))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(dt,{placeholder:"Add tag...",onKeyPress:k=>{if(k.key==="Enter"){k.preventDefault();const R=k.target;M(R.value.trim()),R.value=""}}}),r.jsx(V,{type:"button",variant:"outline",onClick:()=>{const k=document.querySelector('input[placeholder="Add tag..."]');k&&(M(k.value.trim()),k.value="")},children:"Add"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(V,{variant:"outline",onClick:z,children:"Cancel"}),r.jsxs(V,{onClick:T,children:[x?"Update":"Save"," Bookmark"]})]})]})]})]})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:E.map(k=>r.jsxs(Oe,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 group",onClick:()=>N(k),children:[r.jsx(Fe,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(Qe,{className:"text-lg line-clamp-2 group-hover:text-primary transition-colors",children:k.title}),k.documentTitle&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[r.jsx(Fn,{className:"w-3 h-3"}),r.jsx("span",{children:k.documentTitle}),k.chapter&&r.jsxs("span",{children:["Chapter ",k.chapter]})]})]}),r.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx(V,{size:"sm",variant:"ghost",onClick:R=>{R.stopPropagation(),A(k)},children:r.jsx(xS,{className:"w-4 h-4"})}),r.jsx(V,{size:"sm",variant:"ghost",onClick:R=>{R.stopPropagation(),C(k.id)},children:r.jsx(Qa,{className:"w-4 h-4"})})]})]})}),r.jsxs(Ie,{className:"pt-0",children:[r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-3",children:k.content}),k.notes&&r.jsx("div",{className:"mb-3 p-2 bg-muted/50 rounded text-xs",children:r.jsx("p",{className:"text-muted-foreground",children:k.notes})}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hS,{className:"w-3 h-3"}),k.folder]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ec,{className:"w-3 h-3"}),new Date(k.timestamp).toLocaleDateString()]})]}),k.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:k.tags.map(R=>r.jsxs(He,{variant:"outline",className:"text-xs",children:[r.jsx(ug,{className:"w-2 h-2 mr-1"}),R]},R))})]})]},k.id))}),E.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Dr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:o||l!=="all"||d!=="all"?"No bookmarks found":"No bookmarks yet"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:o||l!=="all"||d!=="all"?"Try adjusting your search or filters":"Start reading and bookmark important passages"}),r.jsx(V,{onClick:()=>m(!0),children:"Add Your First Bookmark"})]}),E.length>0&&r.jsx("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:r.jsxs("span",{children:[E.length," bookmark",E.length!==1?"s":""," found"]})})]})}function eC({items:e,searchFields:t=[],filters:n={}}){const[s,a]=u.useState(""),[o,i]=u.useState(Object.keys(n).reduce((d,f)=>({...d,[f]:"all"}),{})),l=u.useMemo(()=>e.filter(d=>{const f=s.trim()===""||t.some(m=>String(d[m]).toLowerCase().includes(s.toLowerCase())),h=Object.entries(n).every(([m,g])=>{const b=o[m];return b==="all"||g.condition(d,b)});return f&&h}),[e,s,o,t,n]);return{searchQuery:s,setSearchQuery:a,filteredItems:l,filterValues:o,updateFilter:(d,f)=>{i(h=>({...h,[d]:f}))},totalItems:e.length,filteredCount:l.length}}function tC(){const{toast:e}=Ft();return{success:{created:t=>e({title:`${t} created`,description:`Your new ${t.toLowerCase()} has been saved successfully.`}),updated:t=>e({title:`${t} updated`,description:`Your ${t.toLowerCase()} has been successfully updated.`}),deleted:t=>e({title:`${t} deleted`,description:`The ${t.toLowerCase()} has been removed from your collection.`}),saved:t=>e({title:`${t} saved`,description:`Your ${t.toLowerCase()} has been saved successfully.`})},error:{general:t=>e({title:"Error",description:`Failed to ${t}. Please try again.`,variant:"destructive"}),validation:t=>e({title:"Missing information",description:t,variant:"destructive"}),network:()=>e({title:"Connection Error",description:"Please check your internet connection and try again.",variant:"destructive"}),unauthorized:()=>e({title:"Access Denied",description:"You don't have permission to perform this action.",variant:"destructive"})},info:{loading:t=>e({title:"Loading...",description:`${t} in progress...`}),noResults:t=>e({title:"No results found",description:`No ${t} match your search criteria.`})},custom:(t,n,s)=>e({title:t,description:n,variant:s})}}function cz(e,t,n={}){const{serialize:s=JSON.stringify,deserialize:a=JSON.parse}=n,[o,i]=u.useState(()=>{try{const l=localStorage.getItem(e);return l===null?t:a(l)}catch(l){return console.warn(`Error reading localStorage key "${e}":`,l),t}});return u.useEffect(()=>{try{localStorage.setItem(e,s(o))}catch(l){console.warn(`Error setting localStorage key "${e}":`,l)}},[e,o,s]),[o,i]}function uz(e,t=!1){return cz(e,t,{serialize:n=>n?"true":"false",deserialize:n=>n==="true"})}const dz={YELLOW:"bg-yellow-200 dark:bg-yellow-800/40",BLUE:"bg-blue-200 dark:bg-blue-800/40",GREEN:"bg-green-200 dark:bg-green-800/40",PINK:"bg-pink-200 dark:bg-pink-800/40",PURPLE:"bg-purple-200 dark:bg-purple-800/40",ORANGE:"bg-orange-200 dark:bg-orange-800/40"},fz={CATEGORY:{NOTE:"Personal Notes"}};function nC(e){return new Date(e).toLocaleDateString()}function wv(e,t){return Array.from(new Set(e))}function sC(e,t){const n=`/reader/${e}`;return t?`${n}/${t}`:n}function Sv(e){return{"bg-yellow-200 dark:bg-yellow-800/40":"Yellow","bg-blue-200 dark:bg-blue-800/40":"Blue","bg-green-200 dark:bg-green-800/40":"Green","bg-pink-200 dark:bg-pink-800/40":"Pink","bg-purple-200 dark:bg-purple-800/40":"Purple","bg-orange-200 dark:bg-orange-800/40":"Orange"}[e]||"Gray"}function hz(){var X;const[e,t]=Gr(),n=tC(),[s,a]=uz("notesDialogOpen",!1),[o,i]=u.useState([]),[l,c]=u.useState({}),[d,f]=u.useState(null),[h,m]=u.useState([]),[g,b]=u.useState([]),{searchQuery:x,setSearchQuery:w,filteredItems:v,filterValues:p,updateFilter:y,totalItems:S,filteredCount:j}=eC({items:o,searchFields:["title","content"],filters:{category:{value:"all",condition:(k,R)=>R==="all"||k.category===R}}});u.useEffect(()=>{E()},[]);const E=()=>{const k=Ks();i(k),m(["all",...z3()]),b(["all",...zN()])},N=k=>{k.documentId&&k.chapter&&t(sC(k.documentId,k.chapter))},C=k=>{R3(k)?(E(),n.success.deleted("Note")):n.error.general("delete note")},A=k=>{f(k.id),c(k),a(!0)},T=()=>{if(!l.title||!l.content){n.error.validation("Please provide a title and content for the note.");return}d?T3(d,l)&&(E(),n.success.updated("Note")):A3({title:l.title,content:l.content,category:l.category||fz.CATEGORY.NOTE,tags:l.tags||[],documentId:l.documentId,documentTitle:l.documentTitle,chapter:l.chapter,paragraph:l.paragraph})&&(E(),n.success.created("Note")),c({}),f(null),a(!1)},z=()=>{c({}),f(null),a(!1)},M=k=>{var R;k&&!((R=l.tags)!=null&&R.includes(k))&&c({...l,tags:[...l.tags||[],k]})},$=k=>{var R;c({...l,tags:((R=l.tags)==null?void 0:R.filter(B=>B!==k))||[]})};return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ya,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Notes"}),r.jsxs("p",{className:"text-muted-foreground",children:["Your study notes and personal reflections (",j," of ",S,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(dt,{placeholder:"Search notes...",value:x,onChange:k=>w(k.target.value),className:"pl-10"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Ur,{value:p.category||"all",onValueChange:k=>y("category",k),children:[r.jsx($a,{className:"w-40",children:r.jsx($r,{placeholder:"Category"})}),r.jsx(Ba,{children:h.map(k=>r.jsx(Kt,{value:k,children:k==="all"?"All Categories":k},k))})]}),r.jsxs(Wr,{open:s,onOpenChange:a,children:[r.jsx(sj,{asChild:!0,children:r.jsxs(V,{onClick:()=>{f(null),c({})},children:[r.jsx(Ma,{className:"w-4 h-4 mr-2"}),"New Note"]})}),r.jsxs(Ka,{className:"max-w-2xl",children:[r.jsxs(Xa,{children:[r.jsx(Za,{children:d?"Edit Note":"Create New Note"}),r.jsx(Ni,{children:d?"Modify your note details below.":"Add a new note to your collection."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Ut,{htmlFor:"title",children:"Title"}),r.jsx(dt,{id:"title",placeholder:"Note title...",value:l.title||"",onChange:k=>c({...l,title:k.target.value})})]}),r.jsxs("div",{children:[r.jsx(Ut,{htmlFor:"content",children:"Content"}),r.jsx(Qn,{id:"content",placeholder:"Write your note content here...",value:l.content||"",onChange:k=>c({...l,content:k.target.value}),rows:8})]}),r.jsxs("div",{children:[r.jsx(Ut,{htmlFor:"category",children:"Category"}),r.jsx(dt,{id:"category",placeholder:"Category (optional)",value:l.category||"",onChange:k=>c({...l,category:k.target.value})})]}),r.jsxs("div",{children:[r.jsx(Ut,{children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(X=l.tags)==null?void 0:X.map((k,R)=>r.jsxs(He,{variant:"secondary",className:"flex items-center gap-1",children:[k,r.jsx("button",{onClick:()=>$(k),className:"ml-1 hover:text-destructive",children:r.jsx(dn,{className:"w-3 h-3"})})]},R))}),r.jsx(dt,{placeholder:"Add tag and press Enter",onKeyPress:k=>{if(k.key==="Enter"){k.preventDefault();const R=k.target;R.value.trim()&&(M(R.value.trim()),R.value="")}}})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[r.jsx(V,{variant:"outline",onClick:z,children:"Cancel"}),r.jsx(V,{onClick:T,children:d?"Update Note":"Save Note"})]})]})]})]})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:v.map(k=>r.jsxs(Oe,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 group",onClick:()=>N(k),children:[r.jsxs(Fe,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx(Qe,{className:"text-lg line-clamp-2",children:k.title}),r.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx(V,{size:"sm",variant:"ghost",onClick:R=>{R.stopPropagation(),A(k)},children:r.jsx(xS,{className:"w-4 h-4"})}),r.jsx(V,{size:"sm",variant:"ghost",onClick:R=>{R.stopPropagation(),C(k.id)},children:r.jsx(Qa,{className:"w-4 h-4"})})]})]}),r.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:k.documentTitle&&r.jsxs(r.Fragment,{children:[r.jsx(Fn,{className:"w-3 h-3"}),r.jsx("span",{children:k.documentTitle}),k.chapter&&r.jsxs("span",{children:["Chapter ",k.chapter]})]})})]}),r.jsxs(Ie,{className:"pt-0",children:[r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-4 mb-4",children:k.content}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-2",children:k.category&&r.jsxs(He,{variant:"outline",className:"text-xs",children:[r.jsx(hS,{className:"w-3 h-3 mr-1"}),k.category]})}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[r.jsx(ec,{className:"w-3 h-3"}),nC(k.timestamp)]})]}),k.tags&&k.tags.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(Qs,{className:"my-3"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:k.tags.map((R,B)=>r.jsxs(He,{variant:"secondary",className:"text-xs",children:[r.jsx(ug,{className:"w-2 h-2 mr-1"}),R]},B))})]})]})]},k.id))}),v.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(hs,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:x||p.category!=="all"?"No notes found":"No notes yet"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:x||p.category!=="all"?"Try adjusting your search or filters.":"Create your first note to get started."}),!x&&p.category==="all"&&r.jsxs(V,{onClick:()=>a(!0),children:[r.jsx(Ma,{className:"w-4 h-4 mr-2"}),"Create First Note"]})]})]})}function mz(){const[e,t]=Gr(),n=tC(),[s,a]=u.useState([]),o=wv(s.map(p=>p.documentTitle)).filter(Boolean),i=wv(s.map(p=>p.color)).filter(Boolean),{searchQuery:l,setSearchQuery:c,filteredItems:d,filterValues:f,updateFilter:h,totalItems:m,filteredCount:g}=eC({items:s,searchFields:["text"],filters:{color:{value:"all",condition:(p,y)=>y==="all"||p.color===y},document:{value:"all",condition:(p,y)=>y==="all"||p.documentTitle===y}}});u.useEffect(()=>{b()},[]);const b=()=>{const p=Ml();a(p)},x=p=>{t(sC(p.documentId,p.chapter))},w=p=>{M3(p)?(b(),n.success.deleted("Highlight")):n.error.general("delete highlight")},v=p=>Object.values(dz).includes(p)?p:"bg-gray-200 dark:bg-gray-800/40";return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ya,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Highlights"}),r.jsxs("p",{className:"text-muted-foreground",children:["Your highlighted passages and important text selections (",g," of ",m,")"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(dt,{placeholder:"Search highlights...",value:l,onChange:p=>c(p.target.value),className:"pl-10"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Ur,{value:f.color||"all",onValueChange:p=>h("color",p),children:[r.jsx($a,{className:"w-40",children:r.jsx($r,{placeholder:"Color"})}),r.jsxs(Ba,{children:[r.jsx(Kt,{value:"all",children:"All Colors"}),i.map(p=>r.jsx(Kt,{value:p,children:Sv(p)},p))]})]}),r.jsxs(Ur,{value:f.document||"all",onValueChange:p=>h("document",p),children:[r.jsx($a,{className:"w-40",children:r.jsx($r,{placeholder:"Document"})}),r.jsxs(Ba,{children:[r.jsx(Kt,{value:"all",children:"All Documents"}),o.map(p=>r.jsx(Kt,{value:p,children:p},p))]})]})]})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(p=>r.jsxs(Oe,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 group",onClick:()=>x(p),children:[r.jsx(Fe,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[r.jsx(Fn,{className:"w-3 h-3"}),r.jsx("span",{children:p.documentTitle}),r.jsxs("span",{children:["Chapter ",p.chapter]})]})}),r.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(V,{size:"sm",variant:"ghost",onClick:y=>{y.stopPropagation(),w(p.id)},children:r.jsx(Qa,{className:"w-4 h-4"})})})]})}),r.jsxs(Ie,{className:"pt-0",children:[r.jsx("div",{className:`p-3 rounded-lg mb-3 ${v(p.color)}`,children:r.jsx("p",{className:"text-sm line-clamp-4",children:p.text})}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bu,{className:"w-3 h-3"}),r.jsx("span",{children:Sv(p.color)})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ec,{className:"w-3 h-3"}),nC(p.timestamp)]})]})]})]},p.id))}),d.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Bu,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:l||f.color!=="all"||f.document!=="all"?"No highlights found":"No highlights yet"}),r.jsx("p",{className:"text-muted-foreground",children:l||f.color!=="all"||f.document!=="all"?"Try adjusting your search or filters.":"Start highlighting important passages in your documents."})]})]})}function pz(){const{toast:e}=Ft(),[t,n]=u.useState(!1),[s,a]=u.useState(!1),[o,i]=u.useState(!1),[l,c]=u.useState({bookmarks:0,notes:0,highlights:0});u.useEffect(()=>{try{const m=Gn(),g=Ks(),b=Ml();c({bookmarks:m.length,notes:g.length,highlights:b.length})}catch(m){console.error("Failed to load data stats:",m),e({title:"Error loading data",description:"Failed to load data statistics. Please refresh the page.",variant:"destructive"})}},[e]);const d=async()=>{n(!0);try{if(typeof localStorage>"u")throw new Error("Local storage is not available");const m=Gn(),g=Ks(),b=Ml(),x=m.length+g.length+b.length;if(x===0){e({title:"No data to backup",description:"There is no data to create a backup from.",variant:"destructive"});return}const w={bookmarks:m,notes:g,highlights:b,metadata:{version:"1.0.0",timestamp:Date.now(),totalItems:x}},v=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),p=URL.createObjectURL(v),y=document.createElement("a");y.href=p,y.download=`bible-companion-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(p),e({title:"Backup created successfully",description:`Exported ${w.metadata.totalItems} items to backup file.`})}catch(m){console.error("Backup creation failed:",m),e({title:"Backup failed",description:"Failed to create backup. Please try again.",variant:"destructive"})}finally{n(!1)}},f=async()=>{const m=document.createElement("input");m.type="file",m.accept=".json",m.onchange=async g=>{var x;const b=(x=g.target.files)==null?void 0:x[0];if(!b){a(!1);return}a(!0);try{if(typeof localStorage>"u")throw new Error("Local storage is not available");const w=await b.text(),v=JSON.parse(w);if(!v.metadata||!v.bookmarks||!v.notes||!v.highlights)throw new Error("Invalid backup file format");localStorage.removeItem("bible-companion-bookmarks"),localStorage.removeItem("bible-companion-notes"),localStorage.removeItem("bible-companion-highlights"),localStorage.setItem("bible-companion-bookmarks",JSON.stringify(v.bookmarks)),localStorage.setItem("bible-companion-notes",JSON.stringify(v.notes)),localStorage.setItem("bible-companion-highlights",JSON.stringify(v.highlights)),c({bookmarks:v.bookmarks.length,notes:v.notes.length,highlights:v.highlights.length}),e({title:"Backup restored successfully",description:`Restored ${v.metadata.totalItems} items from backup.`}),setTimeout(()=>{window.location.reload()},1e3)}catch(w){console.error("Backup restoration failed:",w),e({title:"Restore failed",description:"Failed to restore backup. Please check the file format.",variant:"destructive"})}finally{a(!1),m.value=""}},m.click()},h=async()=>{if(confirm("Are you sure you want to reset all data? This action cannot be undone and will permanently delete all your bookmarks, notes, highlights, and other app data.")&&confirm("This will permanently delete ALL your data. Are you absolutely sure?")){i(!0);try{if(typeof localStorage>"u")throw new Error("Local storage is not available");Object.keys(localStorage).forEach(g=>{(g.startsWith("bible-companion-")||g.startsWith("document-companion-")||g==="hasVisited")&&localStorage.removeItem(g)}),e({title:"Data reset successfully",description:"All app data has been cleared. The page will reload."}),c({bookmarks:0,notes:0,highlights:0}),setTimeout(()=>{window.location.reload()},1e3)}catch(m){console.error("Data reset failed:",m),e({title:"Reset failed",description:"Failed to reset data. Please try again.",variant:"destructive"})}finally{i(!1)}}};return r.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center gap-4 mb-4",children:r.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"flex items-center gap-2 hover:bg-muted/60",children:[r.jsx(Ya,{className:"w-4 h-4"}),r.jsx("span",{children:"Back"})]})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Settings"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage your app data, backups, and preferences"})]}),r.jsxs("div",{className:"grid gap-6",children:[r.jsxs(Oe,{children:[r.jsxs(Fe,{children:[r.jsxs(Qe,{className:"flex items-center gap-2",children:[r.jsx(dS,{className:"h-5 w-5"}),"Data Overview"]}),r.jsx(Bn,{children:"Current data statistics and storage information"})]}),r.jsx(Ie,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[r.jsx(Dr,{className:"h-5 w-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Bookmarks"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.bookmarks})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[r.jsx(Fn,{className:"h-5 w-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Notes"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.notes})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50",children:[r.jsx(vS,{className:"h-5 w-5 text-yellow-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Highlights"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:l.highlights})]})]})]})})]}),r.jsxs(Oe,{children:[r.jsxs(Fe,{children:[r.jsxs(Qe,{className:"flex items-center gap-2",children:[r.jsx(zO,{className:"h-5 w-5"}),"Backup & Restore"]}),r.jsx(Bn,{children:"Create backups of your data or restore from previous backups"})]}),r.jsxs(Ie,{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs(V,{onClick:d,disabled:t||l.bookmarks+l.notes+l.highlights===0,className:"flex items-center gap-2",children:[t?r.jsx(cl,{className:"h-4 w-4 animate-spin"}):r.jsx($u,{className:"h-4 w-4"}),t?"Creating Backup...":"Create Backup"]}),r.jsxs(V,{variant:"outline",onClick:f,disabled:s,className:"flex items-center gap-2",children:[s?r.jsx(cl,{className:"h-4 w-4 animate-spin"}):r.jsx(Em,{className:"h-4 w-4"}),s?"Restoring...":"Restore Backup"]})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("p",{children:" Backups include all your bookmarks, notes, and highlights"}),r.jsx("p",{children:" Backup files are saved as JSON and can be imported later"}),r.jsx("p",{children:" Restoring will replace all current data with backup data"})]})]})]}),r.jsxs(Oe,{className:"border-red-200 dark:border-red-800",children:[r.jsxs(Fe,{children:[r.jsxs(Qe,{className:"flex items-center gap-2 text-red-600",children:[r.jsx(Xx,{className:"h-5 w-5"}),"Reset All Data"]}),r.jsx(Bn,{className:"text-red-600/80",children:"Permanently delete all app data. This action cannot be undone."})]}),r.jsxs(Ie,{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Xx,{className:"h-5 w-5 text-red-600 mt-0.5"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-medium text-red-800 dark:text-red-200 mb-1",children:"Warning: This action is irreversible"}),r.jsx("p",{className:"text-red-700 dark:text-red-300",children:"This will permanently delete all your bookmarks, notes, highlights, and any other data stored in the app. Make sure you have a backup before proceeding."})]})]})}),r.jsxs(V,{variant:"destructive",onClick:h,disabled:o||l.bookmarks+l.notes+l.highlights===0,className:"flex items-center gap-2",children:[o?r.jsx(cl,{className:"h-4 w-4 animate-spin"}):r.jsx(Qa,{className:"h-4 w-4"}),o?"Resetting...":"Reset All Data"]})]})]}),r.jsxs(Oe,{children:[r.jsx(Fe,{children:r.jsxs(Qe,{className:"flex items-center gap-2",children:[r.jsx(Oo,{className:"h-5 w-5"}),"App Information"]})}),r.jsx(Ie,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Version"}),r.jsx(He,{variant:"secondary",children:"1.0.0"})]}),r.jsx(Qs,{}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Storage"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Local Browser Storage"})]}),r.jsx(Qs,{}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium",children:"Data Location"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Your device only"})]})]})})]})]})]})}function gz(){return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50 dark:bg-slate-900",children:r.jsx(Oe,{className:"w-full max-w-md mx-4",children:r.jsxs(Ie,{className:"pt-6",children:[r.jsxs("div",{className:"flex mb-4 gap-2",children:[r.jsx(Mo,{className:"h-8 w-8 text-red-500"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"404 Page Not Found"})]}),r.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:"Did you forget to add the page to the router?"})]})})})}function xz(){const[,e]=Gr(),{toast:t}=Ft();u.useEffect(()=>{localStorage.getItem("hasVisited")||(t({title:"Welcome to Bible Companion",description:"Start by uploading a document or exploring the library."}),localStorage.setItem("hasVisited","true"))},[t]);const n=(s,a=1)=>{e(`/reader/${s.id}/${a}`)};return r.jsxs(RA,{children:[r.jsx(_n,{path:"/",component:()=>r.jsx(Rm,{onSelectDocument:n})}),r.jsx(_n,{path:"/library",component:()=>r.jsx(Rm,{onSelectDocument:n})}),r.jsx(_n,{path:"/reader/:documentId/:chapter",component:nz}),r.jsx(_n,{path:"/search",component:iz}),r.jsx(_n,{path:"/bookmarks",component:lz}),r.jsx(_n,{path:"/notes",component:hz}),r.jsx(_n,{path:"/highlights",component:mz}),r.jsx(_n,{path:"/performance",component:sz}),r.jsx(_n,{path:"/agents",component:oz}),r.jsx(_n,{path:"/settings",component:pz}),r.jsx(_n,{component:gz})]})}function vz(){return r.jsx(ZA,{client:wo,children:r.jsx(r_,{children:r.jsx(sM,{defaultTheme:"system",storageKey:"document-companion-theme",children:r.jsx(s_,{children:r.jsx(eM,{children:r.jsxs("div",{className:"min-h-screen bg-background font-sans antialiased",children:[r.jsx(xz,{}),r.jsx(uT,{})]})})})})})})}tA.createRoot(document.getElementById("root")).render(r.jsx(vz,{}));
